import{_ as E}from"./Result-rnvi5bSi.js";import R from"./log-BfmLkTTl.js";import{g as q,e as D,b as F,h as u,f as H,a3 as T,N as z,y as c,o,w as l,a,k as x,c as y,t as h,l as e,s as B,q as I,F as P,E as U,p as $}from"./index-CUqMz98Q.js";import{l as j}from"./logs-CMlrAWuC.js";import{c as A,a as G,V as J}from"./VCard-CCXXQnDc.js";import{V as K}from"./VSwitch-Cdzh9wkz.js";import{V as O}from"./VChip-D52a5STx.js";import{V as Q}from"./VRow-DjJRgvp1.js";import{V as W}from"./VSpacer-CWRfoVLU.js";import{V as X}from"./VCol-CNyyfCgI.js";import{V as Y}from"./VNumberInput-IUTPFh61.js";import"./VContainer-Qfl3VloT.js";/* empty css              */import"./preview-ulVFMS0l.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-BviZ8UZz.js";import"./index-DMUK-Sdt.js";import"./VInput-DLKXZnps.js";import"./VSelectionControl-DBFUmGqW.js";import"./VTextField-BC-Dauxh.js";const Z={class:"card-header"},ee={key:0},te={key:1},oe={class:"fcc"},Ce={__name:"singleLog",props:{type:{type:String,default:""},chat:{type:Boolean,default:!1}},setup(L){const r=L,M=q(),{mobile:N}=D(),{t:n}=F(),d=u(""),m=u(!0),i=u(0),_=u(!1),v=()=>{const t={roomID:M.room.id,worldID:0,logType:r.type,lines:i.value};j.content.get(t).then(s=>{s.data===null?d.value="":d.value=s.data.join(`
`),_.value=!0})};let p=null;const S=()=>{p=setInterval(()=>{m.value&&v()},2e3)},w=()=>{p&&(clearInterval(p),p=null)},k=()=>{let t=390;return r.chat&&(t=t+37),Math.round(Math.max(2,Math.floor(g.value-t))/22.5)},f=()=>{let t=0;return r.chat&&(t=37),Math.max(2,Math.floor(g.value-160-t))},g=u(window.innerHeight),C=T(()=>{g.value=window.innerHeight,i.value=k()},200);return H(async()=>{window.addEventListener("resize",C),i.value=k(),S()}),z(()=>{w(),window.removeEventListener("beforeunload",w),window.removeEventListener("resize",C)}),(t,s)=>{const b=E;return o(),c(J,{height:f(),flat:""},{default:l(()=>[a(A,{class:"my-2"},{default:l(()=>[x("div",Z,[r.chat?(o(),y("span",ee,h(e(n)("logs.current")),1)):(o(),y("span",te,h(e(n)(`logs.${r.type}`)),1)),x("div",oe,[a(K,{modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=V=>B(m)?m.value=V:null),color:"info","hide-details":""},{prepend:l(()=>[a(O,{color:"info"},{default:l(()=>[I(h(e(n)("logs.autoPull")),1)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),a(G,null,{default:l(()=>[e(_)?(o(),y(P,{key:0},[e(d)?(o(),c(R,{key:0,content:e(d),height:f()-150},null,8,["content","height"])):(o(),c(b,{key:1,type:"info",height:f()-150,title:e(n)("logs.noContent")},null,8,["height","title"]))],64)):(o(),c(b,{key:1,type:"info",title:e(n)("logs.fetching"),height:f()-150},null,8,["title","height"])),a(Q,{class:"my-4"},{default:l(()=>[e(N)?U("",!0):(o(),c(W,{key:0})),a(X,{class:"d-flex align-center justify-end"},{default:l(()=>[a(Y,{modelValue:e(i),"onUpdate:modelValue":s[1]||(s[1]=V=>B(i)?i.value=V:null),label:e(n)("logs.line"),"hide-details":"",density:"compact",class:"mr-4","max-width":"120"},null,8,["modelValue","label"]),a($,{onClick:v},{default:l(()=>[I(h(e(n)("logs.pull")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"])}}};export{Ce as default};
