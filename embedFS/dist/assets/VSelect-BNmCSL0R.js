import{V as ve,m as Ae}from"./VTextField-DmrWhRLR.js";import{ac as de,ad as G,bz as be,L as j,ae as fe,k as x,F as Z,A as H,aO as ke,e as De,a1 as N,bL as me,h as Y,j as _,cc as Re,c2 as Se,aH as re,aq as Be,aw as Pe,bv as Ie,bW as Fe,a_ as Le,$ as ae,bY as _e,f as Ee,cd as Oe,a as I,bq as ne,n as Me,H as He,b0 as ze,Z as Te,aJ as qe,ca as pe,am as he,bV as Ne,bB as ie,G as ge,P as ye,ce as Ue,U as Ke,z as $e,cf as je,af as We,q as Ye,aV as Ge,b1 as Je,an as Xe,cg as Ve,ch as we,ak as Ze}from"./index-CDcWfGDJ.js";import{f as Qe}from"./VInput-G0w3PBPn.js";import{u as et,V as tt,a as lt,m as nt}from"./VList-D8GqwDvf.js";import{V as at}from"./VMenu-xIC2NBar.js";import{V as ot}from"./VCheckboxBtn-6Huv9Ei8.js";import{V as st}from"./VChip-Dku4Yyu4.js";import{V as ut}from"./dialog-transition-QRikj67Z.js";const rt=G({renderless:Boolean,...ke()},"VVirtualScrollItem"),it=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:rt(),emits:{"update:height":e=>!0},setup(e,u){let{attrs:l,emit:i,slots:n}=u;const{resizeRef:v,contentRect:h}=be(void 0,"border");j(()=>h.value?.height,a=>{a!=null&&i("update:height",a)}),fe(()=>e.renderless?x(Z,null,[n.default?.({itemRef:v})]):x("div",H({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},l),[n.default?.()]))}}),ct=-1,dt=1,ce=100,ft=G({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function vt(e,u){const l=De(),i=N(0);me(()=>{i.value=parseFloat(e.itemHeight||0)});const n=N(0),v=N(Math.ceil((parseInt(e.height)||l.height.value)/(i.value||16))||1),h=N(0),a=N(0),c=Y(),k=Y();let s=0;const{resizeRef:C,contentRect:z}=be();me(()=>{C.value=c.value});const E=_(()=>c.value===document.documentElement?l.height.value:z.value?.height||parseInt(e.height)||0),A=_(()=>!!(c.value&&k.value&&E.value&&i.value));let y=Array.from({length:u.value.length}),V=Array.from({length:u.value.length});const S=N(0);let D=-1;function J(o){return y[o]||i.value}const q=Re(()=>{const o=performance.now();V[0]=0;const d=u.value.length;for(let b=1;b<=d;b++)V[b]=(V[b-1]||0)+J(b-1);S.value=Math.max(S.value,performance.now()-o)},S),w=j(A,o=>{o&&(w(),s=k.value.offsetTop,q.immediate(),F(),~D&&Pe(()=>{Ie&&window.requestAnimationFrame(()=>{le(D),D=-1})}))});Se(()=>{q.clear()});function oe(o,d){const b=y[o],t=i.value;i.value=t?Math.min(i.value,d):d,(b!==d||t!==i.value)&&(y[o]=d,q())}function R(o){o=re(o,0,u.value.length);const d=Math.floor(o),b=o%1,t=d+1,f=V[d]||0,m=V[t]||f;return f+(m-f)*b}function Q(o){return mt(V,o)}let U=0,K=0,B=0;j(E,(o,d)=>{d&&(F(),o<d&&requestAnimationFrame(()=>{K=0,F()}))});let X=-1;function se(){if(!c.value||!k.value)return;const o=c.value.scrollTop,d=performance.now();d-B>500?(K=Math.sign(o-U),s=k.value.offsetTop):K=o-U,U=o,B=d,window.clearTimeout(X),X=window.setTimeout(ee,500),F()}function ee(){!c.value||!k.value||(K=0,B=0,window.clearTimeout(X),F())}let te=-1;function F(){cancelAnimationFrame(te),te=requestAnimationFrame(W)}function W(){if(!c.value||!E.value||!i.value)return;const o=U-s,d=Math.sign(K),b=Math.max(0,o-ce),t=re(Q(b),0,u.value.length),f=o+E.value+ce,m=re(Q(f)+1,t+1,u.value.length);if((d!==ct||t<n.value)&&(d!==dt||m>v.value)){const O=R(n.value)-R(t),L=R(m)-R(v.value);Math.max(O,L)>ce?(n.value=t,v.value=m):(t<=0&&(n.value=t),m>=u.value.length&&(v.value=m))}h.value=R(n.value),a.value=R(u.value.length)-R(v.value)}function le(o){const d=R(o);!c.value||o&&!d?D=o:c.value.scrollTop=d}const ue=_(()=>u.value.slice(n.value,v.value).map((o,d)=>{const b=d+n.value;return{raw:o,index:b,key:Be(o,e.itemKey,b)}}));return j(u,()=>{y=Array.from({length:u.value.length}),V=Array.from({length:u.value.length}),q.immediate(),F()},{deep:1}),{calculateVisibleItems:F,containerRef:c,markerRef:k,computedItems:ue,paddingTop:h,paddingBottom:a,scrollToIndex:le,handleScroll:se,handleScrollend:ee,handleItemResize:oe}}function mt(e,u){let l=e.length-1,i=0,n=0,v=null,h=-1;if(e[l]<u)return l;for(;i<=l;)if(n=i+l>>1,v=e[n],v>u)l=n-1;else if(v<u)h=n,i=n+1;else return v===u?n:i;return h}const pt=G({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...ke(),...ze()},"VVirtualScroll"),ht=de()({name:"VVirtualScroll",props:pt(),setup(e,u){let{slots:l}=u;const i=Fe("VVirtualScroll"),{dimensionStyles:n}=Le(e),{calculateVisibleItems:v,containerRef:h,markerRef:a,handleScroll:c,handleScrollend:k,handleItemResize:s,scrollToIndex:C,paddingTop:z,paddingBottom:E,computedItems:A}=vt(e,ae(()=>e.items));return _e(()=>e.renderless,()=>{function y(){const S=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[S]("scroll",c,{passive:!0}),document[S]("scrollend",k)):(h.value?.[S]("scroll",c,{passive:!0}),h.value?.[S]("scrollend",k))}Ee(()=>{h.value=Oe(i.vnode.el,!0),y(!0)}),Se(y)}),fe(()=>{const y=A.value.map(V=>I(it,{key:V.key,renderless:e.renderless,"onUpdate:height":S=>s(V.index,S)},{default:S=>l.default?.({item:V.raw,index:V.index,...S})}));return e.renderless?x(Z,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(z.value)}},null),y,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(E.value)}},null)]):x("div",{ref:h,class:He(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:k,style:Me([n.value,e.style])},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(z.value),paddingBottom:ne(E.value)}},[y])])}),{calculateVisibleItems:v,scrollToIndex:C}}});function gt(e,u){const l=N(!1);let i;function n(a){cancelAnimationFrame(i),l.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{l.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const c=j(l,()=>{c(),a()})}else a()})}async function h(a){if(a.key==="Tab"&&u.value?.focus(),!["PageDown","PageUp","Home","End"].includes(a.key))return;const c=e.value?.$el;if(!c)return;(a.key==="Home"||a.key==="End")&&c.scrollTo({top:a.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await v();const k=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const s=c.getBoundingClientRect().top;for(const C of k)if(C.getBoundingClientRect().top>=s){C.focus();break}}else{const s=c.getBoundingClientRect().bottom;for(const C of[...k].reverse())if(C.getBoundingClientRect().bottom<=s){C.focus();break}}}return{onScrollPassive:n,onKeydown:h}}const yt=G({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Vt(e,u){const{t:l}=Te(),i=qe(),n=_(()=>`menu-${i}`),v=ae(()=>pe(u)),h=ae(()=>n.value),a=ae(()=>l(pe(u)?e.closeText:e.openText));return{menuId:n,ariaExpanded:v,ariaControls:h,ariaLabel:a}}const wt=G({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Ze,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...yt(),...nt({itemChildren:!1})},"Select"),bt=G({...wt(),...Xe(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Je({transition:{component:ut}})},"VSelect"),Dt=de()({name:"VSelect",props:bt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,u){let{slots:l}=u;const{t:i}=Te(),n=Y(),v=Y(),h=Y(),{items:a,transformIn:c,transformOut:k}=et(e),s=he(e,"modelValue",[],t=>c(t===null?[null]:Ne(t)),t=>{const f=k(t);return e.multiple?f:f[0]??null}),C=_(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:s.value.length),z=Qe(e),E=_(()=>s.value.map(t=>t.value)),A=N(!1);let y="",V=-1,S;const D=_(()=>e.hideSelected?a.value.filter(t=>!s.value.some(f=>(e.valueComparator||ie)(f,t))):a.value),J=_(()=>e.hideNoData&&!D.value.length||z.isReadonly.value||z.isDisabled.value),q=he(e,"menu"),w=_({get:()=>q.value,set:t=>{q.value&&!t&&v.value?.Î¨openChildren.size||t&&J.value||(q.value=t)}}),{menuId:oe,ariaExpanded:R,ariaControls:Q,ariaLabel:U}=Vt(e,w),K=_(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),B=Y(),X=gt(B,n);function se(t){e.openOnClear&&(w.value=!0)}function ee(){J.value||(w.value=!w.value)}function te(t){Ve(t)&&F(t)}function F(t){if(!t.key||z.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(w.value=!0),["Escape","Tab"].includes(t.key)&&(w.value=!1),t.key==="Home"?B.value?.focus("first"):t.key==="End"&&B.value?.focus("last");const f=1e3;if(!Ve(t))return;const m=performance.now();m-S>f&&(y="",V=-1),y+=t.key.toLowerCase(),S=m;const O=D.value;function L(){let g=r();return g||y.at(-1)===y.at(-2)&&(y=y.slice(0,-1),g=r(),g)||(V=-1,g=r(),g)?g:(y=t.key.toLowerCase(),r())}function r(){for(let g=V+1;g<O.length;g++){const M=O[g];if(M.title.toLowerCase().startsWith(y))return[M,g]}}const p=L();if(!p)return;const[P,$]=p;V=$,B.value?.focus($),e.multiple||(s.value=[P])}function W(t){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const m=s.value.findIndex(L=>(e.valueComparator||ie)(L.value,t.value)),O=f??!~m;if(~m){const L=O?[...s.value,t]:[...s.value];L.splice(m,1),s.value=L}else O&&(s.value=[...s.value,t])}else{const m=f!==!1;s.value=m?[t]:[],Pe(()=>{w.value=!1})}}function le(t){B.value?.$el.contains(t.relatedTarget)||(w.value=!1)}function ue(){e.eager&&h.value?.calculateVisibleItems()}function o(){A.value&&n.value?.focus()}function d(t){A.value=!0}function b(t){if(t==null)s.value=[];else if(we(n.value,":autofill")||we(n.value,":-webkit-autofill")){const f=a.value.find(m=>m.title===t);f&&W(f)}else n.value&&(n.value.value="")}return j(w,()=>{if(!e.hideSelected&&w.value&&s.value.length){const t=D.value.findIndex(f=>s.value.some(m=>(e.valueComparator||ie)(m.value,f.value)));Ie&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&h.value?.scrollToIndex(t)})}}),j(a,(t,f)=>{w.value||A.value&&e.hideNoData&&!f.length&&t.length&&(w.value=!0)}),fe(()=>{const t=!!(e.chips||l.chip),f=!!(!e.hideNoData||D.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=s.value.length>0,O=ve.filterProps(e),L=m||!A.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return I(ve,H({ref:n},O,{modelValue:s.value.map(r=>r.props.value).join(", "),"onUpdate:modelValue":b,focused:A.value,"onUpdate:focused":r=>A.value=r,validationValue:s.externalValue,counterValue:C.value,dirty:m,class:["v-select",{"v-select--active-menu":w.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:L,"onClick:clear":se,"onMousedown:control":ee,onBlur:le,onKeydown:F,"aria-expanded":R.value,"aria-controls":Q.value,"aria-label":U.value,title:U.value}),{...l,default:()=>x(Z,null,[I(at,H({id:oe.value,ref:v,modelValue:w.value,"onUpdate:modelValue":r=>w.value=r,activator:"parent",contentClass:"v-select__content",disabled:J.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ue,onAfterLeave:o},K.value),{default:()=>[f&&I(tt,H({ref:B,selected:E.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:te,onFocusin:d,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},X,e.listProps),{default:()=>[l["prepend-item"]?.(),!D.value.length&&!e.hideNoData&&(l["no-data"]?.()??I(ye,{key:"no-data",title:i(e.noDataText)},null)),I(ht,{ref:h,renderless:!0,items:D.value,itemKey:"value"},{default:r=>{let{item:p,index:P,itemRef:$}=r;const g=Ue(p.props),M=H(p.props,{ref:$,key:p.value,onClick:()=>W(p,null)});return p.type==="divider"?l.divider?.({props:p.raw,index:P})??I(Ke,H(p.props,{key:`divider-${P}`}),null):p.type==="subheader"?l.subheader?.({props:p.raw,index:P})??I(lt,H(p.props,{key:`subheader-${P}`}),null):l.item?.({item:p,index:P,props:M})??I(ye,H(M,{role:"option"}),{prepend:T=>{let{isSelected:xe}=T;return x(Z,null,[e.multiple&&!e.hideSelected?I(ot,{key:p.value,modelValue:xe,ripple:!1,tabindex:"-1",onClick:Ce=>Ce.preventDefault()},null):void 0,g.prependAvatar&&I($e,{image:g.prependAvatar},null),g.prependIcon&&I(ge,{icon:g.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),s.value.map((r,p)=>{function P(T){T.stopPropagation(),T.preventDefault(),W(r,!1)}const $={"onClick:close":P,onKeydown(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),P(T))},onMousedown(T){T.preventDefault(),T.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},g=t?!!l.chip:!!l.selection,M=g?je(t?l.chip({item:r,index:p,props:$}):l.selection({item:r,index:p})):void 0;if(!(g&&!M))return x("div",{key:r.value,class:"v-select__selection"},[t?l.chip?I(We,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[M]}):I(st,H({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},$),null):M??x("span",{class:"v-select__selection-text"},[r.title,e.multiple&&p<s.value.length-1&&x("span",{class:"v-select__selection-comma"},[Ye(",")])])])})]),"append-inner":function(){for(var r=arguments.length,p=new Array(r),P=0;P<r;P++)p[P]=arguments[P];return x(Z,null,[l["append-inner"]?.(...p),e.menuIcon?I(ge,{class:"v-select__menu-icon",color:n.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Ge({isFocused:A,menu:w,select:W},n)}});export{Dt as V};
