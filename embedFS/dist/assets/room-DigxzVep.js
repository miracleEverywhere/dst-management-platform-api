import{e as Y,b as Z,f as h,h as g,az as ee,aA as ae,c as D,o as n,a,w as s,x as i,l as e,y as c,E as R,q as v,t as p,p as S,n as le,k as T,s as $,F as O,v as te,aB as se,ax as oe,B as A}from"./index-Cpi_5jeC.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as y}from"./VRow-Btq46u2M.js";import{V as b}from"./VCol-Br9p8SvW.js";import{V as k}from"./VTextField-DYhVUV9X.js";import{T as f}from"./index-F5hD5yeZ.js";import{V as U,a as u}from"./VRadioGroup-iOOKV3tE.js";import{V as x}from"./VChip-Bh9Ug9id.js";import{V as z}from"./VSlider-_4wjeYT1.js";import{V as re}from"./VNumberInput-BX60DGbn.js";import{V as ne}from"./VForm-Dx6QmHot.js";import{V as ue,c as de,a as ie,b as pe}from"./VCard-ZqPzOf5v.js";import{V as be}from"./VSpacer-DElNdgDF.js";import{V as fe}from"./VDialog-DWc1dWI_.js";/* empty css              */import"./index-C79QJLOU.js";import"./VInput-0HHYP18N.js";import"./VTooltip-D-HEEtuq.js";import"./VSelectionControl-DnzLro3k.js";import"./dialog-transition-Cs1ajW-l.js";const ge=["󰀆","󰀑","󰀇","󰀃","󰀊","󰀕","󰀭","󰀅","󰀍","󰀘","󰀮","󰀩","󰀠","󰀈","󰀛","󰀋","󰀏","󰀫","󰀝","󰀄","󰀐","󰀓","󰀁","󰀨","󰀣","󰀤","󰀔","󰀂","󰀧","󰀒","󰀦","󰀙","󰀞","󰀡","󰀯","󰀟","󰀗","󰀥","󰀚","󰀪","󰀌","󰀜","󰀬","󰀎","󰀖","󰀉","󰀀","󰀢"],ce={class:"card-header"},ve={key:0},Ve={class:"emoji-container mt-8"},ye=["onClick"],ke={__name:"room",props:{formData:{type:Object,default:()=>({})},roomCount:{type:Number,default:0},maxPlayers:{type:Number,default:0}},setup(L,{expose:H}){const _=L,{mobile:V}=Y(),{t}=Z();h(()=>{(_.formData?.id||0)!==0?m.value=_.formData:(m.value.masterPort=_.roomCount+ee.masterPort+1,m.value.gameMode="endless",m.value.clusterKey=ae(14),m.value.modInOne=!0)});const K=g(),m=g({id:0,gameName:"",description:"",gameMode:"",customGameMode:"",pvp:!1,maxPlayer:2,maxRollBack:10,modInOne:!1,modData:"",vote:!1,pauseEmpty:!0,password:"",token:"",masterIP:"127.0.0.1",masterPort:0,clusterKey:""}),w=g({gameName:[r=>r?!0:t("game.base.step1.gameName.required")],customGameMode:[r=>r?!0:t("game.base.step1.gameMode.modes.custom.required")],token:[r=>r?!0:t("game.base.step1.token.required")],masterIP:[r=>r?!0:t("game.base.step1.masterIP.required")],masterPort:[r=>r?!0:t("game.base.step1.masterPort.required")],clusterKey:[r=>r?!0:t("game.base.step1.clusterKey.required")]}),j=g(!1),E=g(!1),B=g(!1),J=()=>{m.value.token=se()},M=g(!1),I=g(!0),C=g(!1),F=g(),G=g(),q=g(0),Q=r=>{if(I.value){let l,o;if(M.value){if(l=F.value?.$el.querySelector("input"),!l)return;o=m.value.gameName}else{if(l=G.value?.$el.querySelector("input"),!l)return;o=m.value.description}const P=l.selectionStart||q.value,N=l.selectionEnd||q.value;M.value?m.value.gameName=o.substring(0,P)+r+o.substring(N):m.value.description=o.substring(0,P)+r+o.substring(N);const d=P+r.length;q.value=d,oe(()=>{l.setSelectionRange(d,d),l.focus()})}else W(r).then(()=>{A("复制成功"),C.value=!1}).catch(()=>{A("复制失败","error")})};function W(r,l,o){return new Promise((P,N)=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(r).then(()=>{P(r)}).catch(d=>{N(d)});else try{const d=document.createElement("textarea");d.value=r,d.style.position="fixed",d.style.opacity="0",document.body.appendChild(d),d.select();const X=document.execCommand("copy");if(document.body.removeChild(d),X)P(r);else throw new Error("复制失败，execCommand返回false")}catch(d){N(d)}})}return H({validate:async()=>{const{valid:r}=await K.value.validate();return r?{validate:!0,formData:m.value}:{validate:!1,formData:{}}}}),(r,l)=>(n(),D(O,null,[a(ne,{ref_key:"roomFormRef",ref:K},{default:s(()=>[a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[i(a(k,{modelValue:e(m).gameName,"onUpdate:modelValue":l[0]||(l[0]=o=>e(m).gameName=o),rules:e(w).gameName,label:e(t)("game.base.step1.gameName.name"),"append-inner-icon":"ri-emotion-happy-line","onClick:appendInner":l[1]||(l[1]=o=>{C.value=!0,M.value=!0})},null,8,["modelValue","rules","label"]),[[f,e(t)("game.base.step1.gameName.tip")]])]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[i(a(k,{modelValue:e(m).description,"onUpdate:modelValue":l[2]||(l[2]=o=>e(m).description=o),label:e(t)("game.base.step1.description.name"),"append-inner-icon":"ri-emotion-happy-line","onClick:appendInner":l[3]||(l[3]=o=>{C.value=!0,M.value=!1})},null,8,["modelValue","label"]),[[f,e(t)("game.base.step1.description.tip")]])]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[a(U,{modelValue:e(m).gameMode,"onUpdate:modelValue":l[5]||(l[5]=o=>e(m).gameMode=o),inline:""},{prepend:s(()=>[i((n(),c(x,null,{default:s(()=>[v(p(e(t)("game.base.step1.gameMode.name")),1)]),_:1})),[[f,e(t)("game.base.step1.gameMode.tip")]])]),default:s(()=>[a(u,{label:e(t)("game.base.step1.gameMode.modes.endless"),value:"endless",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.survival"),value:"survival",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.relaxed"),value:"relaxed",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.wilderness"),value:"wilderness",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.lightsOut"),value:"lightsOut",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.lavaarena"),value:"lavaarena",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.quagmire"),value:"quagmire",class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.gameMode.modes.custom.name"),value:"custom",class:"mr-4"},null,8,["label"]),e(m).gameMode==="custom"?(n(),c(k,{key:0,modelValue:e(m).customGameMode,"onUpdate:modelValue":l[4]||(l[4]=o=>e(m).customGameMode=o),rules:e(w).customGameMode,label:e(t)("game.base.step1.gameMode.modes.custom.label")},null,8,["modelValue","rules","label"])):R("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[a(z,{modelValue:e(m).maxPlayer,"onUpdate:modelValue":l[6]||(l[6]=o=>e(m).maxPlayer=o),max:_.maxPlayers===0?64:_.maxPlayers,min:1,class:"align-center","hide-details":"",step:"1",style:{"margin-left":"-1px"}},{label:s(()=>[i((n(),c(x,{style:{"margin-right":"1rem"}},{default:s(()=>[v(p(e(t)("game.base.step1.maxPlayer.name")),1)]),_:1})),[[f,e(t)("game.base.step1.maxPlayer.tip")]])]),append:s(()=>[a(x,{label:"",color:"primary"},{default:s(()=>[v(p(e(m).maxPlayer),1)]),_:1})]),_:1},8,["modelValue","max"])]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,{cols:e(V)?12:4},{default:s(()=>[a(U,{modelValue:e(m).pvp,"onUpdate:modelValue":l[7]||(l[7]=o=>e(m).pvp=o),inline:""},{prepend:s(()=>[i((n(),c(x,null,{default:s(()=>[v(p(e(t)("game.base.step1.pvp.name")),1)]),_:1})),[[f,e(t)("game.base.step1.pvp.tip")]])]),default:s(()=>[a(u,{label:e(t)("game.base.step1.pvp.enable"),value:!0,class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.pvp.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["cols"]),a(b,{cols:e(V)?12:4},{default:s(()=>[a(U,{modelValue:e(m).vote,"onUpdate:modelValue":l[8]||(l[8]=o=>e(m).vote=o),inline:""},{prepend:s(()=>[i((n(),c(x,null,{default:s(()=>[v(p(e(t)("game.base.step1.vote.name")),1)]),_:1})),[[f,e(t)("game.base.step1.vote.tip")]])]),default:s(()=>[a(u,{label:e(t)("game.base.step1.vote.enable"),value:!0,class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.vote.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["cols"]),a(b,{cols:e(V)?12:4},{default:s(()=>[a(U,{modelValue:e(m).pauseEmpty,"onUpdate:modelValue":l[9]||(l[9]=o=>e(m).pauseEmpty=o),inline:""},{prepend:s(()=>[i((n(),c(x,null,{default:s(()=>[v(p(e(t)("game.base.step1.pauseEmpty.name")),1)]),_:1})),[[f,e(t)("game.base.step1.pauseEmpty.tip")]])]),default:s(()=>[a(u,{label:e(t)("game.base.step1.pauseEmpty.enable"),value:!0,class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.pauseEmpty.disable"),value:!1,class:"mr-4"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["cols"])]),_:1}),a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[a(z,{modelValue:e(m).maxRollBack,"onUpdate:modelValue":l[10]||(l[10]=o=>e(m).maxRollBack=o),max:64,min:1,class:"align-center","hide-details":"",step:"1",style:{"margin-left":"-1px"}},{label:s(()=>[i((n(),c(x,{style:{"margin-right":"1rem"}},{default:s(()=>[v(p(e(t)("game.base.step1.maxRollBack.name")),1)]),_:1})),[[f,e(t)("game.base.step1.maxRollBack.tip")]])]),append:s(()=>[a(x,{label:"",color:"primary"},{default:s(()=>[v(p(e(m).maxRollBack),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[i(a(k,{modelValue:e(m).password,"onUpdate:modelValue":l[11]||(l[11]=o=>e(m).password=o),label:e(t)("game.base.step1.password.name"),"append-inner-icon":e(j)?"ri-eye-off-line":"ri-eye-line",type:e(j)?"text":"password","onClick:appendInner":l[12]||(l[12]=o=>j.value=!e(j))},null,8,["modelValue","label","append-inner-icon","type"]),[[f,e(t)("game.base.step1.password.tip")]])]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,{class:"fcc"},{default:s(()=>[i(a(k,{modelValue:e(m).token,"onUpdate:modelValue":l[13]||(l[13]=o=>e(m).token=o),rules:e(w).token,label:e(t)("game.base.step1.token.name"),"append-inner-icon":e(E)?"ri-eye-off-line":"ri-eye-line",type:e(E)?"text":"password",class:"w-100","onClick:appendInner":l[14]||(l[14]=o=>E.value=!e(E))},null,8,["modelValue","rules","label","append-inner-icon","type"]),[[f,e(t)("game.base.step1.token.tip")]]),e(V)?R("",!0):(n(),c(S,{key:0,density:"comfortable",variant:"text",class:"ml-4",color:"success","prepend-icon":"ri-add-line",onClick:J},{default:s(()=>[v(p(e(t)("game.base.step1.token.buttonAdd")),1)]),_:1})),e(V)?R("",!0):(n(),c(S,{key:1,density:"comfortable",variant:"text",class:"ml-4",color:"info",href:"https://accounts.klei.com",target:"_blank","prepend-icon":"ri-links-line"},{default:s(()=>[v(p(e(t)("game.base.step1.token.buttonUrl")),1)]),_:1}))]),_:1})]),_:1}),a(y,null,{default:s(()=>[a(b,{cols:e(V)?12:9,style:le(e(V)?{marginBottom:"1.25rem"}:{})},{default:s(()=>[i(a(k,{modelValue:e(m).masterIP,"onUpdate:modelValue":l[15]||(l[15]=o=>e(m).masterIP=o),rules:e(w).masterIP,label:e(t)("game.base.step1.masterIP.name")},null,8,["modelValue","rules","label"]),[[f,e(t)("game.base.step1.masterIP.tip")]])]),_:1},8,["cols","style"]),a(b,{cols:e(V)?12:3},{default:s(()=>[i(a(re,{modelValue:e(m).masterPort,"onUpdate:modelValue":l[16]||(l[16]=o=>e(m).masterPort=o),rules:e(w).masterPort,label:e(t)("game.base.step1.masterPort.name"),min:1,max:65535,style:{"margin-bottom":"-1.25rem"}},null,8,["modelValue","rules","label"]),[[f,e(t)("game.base.step1.masterPort.tip")]])]),_:1},8,["cols"])]),_:1}),a(y,null,{default:s(()=>[a(b,null,{default:s(()=>[i(a(k,{modelValue:e(m).clusterKey,"onUpdate:modelValue":l[17]||(l[17]=o=>e(m).clusterKey=o),rules:e(w).clusterKey,label:e(t)("game.base.step1.clusterKey.name"),"append-inner-icon":e(B)?"ri-eye-off-line":"ri-eye-line",type:e(B)?"text":"password","onClick:appendInner":l[18]||(l[18]=o=>B.value=!e(B))},null,8,["modelValue","rules","label","append-inner-icon","type"]),[[f,e(t)("game.base.step1.clusterKey.tip")]])]),_:1})]),_:1})]),_:1},512),a(fe,{modelValue:e(C),"onUpdate:modelValue":l[22]||(l[22]=o=>$(C)?C.value=o:null),width:e(V)?"90%":"60%"},{default:s(()=>[a(ue,null,{default:s(()=>[a(de,null,{default:s(()=>[T("div",ce,[T("div",null,p(e(t)("game.base.step1.emoji.title")),1),T("div",null,[a(U,{modelValue:e(I),"onUpdate:modelValue":l[19]||(l[19]=o=>$(I)?I.value=o:null),inline:""},{default:s(()=>[a(u,{label:e(t)("game.base.step1.emoji.insert"),value:!0,class:"mr-4"},null,8,["label"]),a(u,{label:e(t)("game.base.step1.emoji.copy"),value:!1},null,8,["label"])]),_:1},8,["modelValue"])])])]),_:1}),a(ie,{class:"mt-4"},{default:s(()=>[e(I)?(n(),D("div",ve,[e(M)?(n(),c(k,{key:0,ref_key:"emojiInputNameRef",ref:F,modelValue:e(m).gameName,"onUpdate:modelValue":l[20]||(l[20]=o=>e(m).gameName=o),label:e(t)("game.base.step1.gameName.name")},null,8,["modelValue","label"])):(n(),c(k,{key:1,ref_key:"emojiInputDescriptionRef",ref:G,modelValue:e(m).description,"onUpdate:modelValue":l[21]||(l[21]=o=>e(m).description=o),label:e(t)("game.base.step1.description.name")},null,8,["modelValue","label"]))])):R("",!0),T("div",Ve,[(n(!0),D(O,null,te(e(ge),o=>(n(),D("div",{class:"emoji-item",onClick:P=>Q(o)},p(o),9,ye))),256))])]),_:1}),e(V)?R("",!0):(n(),c(pe,{key:0},{default:s(()=>[a(be),a(S,{variant:"text",color:"info",href:"https://www.bilibili.com/opus/814456568458248259",target:"_blank","append-icon":"ri-share-box-line"},{default:s(()=>[v(p(e(t)("game.base.step1.emoji.thanks")),1)]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue","width"])],64))}},Oe=me(ke,[["__scopeId","data-v-fa8ce21c"]]);export{Oe as default};
