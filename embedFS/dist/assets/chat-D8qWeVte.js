import{_ as S}from"./Result-DrraABcR.js";import G from"./singleLog-D2kAq8-y.js";import{g as E,d as U,e as $,b as q,h as d,f as z,a4 as A,N as M,c as b,l as t,o as l,y as r,F as _,a,w as o,q as V,t as p,s as w,E as v,k,p as N}from"./index-C_c0Exnr.js";import R from"./log-CX2gEBHb.js";import{l as x}from"./logs-Cv1oIQkm.js";import{c as I,d as W,e as B,f as j}from"./VTabs-CeGBD4Ty.js";import{V as J,c as K,a as O}from"./VCard-VsWPDAzG.js";import{V as P}from"./VSelect-Cd8ItLVw.js";import"./VContainer-yopbA40U.js";/* empty css              */import"./VSwitch-zS6CtGrL.js";import"./index-2Zdw3G9d.js";import"./VInput-wpCm031A.js";import"./VSelectionControl-BVHEmJEC.js";import"./VChip-ZB3BK_Db.js";import"./VSlideGroup-MHUwctrw.js";import"./VRow-CtxWkUAK.js";import"./VSpacer-CGGMUcgl.js";import"./VCol-DRXoMeFc.js";import"./VNumberInput-B0-bA5rO.js";import"./VTextField-CkAuj97o.js";import"./preview-DZP4zyVD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-BVFJ0DVt.js";import"./ssrBoot-CBq-u-WA.js";import"./VList-W5u6OCbN.js";import"./VMenu-Pt5aSJwn.js";import"./dialog-transition-BOxadGpj.js";import"./VCheckboxBtn-Cv--o_EO.js";const Q={class:"card-header"},X={class:"fcc"},xt={__name:"chat",setup(Y){const f=E(),D=U();$();const{t:e}=q(),n=d("current"),T=d([]),H=()=>{const y={roomID:f.room.id,worldID:0,logType:"chat"};x.history.list.get(y).then(i=>{T.value=i.data})},c=d(""),g=d(""),u=d(!1),L=()=>{u.value=!0;const y={roomID:f.room.id,worldID:0,logType:"chat",logFile:c.value};x.history.content.get(y).then(i=>{g.value="",g.value=i.data}).finally(()=>{u.value=!1})},s=()=>Math.max(2,Math.floor(F.value-160-37)),F=d(window.innerHeight),C=A(()=>{F.value=window.innerHeight},200);return z(async()=>{H(),window.addEventListener("resize",C)}),M(()=>{window.removeEventListener("resize",C)}),(y,i)=>{const m=S;return t(f).gameVersion.local!==0?(l(),b(_,{key:0},[t(f).room.id!==0?(l(),b(_,{key:0},[a(W,{modelValue:t(n),"onUpdate:modelValue":i[0]||(i[0]=h=>w(n)?n.value=h:null),"align-tabs":"start",color:"primary","show-arrows":""},{default:o(()=>[a(I,{value:"current"},{default:o(()=>[V(p(t(e)("logs.current")),1)]),_:1}),a(I,{value:"history"},{default:o(()=>[V(p(t(e)("logs.history")),1)]),_:1})]),_:1},8,["modelValue"]),a(j,{modelValue:t(n),"onUpdate:modelValue":i[2]||(i[2]=h=>w(n)?n.value=h:null),class:"mt-4"},{default:o(()=>[a(B,{value:"current"},{default:o(()=>[t(n)==="current"?(l(),r(G,{key:0,type:"chat",chat:""})):v("",!0)]),_:1}),a(B,{value:"history"},{default:o(()=>[a(J,{height:s()},{default:o(()=>[a(K,{class:"my-2"},{default:o(()=>[k("div",Q,[k("span",null,p(t(e)("logs.history")),1),k("div",X,[a(P,{modelValue:t(c),"onUpdate:modelValue":[i[1]||(i[1]=h=>w(c)?c.value=h:null),L],items:t(T),disabled:t(u),loading:t(u),label:t(e)("logs.logFile"),density:"compact","min-width":"150px"},null,8,["modelValue","items","disabled","loading","label"])])])]),_:1}),a(O,null,{default:o(()=>[t(c)?(l(),b(_,{key:0},[!t(u)&&t(g)?(l(),r(R,{key:0,content:t(g),height:s()-150},null,8,["content","height"])):v("",!0),t(u)?(l(),r(m,{key:1,type:"info",title:t(e)("logs.fetching"),height:s()-150},null,8,["title","height"])):v("",!0),!t(u)&&!t(g)?(l(),r(m,{key:2,type:"info",height:s()-150,title:t(e)("logs.noContent")},null,8,["height","title"])):v("",!0)],64)):(l(),r(m,{key:1,type:"info",height:s()-150,title:t(e)("logs.noLogFile")},null,8,["height","title"]))]),_:1})]),_:1},8,["height"])]),_:1})]),_:1},8,["modelValue"])],64)):(l(),r(m,{key:1,title:t(e)("global.result.title"),"sub-title":t(e)("global.result.subTitle"),type:"error",height:s()},{default:o(()=>[a(N,{to:"/rooms",class:"mt-4"},{default:o(()=>[V(p(t(e)("global.result.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(l(),b(_,{key:1},[t(D).userInfo.role==="admin"?(l(),r(m,{key:0,title:t(e)("global.noGame.title"),"sub-title":t(e)("global.noGame.subTitle"),height:s(),type:"error"},{default:o(()=>[a(N,{to:"/install",class:"mt-4"},{default:o(()=>[V(p(t(e)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(l(),r(m,{key:1,title:t(e)("global.noGameNoAdmin.title"),"sub-title":t(e)("global.noGameNoAdmin.subTitle"),height:s(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{xt as default};
