import{d as h,a as R,b as B,c as F,V as M}from"./VBadge-CJvwf9Yp.js";import{d as $,u as O,e as j,b as K,h as u,f as P,a4 as X,y as w,o as f,w as t,a as e,k as V,t as k,l as a,p as Y,q as z,E as G,n as D,V as E,x as y,c as J,F as Q,v as W,z as Z,R as aa,S as ea,B as ta,cr as sa}from"./index-CDcWfGDJ.js";import{u as ra}from"./user-BBCRauvC.js";import{_ as la}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as oa,a as na,V as ua}from"./VCard-BouBlXSm.js";import{V as g}from"./VRow-p1Sjh_dt.js";import{V as d}from"./VCol-DeigZOGo.js";import{V as ia}from"./VForm-QXtRIWxr.js";import{V as x}from"./VTextField-DmrWhRLR.js";import{V as da}from"./VChip-Dku4Yyu4.js";import{T}from"./index-Dk7TO_po.js";import"./axios-BurQrId6.js";/* empty css              */import"./VInput-G0w3PBPn.js";import"./index-DpLahWRr.js";import"./VTooltip-D7LLOHHa.js";const q="/assets/avatar-1-full-EwAxu6bC.png",ma="/assets/avatar-2-full-DHXcFOL3.png",fa="/assets/avatar-3-full-DES7Kaw2.png",ca="/assets/avatar-4-full-C4gDU_YO.png",pa={class:"card-header"},va={class:"form-container"},wa={__name:"index",setup(Va){const c=$(),A=O(),{mobile:p}=j(),{t:l}=K(),s=u({username:c.userInfo.username,nickname:c.userInfo.nickname,avatar:c.userInfo.avatar,password:""}),m=u(),i=u();switch(s.value.avatar){case"1":m.value=h,i.value=q;break;case"2":m.value=F,i.value=ma;break;case"3":m.value=B,i.value=fa;break;case"4":m.value=R,i.value=ca;break;default:m.value=h,i.value=q}const H={1:h,2:F,3:B,4:R},L=o=>H[o],C=u(),v=u(!1),U={username:[o=>o?!0:l("platform.user.form.username.required")],nickname:[o=>o?!0:l("platform.user.form.nickname.required")],password:[o=>o?!0:l("platform.user.form.password.required")]},_=u(!1),N=async()=>{const{valid:o}=await C.value.validate();if(!o)return;_.value=!0;const n={username:s.value.username,nickname:s.value.nickname,avatar:s.value.avatar,password:ea(s.value.password)};ra.myself.put(n).then(async r=>{ta(r.message),await sa(3e3),await c.clearStore(),await A.push("/dashboard")}).finally(()=>{_.value=!1})},I=u(window.innerHeight),S=()=>{I.value=window.innerHeight},b=()=>Math.max(2,Math.floor(I.value-120));return P(async()=>{window.addEventListener("resize",S)}),X(()=>{window.removeEventListener("resize",S)}),(o,n)=>(f(),w(ua,{height:b()},{default:t(()=>[e(oa,null,{default:t(()=>[V("div",pa,[V("span",null,k(a(l)("profile.title")),1),e(Y,{loading:a(_),onClick:N},{default:t(()=>[z(k(a(l)("profile.submit")),1)]),_:1},8,["loading"])])]),_:1}),e(na,{class:"mx-4 mt-4"},{default:t(()=>[e(g,null,{default:t(()=>[a(p)?G("",!0):(f(),w(d,{key:0,cols:"12",md:"6"},{default:t(()=>[V("div",{class:"fcc",style:D({height:b()-54+"px"})},[e(E,{src:a(i),height:"356",width:"178"},null,8,["src"])],4)]),_:1})),e(d,{cols:"12",md:"6",style:D({height:b()-54+"px"}),class:"d-flex justify-center align-center"},{default:t(()=>[V("div",va,[e(ia,{ref_key:"userInfoRef",ref:C},{default:t(()=>[e(x,{modelValue:a(s).username,"onUpdate:modelValue":n[0]||(n[0]=r=>a(s).username=r),disabled:"",label:a(l)("profile.username"),class:"mb-8"},null,8,["modelValue","label"]),e(x,{modelValue:a(s).nickname,"onUpdate:modelValue":n[1]||(n[1]=r=>a(s).nickname=r),label:a(l)("profile.nickname"),class:"mb-8"},null,8,["modelValue","label"]),e(g,{class:"mb-8"},{default:t(()=>[e(d,{cols:a(p)?4:2,class:"d-flex align-center"},{default:t(()=>[e(g,null,{default:t(()=>[e(d,null,{default:t(()=>[y((f(),w(da,null,{default:t(()=>[z(k(a(l)("platform.user.form.avatar.title")),1)]),_:1})),[[T,a(l)("platform.user.form.avatar.tip")]])]),_:1})]),_:1})]),_:1},8,["cols"]),e(d,{cols:a(p)?8:10},{default:t(()=>[e(g,null,{default:t(()=>[(f(),J(Q,null,W(4,r=>e(d,{key:r,cols:a(p)?6:3},{default:t(()=>[e(M,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success","model-value":a(s).avatar===r.toString()},{default:t(()=>[y((f(),w(Z,{color:"primary",variant:"tonal",onClick:ga=>a(s).avatar=r.toString()},{default:t(()=>[e(E,{src:L(r)},null,8,["src"])]),_:2},1032,["onClick"])),[[aa]])]),_:2},1032,["model-value"])]),_:2},1032,["cols"])),64))]),_:1})]),_:1},8,["cols"])]),_:1}),y(e(x,{modelValue:a(s).password,"onUpdate:modelValue":n[2]||(n[2]=r=>a(s).password=r),"append-inner-icon":a(v)?"ri-eye-off-line":"ri-eye-line",type:a(v)?"text":"password",autocomplete:"password",label:a(l)("platform.user.form.password.title"),rules:U.password,clearable:"","onClick:appendInner":n[3]||(n[3]=r=>v.value=!a(v))},null,8,["modelValue","append-inner-icon","type","label","rules"]),[[T,a(l)("platform.user.form.password.tip")]])]),_:1},512)])]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["height"]))}},qa=la(wa,[["__scopeId","data-v-9ce3fffe"]]);export{qa as default};
