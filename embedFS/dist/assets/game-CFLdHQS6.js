import L from"./log-4fksqC7a.js";import{l as M}from"./logs-BusTAoaZ.js";import{r as N}from"./room-6pGSGymX.js";import{g as _,h as s,f as q,a3 as B,N as R,y as S,o as k,w as o,a as t,k as f,l as i,s as V,q as I,p as D}from"./index-y7gjWuPm.js";import{c as H,a as T,V as U}from"./VCard-3t1lA3T-.js";import{V as z}from"./VSelect-Dpmldz1w.js";import{V as E}from"./VSwitch-EU_MqDkn.js";import{V as A}from"./VChip-wyhN0sI-.js";import{V as F}from"./VRow-DSxK_lZ_.js";import{V as W}from"./VSpacer-Mg5KYyj9.js";import{V as $}from"./VCol-umKj9uol.js";import{V as j}from"./VNumberInput-CGuiiiie.js";import"./preview-BkvUQe_B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-BmRfRVbX.js";import"./VTextField-uMFdyion.js";import"./index-MCHUliHX.js";import"./VInput-MzIIapS-.js";import"./VList-Dq7nw64W.js";import"./ssrBoot-DoU4Hx8y.js";import"./VMenu-DsEiLSfo.js";import"./dialog-transition-BlTEFOz9.js";import"./VCheckboxBtn-D2boHj3Q.js";import"./VSelectionControl-BnRoO89R.js";import"./VSlideGroup-C6UwHDjq.js";/* empty css              */const P={class:"card-header"},G={class:"fcc"},ye={__name:"game",setup(J){const v=_(),u=s(""),l=s(0),m=s(!0),a=s(0),w=()=>{if(l.value===0)return;const n={roomID:v.room.id,worldID:l.value,logType:"game",lines:a.value};M.content.get(n).then(e=>{u.value=e.data.join(`
`)})},p=s([]),b=async()=>{const n={roomID:v.room.id},e=await N.worlds.get(n);p.value=e.data,l.value=p.value[0]?.id||0};let d=null;const x=()=>{d=setInterval(()=>{m.value&&w()},2e3)},g=()=>{d&&(clearInterval(d),d=null)},h=()=>Math.round(Math.max(2,Math.floor(c.value-390))/22.5),y=()=>Math.max(2,Math.floor(c.value-160)),c=s(window.innerHeight),C=B(()=>{c.value=window.innerHeight,a.value=h()},200);return q(async()=>{window.addEventListener("resize",C),await b(),a.value=h(),x()}),R(()=>{g(),window.removeEventListener("beforeunload",g),window.removeEventListener("resize",C)}),(n,e)=>(k(),S(U,{height:y()},{default:o(()=>[t(H,{class:"my-2"},{default:o(()=>[f("div",P,[e[5]||(e[5]=f("span",null,"游戏日志",-1)),f("div",G,[t(z,{modelValue:i(l),"onUpdate:modelValue":[e[0]||(e[0]=r=>V(l)?l.value=r:null),e[1]||(e[1]=r=>u.value="")],items:i(p),"item-title":"worldName","item-value":"id",label:"世界",density:"compact",class:"mr-4"},null,8,["modelValue","items"]),t(E,{modelValue:i(m),"onUpdate:modelValue":e[2]||(e[2]=r=>V(m)?m.value=r:null),color:"info","hide-details":""},{prepend:o(()=>[t(A,{color:"info"},{default:o(()=>[...e[4]||(e[4]=[I(" 自动刷新 ",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),t(T,null,{default:o(()=>[t(L,{content:i(u),height:y()-150},null,8,["content","height"]),t(F,{class:"my-4"},{default:o(()=>[t(W),t($,{cols:"6",md:"2",class:"fcc"},{default:o(()=>[t(j,{modelValue:i(a),"onUpdate:modelValue":e[3]||(e[3]=r=>V(a)?a.value=r:null),label:"行","hide-details":"",density:"compact",class:"mr-4"},null,8,["modelValue"]),t(D,{onClick:w},{default:o(()=>[...e[6]||(e[6]=[I(" 刷新 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"]))}};export{ye as default};
