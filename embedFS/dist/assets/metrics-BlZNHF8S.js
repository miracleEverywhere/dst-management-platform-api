import{_ as w}from"./index-DKYEpa-u.js";import{p as D}from"./platform-BR1jW48B.js";import{f as o,e as B,b as $,j as E,A as C,o as b,w as x,a as r,aa as N,k as h,t as A,l as e,n as O,D as U,x as L,s as K,v as M,p as T,V as j,cw as d}from"./index-ClrSl1t3.js";import{V as q}from"./VSelect-HjFTEHVC.js";import"./axios-DEwtRmaY.js";import"./VInput-Dh0vzV9z.js";import"./index-rIMhUL3t.js";import"./VTextField-C20ssUm5.js";import"./VList-CRtGEhVV.js";import"./ssrBoot-4_sUra1R.js";import"./VMenu-DVaqAgsw.js";import"./dialog-transition-BOVVgIJg.js";import"./VCheckboxBtn-CD061qxM.js";import"./VSelectionControl-DRns-ek4.js";import"./VChip-DSSyFDgp.js";const z={class:"card-header"},re={__name:"metrics",setup(I){const n=o(1),{mobile:g}=B(),{t:l}=$(),k=[{label:"1 "+l("platform.metrics.hour"),value:1},{label:"3 "+l("platform.metrics.hour"),value:3},{label:"6 "+l("platform.metrics.hour"),value:6},{label:"12 "+l("platform.metrics.hour"),value:12},{label:"24 "+l("platform.metrics.hour"),value:24}],S=o(),F=o(),_=o(),R=o(),V=o(),f=o({title:{text:"CPU"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} %</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#409EFF",lineStyle:{color:"#409EFF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#409EFF"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),m=o({title:{text:"Memory"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} %</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#67C23A",lineStyle:{color:"#67C23A"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#67C23A"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),p=o({title:{text:"Disk"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} %</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#8C57FF",lineStyle:{color:"#8C57FF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#8C57FF"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),u=o({title:{text:"Net ↑"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} KB/s</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} KB/s"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#E6A23C",lineStyle:{color:"#E6A23C"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#E6A23C"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),c=o({title:{text:"Net ↓"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} KB/s</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} KB/s"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#F56C6C",lineStyle:{color:"#F56C6C"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#F56C6C"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),y=o(!1),v=a=>{const s={timeRange:a};y.value=!0,D.metrics.get(s).then(i=>{f.value.xAxis.data=[],m.value.xAxis.data=[],p.value.xAxis.data=[],u.value.xAxis.data=[],c.value.xAxis.data=[],f.value.series[0].data=[],m.value.series[0].data=[],p.value.series[0].data=[],u.value.series[0].data=[],c.value.series[0].data=[];for(let t of i.data)f.value.xAxis.data.push(d(t.timestamp)),m.value.xAxis.data.push(d(t.timestamp)),p.value.xAxis.data.push(d(t.timestamp)),u.value.xAxis.data.push(d(t.timestamp)),c.value.xAxis.data.push(d(t.timestamp)),f.value.series[0].data.push(t.cpu.toFixed(2)),m.value.series[0].data.push(t.memory.toFixed(2)),p.value.series[0].data.push(t.disk.toFixed(2)),u.value.series[0].data.push(t.netUplink.toFixed(2)),c.value.series[0].data.push(t.netDownlink.toFixed(2))}).finally(()=>{y.value=!1})};return E(()=>{v(n.value)}),(a,s)=>{const i=w;return b(),C(j,{class:"mb-4"},{default:x(()=>[r(N,{class:"mt-2"},{default:x(()=>[h("div",z,[h("div",null,A(e(l)("platform.metrics.title")),1),h("div",{style:O(e(g)?{width:"50%"}:{width:"20%"}),class:"fcc"},[r(q,{modelValue:e(n),"onUpdate:modelValue":[s[0]||(s[0]=t=>L(n)?n.value=t:null),s[1]||(s[1]=t=>v(e(n)))],items:k,loading:e(y),density:"compact","item-title":"label",label:e(l)("platform.metrics.timeRange")},null,8,["modelValue","loading","label"]),e(g)?U("",!0):(b(),C(K,{key:0,loading:e(y),color:"default",class:"ml-2",onClick:s[2]||(s[2]=t=>v(e(n)))},{default:x(()=>[M(A(e(l)("platform.metrics.refresh")),1)]),_:1},8,["loading"]))],4)])]),_:1}),r(T,{class:"mt-4"},{default:x(()=>[r(i,{ref_key:"cpuChartRef",ref:S,option:e(f),height:"30vh",class:"mb-4"},null,8,["option"]),r(i,{ref_key:"memoryChartRef",ref:F,option:e(m),height:"30vh",class:"mb-4"},null,8,["option"]),r(i,{ref_key:"diskChartRef",ref:_,option:e(p),height:"30vh",class:"mb-4"},null,8,["option"]),r(i,{ref_key:"netUplinkChartRef",ref:R,option:e(u),height:"30vh",class:"mb-4"},null,8,["option"]),r(i,{ref_key:"netDownlinkChartRef",ref:V,option:e(c),height:"30vh",class:"mb-4"},null,8,["option"])]),_:1})]),_:1})}}};export{re as default};
