import{c7 as ct,bu as ft,ae as T,an as M,i as I,L as me,bY as Te,aM as de,am as W,Y as K,ad as q,Z as re,af as Y,k as h,a as S,B as A,ao as ve,al as _,c8 as gt,br as C,H as ae,f as L,bN as mt,bk as vt,c9 as yt,bX as X,bO as bt,bC as Fe,a2 as ht,a0 as F,ca as le,cb as Z,bG as pt,b9 as xt,aV as St,e as ye,bi as Pt,F as j,bf as wt,aw as be,aR as he,G as xe,n as kt,cc as It,p as Ce,q as Se,cd as J,m as ee,t as Dt,bm as ce,at as fe,ar as te,aq as Vt,as as Tt,U as Ft}from"./index-w_zQfLyl.js";import{V as Pe}from"./VPagination-B1jhScKs.js";import{V as Oe}from"./VSelect-jY-bhflm.js";import{V as Ct}from"./VChip-BWlxUOQZ.js";import{V as ne}from"./VCheckboxBtn-DAaKE1AM.js";import{V as we,m as Ot}from"./VTable-DtEoaqdI.js";import{u as Bt,m as Et}from"./filter-L5OQnnSi.js";function ke(e,t,l){return Object.keys(e).filter(a=>ct(a)&&a.endsWith(t)).reduce((a,n)=>(a[n.slice(0,-t.length)]=r=>ft(e[n],r,l(r)),a),{})}const _t=T({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Be=Symbol.for("vuetify:data-table-pagination");function At(e){const t=M(e,"page",void 0,a=>Number(a??1)),l=M(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:t,itemsPerPage:l}}function Nt(e){const{page:t,itemsPerPage:l,itemsLength:a}=e,n=I(()=>l.value===-1?0:l.value*(t.value-1)),r=I(()=>l.value===-1?a.value:Math.min(a.value,n.value+l.value)),o=I(()=>l.value===-1||a.value===0?1:Math.ceil(a.value/l.value));me([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(d){l.value=d,t.value=1}function s(){t.value=de(t.value+1,1,o.value)}function u(){t.value=de(t.value-1,1,o.value)}function f(d){t.value=de(d,1,o.value)}const v={page:t,itemsPerPage:l,startIndex:n,stopIndex:r,pageCount:o,itemsLength:a,nextPage:s,prevPage:u,setPage:f,setItemsPerPage:i};return K(Be,v),v}function Rt(){const e=W(Be);if(!e)throw new Error("Missing pagination!");return e}function Ht(e){const t=Te("usePaginatedItems"),{items:l,startIndex:a,stopIndex:n,itemsPerPage:r}=e,o=I(()=>r.value<=0?l.value:l.value.slice(a.value,n.value));return me(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const Ee=T({color:String,prevIcon:{type:_,default:"$prev"},nextIcon:{type:_,default:"$next"},firstIcon:{type:_,default:"$first"},lastIcon:{type:_,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ie=q()({name:"VDataTableFooter",props:Ee(),setup(e,t){let{slots:l}=t;const{t:a}=re(),{page:n,pageCount:r,startIndex:o,stopIndex:i,itemsLength:s,itemsPerPage:u,setItemsPerPage:f}=Rt(),v=I(()=>e.itemsPerPageOptions.map(d=>typeof d=="number"?{value:d,title:d===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(d)}:{...d,title:isNaN(Number(d.title))?a(d.title):d.title}));return Y(()=>{const d=Pe.filterProps(e);return h("div",{class:"v-data-table-footer"},[l.prepend?.(),h("div",{class:"v-data-table-footer__items-per-page"},[h("span",null,[a(e.itemsPerPageText)]),S(Oe,{items:v.value,itemColor:e.color,modelValue:u.value,"onUpdate:modelValue":m=>f(Number(m)),density:"compact",variant:"outlined","aria-label":a(e.itemsPerPageText),hideDetails:!0},null)]),h("div",{class:"v-data-table-footer__info"},[h("div",null,[a(e.pageText,s.value?o.value+1:0,i.value,s.value)])]),h("div",{class:"v-data-table-footer__pagination"},[S(Pe,A({modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:r.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},ve(d,["color"])),null)])])}),{}}}),U=gt({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:l}=t;const a=e.tag??"td",n=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return S(a,{class:ae(["v-data-table__td",{"v-data-table-column--fixed":n==="start","v-data-table-column--fixed-end":n==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:C(e.height),width:C(e.width),maxWidth:C(e.maxWidth),left:n==="start"?C(e.fixedOffset||null):void 0,right:n==="end"?C(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?C(e.indent):void 0}},{default:()=>[l.default?.()]})}),$t=T({headers:Array},"DataTable-header"),_e=Symbol.for("vuetify:data-table-headers"),Ae={title:"",sortable:!1},Gt={...Ae,width:48};function Lt(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(l=>({element:l,priority:0}));return{enqueue:(l,a)=>{let n=!1;for(let r=0;r<t.length;r++)if(t[r].priority>a){t.splice(r,0,{element:l,priority:a}),n=!0;break}n||t.push({element:l,priority:a})},size:()=>t.length,count:()=>{let l=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let n=0;n<t.length;n++)Math.floor(t[n].priority)===a&&(l+=1);return l},dequeue:()=>t.shift()}}function ge(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const l of e.children)ge(l,t);return t}function Ne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const l of e)l.key&&t.add(l.key),l.children&&Ne(l.children,t);return t}function Mt(e){if(e.key){if(e.key==="data-table-group")return Ae;if(["data-table-expand","data-table-select"].includes(e.key))return Gt}}function pe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(l=>pe(l,t+1))):t}function jt(e){let t=!1;function l(r,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(r)if(i!=="none"&&(r.fixed=i),r.fixed===!0&&(r.fixed="start"),r.fixed===o)if(r.children)if(o==="start")for(let s=r.children.length-1;s>=0;s--)l(r.children[s],o,o);else for(let s=0;s<r.children.length;s++)l(r.children[s],o,o);else!t&&o==="start"?r.lastFixed=!0:!t&&o==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?yt(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),t=!0;else if(r.children)if(o==="start")for(let s=r.children.length-1;s>=0;s--)l(r.children[s],o);else for(let s=0;s<r.children.length;s++)l(r.children[s],o);else t=!1}for(let r=e.length-1;r>=0;r--)l(e[r],"start");for(let r=0;r<e.length;r++)l(e[r],"end");let a=0;for(let r=0;r<e.length;r++)a=Re(e[r],a);let n=0;for(let r=e.length-1;r>=0;r--)n=He(e[r],n)}function Re(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const l of e.children)t=Re(l,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function He(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const l of e.children)t=He(l,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Wt(e,t){const l=[];let a=0;const n=Lt(e);for(;n.size()>0;){let o=n.count();const i=[];let s=1;for(;o>0;){const{element:u,priority:f}=n.dequeue(),v=t-a-pe(u);if(i.push({...u,rowspan:v??1,colspan:u.children?ge(u).length:1}),u.children)for(const d of u.children){const m=f%1+s/Math.pow(10,a+2);n.enqueue(d,a+v+m)}s+=1,o-=1}a+=1,l.push(i)}return{columns:e.map(o=>ge(o)).flat(),headers:l}}function $e(e){const t=[];for(const l of e){const a={...Mt(l),...l},n=a.key??(typeof a.value=="string"?a.value:null),r=a.value??n??null,o={...a,key:n,value:r,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?$e(a.children):void 0};t.push(o)}return t}function Kt(e,t){const l=L([]),a=L([]),n=L({}),r=L({}),o=L({});mt(()=>{const u=(e.headers||Object.keys(e.items[0]??{}).map(g=>({key:g,title:vt(g)}))).slice(),f=Ne(u);t?.groupBy?.value.length&&!f.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!f.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!f.has("data-table-expand")&&u.push({key:"data-table-expand"});const v=$e(u);jt(v);const d=Math.max(...v.map(g=>pe(g)))+1,m=Wt(v,d);l.value=m.headers,a.value=m.columns;const p=m.headers.flat(1);for(const g of p)g.key&&(g.sortable&&(g.sort&&(n.value[g.key]=g.sort),g.sortRaw&&(r.value[g.key]=g.sortRaw)),g.filter&&(o.value[g.key]=g.filter))});const i={headers:l,columns:a,sortFunctions:n,sortRawFunctions:r,filterFunctions:o};return K(_e,i),i}function oe(){const e=W(_e);if(!e)throw new Error("Missing headers!");return e}const qt={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:l}=e;return new Set(l?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},Ge={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:l,selected:a}=e;for(const n of t)l?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:t,currentPage:l,selected:a}=e;return Ge.select({items:l,value:t,selected:a})}},zt={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:l,selected:a}=e;for(const n of t)l?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:t,allItems:l}=e;return new Set(t?l.map(a=>a.value):[])}},Ut=T({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),Le=Symbol.for("vuetify:data-table-selection");function Yt(e,t){let{allItems:l,currentPage:a}=t;const n=M(e,"modelValue",e.modelValue,b=>{const x=e.valueComparator;return x?new Set(X(b).map(V=>l.value.find(P=>x(V,P.value))?.value??V)):new Set(X(b).map(V=>bt(V)?l.value.find(P=>V===P.value)?.value??V:l.value.find(P=>Fe(V,P.value))?.value??V))},b=>[...b.values()]),r=I(()=>l.value.filter(b=>b.selectable)),o=I(()=>a.value.filter(b=>b.selectable)),i=I(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return qt;case"all":return zt;case"page":default:return Ge}}),s=ht(null);function u(b){return X(b).every(x=>n.value.has(x.value))}function f(b){return X(b).some(x=>n.value.has(x.value))}function v(b,x){const V=i.value.select({items:b,value:x,selected:new Set(n.value)});n.value=V}function d(b,x,V){const P=[];if(x=x??a.value.findIndex(O=>O.value===b.value),e.selectStrategy!=="single"&&V?.shiftKey&&s.value!==null){const[O,$]=[s.value,x].sort((N,w)=>N-w);P.push(...a.value.slice(O,$+1).filter(N=>N.selectable))}else P.push(b),s.value=x;v(P,!u([b]))}function m(b){const x=i.value.selectAll({value:b,allItems:r.value,currentPage:o.value,selected:new Set(n.value)});n.value=x}const p=I(()=>n.value.size>0),g=I(()=>{const b=i.value.allSelected({allItems:r.value,currentPage:o.value});return!!b.length&&u(b)}),c=F(()=>i.value.showSelectAll),D={toggleSelect:d,select:v,selectAll:m,isSelected:u,isSomeSelected:f,someSelected:p,allSelected:g,showSelectAll:c,lastSelectedIndex:s,selectStrategy:i};return K(Le,D),D}function se(){const e=W(Le);if(!e)throw new Error("Missing selection!");return e}const Qt=T({initialSortOrder:{type:String,default:"asc",validator:e=>!e||["asc","desc"].includes(e)},sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:{type:[Boolean,Object],default:!1},mustSort:Boolean},"DataTable-sort"),Me=Symbol.for("vuetify:data-table-sort");function Xt(e){const t=F(()=>e.initialSortOrder),l=M(e,"sortBy"),a=F(()=>e.mustSort),n=F(()=>e.multiSort);return{initialSortOrder:t,sortBy:l,multiSort:n,mustSort:a}}function Zt(e,t){if(!pt(e))return{active:!!e};const{key:l,mode:a,modifier:n}=e,r=n==="alt"&&t?.altKey||n==="shift"&&t?.shiftKey;return{active:!l||t?.ctrlKey||t?.metaKey||!1,mode:r?a==="append"?"prepend":"append":a}}function Jt(e){const{initialSortOrder:t,sortBy:l,mustSort:a,multiSort:n,page:r}=e,o=(u,f)=>{if(u.key==null)return;let v=l.value.map(g=>({...g}))??[];const d=v.find(g=>g.key===u.key),m=t.value,p=t.value==="desc"?"asc":"desc";if(d)d.order===p?a.value&&v.length===1?d.order=t.value:v=v.filter(g=>g.key!==u.key):d.order=p;else{const{active:g,mode:c}=Zt(n.value,f);g?c==="prepend"?v.unshift({key:u.key,order:m}):v.push({key:u.key,order:m}):v=[{key:u.key,order:m}]}l.value=v,r&&(r.value=1)};function i(u){return!!l.value.find(f=>f.key===u.key)}const s={sortBy:l,toggleSort:o,isSorted:i};return K(Me,s),s}function je(){const e=W(Me);if(!e)throw new Error("Missing sort!");return e}function ea(e,t,l,a){const n=re();return{sortedItems:I(()=>l.value.length?ta(t.value,l.value,n.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):t.value)}}function ta(e,t,l,a){const n=new Intl.Collator(l,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,a?.transform?a.transform(o):o]).sort((o,i)=>{for(let s=0;s<t.length;s++){let u=!1;const f=t[s].key,v=t[s].order??"asc";if(v===!1)continue;let d=le(o[1],f),m=le(i[1],f),p=o[0].raw,g=i[0].raw;if(v==="desc"&&([d,m]=[m,d],[p,g]=[g,p]),a?.sortRawFunctions?.[f]){const c=a.sortRawFunctions[f](p,g);if(c==null)continue;if(u=!0,c)return c}if(a?.sortFunctions?.[f]){const c=a.sortFunctions[f](d,m);if(c==null)continue;if(u=!0,c)return c}if(!u&&(d instanceof Date&&m instanceof Date&&(d=d.getTime(),m=m.getTime()),[d,m]=[d,m].map(c=>c!=null?c.toString().toLocaleLowerCase():c),d!==m))return Z(d)&&Z(m)?0:Z(d)?-1:Z(m)?1:!isNaN(d)&&!isNaN(m)?Number(d)-Number(m):n.compare(d,m)}return 0}).map(o=>{let[i]=o;return i})}const We=T({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,initialSortOrder:String,sortAscIcon:{type:_,default:"$sortAsc"},sortDescIcon:{type:_,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...he(),...be(),...wt()},"VDataTableHeaders"),De=q()({name:"VDataTableHeaders",props:We(),setup(e,t){let{slots:l}=t;const{t:a}=re(),{toggleSort:n,sortBy:r,isSorted:o}=je(),{someSelected:i,allSelected:s,selectAll:u,showSelectAll:f}=se(),{columns:v,headers:d}=oe(),{loaderClasses:m}=xt(e);function p(w,y){if(!(e.sticky||e.fixedHeader)&&!w.fixed)return;const k=typeof w.fixed=="string"?w.fixed:w.fixed?"start":"none";return{position:"sticky",left:k==="start"?C(w.fixedOffset):void 0,right:k==="end"?C(w.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${y})`:void 0}}function g(w,y){w.key==="Enter"&&!e.disableSort&&n(y,w)}function c(w){const y=r.value.find(k=>k.key===w.key);return!y&&e.initialSortOrder==="asc"||y?.order==="asc"?e.sortAscIcon:e.sortDescIcon}const{backgroundColorClasses:D,backgroundColorStyles:b}=St(()=>e.color),{displayClasses:x,mobile:V}=ye(e),P=I(()=>({headers:d.value,columns:v.value,toggleSort:n,isSorted:o,sortBy:r.value,someSelected:i.value,allSelected:s.value,selectAll:u,getSortIcon:c})),O=I(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},x.value,m.value]),$=w=>{let{column:y,x:k,y:B}=w;const ue=y.key==="data-table-select"||y.key==="data-table-expand",Q=y.key==="data-table-group"&&y.width===0&&!y.title,ie=A(e.headerProps??{},y.headerProps??{});return S(U,A({tag:"th",align:y.align,class:[{"v-data-table__th--sortable":y.sortable&&!e.disableSort,"v-data-table__th--sorted":o(y),"v-data-table__th--fixed":y.fixed},...O.value],style:{width:C(y.width),minWidth:C(y.minWidth),maxWidth:C(y.maxWidth),...p(y,B)},colspan:y.colspan,rowspan:y.rowspan,fixed:y.fixed,nowrap:y.nowrap,lastFixed:y.lastFixed,firstFixedEnd:y.firstFixedEnd,noPadding:ue,empty:Q,tabindex:y.sortable?0:void 0,onClick:y.sortable?R=>n(y,R):void 0,onKeydown:y.sortable?R=>g(R,y):void 0},ie),{default:()=>{const R=`header.${y.key}`,G={column:y,selectAll:u,isSorted:o,toggleSort:n,sortBy:r.value,someSelected:i.value,allSelected:s.value,getSortIcon:c};return l[R]?l[R](G):Q?"":y.key==="data-table-select"?l["header.data-table-select"]?.(G)??(f.value&&S(ne,{color:e.color,density:e.density,modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":u},null)):h("div",{class:"v-data-table-header__content"},[h("span",null,[y.title]),y.sortable&&!e.disableSort&&S(xe,{key:"icon",class:"v-data-table-header__sort-icon",icon:c(y)},null),e.multiSort&&o(y)&&h("div",{key:"badge",class:ae(["v-data-table-header__sort-badge",...D.value]),style:kt(b.value)},[r.value.findIndex(z=>z.key===y.key)+1])])}})},N=()=>{const w=I(()=>v.value.filter(k=>k?.sortable&&!e.disableSort)),y=v.value.find(k=>k.key==="data-table-select");return S(U,A({tag:"th",class:[...O.value],colspan:d.value.length+1},e.headerProps),{default:()=>[h("div",{class:"v-data-table-header__content"},[S(Oe,{chips:!0,color:e.color,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:w.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[]},{append:y?()=>S(ne,{color:e.color,density:"compact",modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":()=>u(!s.value)},null):void 0,chip:k=>S(Ct,{onClick:k.item.raw?.sortable?()=>n(k.item.raw):void 0,onMousedown:B=>{B.preventDefault(),B.stopPropagation()}},{default:()=>[k.item.title,S(xe,{class:ae(["v-data-table__td-sort-icon",o(k.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:c(k.item.raw),size:"small"},null)]})})])]})};Y(()=>V.value?h("tr",null,[S(N,null,null)]):h(j,null,[l.headers?l.headers(P.value):d.value.map((w,y)=>h("tr",null,[w.map((k,B)=>S($,{column:k,x:B,y},null))])),e.loading&&h("tr",{class:"v-data-table-progress"},[h("th",{colspan:v.value.length},[S(Pt,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"||e.loading==="true"?e.color:e.loading,indeterminate:!0},{default:l.loader})])])]))}}),aa=T({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Ke=Symbol.for("vuetify:data-table-group");function la(e){return{groupBy:M(e,"groupBy")}}function na(e){const{disableSort:t,groupBy:l,sortBy:a}=e,n=L(new Set),r=I(()=>l.value.map(f=>({...f,order:f.order??!1})).concat(t?.value?[]:a.value));function o(f){return n.value.has(f.id)}function i(f){const v=new Set(n.value);o(f)?v.delete(f.id):v.add(f.id),n.value=v}function s(f){function v(d){const m=[];for(const p of d.items)"type"in p&&p.type==="group"?m.push(...v(p)):m.push(p);return[...new Set(m)]}return v({items:f})}const u={sortByWithGroups:r,toggleGroup:i,opened:n,groupBy:l,extractRows:s,isGroupOpen:o};return K(Ke,u),u}function qe(){const e=W(Ke);if(!e)throw new Error("Missing group!");return e}function ra(e,t){if(!e.length)return[];const l=new Map;for(const a of e){const n=le(a.raw,t);l.has(n)||l.set(n,[]),l.get(n).push(a)}return l}function ze(e,t){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const n=ra(e,t[0]),r=[],o=t.slice(1);return n.forEach((i,s)=>{const u=t[0],f=`${a}_${u}_${s}`;r.push({depth:l,id:f,key:u,value:s,items:o.length?ze(i,o,l+1,f):i,type:"group"})}),r}function Ue(e,t,l){const a=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&a.push(n),(t.has(n.id)||n.value==null)&&(a.push(...Ue(n.items,t,l)),l&&a.push({...n,type:"group-summary"}))):a.push(n);return a}function oa(e,t,l,a){return{flatItems:I(()=>{if(!t.value.length)return e.value;const r=ze(e.value,t.value.map(o=>o.key));return Ue(r,l.value,It(a))})}}const Ye=T({item:{type:Object,required:!0},groupCollapseIcon:{type:_,default:"$tableGroupCollapse"},groupExpandIcon:{type:_,default:"$tableGroupExpand"},...he()},"VDataTableGroupHeaderRow"),sa=q()({name:"VDataTableGroupHeaderRow",props:Ye(),setup(e,t){let{slots:l}=t;const{isGroupOpen:a,toggleGroup:n,extractRows:r}=qe(),{isSelected:o,isSomeSelected:i,select:s}=se(),{columns:u}=oe(),f=I(()=>r([e.item])),v=F(()=>u.value.length-(u.value.some(d=>d.key==="data-table-select")?1:0));return()=>h("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(d=>{if(d.key==="data-table-group"){const m=a(e.item)?e.groupCollapseIcon:e.groupExpandIcon,p=()=>n(e.item);return l["data-table-group"]?.({item:e.item,count:f.value.length,props:{icon:m,onClick:p}})??S(U,{class:"v-data-table-group-header-row__column",colspan:v.value},{default:()=>[S(Ce,{size:"small",variant:"text",icon:m,onClick:p},null),h("span",null,[e.item.value]),h("span",null,[Se("("),f.value.length,Se(")")])]})}else if(d.key==="data-table-select"){const m=f.value.filter(D=>D.selectable),p=m.length>0&&o(m),g=i(m)&&!p,c=D=>s(m,D);return l["data-table-select"]?.({props:{modelValue:p,indeterminate:g,"onUpdate:modelValue":c}})??S(U,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[S(ne,{density:e.density,disabled:m.length===0,modelValue:p,indeterminate:g,"onUpdate:modelValue":c},null)]})}return""})])}}),ua=T({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Qe=Symbol.for("vuetify:datatable:expanded");function ia(e){const t=F(()=>e.expandOnClick),l=M(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function a(i,s){const u=new Set(l.value),f=J(i.value);if(s)u.add(f);else{const v=[...l.value].find(d=>J(d)===f);u.delete(v)}l.value=u}function n(i){const s=J(i.value);return[...l.value].some(u=>J(u)===s)}function r(i){a(i,!n(i))}const o={expand:a,expanded:l,expandOnClick:t,isExpanded:n,toggleExpand:r};return K(Qe,o),o}function Xe(){const e=W(Qe);if(!e)throw new Error("foo");return e}const Ze=T({color:String,index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:_,default:"$collapse"},expandIcon:{type:_,default:"$expand"},onClick:ce(),onContextmenu:ce(),onDblclick:ce(),...he(),...be()},"VDataTableRow"),da=q()({name:"VDataTableRow",props:Ze(),setup(e,t){let{slots:l}=t;const{displayClasses:a,mobile:n}=ye(e,"v-data-table__tr"),{isSelected:r,toggleSelect:o,someSelected:i,allSelected:s,selectAll:u}=se(),{isExpanded:f,toggleExpand:v}=Xe(),{toggleSort:d,sortBy:m,isSorted:p}=je(),{columns:g}=oe();Y(()=>h("tr",{class:ae(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&g.value.map((c,D)=>{const b=e.item,x=`item.${c.key}`,V=`header.${c.key}`,P={index:e.index,item:b.raw,internalItem:b,value:le(b.columns,c.key),column:c,isSelected:r,toggleSelect:o,isExpanded:f,toggleExpand:v},O={column:c,selectAll:u,isSorted:p,toggleSort:d,sortBy:m.value,someSelected:i.value,allSelected:s.value,getSortIcon:()=>""},$=typeof e.cellProps=="function"?e.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value,column:c}):e.cellProps,N=typeof c.cellProps=="function"?c.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value}):c.cellProps,w=c.key==="data-table-select"||c.key==="data-table-expand",y=c.key==="data-table-group"&&c.width===0&&!c.title;return S(U,A({align:c.align,indent:c.indent,class:{"v-data-table__td--expanded-row":c.key==="data-table-expand","v-data-table__td--select-row":c.key==="data-table-select"},fixed:c.fixed,fixedOffset:c.fixedOffset,fixedEndOffset:c.fixedEndOffset,lastFixed:c.lastFixed,firstFixedEnd:c.firstFixedEnd,maxWidth:n.value?void 0:c.maxWidth,noPadding:w,empty:y,nowrap:c.nowrap,width:n.value?void 0:c.width},$,N),{default:()=>{if(c.key==="data-table-select")return l["item.data-table-select"]?.({...P,props:{color:e.color,disabled:!b.selectable,modelValue:r([b]),onClick:ee(()=>o(b),["stop"])}})??S(ne,{color:e.color,disabled:!b.selectable,density:e.density,modelValue:r([b]),onClick:ee(B=>o(b,e.index,B),["stop"])},null);if(c.key==="data-table-expand")return l["item.data-table-expand"]?.({...P,props:{icon:f(b)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ee(()=>v(b),["stop"])}})??S(Ce,{icon:f(b)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ee(()=>v(b),["stop"])},null);if(l[x]&&!n.value)return l[x](P);const k=Dt(P.value);return n.value?h(j,null,[h("div",{class:"v-data-table__td-title"},[l[V]?.(O)??c.title]),h("div",{class:"v-data-table__td-value"},[l[x]?.(P)??k])]):k}})})]))}}),Je=T({color:String,loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...fe(Ze(),["collapseIcon","expandIcon","density"]),...fe(Ye(),["groupCollapseIcon","groupExpandIcon","density"]),...be()},"VDataTableRows"),Ve=q()({name:"VDataTableRows",inheritAttrs:!1,props:Je(),setup(e,t){let{attrs:l,slots:a}=t;const{columns:n}=oe(),{expandOnClick:r,toggleExpand:o,isExpanded:i}=Xe(),{isSelected:s,toggleSelect:u}=se(),{toggleGroup:f,isGroupOpen:v}=qe(),{t:d}=re(),{mobile:m}=ye(e);return Y(()=>{const p=fe(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||a.loading)?h("tr",{class:"v-data-table-rows-loading",key:"loading"},[h("td",{colspan:n.value.length},[a.loading?.()??d(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?h("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[h("td",{colspan:n.value.length},[a["no-data"]?.()??d(e.noDataText)])]):h(j,null,[e.items.map((g,c)=>{if(g.type==="group"){const x={index:c,item:g,columns:n.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:u,toggleGroup:f,isGroupOpen:v};return a["group-header"]?a["group-header"](x):S(sa,A({key:`group-header_${g.id}`,item:g},ke(l,":groupHeader",()=>x),p),a)}if(g.type==="group-summary"){const x={index:c,item:g,columns:n.value,toggleGroup:f};return a["group-summary"]?.(x)??""}const D={index:g.virtualIndex??c,item:g.raw,internalItem:g,columns:n.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:u},b={...D,props:A({key:`item_${g.key??g.index}`,onClick:r.value?()=>{o(g)}:void 0,index:c,item:g,color:e.color,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:m.value},ke(l,":row",()=>D),typeof e.rowProps=="function"?e.rowProps({item:D.item,index:D.index,internalItem:D.internalItem}):e.rowProps)};return h(j,{key:b.props.key},[a.item?a.item(b):S(da,b.props,a),i(g)&&a["expanded-row"]?.(D)])})])}),{}}}),ca=T({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function fa(e,t,l,a){const n=e.returnObject?t:te(t,e.itemValue),r=te(t,e.itemSelectable,!0),o=a.reduce((i,s)=>(s.key!=null&&(i[s.key]=te(t,s.value)),i),{});return{type:"item",key:e.returnObject?te(t,e.itemValue):n,index:l,value:n,selectable:r,columns:o,raw:t}}function ga(e,t,l){return t.map((a,n)=>fa(e,a,n,l))}function ma(e,t){return{items:I(()=>ga(e,e.items,t.value))}}function va(e){let{page:t,itemsPerPage:l,sortBy:a,groupBy:n,search:r}=e;const o=Te("VDataTable"),i=()=>({page:t.value,itemsPerPage:l.value,sortBy:a.value,groupBy:n.value,search:r.value});let s=null;me(i,u=>{Fe(s,u)||(s&&s.search!==u.search&&(t.value=1),o.emit("update:options",u),s=u)},{deep:!0,immediate:!0})}const ya=T({...Je(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ua(),...aa(),...$t(),...ca(),...Ut(),...Qt(),...ve(We(),["multiSort","initialSortOrder"]),...Ot()},"DataTable"),ba=T({..._t(),...ya(),...Et(),...Ee()},"VDataTable"),Ia=q()({name:"VDataTable",props:ba(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:l,slots:a}=t;const{groupBy:n}=la(e),{initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s}=Xt(e),{page:u,itemsPerPage:f}=At(e),{disableSort:v}=Vt(e),{columns:d,headers:m,sortFunctions:p,sortRawFunctions:g,filterFunctions:c}=Kt(e,{groupBy:n,showSelect:F(()=>e.showSelect),showExpand:F(()=>e.showExpand)}),{items:D}=ma(e,d),b=F(()=>e.search),{filteredItems:x}=Bt(e,D,b,{transform:H=>H.columns,customKeyFilter:c}),{toggleSort:V}=Jt({initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s,page:u}),{sortByWithGroups:P,opened:O,extractRows:$,isGroupOpen:N,toggleGroup:w}=na({groupBy:n,sortBy:o,disableSort:v}),{sortedItems:y}=ea(e,x,P,{transform:H=>({...H.raw,...H.columns}),sortFunctions:p,sortRawFunctions:g}),{flatItems:k}=oa(y,n,O,()=>!!a["group-summary"]),B=I(()=>k.value.length),{startIndex:ue,stopIndex:Q,pageCount:ie,setItemsPerPage:R}=Nt({page:u,itemsPerPage:f,itemsLength:B}),{paginatedItems:G}=Ht({items:k,startIndex:ue,stopIndex:Q,itemsPerPage:f}),z=I(()=>$(G.value)),{isSelected:et,select:tt,selectAll:at,toggleSelect:lt,someSelected:nt,allSelected:rt}=Yt(e,{allItems:D,currentPage:z}),{isExpanded:ot,toggleExpand:st}=ia(e);va({page:u,itemsPerPage:f,sortBy:o,groupBy:n,search:b}),Tt({VDataTableRows:{hideNoData:F(()=>e.hideNoData),noDataText:F(()=>e.noDataText),loading:F(()=>e.loading),loadingText:F(()=>e.loadingText)}});const E=I(()=>({page:u.value,itemsPerPage:f.value,sortBy:o.value,pageCount:ie.value,toggleSort:V,setItemsPerPage:R,someSelected:nt.value,allSelected:rt.value,isSelected:et,select:tt,selectAll:at,toggleSelect:lt,isExpanded:ot,toggleExpand:st,isGroupOpen:N,toggleGroup:w,items:z.value.map(H=>H.raw),internalItems:z.value,groupedItems:G.value,columns:d.value,headers:m.value}));return Y(()=>{const H=Ie.filterProps(e),ut=De.filterProps(ve(e,["multiSort"])),it=Ve.filterProps(e),dt=we.filterProps(e);return S(we,A({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},dt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(E.value),default:()=>a.default?a.default(E.value):h(j,null,[a.colgroup?.(E.value),!e.hideDefaultHeader&&h("thead",{key:"thead"},[S(De,A(ut,{multiSort:!!e.multiSort}),a)]),a.thead?.(E.value),!e.hideDefaultBody&&h("tbody",null,[a["body.prepend"]?.(E.value),a.body?a.body(E.value):S(Ve,A(l,it,{items:G.value}),a),a["body.append"]?.(E.value)]),a.tbody?.(E.value),a.tfoot?.(E.value)]),bottom:()=>a.bottom?a.bottom(E.value):!e.hideDefaultFooter&&h(j,null,[S(Ft,null,null),S(Ie,H,{prepend:a["footer.prepend"]})])})}),{}}});export{Ia as V,Xt as a,At as b,la as c,Kt as d,na as e,Nt as f,oa as g,Yt as h,ia as i,va as j,Ie as k,De as l,Ve as m,Ee as n,ya as o,Jt as p,_t as q,ma as u};
