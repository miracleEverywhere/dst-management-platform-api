import{_ as F,i as g,c as x,o as m,k as t,A as T,F as w,v as V,y,G as _,n as D,l as a,t as l,b as A,f as z,w as s,a as o,V as C,aa as I,q as i,s as E,a9 as R,aF as k,p as S,B as M,C as P}from"./index-Dqn-Y2oB.js";import{m as L}from"./mod-BL5TPofj.js";import{V as u}from"./VChip-CmX9MwQH.js";import{V as j}from"./VTooltip-Bjc0UPOi.js";import{V as q}from"./VDialog-4tD0PapM.js";import{V as N,a as H}from"./VCard-CumNZJ-p.js";import{V as O}from"./VTable-BDswcqBV.js";import{V as W}from"./VContainer-Dvie4nEE.js";import"./axios-BhyVtIKS.js";import"./index-BMOSmf1z.js";import"./dialog-transition-qclFC1zN.js";/* empty css              */const G={class:"precise-rating"},U={class:"rating-container"},J={class:"stars-background"},K={key:0},Q={__name:"PreciseRating",props:{value:{type:Number,required:!0,validator:p=>p>=0},length:{type:Number,default:5},size:{type:[Number,String],default:"small"},color:{type:String,default:"#FFC107"},backgroundColor:{type:String,default:"#E0E0E0"},showActualValue:{type:Boolean,default:!0}},setup(p){const e=p,r=g(()=>{const n=Number(e.size);return isNaN(n)?{"x-small":16,small:24,default:24,medium:28,large:32,"x-large":36}[e.size]||24:n}),c=g(()=>Number(e.value).toFixed(1)),$=g(()=>{const n=r.value;return{position:"absolute",top:0,left:0,width:`${e.value*n}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex"}});return(n,h)=>(m(),x("div",G,[t("div",U,[t("div",J,[(m(!0),x(w,null,V(e.length,f=>(m(),y(_,{key:`star-bg-${f}`,color:e.backgroundColor,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))]),t("div",{style:D(a($)),class:"stars-foreground"},[(m(!0),x(w,null,V(e.length,f=>(m(),y(_,{key:`star-fg-${f}`,color:e.color,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))],4)]),e.showActualValue?(m(),x("span",K,l(a(c)),1)):T("",!0)]))}},B=F(Q,[["__scopeId","data-v-e8b0245b"]]);class X{constructor(e){this.codes=[],this.setCodes(e)}parse(e){return this.codes.reduce((r,c)=>r.replace(c.regexp,c.replacement),e)}add(e,r){return this.codes.push({regexp:new RegExp(e,"igms"),replacement:r}),this}setCodes(e){return this.codes=Object.keys(e).map(function(r){const c=e[r];return{regexp:new RegExp(r,"igms"),replacement:c}},this),this}}const Y=new X({"\\[br\\]":"<br>","\\[b\\](.+?)\\[/b\\]":"<strong>$1</strong>","\\[i\\](.+?)\\[/i\\]":"<em>$1</em>","\\[u\\](.+?)\\[/u\\]":"<u>$1</u>","\\[h1\\](.+?)\\[/h1\\]":"<h1>$1</h1>","\\[h2\\](.+?)\\[/h2\\]":"<h2>$1</h2>","\\[h3\\](.+?)\\[/h3\\]":"<h3>$1</h3>","\\[h4\\](.+?)\\[/h4\\]":"<h4>$1</h4>","\\[h5\\](.+?)\\[/h5\\]":"<h5>$1</h5>","\\[h6\\](.+?)\\[/h6\\]":"<h6>$1</h6>","\\[p\\](.+?)\\[/p\\]":"<p>$1</p>","\\[code\\](.+?)\\[/code\\]":"<pre>$1</pre>","\\[color=(.+?)\\](.+?)\\[/color\\]":'<span style="color:$1">$2</span>',"\\[size=([0-9]+)\\](.+?)\\[/size\\]":'<span style="font-size:$1px">$2</span>',"\\[img\\](.+?)\\[/img\\]":'<img src="$1">',"\\[img=(.+?)\\]":'<img src="$1">',"\\[email\\](.+?)\\[/email\\]":'<a href="mailto:$1">$1</a>',"\\[email=(.+?)\\](.+?)\\[/email\\]":'<a href="mailto:$1">$2</a>',"\\[url\\](.+?)\\[/url\\]":'<a href="$1">$1</a>',"\\[url=(.+?)\\|onclick\\](.+?)\\[/url\\]":'<a onclick="$1">$2</a>',"\\[url=(.+?)\\starget=(.+?)\\](.+?)\\[/url\\]":'<a href="$1" target="$2">$3</a>',"\\[url=(.+?)\\](.+?)\\[/url\\]":'<a href="$1">$2</a>',"\\[a=(.+?)\\](.+?)\\[/a\\]":'<a href="$1" name="$1">$2</a>',"\\[list\\](.+?)\\[/list\\]":"<ul>$1</ul>","\\[\\*\\](.+?)\\[/\\*\\]":"<li>$1</li>"}),Z={class:"fcc",style:{height:"135px"}},ee={style:{width:"80px",height:"80px"}},te={class:"fcc fill-height"},oe={style:{width:"200px"}},se={class:"fcc"},ae={style:{margin:"5px 0"},class:"fcc"},le={class:"fcc"},re={rowspan:"2",class:"text-center"},ie={rowspan:"2",class:"text-center"},ne={class:"fcc my-2",style:{width:"100%",height:"150px"}},ce={style:{width:"150px",height:"150px"}},de={class:"d-flex align-center justify-center fill-height"},ue={class:"text-center"},me={class:"text-center"},pe={class:"text-center"},he={class:"text-center"},_e={class:"text-center"},fe={class:"text-center"},ge={class:"text-center"},ve={class:"text-center"},xe={class:"text-center"},$e={class:"text-center"},be={class:"text-center"},ye={class:"text-center"},we={colspan:"3",class:"text-center"},Ve={class:"text-center"},ze={colspan:"3",class:"text-center"},Ce=["innerHTML"],Ie={__name:"modInfo",props:{mod:{type:Object,default:()=>({})},roomID:{type:Number,default:0}},setup(p){const e=p,{t:r}=A(),c=g(()=>parseFloat((e.mod.vote_data.score*5).toFixed(2))),$=g(()=>e.mod.name.length>20?e.mod.name.slice(0,20)+"...":e.mod.name),n=z(!1),h=z(!1),f=()=>{h.value=!0;const b={roomID:e.roomID,id:e.mod.id,file_url:e.mod.file_url,update:!1,size:e.mod.size,name:e.mod.name};L.download.post(b).then(d=>{P(d.message)}).finally(()=>{h.value=!1})};return(b,d)=>(m(),y(N,{hover:"",variant:"flat",height:"135",class:"cursor-auto"},{default:s(()=>[t("div",Z,[t("div",ee,[o(C,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:s(()=>[t("div",te,[o(I,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),t("div",oe,[t("div",se,[o(u,{label:"",size:"small",color:"primary"},{default:s(()=>[i(l(a($))+" ",1),o(j,{activator:"parent","open-delay":"300","scroll-strategy":"close"},{default:s(()=>[i(l(e.mod.name),1)]),_:1})]),_:1})]),t("div",ae,[o(B,{value:a(c),length:5,"show-actual-value":"",size:"24"},null,8,["value"])]),t("div",le,[o(q,{modelValue:a(n),"onUpdate:modelValue":d[1]||(d[1]=v=>E(n)?n.value=v:null),class:"flex-wrap","max-width":"60%"},{activator:s(({props:v})=>[o(S,M({color:"info",density:"compact",size:"small"},v,{class:"mr-4",onClick:d[0]||(d[0]=ke=>n.value=!0)}),{default:s(()=>[i(l(a(r)("game.mod.download.modInfo.detail")),1)]),_:1},16)]),default:s(({isActive:v})=>[o(N,{title:e.mod.name},{default:s(()=>[o(H,null,{default:s(()=>[o(O,{class:"custom-table"},{default:s(()=>[t("tbody",null,[t("tr",null,[t("td",re,[o(_,{icon:"ri-image-line",color:"info"})]),t("td",ie,[t("div",ne,[t("div",ce,[o(C,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:s(()=>[t("div",de,[o(I,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])])])]),d[2]||(d[2]=t("td",{class:"text-center"}," ID ",-1)),t("td",ue,[o(u,{color:"info",label:""},{default:s(()=>[i(l(e.mod.id),1)]),_:1})])]),t("tr",null,[t("td",me,l(a(r)("game.mod.download.modInfo.size")),1),t("td",pe,[o(u,{color:"info",label:""},{default:s(()=>[i(l(a(R)(e.mod.size)),1)]),_:1})])]),t("tr",null,[t("td",he,[o(_,{icon:"ri-thumb-up-fill",color:"success"})]),t("td",_e,[o(u,{color:"success",label:""},{default:s(()=>[i(l(e.mod.vote_data.votes_up),1)]),_:1})]),t("td",fe,[o(_,{icon:"ri-thumb-down-fill",color:"error"})]),t("td",ge,[o(u,{color:"error",label:""},{default:s(()=>[i(l(e.mod.vote_data.votes_down),1)]),_:1})])]),t("tr",null,[t("td",ve,l(a(r)("game.mod.download.modInfo.createTime")),1),t("td",xe,[o(u,{color:"success",label:""},{default:s(()=>[i(l(a(k)(e.mod.time_created*1e3)),1)]),_:1})]),t("td",$e,l(a(r)("game.mod.download.modInfo.updateTime")),1),t("td",be,[o(u,{color:"info",label:""},{default:s(()=>[i(l(a(k)(e.mod.time_updated*1e3)),1)]),_:1})])]),t("tr",null,[t("td",ye,l(a(r)("game.mod.download.modInfo.subscriptions")),1),t("td",we,[o(u,{color:"default",label:""},{default:s(()=>[i(l(e.mod.subscriptions),1)]),_:1})])]),t("tr",null,[t("td",Ve,[o(_,{icon:"ri-star-fill",color:"warning"})]),t("td",ze,[o(B,{value:a(c),length:5,"show-actual-value":!0,size:"24"},null,8,["value"])])])])]),_:1}),o(W,{height:"30vh"},{default:s(()=>[t("div",{innerHTML:a(Y).parse(e.mod.file_description)},null,8,Ce)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),o(S,{color:"success",density:"compact",size:"small",loading:a(h),onClick:f},{default:s(()=>[i(l(a(r)("game.mod.download.modInfo.download")),1)]),_:1},8,["loading"])])])])]),_:1}))}},je=F(Ie,[["__scopeId","data-v-2dc8a715"]]);export{je as default};
