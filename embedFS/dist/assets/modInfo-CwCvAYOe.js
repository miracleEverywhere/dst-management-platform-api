import{j as g,c as x,o as u,k as t,E as F,F as w,v as V,y as b,G as h,n as D,l,t as i,b as E,h as z,w as s,a as o,V as k,a9 as C,q as d,s as A,a8 as R,p as I,A as T,B as M}from"./index-1couzVnS.js";import{m as P}from"./mod-onfpovmv.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as _}from"./VChip-PyGbOgmV.js";import{V as j}from"./VTooltip-nVr9IgtD.js";import{V as L}from"./VDialog-C6E_y0YW.js";import{V as S,a as q}from"./VCard-C7H7Sju9.js";import{V as H}from"./VTable-BANBG2yo.js";import{V as O}from"./VContainer-D5-ngQbI.js";import"./axios-CB_SZHga.js";import"./index-BkP1PHzc.js";import"./dialog-transition-BfkTkg4N.js";/* empty css              */const W={class:"precise-rating"},G={class:"rating-container"},U={class:"stars-background"},J={key:0},K={__name:"PreciseRating",props:{value:{type:Number,required:!0,validator:m=>m>=0},length:{type:Number,default:5},size:{type:[Number,String],default:"small"},color:{type:String,default:"#FFC107"},backgroundColor:{type:String,default:"#E0E0E0"},showActualValue:{type:Boolean,default:!0}},setup(m){const e=m,a=g(()=>{const r=Number(e.size);return isNaN(r)?{"x-small":16,small:24,default:24,medium:28,large:32,"x-large":36}[e.size]||24:r}),n=g(()=>Number(e.value).toFixed(1)),$=g(()=>{const r=a.value;return{position:"absolute",top:0,left:0,width:`${e.value*r}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex"}});return(r,p)=>(u(),x("div",W,[t("div",G,[t("div",U,[(u(!0),x(w,null,V(e.length,f=>(u(),b(h,{key:`star-bg-${f}`,color:e.backgroundColor,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))]),t("div",{style:D(l($)),class:"stars-foreground"},[(u(!0),x(w,null,V(e.length,f=>(u(),b(h,{key:`star-fg-${f}`,color:e.color,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))],4)]),e.showActualValue?(u(),x("span",J,i(l(n)),1)):F("",!0)]))}},N=B(K,[["__scopeId","data-v-e8b0245b"]]);class Q{constructor(e){this.codes=[],this.setCodes(e)}parse(e){return this.codes.reduce((a,n)=>a.replace(n.regexp,n.replacement),e)}add(e,a){return this.codes.push({regexp:new RegExp(e,"igms"),replacement:a}),this}setCodes(e){return this.codes=Object.keys(e).map(function(a){const n=e[a];return{regexp:new RegExp(a,"igms"),replacement:n}},this),this}}const X=new Q({"\\[br\\]":"<br>","\\[b\\](.+?)\\[/b\\]":"<strong>$1</strong>","\\[i\\](.+?)\\[/i\\]":"<em>$1</em>","\\[u\\](.+?)\\[/u\\]":"<u>$1</u>","\\[h1\\](.+?)\\[/h1\\]":"<h1>$1</h1>","\\[h2\\](.+?)\\[/h2\\]":"<h2>$1</h2>","\\[h3\\](.+?)\\[/h3\\]":"<h3>$1</h3>","\\[h4\\](.+?)\\[/h4\\]":"<h4>$1</h4>","\\[h5\\](.+?)\\[/h5\\]":"<h5>$1</h5>","\\[h6\\](.+?)\\[/h6\\]":"<h6>$1</h6>","\\[p\\](.+?)\\[/p\\]":"<p>$1</p>","\\[code\\](.+?)\\[/code\\]":"<pre>$1</pre>","\\[color=(.+?)\\](.+?)\\[/color\\]":'<span style="color:$1">$2</span>',"\\[size=([0-9]+)\\](.+?)\\[/size\\]":'<span style="font-size:$1px">$2</span>',"\\[img\\](.+?)\\[/img\\]":'<img src="$1">',"\\[img=(.+?)\\]":'<img src="$1">',"\\[email\\](.+?)\\[/email\\]":'<a href="mailto:$1">$1</a>',"\\[email=(.+?)\\](.+?)\\[/email\\]":'<a href="mailto:$1">$2</a>',"\\[url\\](.+?)\\[/url\\]":'<a href="$1">$1</a>',"\\[url=(.+?)\\|onclick\\](.+?)\\[/url\\]":'<a onclick="$1">$2</a>',"\\[url=(.+?)\\starget=(.+?)\\](.+?)\\[/url\\]":'<a href="$1" target="$2">$3</a>',"\\[url=(.+?)\\](.+?)\\[/url\\]":'<a href="$1">$2</a>',"\\[a=(.+?)\\](.+?)\\[/a\\]":'<a href="$1" name="$1">$2</a>',"\\[list\\](.+?)\\[/list\\]":"<ul>$1</ul>","\\[\\*\\](.+?)\\[/\\*\\]":"<li>$1</li>"}),Y={class:"fcc",style:{height:"135px"}},Z={style:{width:"80px",height:"80px"}},ee={class:"fcc fill-height"},te={style:{width:"200px"}},oe={class:"fcc"},se={style:{margin:"5px 0"},class:"fcc"},ae={class:"fcc"},le={rowspan:"2",class:"text-center"},re={rowspan:"2",class:"text-center"},ie={class:"fcc my-2",style:{width:"100%",height:"150px"}},ne={style:{width:"150px",height:"150px"}},ce={class:"d-flex align-center justify-center fill-height"},de={class:"text-center"},ue={class:"text-center"},me={class:"text-center"},pe={class:"text-center"},he={class:"text-center"},fe={class:"text-center"},_e={class:"text-center"},ge={class:"text-center"},ve={colspan:"3",class:"text-center"},xe=["innerHTML"],$e={__name:"modInfo",props:{mod:{type:Object,default:()=>({})},roomID:{type:Number,default:0}},setup(m){const e=m,{t:a}=E(),n=g(()=>parseFloat((e.mod.vote_data.score*5).toFixed(2))),$=g(()=>e.mod.name.length>20?e.mod.name.slice(0,20)+"...":e.mod.name),r=z(!1),p=z(!1),f=()=>{p.value=!0;const y={roomID:e.roomID,id:e.mod.id,file_url:e.mod.file_url,update:!1,size:e.mod.size,name:e.mod.name};P.download.post(y).then(c=>{M(c.message)}).finally(()=>{p.value=!1})};return(y,c)=>(u(),b(S,{hover:"",variant:"flat",height:"135",class:"cursor-auto"},{default:s(()=>[t("div",Y,[t("div",Z,[o(k,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:s(()=>[t("div",ee,[o(C,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),t("div",te,[t("div",oe,[o(_,{label:"",size:"small",color:"primary"},{default:s(()=>[d(i(l($))+" ",1),o(j,{activator:"parent","open-delay":"300","scroll-strategy":"close"},{default:s(()=>[d(i(e.mod.name),1)]),_:1})]),_:1})]),t("div",se,[o(N,{value:l(n),length:5,"show-actual-value":"",size:"24"},null,8,["value"])]),t("div",ae,[o(L,{modelValue:l(r),"onUpdate:modelValue":c[1]||(c[1]=v=>A(r)?r.value=v:null),class:"flex-wrap","max-width":"60%"},{activator:s(({props:v})=>[o(I,T({color:"info",density:"compact",size:"small"},v,{class:"mr-4",onClick:c[0]||(c[0]=ye=>r.value=!0)}),{default:s(()=>[d(i(l(a)("game.mod.download.modInfo.detail")),1)]),_:1},16)]),default:s(({isActive:v})=>[o(S,{title:e.mod.name},{default:s(()=>[o(q,null,{default:s(()=>[o(H,{class:"custom-table"},{default:s(()=>[t("tbody",null,[t("tr",null,[t("td",le,[o(h,{icon:"ri-image-line"})]),t("td",re,[t("div",ie,[t("div",ne,[o(k,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:s(()=>[t("div",ce,[o(C,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])])])]),c[2]||(c[2]=t("td",{class:"text-center"}," ID ",-1)),t("td",de,[o(_,{color:"info",label:""},{default:s(()=>[d(i(e.mod.id),1)]),_:1})])]),t("tr",null,[t("td",ue,i(l(a)("game.mod.download.modInfo.size")),1),t("td",me,[o(_,{color:"info",label:""},{default:s(()=>[d(i(l(R)(e.mod.size)),1)]),_:1})])]),t("tr",null,[t("td",pe,[o(h,{icon:"ri-thumb-up-fill",color:"success"})]),t("td",he,[o(_,{color:"success",label:""},{default:s(()=>[d(i(e.mod.vote_data.votes_up),1)]),_:1})]),t("td",fe,[o(h,{icon:"ri-thumb-down-fill",color:"error"})]),t("td",_e,[o(_,{color:"error",label:""},{default:s(()=>[d(i(e.mod.vote_data.votes_down),1)]),_:1})])]),t("tr",null,[t("td",ge,[o(h,{icon:"ri-star-fill",color:"warning"})]),t("td",ve,[o(N,{value:l(n),length:5,"show-actual-value":!0,size:"24"},null,8,["value"])])])])]),_:1}),o(O,{height:"30vh"},{default:s(()=>[t("div",{innerHTML:l(X).parse(e.mod.file_description)},null,8,xe)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),o(I,{color:"success",density:"compact",size:"small",loading:l(p),onClick:f},{default:s(()=>[d(i(l(a)("game.mod.download.modInfo.download")),1)]),_:1},8,["loading"])])])])]),_:1}))}},Ae=B($e,[["__scopeId","data-v-fd2df41c"]]);export{Ae as default};
