import{_ as N}from"./Result-DBHzZK3h.js";import R from"./log-DZfab6ot.js";import{g as q,b as E,h as u,f as F,a4 as H,N as T,y as f,o as s,w as l,a as o,k as b,c as _,t as h,l as e,s as B,q as I,F as z,p as D}from"./index-7Da7c_Ya.js";import{l as P}from"./logs-BAZtktw6.js";import{c as U,a as $,V as j}from"./VCard-CfP9hJBJ.js";import{V as A}from"./VSwitch-CpEafvhW.js";import{V as G}from"./VChip-CKZVCmsW.js";import{V as J}from"./VRow-BiQYX2vy.js";import{V as K}from"./VSpacer-BNPQDRnj.js";import{V as O}from"./VCol-CUWeDHjo.js";import{V as Q}from"./VNumberInput-B9Reu_NH.js";import"./VContainer-C3TPu6F4.js";/* empty css              */import"./preview-DGz5cUTS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-Cf6GdeVA.js";import"./index-DgH_XViZ.js";import"./VInput-XKGaG4uV.js";import"./VSelectionControl-DRs0COUd.js";import"./VTextField-DxxG2cPN.js";const W={class:"card-header"},X={key:0},Y={key:1},Z={class:"fcc"},ye={__name:"singleLog",props:{type:{type:String,default:""},chat:{type:Boolean,default:!1}},setup(L){const r=L,M=q(),{t:a}=E(),c=u(""),d=u(!0),i=u(0),v=u(!1),y=()=>{const t={roomID:M.room.id,worldID:0,logType:r.type,lines:i.value};P.content.get(t).then(n=>{n.data===null?c.value="":c.value=n.data.join(`
`),v.value=!0})};let m=null;const S=()=>{m=setInterval(()=>{d.value&&y()},2e3)},w=()=>{m&&(clearInterval(m),m=null)},k=()=>{let t=390;return r.chat&&(t=t+37),Math.round(Math.max(2,Math.floor(g.value-t))/22.5)},p=()=>{let t=0;return r.chat&&(t=37),Math.max(2,Math.floor(g.value-160-t))},g=u(window.innerHeight),x=H(()=>{g.value=window.innerHeight,i.value=k()},200);return F(async()=>{window.addEventListener("resize",x),i.value=k(),S()}),T(()=>{w(),window.removeEventListener("beforeunload",w),window.removeEventListener("resize",x)}),(t,n)=>{const C=N;return s(),f(j,{height:p(),flat:""},{default:l(()=>[o(U,{class:"my-2"},{default:l(()=>[b("div",W,[r.chat?(s(),_("span",X,h(e(a)("logs.current")),1)):(s(),_("span",Y,h(e(a)(`logs.${r.type}`)),1)),b("div",Z,[o(A,{modelValue:e(d),"onUpdate:modelValue":n[0]||(n[0]=V=>B(d)?d.value=V:null),color:"info","hide-details":""},{prepend:l(()=>[o(G,{color:"info"},{default:l(()=>[I(h(e(a)("logs.autoPull")),1)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),o($,null,{default:l(()=>[e(v)?(s(),_(z,{key:0},[e(c)?(s(),f(R,{key:0,content:e(c),height:p()-150},null,8,["content","height"])):(s(),f(C,{key:1,type:"info",height:p()-150,title:e(a)("logs.noContent")},null,8,["height","title"]))],64)):(s(),f(C,{key:1,type:"info",title:e(a)("logs.fetching"),height:p()-150},null,8,["title","height"])),o(J,{class:"my-4"},{default:l(()=>[o(K),o(O,{class:"d-flex align-center justify-end"},{default:l(()=>[o(Q,{modelValue:e(i),"onUpdate:modelValue":n[1]||(n[1]=V=>B(i)?i.value=V:null),label:e(a)("logs.line"),"hide-details":"",density:"compact",class:"mr-4","max-width":"120"},null,8,["modelValue","label"]),o(D,{onClick:y},{default:l(()=>[I(h(e(a)("logs.pull")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"])}}};export{ye as default};
