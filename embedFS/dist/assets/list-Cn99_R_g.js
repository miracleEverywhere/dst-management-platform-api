import{g as F,e as I,b as N,h as u,f as R,y as m,o as p,w as t,a as i,k as g,t as c,l,p as w,q as f,c as B,F as $,v as q,E as A,ac as K,s as E,B as V,ax as U}from"./index-C_c0Exnr.js";import{p as D}from"./player-92benmGl.js";import{c as z,a as M,V as j}from"./VCard-VsWPDAzG.js";import{V as G}from"./VContainer-yopbA40U.js";import{V as H}from"./VRow-CtxWkUAK.js";import{V as J}from"./VAlert-BkQATfBk.js";import{V as O}from"./VCol-DRXoMeFc.js";import{V as P}from"./VChip-ZB3BK_Db.js";import{V as Q}from"./VTextField-CkAuj97o.js";import"./axios-BVFJ0DVt.js";/* empty css              */import"./index-2Zdw3G9d.js";import"./VSlideGroup-MHUwctrw.js";import"./VInput-wpCm031A.js";const W={class:"card-header my-2"},X={key:0},Y={class:"d-flex align-center",style:{width:"160px"}},me={__name:"list",props:{listType:{type:String,default:""},height:{type:Number,default:0},uidmap:{type:Array,default:()=>[]}},setup(L){const s=L,v=F();I();const{t:o}=N(),_=u([]),k=u(!1),y=(d=!1)=>{k.value=!0;const a={roomID:v.room.id,listType:s.listType};D.list.get(a).then(e=>{_.value=e.data||[],d&&V(o("game.player.list.refreshSuccess"))}).finally(()=>{k.value=!1})},C=u(!1),T=(d,a)=>{C.value=!0;const e={roomID:v.room.id,listType:s.listType,uid:d,actionType:a};D.list.post(e).then(n=>{V(n.message),y()}).finally(()=>{C.value=!1})},h=u(!1),x=u(),r=u(""),S=()=>{h.value=!0,U(()=>{x.value.focus()})},b=()=>{if(r.value){if(!/^KU_/.test(r.value)){V(o("game.player.list.uidValid"),"error");return}T(r.value,"add")}h.value=!1,r.value=""};return R(()=>{y()}),(d,a)=>(p(),m(j,{class:"mt-4",height:s.height-70},{default:t(()=>[i(z,null,{default:t(()=>[g("div",W,[g("span",null,c(l(o)(`game.player.list.${s.listType}`)),1),i(w,{color:"default",onClick:a[0]||(a[0]=e=>y(!0))},{default:t(()=>[f(c(l(o)("game.player.list.refresh")),1)]),_:1})])]),_:1}),i(M,null,{default:t(()=>[i(G,{fluid:"",height:s.height-152,style:{"overflow-y":"auto"}},{default:t(()=>[i(H,null,{default:t(()=>[i(J,{color:"success",density:"compact"},{default:t(()=>[f(c(l(o)("game.player.list.tip")),1)]),_:1}),i(O,{class:"mt-4",cols:"12"}),(p(!0),B($,null,q(l(_),e=>(p(),m(P,{closable:"",color:"info",class:"mt-2 mr-2",label:"",size:"large","onClick:close":n=>T(e,"delete")},{default:t(()=>[f(c(e)+" ",1),(s.uidmap.find(n=>n.uid===e)?.nickname||"")!==""?(p(),B("span",X," ("+c(s.uidmap.find(n=>n.uid===e)?.nickname||"")+") ",1)):A("",!0)]),_:2},1032,["onClick:close"]))),256)),g("div",Y,[l(h)?(p(),m(Q,{key:0,ref_key:"inputRef",ref:x,modelValue:l(r),"onUpdate:modelValue":a[1]||(a[1]=e=>E(r)?r.value=e:null),density:"compact",placeholder:l(o)("game.player.list.placeholder"),class:"mt-4",onKeyup:K(b,["enter"]),onBlur:b},null,8,["modelValue","placeholder"])):(p(),m(w,{key:1,variant:"tonal","append-icon":"ri-add-line",color:"default",class:"mt-2 mr-2",onClick:S},{default:t(()=>[f(c(l(o)("game.player.list.add")),1)]),_:1}))])]),_:1})]),_:1},8,["height"])]),_:1})]),_:1},8,["height"]))}};export{me as default};
