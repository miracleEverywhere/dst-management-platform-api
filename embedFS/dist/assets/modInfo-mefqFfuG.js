import{_ as S,j as f,c as x,o as m,k as t,I as N,F as w,y as b,A as y,P as h,n as B,l,t as i,b as D,h as F,w as o,a as s,m as V,aI as z,v as d,x as E,V as k,p as A,af as P,s as C,D as R,E as T}from"./index-Dko6h61I.js";import{m as j}from"./mod-DkX3bPkp.js";import{V as _}from"./VChip-Cpf9DcpK.js";import{V as M}from"./VTooltip-D2U0vcGt.js";import{V as L}from"./VDialog-V3XQnnJi.js";import{V as q}from"./VTable-tNw6Xgpt.js";import{V as H}from"./VContainer-OY6vEFFH.js";import"./axios-CaD9VQvn.js";import"./index-qFXpRsB7.js";import"./VSlideGroup-COGSulbt.js";import"./dialog-transition-CSPvW42u.js";/* empty css              */const O={class:"precise-rating"},W={class:"rating-container"},U={class:"stars-background"},G={key:0},J={__name:"PreciseRating",props:{value:{type:Number,required:!0,validator:p=>p>=0},length:{type:Number,default:5},size:{type:[Number,String],default:"small"},color:{type:String,default:"#FFC107"},backgroundColor:{type:String,default:"#E0E0E0"},showActualValue:{type:Boolean,default:!0}},setup(p){const e=p,a=f(()=>{const r=Number(e.size);return isNaN(r)?{"x-small":16,small:24,default:24,medium:28,large:32,"x-large":36}[e.size]||24:r}),n=f(()=>Number(e.value).toFixed(1)),$=f(()=>{const r=a.value;return{position:"absolute",top:0,left:0,width:`${e.value*r}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex"}});return(r,g)=>(m(),x("div",O,[t("div",W,[t("div",U,[(m(!0),x(w,null,b(e.length,u=>(m(),y(h,{key:`star-bg-${u}`,color:e.backgroundColor,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))]),t("div",{style:B(l($)),class:"stars-foreground"},[(m(!0),x(w,null,b(e.length,u=>(m(),y(h,{key:`star-fg-${u}`,color:e.color,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))],4)]),e.showActualValue?(m(),x("span",G,i(l(n)),1)):N("",!0)]))}},I=S(J,[["__scopeId","data-v-82ef83df"]]);class K{constructor(e){this.codes=[],this.setCodes(e)}parse(e){return this.codes.reduce((a,n)=>a.replace(n.regexp,n.replacement),e)}add(e,a){return this.codes.push({regexp:new RegExp(e,"igms"),replacement:a}),this}setCodes(e){return this.codes=Object.keys(e).map(function(a){const n=e[a];return{regexp:new RegExp(a,"igms"),replacement:n}},this),this}}const Q=new K({"\\[br\\]":"<br>","\\[b\\](.+?)\\[/b\\]":"<strong>$1</strong>","\\[i\\](.+?)\\[/i\\]":"<em>$1</em>","\\[u\\](.+?)\\[/u\\]":"<u>$1</u>","\\[h1\\](.+?)\\[/h1\\]":"<h1>$1</h1>","\\[h2\\](.+?)\\[/h2\\]":"<h2>$1</h2>","\\[h3\\](.+?)\\[/h3\\]":"<h3>$1</h3>","\\[h4\\](.+?)\\[/h4\\]":"<h4>$1</h4>","\\[h5\\](.+?)\\[/h5\\]":"<h5>$1</h5>","\\[h6\\](.+?)\\[/h6\\]":"<h6>$1</h6>","\\[p\\](.+?)\\[/p\\]":"<p>$1</p>","\\[code\\](.+?)\\[/code\\]":"<pre>$1</pre>","\\[color=(.+?)\\](.+?)\\[/color\\]":'<span style="color:$1">$2</span>',"\\[size=([0-9]+)\\](.+?)\\[/size\\]":'<span style="font-size:$1px">$2</span>',"\\[img\\](.+?)\\[/img\\]":'<img src="$1">',"\\[img=(.+?)\\]":'<img src="$1">',"\\[email\\](.+?)\\[/email\\]":'<a href="mailto:$1">$1</a>',"\\[email=(.+?)\\](.+?)\\[/email\\]":'<a href="mailto:$1">$2</a>',"\\[url\\](.+?)\\[/url\\]":'<a href="$1">$1</a>',"\\[url=(.+?)\\|onclick\\](.+?)\\[/url\\]":'<a onclick="$1">$2</a>',"\\[url=(.+?)\\starget=(.+?)\\](.+?)\\[/url\\]":'<a href="$1" target="$2">$3</a>',"\\[url=(.+?)\\](.+?)\\[/url\\]":'<a href="$1">$2</a>',"\\[a=(.+?)\\](.+?)\\[/a\\]":'<a href="$1" name="$1">$2</a>',"\\[list\\](.+?)\\[/list\\]":"<ul>$1</ul>","\\[\\*\\](.+?)\\[/\\*\\]":"<li>$1</li>"}),X={style:{display:"flex","align-items":"center",margin:"5px",width:"320px"}},Y={style:{width:"80px",height:"80px"}},Z={class:"d-flex align-center justify-center fill-height"},ee={style:{width:"200px"}},te={class:"fcc"},se={style:{margin:"5px 0"},class:"fcc"},oe={class:"fcc"},ae={rowspan:"2",class:"text-center"},le={rowspan:"2",class:"text-center"},re={class:"fcc my-2",style:{width:"100%",height:"150px"}},ie={style:{width:"150px",height:"150px"}},ne={class:"d-flex align-center justify-center fill-height"},ce={class:"text-center"},de={class:"text-center"},ue={class:"text-center"},me={class:"text-center"},pe={class:"text-center"},he={class:"text-center"},_e={class:"text-center"},fe={class:"text-center"},ge={colspan:"3",class:"text-center"},ve=["innerHTML"],xe={__name:"modInfo",props:{mod:{type:Object,default:{}},roomID:{type:Number,default:0}},setup(p){const e=p,{t:a}=D(),n=f(()=>parseFloat((e.mod.vote_data.score*5).toFixed(2))),$=f(()=>e.mod.name.length>20?e.mod.name.slice(0,20)+"...":e.mod.name),r=F(!1),g=()=>{const u={roomID:e.roomID,id:e.mod.id,file_url:e.mod.file_url};j.download.post(u).then(c=>{T(c.message)})};return(u,c)=>(m(),y(k,{hover:!0,variant:"flat",height:"135",class:"fcc cursor-auto"},{default:o(()=>[t("div",X,[t("div",Y,[s(V,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:o(()=>[t("div",Z,[s(z,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),t("div",ee,[t("div",te,[s(_,{label:"",size:"small",color:"primary"},{default:o(()=>[d(i(l($))+" ",1),s(M,{activator:"parent","open-delay":"300","scroll-strategy":"close"},{default:o(()=>[d(i(e.mod.name),1)]),_:1})]),_:1})]),t("div",se,[s(I,{value:l(n),length:5,"show-actual-value":!0,size:"24"},null,8,["value"])]),t("div",oe,[s(L,{modelValue:l(r),"onUpdate:modelValue":c[1]||(c[1]=v=>E(r)?r.value=v:null),class:"flex-wrap","max-width":"60%"},{activator:o(({props:v})=>[s(C,R({color:"info",density:"compact",size:"small"},v,{class:"mr-4",onClick:c[0]||(c[0]=$e=>r.value=!0)}),{default:o(()=>[d(i(l(a)("game.mod.download.modInfo.detail")),1)]),_:1},16)]),default:o(({isActive:v})=>[s(k,{title:e.mod.name},{default:o(()=>[s(A,null,{default:o(()=>[s(q,{class:"custom-table"},{default:o(()=>[t("tbody",null,[t("tr",null,[t("td",ae,[s(h,{icon:"ri-image-line"})]),t("td",le,[t("div",re,[t("div",ie,[s(V,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:o(()=>[t("div",ne,[s(z,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])])])]),c[2]||(c[2]=t("td",{class:"text-center"}," ID ",-1)),t("td",ce,[s(_,{color:"info",label:""},{default:o(()=>[d(i(e.mod.id),1)]),_:1})])]),t("tr",null,[t("td",de,i(l(a)("game.mod.download.modInfo.size")),1),t("td",ue,[s(_,{color:"info",label:""},{default:o(()=>[d(i(l(P)(e.mod.size)),1)]),_:1})])]),t("tr",null,[t("td",me,[s(h,{icon:"ri-thumb-up-fill",color:"success"})]),t("td",pe,[s(_,{color:"success",label:""},{default:o(()=>[d(i(e.mod.vote_data.votes_up),1)]),_:1})]),t("td",he,[s(h,{icon:"ri-thumb-down-fill",color:"error"})]),t("td",_e,[s(_,{color:"error",label:""},{default:o(()=>[d(i(e.mod.vote_data.votes_down),1)]),_:1})])]),t("tr",null,[t("td",fe,[s(h,{icon:"ri-star-fill",color:"warning"})]),t("td",ge,[s(I,{value:l(n),length:5,"show-actual-value":!0,size:"24"},null,8,["value"])])])])]),_:1}),s(H,{height:"30vh"},{default:o(()=>[t("div",{innerHTML:l(Q).parse(e.mod.file_description)},null,8,ve)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),s(C,{color:"success",density:"compact",size:"small",onClick:g},{default:o(()=>[d(i(l(a)("game.mod.download.modInfo.download")),1)]),_:1})])])])]),_:1}))}},Fe=S(xe,[["__scopeId","data-v-16c92305"]]);export{Fe as default};
