import{_ as N}from"./Result-C6ff7QL2.js";import R from"./log-BkhWg4j4.js";import{g as q,b as E,h as c,f as F,a4 as H,N as T,y as p,o as n,w as l,a as o,k as b,c as _,t as f,l as e,s as B,q as I,F as z,p as D}from"./index-Cpi_5jeC.js";import{l as P}from"./logs-BXa1TN8m.js";import{c as U,a as $,V as j}from"./VCard-ZqPzOf5v.js";import{V as A}from"./VSwitch-W6MthjwB.js";import{V as G}from"./VChip-Bh9Ug9id.js";import{V as J}from"./VRow-Btq46u2M.js";import{V as K}from"./VSpacer-DElNdgDF.js";import{V as O}from"./VCol-Br9p8SvW.js";import{V as Q}from"./VNumberInput-BX60DGbn.js";import"./VContainer-BaYWzqnG.js";/* empty css              */import"./preview-_z7N7_jy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-DcC5xP6t.js";import"./index-C79QJLOU.js";import"./VInput-0HHYP18N.js";import"./VSelectionControl-DnzLro3k.js";import"./VTextField-DYhVUV9X.js";const W={class:"card-header"},X={key:0},Y={key:1},Z={class:"fcc"},ye={__name:"singleLog",props:{type:{type:String,default:""},chat:{type:Boolean,default:!1}},setup(L){const i=L,M=q(),{t:a}=E(),h=c(""),u=c(!0),s=c(0),v=c(!1),y=()=>{const t={roomID:M.room.id,worldID:0,logType:i.type,lines:s.value};P.content.get(t).then(r=>{h.value=r.data.join(`
`),v.value=!0})};let d=null;const S=()=>{d=setInterval(()=>{u.value&&y()},2e3)},w=()=>{d&&(clearInterval(d),d=null)},k=()=>{let t=390;return i.chat&&(t=t+37),Math.round(Math.max(2,Math.floor(g.value-t))/22.5)},m=()=>{let t=0;return i.chat&&(t=37),Math.max(2,Math.floor(g.value-160-t))},g=c(window.innerHeight),x=H(()=>{g.value=window.innerHeight,s.value=k()},200);return F(async()=>{window.addEventListener("resize",x),s.value=k(),S()}),T(()=>{w(),window.removeEventListener("beforeunload",w),window.removeEventListener("resize",x)}),(t,r)=>{const C=N;return n(),p(j,{height:m(),flat:""},{default:l(()=>[o(U,{class:"my-2"},{default:l(()=>[b("div",W,[i.chat?(n(),_("span",X,f(e(a)("logs.current")),1)):(n(),_("span",Y,f(e(a)(`logs.${i.type}`)),1)),b("div",Z,[o(A,{modelValue:e(u),"onUpdate:modelValue":r[0]||(r[0]=V=>B(u)?u.value=V:null),color:"info","hide-details":""},{prepend:l(()=>[o(G,{color:"info"},{default:l(()=>[I(f(e(a)("logs.autoPull")),1)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),o($,null,{default:l(()=>[e(v)?(n(),_(z,{key:0},[e(h)?(n(),p(R,{key:0,content:e(h),height:m()-150},null,8,["content","height"])):(n(),p(C,{key:1,type:"info",height:m()-150,title:e(a)("logs.noContent")},null,8,["height","title"]))],64)):(n(),p(C,{key:1,type:"info",title:e(a)("logs.fetching"),height:m()-150},null,8,["title","height"])),o(J,{class:"my-4"},{default:l(()=>[o(K),o(O,{class:"d-flex align-center justify-end"},{default:l(()=>[o(Q,{modelValue:e(s),"onUpdate:modelValue":r[1]||(r[1]=V=>B(s)?s.value=V:null),label:e(a)("logs.line"),"hide-details":"",density:"compact",class:"mr-4","max-width":"120"},null,8,["modelValue","label"]),o(D,{onClick:y},{default:l(()=>[I(f(e(a)("logs.pull")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"])}}};export{ye as default};
