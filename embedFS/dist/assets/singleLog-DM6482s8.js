import{_ as N}from"./Result-CYRmgfzl.js";import R from"./log-3o7TIbZU.js";import{g as E,e as F,b as H,f as u,j as T,a7 as j,Q as q,A as c,o,w as a,a as l,aa as z,k as b,c as v,t as h,l as e,x as B,v as I,p as P,F as U,D as $,s as A,V as Q}from"./index-ClrSl1t3.js";import{l as G}from"./logs-BADwtSnd.js";import{V as J}from"./VSwitch-DkVkeV9a.js";import{V as K}from"./VChip-DSSyFDgp.js";import{V as O}from"./VRow-CbuO1l1g.js";import{V as W}from"./VSpacer-B5Fd494L.js";import{V as X}from"./VCol-sdmSdw58.js";import{V as Y}from"./VNumberInput-Cc1k7RDx.js";import"./VContainer-D204xFB2.js";/* empty css              */import"./preview-aYiaw0yR.js";import"./axios-DEwtRmaY.js";import"./index-rIMhUL3t.js";import"./VInput-Dh0vzV9z.js";import"./VSelectionControl-DRns-ek4.js";import"./VTextField-C20ssUm5.js";const Z={class:"card-header"},ee={key:0},te={key:1},oe={class:"fcc"},we={__name:"singleLog",props:{type:{type:String,default:""},chat:{type:Boolean,default:!1}},setup(L){const r=L,M=E(),{mobile:S}=F(),{t:n}=H(),d=u(""),m=u(!0),i=u(0),_=u(!1),y=()=>{const t={roomID:M.room.id,worldID:0,logType:r.type,lines:i.value};G.content.get(t).then(s=>{s.data===null?d.value="":d.value=s.data.join(`
`),_.value=!0})};let p=null;const D=()=>{p=setInterval(()=>{m.value&&y()},2e3)},w=()=>{p&&(clearInterval(p),p=null)},k=()=>{let t=390;return r.chat&&(t=t+37),Math.round(Math.max(2,Math.floor(g.value-t))/22.5)},f=()=>{let t=0;return r.chat&&(t=37),Math.max(2,Math.floor(g.value-160-t))},g=u(window.innerHeight),x=j(()=>{g.value=window.innerHeight,i.value=k()},200);return T(async()=>{window.addEventListener("resize",x),i.value=k(),D()}),q(()=>{w(),window.removeEventListener("beforeunload",w),window.removeEventListener("resize",x)}),(t,s)=>{const C=N;return o(),c(Q,{height:f(),flat:""},{default:a(()=>[l(z,{class:"my-2"},{default:a(()=>[b("div",Z,[r.chat?(o(),v("span",ee,h(e(n)("logs.current")),1)):(o(),v("span",te,h(e(n)(`logs.${r.type}`)),1)),b("div",oe,[l(J,{modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=V=>B(m)?m.value=V:null),color:"info","hide-details":""},{prepend:a(()=>[l(K,{color:"info"},{default:a(()=>[I(h(e(n)("logs.autoPull")),1)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),l(P,null,{default:a(()=>[e(_)?(o(),v(U,{key:0},[e(d)?(o(),c(R,{key:0,content:e(d),height:f()-150},null,8,["content","height"])):(o(),c(C,{key:1,type:"info",height:f()-150,title:e(n)("logs.noContent")},null,8,["height","title"]))],64)):(o(),c(C,{key:1,type:"info",title:e(n)("logs.fetching"),height:f()-150},null,8,["title","height"])),l(O,{class:"my-4"},{default:a(()=>[e(S)?$("",!0):(o(),c(W,{key:0})),l(X,{class:"d-flex align-center justify-end"},{default:a(()=>[l(Y,{modelValue:e(i),"onUpdate:modelValue":s[1]||(s[1]=V=>B(i)?i.value=V:null),label:e(n)("logs.line"),"hide-details":"",density:"compact",class:"mr-4","max-width":"120"},null,8,["modelValue","label"]),l(A,{onClick:y},{default:a(()=>[I(h(e(n)("logs.pull")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"])}}};export{we as default};
