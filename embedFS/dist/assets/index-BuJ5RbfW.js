import{_ as la}from"./ConfirmBox-V_kHtjMK.js";import{_ as ta}from"./Result-DgP0Q5NP.js";import{h as f,g as oa,d as da,e as ra,b as na,a2 as sa,f as ia,a3 as ua,a4 as ca,a5 as ma,c as M,l as e,o as s,y as i,F as T,a as l,w as a,q as n,t as r,x as g,p,W as fa,s as F,m as ba,a6 as A,a7 as qe,P as ge,Q as he,G as te,E as W,a8 as Re,V as pa,k as S,a9 as va,aa as ze,v as Be,ab as Ee,B as ye}from"./index-DSqAz1aK.js";import{h as G}from"./axios-lI9Ovfql.js";import{c as oe}from"./colors-DoZdCu1D.js";import{m as ga}from"./mod-9teWDq5I.js";import{V as h}from"./VCol-Q6N_ObRy.js";import{V as D,c as $,a as C,b as de}from"./VCard-DJ_zJ5IC.js";import{V as k}from"./VRow-DoMtucbK.js";import{V as u}from"./VChip-DOXEbDsk.js";import{T as y}from"./index-V2kcKAJH.js";import{V as P}from"./VDialog-CVPb8jcC.js";import{V as ha}from"./VForm-RbhycSUU.js";import{V as Ae}from"./VAlert-D6YaGqYk.js";import{V as ke}from"./VTextField-l-FdgV9P.js";import{V as ya}from"./VNumberInput-CHPQGelO.js";import{V as Q}from"./VSpacer-Ds6AzTck.js";import{V as We}from"./VDataTable-BMT0ptc-.js";import{V as Ge}from"./VMenu-D73OD9NE.js";import{V as Pe}from"./VList-BEO0zeM6.js";import{V as ka}from"./VSkeletonLoader-DzKgvitt.js";import{V as je}from"./VSparkline-DibYNqe6.js";import{V as Oe,a as re}from"./VRadioGroup-CcKXPp9t.js";import{V as He}from"./VSelect-DxoiOzce.js";import{V as _a}from"./VSwitch-CHzJJw3C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VContainer-B5popFB1.js";/* empty css              */import"./index-9rJqgBB5.js";import"./VSlideGroup-BYN7qME8.js";import"./VTooltip-MXsloRat.js";import"./dialog-transition-BcXBGmd8.js";import"./VInput-BKyi7uEB.js";import"./VPagination-CiEfj4as.js";import"./VCheckboxBtn-BRs82zRR.js";import"./VSelectionControl-BBgZzpZM.js";import"./VTable-CUNexpgN.js";import"./filter-BwAfjlZ8.js";import"./ssrBoot-DOEArNsD.js";const q={exec:{game:{url:"/dashboard/exec/game",post:async function(w){return await G.post(this.url,w)}}},info:{base:{url:"/dashboard/info/base",get:async function(w){return await G.get(this.url,w)}},sys:{url:"/dashboard/info/sys",get:async function(w){return await G.get(this.url,w)}}},connectionCode:{url:"/dashboard/connection_code",get:async function(w){return await G.get(this.url,w)},put:async function(w){return await G.put(this.url,w)}},check:{lobby:{url:"/dashboard/check/lobby",post:async function(w){return await G.post(this.url,w)}}}},wa={class:"d-flex align-center justify-center fill-height"},Va={class:"fcc"},Ca={class:"ml-2"},xa={class:"d-flex align-center justify-center"},Ia={class:"mr-2 ml-1"},Da={class:"ml-2"},fl={__name:"index",setup(w){const _e=f(window.innerHeight),x=oa(),we=da(),{mobile:L}=ra(),{t}=na(),c=f(),ne=f(),j=f(0),se=async()=>{if(x.room.id===0)return;const m={roomID:x.room.id},o=await q.info.base.get(m);c.value=o.data},U=f(),Ve=["#f72047","#ffd200","#1feaea"],ie=f(Array(30).fill(0)),ue=f(Array(30).fill(0)),Ce=async()=>{if(x.room.id===0)return;const m=await q.info.sys.get();if(!m.data)return;const o=Number(m.data.cpu)||0,v=Number(m.data.memory)||0;U.value={...m.data,cpu:o,memory:v},ie.value=[...ie.value.slice(1),o],ue.value=[...ue.value.slice(1),v]},b=f({startup:{visible:!1,loading:!1},shutdown:{visible:!1,loading:!1},restart:{visible:!1,loading:!1},clean:{visible:!1,loading:!1},rollback:{visible:!1,loading:!1}}),Ke=[{title:t("dashboard.card5.worldName"),value:"worldName"},{title:t("dashboard.card5.isMaster"),value:"isMaster"},{title:"CPU",value:"cpu"},{title:t("dashboard.card5.mem"),value:"mem"},{title:t("dashboard.card5.disk"),value:"disk"},{title:t("dashboard.card5.status"),value:"status",minWidth:100}],ce=f(!1),_=m=>{const o={type:m.type,roomID:x.room.id,worldID:m.worldID,extra:m.extra};ce.value=!0,Object.keys(b.value).forEach(v=>{b.value[v].loading=!0}),q.exec.game.post(o).then(v=>{ye(v.message),Object.keys(b.value).forEach(E=>{b.value[E].visible=!1})}).finally(()=>{Object.keys(b.value).forEach(v=>{b.value[v].loading=!1}),ce.value=!1,se()})},O=f(""),V=f({worlds:[],selectedWorldID:void 0,cmd:""}),R=f(!1),H=f("frontend"),z=f(!1),J=f("reset-no-force"),xe=f(),X=f(!1),me=f(!1),Ie=f([]),Qe=async()=>{me.value=!0;const m={roomID:x.room.id,worldID:c.value.worlds[0].id},o=await ga.setting.enabledMods.get(m);Ie.value=o.data,me.value=!1},Je=[{key:"preview_url",title:t("game.mod.add.preview")},{key:"name",title:t("game.mod.add.name")},{key:"serverSize",title:t("game.mod.add.size")},{key:"id",title:"ID"}],fe=f(!1),be=f(""),pe=()=>{if(x.room.id===0)return;fe.value=!0;const m={roomID:x.room.id};q.connectionCode.get(m).then(o=>{be.value=o.data}).finally(()=>{fe.value=!1})},N=f(!1),De=f(),B=f({id:"",port:void 0}),$e=f({ip:[m=>m?sa(m)?!0:t("dashboard.card1.item.custom.ip.required1"):t("dashboard.card1.item.custom.ip.required")],port:[m=>m?!0:t("dashboard.card1.item.custom.port.required")]}),Y=f(!1),Xe=async()=>{const{valid:m}=await De.value.validate();if(!m)return;Y.value=!0;const o={roomID:x.room.id,ip:B.value.ip,port:B.value.port},v=await q.connectionCode.put(o);Y.value=!1,N.value=!1,ye(v.message),pe()},Ye=()=>{Y.value=!0;const m={roomID:x.room.id,ip:"",port:0};q.connectionCode.put(m).then(o=>{N.value=!1,ye(o.message),pe()}).finally(()=>{Y.value=!1})},Se=f(!1),Z=f(!1),Ze=[{label:"ap-southeast-1",value:"ap-southeast-1"},{label:"ap-east-1",value:"ap-east-1"},{label:"us-east-1",value:"us-east-1"},{label:"eu-central-1",value:"eu-central-1"}],ee=f(["ap-southeast-1","ap-east-1"]),Ue=(m=!1)=>{if(m)return;Z.value=!0;const o={gameName:c.value.room.gameName,maxPlayer:c.value.room.maxPlayer,regions:ee.value};q.check.lobby.post(o).then(v=>{Se.value=v.data}).finally(()=>{Z.value=!1})};let ae=null,le=null;const ea=()=>{ae=setInterval(()=>{se()},1e4)},aa=()=>{le=setInterval(()=>{Ce()},2e3)},Le=()=>{ae&&(clearInterval(ae),ae=null)},Fe=()=>{le&&(clearInterval(le),le=null)},ve=ua(()=>{_e.value=window.innerHeight,ne.value&&(j.value=ne.value.$el.offsetWidth)},200),K=()=>Math.max(2,Math.floor(_e.value-150)),Ne=f(!1);return ia(async()=>{await Promise.all([se(),Ce()]),Ne.value=!0,pe(),V.value.worlds=c.value?.worlds||[],ve(),window.addEventListener("resize",ve),ea(),aa()}),ca(()=>{Le(),Fe(),window.removeEventListener("beforeunload",Le),window.removeEventListener("beforeunload",Fe),window.removeEventListener("resize",ve)}),(m,o)=>{const v=ta,E=la,Me=ma("copy");return e(x).gameVersion.local!==0?(s(),M(T,{key:0},[e(x).room.id!==0?(s(),M(T,{key:0},[e(Ne)?(s(),M(T,{key:0},[l(k,null,{default:a(()=>[l(h,{cols:"12",md:"6"},{default:a(()=>[l(D,{ref_key:"card1Ref",ref:ne,"min-height":"350"},{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card1.title")),1)]),_:1}),l(C,{class:"mt-8 mb-4"},{default:a(()=>[l(k,null,{default:a(()=>[l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-2"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.roomName")),1)]),_:1}),g((s(),i(p,{variant:"text","append-icon":"ri-file-copy-line",class:"text-none"},{default:a(()=>[n(r(e(fa)(e(c).room.gameName,e(L)?(e(j)-200)/15:(e(j)-400)/30)),1)]),_:1})),[[Me,e(c).room.gameName]])]),_:1}),l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-2"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.connectCode")),1)]),_:1}),g(l(p,{loading:e(fe),variant:"text",icon:"ri-file-copy-line"},null,8,["loading"]),[[Me,e(be)],[y,e(be)]]),g((s(),i(p,{variant:"text",color:"default",onClick:o[0]||(o[0]=d=>N.value=!0)},{default:a(()=>[n(r(e(t)("dashboard.card1.item.custom.button")),1)]),_:1})),[[y,e(t)("dashboard.card1.item.custom.tip")]]),l(P,{modelValue:e(N),"onUpdate:modelValue":o[4]||(o[4]=d=>F(N)?N.value=d:null),width:e(L)?"90%":"60%"},{default:a(()=>[l(D,null,{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card1.item.custom.title")),1)]),_:1}),l(ha,{ref_key:"customConnectionCodeFormRef",ref:De,onSubmit:ba(Xe,["prevent"])},{default:a(()=>[l(C,null,{default:a(()=>[l(Ae,{text:e(t)("dashboard.card1.item.custom.tip"),type:"info",variant:"tonal",class:"mb-8"},null,8,["text"]),g(l(ke,{modelValue:e(B).ip,"onUpdate:modelValue":o[1]||(o[1]=d=>e(B).ip=d),rules:e($e).ip,label:e(t)("dashboard.card1.item.custom.ip.title"),class:"mb-8"},null,8,["modelValue","rules","label"]),[[y,e(t)("dashboard.card1.item.custom.ip.tip")]]),g(l(ya,{modelValue:e(B).port,"onUpdate:modelValue":o[2]||(o[2]=d=>e(B).port=d),rules:e($e).port,label:e(t)("dashboard.card1.item.custom.port.title"),min:1,max:65535},null,8,["modelValue","rules","label"]),[[y,e(t)("dashboard.card1.item.custom.port.tip")]])]),_:1}),l(de,{class:"mr-4 mb-4"},{default:a(()=>[l(Q),l(p,{variant:"elevated",color:"defalut",onClick:o[3]||(o[3]=d=>N.value=!1)},{default:a(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),g((s(),i(p,{variant:"elevated",color:"warning",onClick:Ye},{default:a(()=>[n(r(e(t)("dashboard.card1.item.custom.clear.title")),1)]),_:1})),[[y,e(t)("dashboard.card1.item.custom.clear.tip")]]),l(p,{variant:"elevated",color:"primary",type:"submit"},{default:a(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue","width"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.cycles")),1)]),_:1}),e(c).session.cycles!==-1?(s(),i(u,{key:0},{default:a(()=>[n(r(e(c).session.cycles),1)]),_:1})):(s(),i(u,{key:1,color:"error"},{default:a(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.gameMode")),1)]),_:1}),l(u,null,{default:a(()=>[n(r(e(t)(`game.base.step1.gameMode.modes.${e(c).room.gameMode}`)),1)]),_:1})]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.gameSeason")),1)]),_:1}),e(c).session.season!=="error"?(s(),i(u,{key:0},{default:a(()=>[n(r(e(t)(`dashboard.card1.season.${e(c).session.season}`))+"("+r(e(c).session.elapsedDays)+"/"+r(e(c).session.seasonLength[e(c).session.season])+") ",1)]),_:1})):(s(),i(u,{key:1,color:"error"},{default:a(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.gamePhase")),1)]),_:1}),e(c).session.phase!=="error"?(s(),i(u,{key:0},{default:a(()=>[n(r(e(t)(`dashboard.card1.phase.${e(c).session.phase}`)),1)]),_:1})):(s(),i(u,{key:1,color:"error"},{default:a(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),(e(c).room.modInOne?e(A)(e(c).room.modData).length:e(A)(e(c).worlds[0].modData).length)===0?(s(),i(u,{key:0},{default:a(()=>[n(r(e(c).room.modInOne?e(A)(e(c).room.modData).length:e(A)(e(c).worlds[0].modData).length),1)]),_:1})):(s(),i(u,{key:1,onClick:o[5]||(o[5]=d=>{X.value=!0,Qe()})},{default:a(()=>[n(r(e(c).room.modInOne?e(A)(e(c).room.modData).length:e(A)(e(c).worlds[0].modData).length),1)]),_:1})),l(P,{modelValue:e(X),"onUpdate:modelValue":o[6]||(o[6]=d=>F(X)?X.value=d:null),width:e(L)?"90%":"60%"},{default:a(()=>[l(D,null,{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),e(me)?(s(),i(C,{key:1},{default:a(()=>[l(v,{type:"info",title:e(t)("game.base.loading"),height:K()/2},null,8,["title","height"])]),_:1})):(s(),i(C,{key:0},{default:a(()=>[l(qe,{border:"",rounded:"",class:"mt-4"},{default:a(()=>[l(We,{headers:Je,items:e(Ie)},{loading:a(()=>[l(ka,{type:"table-row@10"})]),"item.preview_url":a(({value:d})=>[l(pa,{src:d,width:100,cover:"",rounded:"","aspect-ratio":"1",class:"ma-2"},{placeholder:a(()=>[S("div",wa,[l(va,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),"item.name":a(({value:d})=>[l(u,{label:"",color:"info"},{default:a(()=>[n(r(d),1)]),_:2},1024)]),"item.serverSize":a(({value:d})=>[l(u,{label:"",color:"primary"},{default:a(()=>[n(r(e(Re)(parseInt(d))),1)]),_:2},1024)]),"item.id":a(({value:d})=>[l(u,{label:""},{default:a(()=>[n(r(d),1)]),_:2},1024)]),"item.update":a(({item:d})=>[d.file_url!==""?(s(),i(u,{key:0,label:""},{default:a(()=>[n(r(e(t)("game.mod.add.notUGC")),1)]),_:1})):W("",!0),d.file_url===""&&d.serverSize===d.localSize?(s(),i(u,{key:1,label:"",color:"success"},{default:a(()=>[n(r(e(t)("game.mod.add.needNoUpdate")),1)]),_:1})):W("",!0),d.file_url===""&&d.serverSize!==d.localSize?(s(),i(u,{key:2,label:"",color:"error"},{default:a(()=>[n(r(e(t)("game.mod.add.needUpdate")),1)]),_:1})):W("",!0)]),"item.actions":a(({item:d})=>[l(p,{color:"info","append-icon":"ri-arrow-drop-down-line",variant:"text"},{default:a(()=>[n(r(e(t)("game.mod.add.actions"))+" ",1),l(Ge,{activator:"parent"},{default:a(()=>[l(Pe,null,{default:a(()=>[l(ge,{disabled:m.modEnableLoading,class:"text-success",onClick:I=>m.handleModAction("enable",d)},{prepend:a(()=>[l(te,{icon:"ri-file-check-line",size:"22"})]),default:a(()=>[l(he,null,{default:a(()=>[n(r(e(t)("game.mod.add.enable")),1)]),_:1})]),_:1},8,["disabled","onClick"]),l(ge,{disabled:m.modUpdateLoading,class:"text-info",onClick:I=>m.handleModAction("update",d)},{prepend:a(()=>[l(te,{icon:"ri-arrow-up-circle-line",size:"22"})]),default:a(()=>[l(he,null,{default:a(()=>[n(r(e(t)("game.mod.add.updateMod")),1)]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),l(h,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"",color:"info",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card1.item.players")),1)]),_:1}),g((s(),i(u,null,{default:a(()=>[n(" ("+r(e(c).players?.length||0)+"/"+r(e(c).room.maxPlayer)+") ",1)]),_:1})),[[y,e(c).players.map(d=>d.nickname).join(", ")]])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),l(h,{cols:"12",md:"6"},{default:a(()=>[l(D,{"min-height":"350"},{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card2.title")),1)]),_:1}),l(C,null,{default:a(()=>[l(k,{class:"mt-4"},{default:a(()=>[l(h,{cols:"12",md:"5"},{default:a(()=>[S("div",null,[S("div",Va,[l(te,{icon:"ri-cpu-line"}),o[40]||(o[40]=S("span",{class:"mr-2 ml-1"},"CPU",-1)),l(ze,{"model-value":e(U).cpu,rounded:"",height:"8",indeterminate:e(U).cpu===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),S("span",Ca,r(e(U).cpu.toFixed(1))+"%",1)]),l(je,{width:e(j)/12*5,height:306-22.5-72,gradient:Ve,"gradient-direction":"top","line-width":3,"model-value":e(ie),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1}),e(L)?W("",!0):(s(),i(Q,{key:0})),l(h,{cols:"12",md:"5"},{default:a(()=>[S("div",null,[S("div",xa,[l(te,{icon:"ri-ram-2-line"}),S("span",Ia,r(e(t)("dashboard.card2.memory")),1),l(ze,{"model-value":e(U).memory,rounded:"",height:"8",indeterminate:e(U).memory===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),S("span",Da,r(e(U).memory.toFixed(1))+"%",1)]),l(je,{width:e(j)/12*5,height:306-22.5-72,gradient:Ve,"gradient-direction":"top","line-width":3,"model-value":e(ue),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(h,{cols:"12",md:"6"},{default:a(()=>[l(D,{"min-height":"295"},{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card3.title")),1)]),_:1}),l(C,{class:"mx-4"},{default:a(()=>[l(k,{class:"mt-4"},{default:a(()=>[g((s(),i(p,{class:"mr-4 mb-4",color:"success",onClick:o[7]||(o[7]=d=>e(b).startup.visible=!0)},{default:a(()=>[n(r(e(t)("dashboard.card3.startup.title")),1)]),_:1})),[[y,e(t)("dashboard.card3.startup.tip")]]),l(E,{modelValue:e(b).startup.visible,"onUpdate:modelValue":o[8]||(o[8]=d=>e(b).startup.visible=d),type:"info",title:e(t)("dashboard.card3.startup.title"),content:e(t)("dashboard.card3.startup.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(b).startup.loading,onConfirm:o[9]||(o[9]=d=>_({type:"startup",extra:"all"})),onCancel:o[10]||(o[10]=d=>e(b).startup.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(p,{class:"mr-4 mb-4",color:"error",onClick:o[11]||(o[11]=d=>e(b).shutdown.visible=!0)},{default:a(()=>[n(r(e(t)("dashboard.card3.shutdown.title")),1)]),_:1})),[[y,e(t)("dashboard.card3.shutdown.tip")]]),l(E,{modelValue:e(b).shutdown.visible,"onUpdate:modelValue":o[12]||(o[12]=d=>e(b).shutdown.visible=d),type:"info",title:e(t)("dashboard.card3.shutdown.title"),content:e(t)("dashboard.card3.shutdown.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(b).shutdown.loading,onConfirm:o[13]||(o[13]=d=>_({type:"shutdown",extra:"all"})),onCancel:o[14]||(o[14]=d=>e(b).shutdown.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(p,{class:"mr-4 mb-4",color:"warning",onClick:o[15]||(o[15]=d=>e(b).restart.visible=!0)},{default:a(()=>[n(r(e(t)("dashboard.card3.restart.title")),1)]),_:1})),[[y,e(t)("dashboard.card3.restart.tip")]]),l(E,{modelValue:e(b).restart.visible,"onUpdate:modelValue":o[16]||(o[16]=d=>e(b).restart.visible=d),type:"info",title:e(t)("dashboard.card3.restart.title"),content:e(t)("dashboard.card3.restart.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(b).restart.loading,onConfirm:o[17]||(o[17]=d=>_({type:"restart"})),onCancel:o[18]||(o[18]=d=>e(b).restart.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(p,{class:"mr-4 mb-4",color:"info",disabled:e(we).userInfo.role!=="admin",loading:e(U).updating,onClick:o[19]||(o[19]=d=>R.value=!0)},{default:a(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1},8,["disabled","loading"])),[[y,e(t)("dashboard.card3.update.tip")]]),l(P,{modelValue:e(R),"onUpdate:modelValue":o[23]||(o[23]=d=>F(R)?R.value=d:null),width:e(L)?"85%":"40%"},{default:a(()=>[l(D,null,{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1}),l(C,null,{default:a(()=>[l(Oe,{modelValue:e(H),"onUpdate:modelValue":o[20]||(o[20]=d=>F(H)?H.value=d:null),inline:"",color:"primary",class:"mt-2"},{prepend:a(()=>[l(u,null,{default:a(()=>[n(r(e(t)("dashboard.card3.update.type")),1)]),_:1})]),default:a(()=>[g(l(re,{label:e(t)("dashboard.card3.update.frontend.title"),value:"frontend"},null,8,["label"]),[[y,e(t)("dashboard.card3.update.frontend.tip")]]),g(l(re,{label:e(t)("dashboard.card3.update.backend.title"),value:"backend"},null,8,["label"]),[[y,e(t)("dashboard.card3.update.backend.tip")]])]),_:1},8,["modelValue"])]),_:1}),l(de,null,{default:a(()=>[l(Q),l(p,{color:"default",variant:"elevated",onClick:o[21]||(o[21]=d=>R.value=!1)},{default:a(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),e(H)==="frontend"?(s(),i(p,{key:0,variant:"elevated",to:"/install"},{default:a(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):W("",!0),e(H)==="backend"?(s(),i(p,{key:1,variant:"elevated",onClick:o[22]||(o[22]=d=>{_({type:"update"}),R.value=!1,e(U).updating=!0})},{default:a(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):W("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),l(k,{class:"mb-4"},{default:a(()=>[g((s(),i(p,{class:"mr-4 mb-4",color:e(oe).purple.base,onClick:o[24]||(o[24]=d=>z.value=!0)},{default:a(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1},8,["color"])),[[y,e(t)("dashboard.card3.reset.tip")]]),l(P,{modelValue:e(z),"onUpdate:modelValue":o[28]||(o[28]=d=>F(z)?z.value=d:null),width:e(L)?"85%":"40%"},{default:a(()=>[l(D,null,{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1}),l(C,null,{default:a(()=>[l(Oe,{modelValue:e(J),"onUpdate:modelValue":o[25]||(o[25]=d=>F(J)?J.value=d:null),inline:"",color:"primary",class:"mt-2"},{prepend:a(()=>[l(u,null,{default:a(()=>[n(r(e(t)("dashboard.card3.reset.resetType")),1)]),_:1})]),default:a(()=>[g(l(re,{label:e(t)("dashboard.card3.reset.noForced.title"),value:"reset-no-force"},null,8,["label"]),[[y,e(t)("dashboard.card3.reset.noForced.tip")]]),g(l(re,{label:e(t)("dashboard.card3.reset.forced.title"),value:"force"},null,8,["label"]),[[y,e(t)("dashboard.card3.reset.forced.tip")]])]),_:1},8,["modelValue"])]),_:1}),l(de,null,{default:a(()=>[l(Q),l(p,{color:"default",variant:"elevated",onClick:o[26]||(o[26]=d=>z.value=!1)},{default:a(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),l(p,{variant:"elevated",onClick:o[27]||(o[27]=d=>{_({type:"reset",extra:e(J)}),z.value=!1})},{default:a(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),g((s(),i(p,{class:"mr-4 mb-4",color:e(oe).brown.base},{default:a(()=>[n(r(e(t)("dashboard.card3.clean.title"))+" ",1),l(Ge,{activator:"parent"},{default:a(()=>[l(Pe,null,{default:a(()=>[(s(!0),M(T,null,Be(e(V).worlds,(d,I)=>(s(),i(ge,{key:I,value:d.id,onClick:Te=>{xe.value=d.id,e(b).clean.visible=!0}},{default:a(()=>[l(he,null,{default:a(()=>[n(r(d.worldName),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["color"])),[[y,e(t)("dashboard.card3.clean.tip")]]),l(E,{modelValue:e(b).clean.visible,"onUpdate:modelValue":o[29]||(o[29]=d=>e(b).clean.visible=d),type:"info",title:e(t)("dashboard.card3.clean.title"),content:e(t)("dashboard.card3.clean.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(b).clean.loading,onConfirm:o[30]||(o[30]=d=>_({type:"delete",worldID:e(xe)})),onCancel:o[31]||(o[31]=d=>e(b).clean.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(p,{class:"mr-4 mb-4",color:e(oe).cyan.darken1},{default:a(()=>[n(r(e(t)("dashboard.card3.quickCmd.title")),1)]),_:1},8,["color"])),[[y,e(t)("dashboard.card3.quickCmd.tip")]]),g((s(),i(p,{class:"mr-4 mb-4",color:e(oe).teal.base},{default:a(()=>[n(r(e(t)("dashboard.card3.check.title"))+" ",1),l(P,{activator:"parent",width:e(L)?"90%":"60%",onAfterEnter:Ue},{default:a(({isActive:d})=>[l(D,{"min-height":"520"},{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card3.check.title")),1)]),_:1}),l(C,null,{default:a(()=>[l(He,{modelValue:e(ee),"onUpdate:modelValue":o[32]||(o[32]=I=>F(ee)?ee.value=I:null),multiple:"",chips:"",density:"compact",label:e(t)("dashboard.card3.check.region"),class:"mt-8","item-title":"label","item-value":"value",items:Ze,disabled:e(Z),"onUpdate:menu":Ue},null,8,["modelValue","label","disabled"]),e(Z)?(s(),i(v,{key:0,height:476,type:"info",title:e(t)("dashboard.card3.check.result.loading.title"),"sub-title":e(t)("dashboard.card3.check.result.loading.subTitle")},null,8,["title","sub-title"])):(s(),M(T,{key:1},[e(Se)?(s(),i(v,{key:0,height:476,type:"success",title:e(t)("dashboard.card3.check.result.success.title"),"sub-title":e(t)("dashboard.card3.check.result.success.subTitle")},null,8,["title","sub-title"])):(s(),i(v,{key:1,height:476,type:"error",title:e(t)("dashboard.card3.check.result.error.title"),"sub-title":e(t)("dashboard.card3.check.result.error.subTitle")},null,8,["title","sub-title"]))],64))]),_:1})]),_:1})]),_:1},8,["width"])]),_:1},8,["color"])),[[y,e(t)("dashboard.card3.check.tip")]])]),_:1}),l(k,null,{default:a(()=>[g((s(),i(u,{label:"",class:"mr-4"},{default:a(()=>[n(r(e(t)("dashboard.card3.rollback.title")),1)]),_:1})),[[y,e(t)("dashboard.card3.rollback.tip")]]),(s(!0),M(T,null,Be(e(L)?[1,2,3,4]:[1,2,3,4,5,6,7,8,9],d=>(s(),i(p,{color:"default",size:"x-small",class:"mr-4 mb-4"},{default:a(()=>[n(r(d)+" ",1),l(P,{activator:"parent","max-width":"500px",persistent:""},{default:a(({isActive:I})=>[l(D,null,{default:a(()=>[l($,{class:"d-flex align-center"},{default:a(()=>[S("span",null,r(e(t)("dashboard.card3.rollback.title")),1)]),_:1}),l(C,null,{default:a(()=>[l(Ae,{text:e(t)("dashboard.card3.rollback.confirm.c1")+d+e(t)("dashboard.card3.rollback.confirm.c2"),type:"info",variant:"tonal"},null,8,["text"])]),_:2},1024),l(de,{class:"pa-4"},{default:a(()=>[l(Q),l(p,{variant:"elevated",color:"default",onClick:Te=>I.value=!1},{default:a(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1},8,["onClick"]),l(p,{variant:"elevated",loading:e(b).rollback.loading,onClick:Te=>{_({type:"console",extra:`c_rollback(${d})`,worldID:e(c).worlds[0].id}),I.value=!1}},{default:a(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{cols:"12",md:"6"},{default:a(()=>[l(D,{"min-height":"295"},{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card4.title")),1)]),_:1}),l(C,null,{default:a(()=>[l(k,{class:"mt-8"},{default:a(()=>[l(h,{cols:"12"},{default:a(()=>[l(ke,{modelValue:e(O),"onUpdate:modelValue":o[33]||(o[33]=d=>F(O)?O.value=d:null),"append-inner-icon":"ri-send-plane-fill",class:"w-100",label:e(t)("dashboard.card4.announce"),clearable:"","onClick:appendInner":o[34]||(o[34]=d=>_({type:"announce",extra:e(O)})),onKeyup:o[35]||(o[35]=Ee(d=>_({type:"announce",extra:e(O)}),["enter"]))},null,8,["modelValue","label"])]),_:1})]),_:1}),l(k,{class:"my-8"},{default:a(()=>[l(h,{cols:"12",md:"3"},{default:a(()=>[l(He,{modelValue:e(V).selectedWorldID,"onUpdate:modelValue":o[36]||(o[36]=d=>e(V).selectedWorldID=d),label:e(t)("dashboard.card4.world"),class:"mr-1","item-title":"worldName","item-value":"id",items:e(V).worlds},null,8,["modelValue","label","items"])]),_:1}),l(h,{cols:"12",md:"9"},{default:a(()=>[l(ke,{modelValue:e(V).cmd,"onUpdate:modelValue":o[37]||(o[37]=d=>e(V).cmd=d),"append-inner-icon":"ri-send-plane-fill",label:e(t)("dashboard.card4.cmd"),clearable:"",disabled:e(V).selectedWorldID===void 0,"onClick:appendInner":o[38]||(o[38]=d=>_({type:"console",extra:e(V).cmd,worldID:e(V).selectedWorldID})),onKeyup:o[39]||(o[39]=Ee(d=>_({type:"console",extra:e(V).cmd,worldID:e(V).selectedWorldID}),["enter"]))},null,8,["modelValue","label","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(h,{cols:"12"},{default:a(()=>[l(D,null,{default:a(()=>[l($,null,{default:a(()=>[n(r(e(t)("dashboard.card5.title")),1)]),_:1}),l(C,{class:"my-8"},{default:a(()=>[l(k,null,{default:a(()=>[l(h,{cols:"12"},{default:a(()=>[l(qe,{rounded:"",border:""},{default:a(()=>[l(We,{items:e(c).worlds,headers:Ke,"hide-default-footer":""},{"item.worldName":a(({value:d})=>[l(u,{color:"primary",label:""},{default:a(()=>[n(r(d),1)]),_:2},1024)]),"item.isMaster":a(({value:d})=>[d?(s(),i(u,{key:0,color:"success",label:""},{default:a(()=>[...o[41]||(o[41]=[n(" 是 ",-1)])]),_:1})):(s(),i(u,{key:1,label:""},{default:a(()=>[...o[42]||(o[42]=[n(" 否 ",-1)])]),_:1}))]),"item.cpu":a(({item:d})=>[l(u,{label:"",color:"info"},{default:a(()=>[n(r(d.performanceStatus.cpu.toFixed(2))+"% ",1)]),_:2},1024)]),"item.mem":a(({item:d})=>[l(u,{label:"",color:"info"},{default:a(()=>[n(r(d.performanceStatus.mem.toFixed(2))+"% ("+r(d.performanceStatus.memSize)+" MB) ",1)]),_:2},1024)]),"item.disk":a(({item:d})=>[l(u,{label:"",color:"info"},{default:a(()=>[n(r(e(Re)(d.performanceStatus.disk)),1)]),_:2},1024)]),"item.status":a(({item:d})=>[l(_a,{modelValue:d.status,"onUpdate:modelValue":I=>d.status=I,loading:e(ce),color:"success","hide-details":"",onChange:I=>d.status?_({type:"startup",worldID:d.id}):_({type:"shutdown",worldID:d.id})},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)):(s(),i(v,{key:1,type:"info",title:e(t)("game.base.loading"),height:K()},null,8,["title","height"]))],64)):(s(),i(v,{key:1,title:e(t)("global.result.title"),"sub-title":e(t)("global.result.subTitle"),type:"error",height:K()},{default:a(()=>[l(p,{to:"/rooms",class:"mt-4"},{default:a(()=>[n(r(e(t)("global.result.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(s(),M(T,{key:1},[e(we).userInfo.role==="admin"?(s(),i(v,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:K(),type:"error"},{default:a(()=>[l(p,{to:"/install",class:"mt-4"},{default:a(()=>[n(r(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(s(),i(v,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:K(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{fl as default};
