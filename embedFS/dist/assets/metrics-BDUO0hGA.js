import{_ as w}from"./index-DN2n9ufu.js";import{p as B}from"./platform-DYuUJiNr.js";import{f as o,e as D,b as $,j as E,y as C,o as b,w as x,a as s,k as h,t as A,l as e,n as N,A as O,s as U,p as L,q as K,cs as y}from"./index-Dqn-Y2oB.js";import{c as M,a as T,V as q}from"./VCard-CumNZJ-p.js";import{V as j}from"./VSelect-DUXeLbex.js";import"./axios-BhyVtIKS.js";import"./VInput-9jI7hnYY.js";import"./index-BMOSmf1z.js";import"./VTextField-CUS8BVbK.js";import"./VList-DRSt5aEc.js";import"./ssrBoot-BQTaxE_h.js";import"./VMenu-iu9xRO9i.js";import"./dialog-transition-qclFC1zN.js";import"./VCheckboxBtn-m1_jbKa5.js";import"./VSelectionControl-B4F8mx-8.js";import"./VChip-CmX9MwQH.js";const z={class:"card-header"},ie={__name:"metrics",setup(I){const n=o(1),{mobile:g}=D(),{t:l}=$(),k=[{label:"1 "+l("platform.metrics.hour"),value:1},{label:"3 "+l("platform.metrics.hour"),value:3},{label:"6 "+l("platform.metrics.hour"),value:6},{label:"12 "+l("platform.metrics.hour"),value:12},{label:"24 "+l("platform.metrics.hour"),value:24}],S=o(),F=o(),_=o(),R=o(),V=o(),f=o({title:{text:"CPU"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} %</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#409EFF",lineStyle:{color:"#409EFF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#409EFF"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),m=o({title:{text:"Memory"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} %</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#67C23A",lineStyle:{color:"#67C23A"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#67C23A"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),p=o({title:{text:"Disk"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} %</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#8C57FF",lineStyle:{color:"#8C57FF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#8C57FF"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),u=o({title:{text:"Net ↑"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} KB/s</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} KB/s"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#E6A23C",lineStyle:{color:"#E6A23C"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#E6A23C"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),c=o({title:{text:"Net ↓"},tooltip:{trigger:"axis",formatter:function(a){return`${a[0].value} KB/s</b>`}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} KB/s"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#F56C6C",lineStyle:{color:"#F56C6C"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#F56C6C"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),d=o(!1),v=a=>{const r={timeRange:a};d.value=!0,B.metrics.get(r).then(i=>{f.value.xAxis.data=[],m.value.xAxis.data=[],p.value.xAxis.data=[],u.value.xAxis.data=[],c.value.xAxis.data=[],f.value.series[0].data=[],m.value.series[0].data=[],p.value.series[0].data=[],u.value.series[0].data=[],c.value.series[0].data=[];for(let t of i.data)f.value.xAxis.data.push(y(t.timestamp)),m.value.xAxis.data.push(y(t.timestamp)),p.value.xAxis.data.push(y(t.timestamp)),u.value.xAxis.data.push(y(t.timestamp)),c.value.xAxis.data.push(y(t.timestamp)),f.value.series[0].data.push(t.cpu.toFixed(2)),m.value.series[0].data.push(t.memory.toFixed(2)),p.value.series[0].data.push(t.disk.toFixed(2)),u.value.series[0].data.push(t.netUplink.toFixed(2)),c.value.series[0].data.push(t.netDownlink.toFixed(2))}).finally(()=>{d.value=!1})};return E(()=>{v(n.value)}),(a,r)=>{const i=w;return b(),C(q,{class:"mb-4"},{default:x(()=>[s(M,{class:"mt-2"},{default:x(()=>[h("div",z,[h("div",null,A(e(l)("platform.metrics.title")),1),h("div",{style:N(e(g)?{width:"50%"}:{width:"20%"}),class:"fcc"},[s(j,{modelValue:e(n),"onUpdate:modelValue":[r[0]||(r[0]=t=>U(n)?n.value=t:null),r[1]||(r[1]=t=>v(e(n)))],items:k,loading:e(d),density:"compact","item-title":"label",label:e(l)("platform.metrics.timeRange")},null,8,["modelValue","loading","label"]),e(g)?O("",!0):(b(),C(L,{key:0,loading:e(d),color:"default",class:"ml-2",onClick:r[2]||(r[2]=t=>v(e(n)))},{default:x(()=>[K(A(e(l)("platform.metrics.refresh")),1)]),_:1},8,["loading"]))],4)])]),_:1}),s(T,{class:"mt-4"},{default:x(()=>[s(i,{ref_key:"cpuChartRef",ref:S,option:e(f),height:"30vh",class:"mb-4"},null,8,["option"]),s(i,{ref_key:"memoryChartRef",ref:F,option:e(m),height:"30vh",class:"mb-4"},null,8,["option"]),s(i,{ref_key:"diskChartRef",ref:_,option:e(p),height:"30vh",class:"mb-4"},null,8,["option"]),s(i,{ref_key:"netUplinkChartRef",ref:R,option:e(u),height:"30vh",class:"mb-4"},null,8,["option"]),s(i,{ref_key:"netDownlinkChartRef",ref:V,option:e(c),height:"30vh",class:"mb-4"},null,8,["option"])]),_:1})]),_:1})}}};export{ie as default};
