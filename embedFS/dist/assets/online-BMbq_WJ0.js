import{g as D,e as L,b as S,f as g,j as I,A as N,o as V,w as e,a,l as t,s as v,v as n,t as i,U as y,W as _,J as m,aO as B,c as $,D as z,ac as O,G as P}from"./index-ClrSl1t3.js";import{p as C}from"./player-4tgHHkvS.js";import{V as q}from"./VDataTable-CLPCrmWo.js";import{V as A}from"./VMenu-DVaqAgsw.js";import{V as F}from"./VList-CRtGEhVV.js";import{V as b}from"./VChip-DSSyFDgp.js";import{V as M,a as j}from"./VToolbar-BFcJYwkc.js";import{V as E}from"./VSkeletonLoader-D7FzdfiR.js";import"./axios-DEwtRmaY.js";import"./VPagination-DeZtXGve.js";import"./VSelect-HjFTEHVC.js";import"./VInput-Dh0vzV9z.js";import"./index-rIMhUL3t.js";import"./VTextField-C20ssUm5.js";import"./VCheckboxBtn-CD061qxM.js";import"./VSelectionControl-DRns-ek4.js";import"./dialog-transition-BOVVgIJg.js";import"./VTable-BFIhFo8s.js";import"./filter-BbPhtgdI.js";import"./ssrBoot-4_sUra1R.js";const G={key:0},me={__name:"online",props:{height:{type:Number,default:0}},setup(J){const p=D(),{mobile:w}=L(),{t:o}=S(),h=g([]),r=g(!1),k=()=>{r.value=!0;const s={roomID:p.room.id};C.online.get(s).then(c=>{h.value=c.data||[]}).finally(()=>{r.value=!1})},x=[{key:"uid",title:o("game.player.online.header.uid")},{key:"nickname",title:o("game.player.online.header.nickname")},{key:"prefab",title:o("game.player.online.header.prefab")},{key:"actions",title:o("game.player.online.header.actions")}],u=g(!1),f=(s,c,l)=>{u.value=!0;const d={roomID:p.room.id,uids:[s],listType:c,actionType:l};C.list.post(d).then(T=>{P(T.message)}).finally(()=>{u.value=!1})};return I(()=>{k()}),(s,c)=>(V(),N(O,{border:"",rounded:"",class:"mt-4"},{default:e(()=>[a(q,{headers:x,items:t(h),loading:t(r)},{loading:e(()=>[a(E,{type:"table-row@10"})]),top:e(()=>[a(M,{flat:""},{default:e(()=>[a(j,null,{default:e(()=>[a(m,{icon:"ri-user-location-line",start:""}),t(w)?z("",!0):(V(),$("span",G,i(t(o)("game.player.online.tabName")),1))]),_:1}),a(v,{"prepend-icon":"ri-refresh-line",loading:t(r),color:"default",onClick:k},{default:e(()=>[n(i(t(o)("platform.user.table.refresh")),1)]),_:1},8,["loading"])]),_:1})]),"item.uid":e(({value:l})=>[a(b,{label:""},{default:e(()=>[n(i(l),1)]),_:2},1024)]),"item.nickname":e(({value:l})=>[a(b,{label:"",color:"primary"},{default:e(()=>[n(i(l),1)]),_:2},1024)]),"item.prefab":e(({value:l})=>[a(b,{label:"",color:"success"},{default:e(()=>[n(i(t(B)(l,t(p).language)||t(o)("game.player.online.noSelected")),1)]),_:2},1024)]),"item.actions":e(({item:l})=>[a(v,{color:"info","append-icon":"ri-arrow-drop-down-line",variant:"text",loading:t(u)},{default:e(()=>[n(i(t(o)("platform.user.table.actions"))+" ",1),a(A,{activator:"parent"},{default:e(()=>[a(F,null,{default:e(()=>[a(y,{class:"text-info",onClick:d=>f(l.uid,"adminlist","add")},{prepend:e(()=>[a(m,{icon:"ri-user-star-line",size:"22"})]),default:e(()=>[a(_,null,{default:e(()=>[n(i(t(o)("game.player.online.actions.admin")),1)]),_:1})]),_:1},8,["onClick"]),a(y,{class:"text-error",onClick:d=>f(l.uid,"blocklist","add")},{prepend:e(()=>[a(m,{icon:"ri-user-forbid-line",size:"22"})]),default:e(()=>[a(_,null,{default:e(()=>[n(i(t(o)("game.player.online.actions.block")),1)]),_:1})]),_:1},8,["onClick"]),a(y,{class:"text-success",onClick:d=>f(l.uid,"whitelist","add")},{prepend:e(()=>[a(m,{icon:"ri-user-heart-line",size:"22"})]),default:e(()=>[a(_,null,{default:e(()=>[n(i(t(o)("game.player.online.actions.white")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["loading"])]),_:1},8,["items","loading"])]),_:1}))}};export{me as default};
