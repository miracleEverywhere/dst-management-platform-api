import{d as h,a as R,b as F,c as z,V as M}from"./VBadge-C9Gkjgce.js";import{_ as $,d as j,u as O,e as K,b as P,f as u,j as X,a5 as Y,y as w,o as c,w as t,a as e,k as V,t as k,l as a,p as G,q as A,A as J,n as B,V as D,x as y,c as Q,F as W,v as Z,z as aa,R as ea,S as ta,C as sa,cu as ra}from"./index-Dqn-Y2oB.js";import{u as la}from"./user-BKxAKc_h.js";import{c as oa,a as na,V as ua}from"./VCard-CumNZJ-p.js";import{V as g}from"./VRow-WVD6uv65.js";import{V as d}from"./VCol-CLsovYBZ.js";import{V as ia}from"./VForm-BbEqUJ4t.js";import{V as x}from"./VTextField-CUS8BVbK.js";import{V as da}from"./VChip-CmX9MwQH.js";import{T}from"./index-CD3H4IwR.js";import"./axios-BhyVtIKS.js";/* empty css              */import"./VInput-9jI7hnYY.js";import"./index-BMOSmf1z.js";import"./VTooltip-Bjc0UPOi.js";const q="/assets/avatar-1-full-EwAxu6bC.png",ma="/assets/avatar-2-full-DHXcFOL3.png",ca="/assets/avatar-3-full-DES7Kaw2.png",fa="/assets/avatar-4-full-C4gDU_YO.png",pa={class:"card-header"},va={class:"form-container"},wa={__name:"index",setup(Va){const f=j(),E=O(),{mobile:p}=K(),{t:l}=P(),s=u({username:f.userInfo.username,nickname:f.userInfo.nickname,avatar:f.userInfo.avatar,password:""}),m=u(),i=u();switch(s.value.avatar){case"1":m.value=h,i.value=q;break;case"2":m.value=z,i.value=ma;break;case"3":m.value=F,i.value=ca;break;case"4":m.value=R,i.value=fa;break;default:m.value=h,i.value=q}const H={1:h,2:z,3:F,4:R},L=o=>H[o],C=u(),v=u(!1),U={username:[o=>o?!0:l("platform.user.form.username.required")],nickname:[o=>o?!0:l("platform.user.form.nickname.required")],password:[o=>o?!0:l("platform.user.form.password.required")]},_=u(!1),N=async()=>{const{valid:o}=await C.value.validate();if(!o)return;_.value=!0;const n={username:s.value.username,nickname:s.value.nickname,avatar:s.value.avatar,password:ta(s.value.password)};la.myself.put(n).then(async r=>{sa(r.message),await ra(3e3),await f.clearStore(),await E.push("/dashboard")}).finally(()=>{_.value=!1})},I=u(window.innerHeight),S=()=>{I.value=window.innerHeight},b=()=>Math.max(2,Math.floor(I.value-120));return X(async()=>{window.addEventListener("resize",S)}),Y(()=>{window.removeEventListener("resize",S)}),(o,n)=>(c(),w(ua,{height:b()},{default:t(()=>[e(oa,null,{default:t(()=>[V("div",pa,[V("span",null,k(a(l)("profile.title")),1),e(G,{loading:a(_),onClick:N},{default:t(()=>[A(k(a(l)("profile.submit")),1)]),_:1},8,["loading"])])]),_:1}),e(na,{class:"mx-4 mt-4"},{default:t(()=>[e(g,null,{default:t(()=>[a(p)?J("",!0):(c(),w(d,{key:0,cols:"12",md:"6"},{default:t(()=>[V("div",{class:"fcc",style:B({height:b()-54+"px"})},[e(D,{src:a(i),height:"356",width:"178"},null,8,["src"])],4)]),_:1})),e(d,{cols:"12",md:"6",style:B({height:b()-54+"px"}),class:"d-flex justify-center align-center"},{default:t(()=>[V("div",va,[e(ia,{ref_key:"userInfoRef",ref:C},{default:t(()=>[e(x,{modelValue:a(s).username,"onUpdate:modelValue":n[0]||(n[0]=r=>a(s).username=r),disabled:"",label:a(l)("profile.username"),class:"mb-8"},null,8,["modelValue","label"]),e(x,{modelValue:a(s).nickname,"onUpdate:modelValue":n[1]||(n[1]=r=>a(s).nickname=r),label:a(l)("profile.nickname"),class:"mb-8"},null,8,["modelValue","label"]),e(g,{class:"mb-8"},{default:t(()=>[e(d,{cols:a(p)?4:2,class:"d-flex align-center"},{default:t(()=>[e(g,null,{default:t(()=>[e(d,null,{default:t(()=>[y((c(),w(da,null,{default:t(()=>[A(k(a(l)("platform.user.form.avatar.title")),1)]),_:1})),[[T,a(l)("platform.user.form.avatar.tip")]])]),_:1})]),_:1})]),_:1},8,["cols"]),e(d,{cols:a(p)?8:10},{default:t(()=>[e(g,null,{default:t(()=>[(c(),Q(W,null,Z(4,r=>e(d,{key:r,cols:a(p)?6:3},{default:t(()=>[e(M,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success","model-value":a(s).avatar===r.toString()},{default:t(()=>[y((c(),w(aa,{color:"primary",variant:"tonal",onClick:ga=>a(s).avatar=r.toString()},{default:t(()=>[e(D,{src:L(r)},null,8,["src"])]),_:2},1032,["onClick"])),[[ea]])]),_:2},1032,["model-value"])]),_:2},1032,["cols"])),64))]),_:1})]),_:1},8,["cols"])]),_:1}),y(e(x,{modelValue:a(s).password,"onUpdate:modelValue":n[2]||(n[2]=r=>a(s).password=r),"append-inner-icon":a(v)?"ri-eye-off-line":"ri-eye-line",type:a(v)?"text":"password",autocomplete:"password",label:a(l)("platform.user.form.password.title"),rules:U.password,clearable:"","onClick:appendInner":n[3]||(n[3]=r=>v.value=!a(v))},null,8,["modelValue","append-inner-icon","type","label","rules"]),[[T,a(l)("platform.user.form.password.tip")]])]),_:1},512)])]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["height"]))}},Ta=$(wa,[["__scopeId","data-v-9ce3fffe"]]);export{Ta as default};
