import{_ as vl}from"./ConfirmBox-D7POIP69.js";import{_ as hl}from"./Result-0C3w8lY6.js";import{h as u,g as gl,d as yl,e as kl,b as _l,a2 as wl,j as Be,a3 as Vl,f as Cl,a4 as xl,a5 as Il,a6 as $l,c as F,l as e,o as s,y as i,F as N,a,w as l,q as n,t as r,x as g,p as b,W as ql,s as U,m as Dl,a7 as K,a8 as je,P as Ce,Q as xe,G as ce,E as O,a9 as He,V as Ul,k as L,aa as Sl,ab as Ke,v as Ie,ac as Qe,B as $e}from"./index-CdazYsXs.js";import{h as Q}from"./axios-B6WrsswM.js";import{c as me}from"./colors-DoZdCu1D.js";import{m as Tl}from"./mod-DiUmSy7K.js";import{M as Pl}from"./preview-Bnslggab.js";import{V as v}from"./VCol-nofoYWO0.js";import{V as S,c as T,a as $,b as te}from"./VCard-CGfU41V6.js";import{V as y}from"./VRow-BSBKnbX1.js";import{V as c}from"./VChip-D5T73rYJ.js";import{T as k}from"./index-BUte65zl.js";import{V as z}from"./VDialog-BTFCVy4A.js";import{V as Ll}from"./VForm-CvuAZ-6x.js";import{V as Ye}from"./VAlert-3mEnB9cA.js";import{V as qe}from"./VTextField-D0Ki9G5g.js";import{V as Ml}from"./VNumberInput-DfeDwIoy.js";import{V as E}from"./VSpacer-BlbldoqA.js";import{V as Je}from"./VDataTable-BN1SJioQ.js";import{V as Xe}from"./VMenu-BFDj5E0P.js";import{V as Ze}from"./VList-DRcsg_FG.js";import{V as Al}from"./VSkeletonLoader-ChnwrmF1.js";import{V as el}from"./VSparkline-CT-EefhJ.js";import{V as De,a as Y}from"./VRadioGroup-CBmBoobw.js";import{V as fe}from"./VSelect-D-CpaDxw.js";import{V as Fl}from"./VSwitch-95IXMkL3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VContainer-i_8MNGz0.js";/* empty css              */import"./index-F_tKZn5V.js";import"./VTooltip-BVw35RBe.js";import"./dialog-transition-BV35mueV.js";import"./VInput-xf8cSZvT.js";import"./VPagination-Cpy1tpsp.js";import"./VCheckboxBtn-BjZNuGS_.js";import"./VSelectionControl-DN4LuCu6.js";import"./VTable-B9rlmoSI.js";import"./filter-_9W70m4p.js";import"./ssrBoot-BdSAGq_c.js";const W={exec:{game:{url:"/dashboard/exec/game",post:async function(q){return await Q.post(this.url,q)}}},info:{base:{url:"/dashboard/info/base",get:async function(q){return await Q.get(this.url,q)}},sys:{url:"/dashboard/info/sys",get:async function(q){return await Q.get(this.url,q)}}},connectionCode:{url:"/dashboard/connection_code",get:async function(q){return await Q.get(this.url,q)},put:async function(q){return await Q.put(this.url,q)}},check:{lobby:{url:"/dashboard/check/lobby",post:async function(q){return await Q.post(this.url,q)}}}},Nl={class:"d-flex align-center justify-center fill-height"},Ol={class:"fcc"},El={class:"ml-2"},Rl={class:"d-flex align-center justify-center"},zl={class:"mr-2 ml-1"},Wl={class:"ml-2"},Da={__name:"index",setup(q){const Ue=u(window.innerHeight),w=gl(),Se=yl(),{mobile:P}=kl(),{t}=_l(),m=u(),pe=u(),J=u(0),be=async()=>{if(w.room.id===0)return;const f={roomID:w.room.id},o=await W.info.base.get(f);m.value=o.data},M=u(),Te=["#f72047","#ffd200","#1feaea"],ve=u(Array(30).fill(0)),he=u(Array(30).fill(0)),Pe=async()=>{if(w.room.id===0)return;const f=await W.info.sys.get();if(!f.data)return;const o=Number(f.data.cpu)||0,h=Number(f.data.memory)||0;M.value={...f.data,cpu:o,memory:h},ve.value=[...ve.value.slice(1),o],he.value=[...he.value.slice(1),h]},p=u({startup:{visible:!1,loading:!1},shutdown:{visible:!1,loading:!1},restart:{visible:!1,loading:!1},clean:{visible:!1,loading:!1},rollback:{visible:!1,loading:!1}}),ll=[{title:t("dashboard.card5.worldName"),value:"worldName"},{title:t("dashboard.card5.isMaster"),value:"isMaster"},{title:"CPU",value:"cpu"},{title:t("dashboard.card5.mem"),value:"mem"},{title:t("dashboard.card5.disk"),value:"disk"},{title:t("dashboard.card5.status"),value:"status",minWidth:100}],ge=u(!1),V=f=>{const o={type:f.type,roomID:w.room.id,worldID:f.worldID,extra:f.extra};ge.value=!0,Object.keys(p.value).forEach(h=>{p.value[h].loading=!0}),W.exec.game.post(o).then(h=>{$e(h.message),Object.keys(p.value).forEach(H=>{p.value[H].visible=!1})}).finally(()=>{Object.keys(p.value).forEach(h=>{p.value[h].loading=!1}),ge.value=!1,be()})},X=u(""),C=u({worlds:[],selectedWorldID:void 0,cmd:""}),G=u(!1),Z=u("frontend"),B=u(!1),oe=u("reset-no-force"),Le=u(),de=u(!1),ye=u(!1),Me=u([]),al=async()=>{ye.value=!0;const f={roomID:w.room.id,worldID:m.value.worlds[0].id},o=await Tl.setting.enabledMods.get(f);Me.value=o.data,ye.value=!1},tl=[{key:"preview_url",title:t("game.mod.add.preview")},{key:"name",title:t("game.mod.add.name")},{key:"serverSize",title:t("game.mod.add.size")},{key:"id",title:"ID"}],ke=u(!1),_e=u(""),we=()=>{if(w.room.id===0)return;ke.value=!0;const f={roomID:w.room.id};W.connectionCode.get(f).then(o=>{_e.value=o.data}).finally(()=>{ke.value=!1})},R=u(!1),Ae=u(),j=u({id:"",port:void 0}),Fe=u({ip:[f=>f?wl(f)?!0:t("dashboard.card1.item.custom.ip.required1"):t("dashboard.card1.item.custom.ip.required")],port:[f=>f?!0:t("dashboard.card1.item.custom.port.required")]}),re=u(!1),ol=async()=>{const{valid:f}=await Ae.value.validate();if(!f)return;re.value=!0;const o={roomID:w.room.id,ip:j.value.ip,port:j.value.port},h=await W.connectionCode.put(o);re.value=!1,R.value=!1,$e(h.message),we()},dl=()=>{re.value=!0;const f={roomID:w.room.id,ip:"",port:0};W.connectionCode.put(f).then(o=>{R.value=!1,$e(o.message),we()}).finally(()=>{re.value=!1})},Ne=u(!1),ne=u(!1),rl=[{label:"ap-southeast-1",value:"ap-southeast-1"},{label:"ap-east-1",value:"ap-east-1"},{label:"us-east-1",value:"us-east-1"},{label:"eu-central-1",value:"eu-central-1"}],se=u(["ap-southeast-1","ap-east-1"]),Oe=(f=!1)=>{if(f)return;ne.value=!0;const o={gameName:m.value.room.gameName,maxPlayer:m.value.room.maxPlayer,regions:se.value};W.check.lobby.post(o).then(h=>{Ne.value=h.data}).finally(()=>{ne.value=!1})},ee=u(!1),nl=Be(()=>w.theme),le=u("player"),x=u(),I=u(""),A=u(),_=u(""),sl=[{label:t("dashboard.card3.quickCmd.playerOptions.godmode"),value:0},{label:t("dashboard.card3.quickCmd.playerOptions.buildermode"),value:1},{label:t("dashboard.card3.quickCmd.playerOptions.invisiblemode"),value:2},{label:t("dashboard.card3.quickCmd.playerOptions.oneattacktokill"),value:3},{label:t("dashboard.card3.quickCmd.playerOptions.unlockalltech"),value:4},{label:t("dashboard.card3.quickCmd.playerOptions.movingspeed4"),value:5},{label:t("dashboard.card3.quickCmd.playerOptions.reselectcharacter"),value:6},{label:t("dashboard.card3.quickCmd.playerOptions.respawn"),value:7},{label:t("dashboard.card3.quickCmd.playerOptions.mapclear"),value:8}],il=()=>{if(!/^KU_/.test(I.value)){koiMsgError(language.value==="zh"?"请输入正确的玩家UID":"Please input the correct player UID");return}x.value===0&&(_.value=`UserToPlayer('${I.value}').components.health:SetInvincible(true)`),x.value===1&&(_.value=`for k, v in pairs(AllPlayers) do if v.userid=='${I.value}' then AllPlayers[k].components.builder:GiveAllRecipes() end end`),x.value===2&&(_.value=`UserToPlayer('${I.value}'):AddTag('debugnoattack')`),x.value===3&&(_.value=`UserToPlayer('${I.value}').components.combat.CalcDamage = function() return 9999999999 * 9 end`),x.value===4&&(_.value=`UserToPlayer('${I.value}').components.builder:UnlockRecipesForTech({SCIENCE = 1, MAGIC = 1, ANCIENT = 1, SHADOW = 1, CARTOGRAPHY = 1})`),x.value===5&&(_.value=`UserToPlayer('${I.value}').components.locomotor:SetExternalSpeedMultiplier(UserToPlayer('${I.value}'), 'c_speedmult', 4)`),x.value===6&&(_.value=`c_despawn(UserToPlayer('${I.value}'))`),x.value===7&&(_.value=`for k, v in pairs(AllPlayers) do if v.userid=='${I.value}' then AllPlayers[k]:PushEvent('respawnfromghost') end end`),x.value===8&&(_.value=`local p=UserToPlayer('${I.value}')if p then local s=2*TheWorld.Map:GetSize()for x=-s,s,32 do for z=-s,s,32 do p.player_classified.MapExplorer:RevealArea(x,0,z)end end end`)},ul=[{label:t("dashboard.card3.quickCmd.worldOptions.rollback6days"),value:0},{label:t("dashboard.card3.quickCmd.worldOptions.skip1day"),value:1},{label:t("dashboard.card3.quickCmd.worldOptions.nextphase"),value:2},{label:t("dashboard.card3.quickCmd.worldOptions.save"),value:3}],cl=()=>{A.value===0&&(_.value="c_rollback(6)"),A.value===1&&(_.value="c_skip(1)"),A.value===2&&(_.value="TheWorld:PushEvent('ms_nextphase')"),A.value===3&&(_.value="c_save()")},ml=()=>{C.value.cmd=_.value,ee.value=!1,_.value="",x.value=void 0,A.value=void 0},fl=Be(()=>Vl(w.language));let ie=null,ue=null;const pl=()=>{ie=setInterval(()=>{be()},1e4)},bl=()=>{ue=setInterval(()=>{Pe()},2e3)},Ee=()=>{ie&&(clearInterval(ie),ie=null)},Re=()=>{ue&&(clearInterval(ue),ue=null)},Ve=xl(()=>{Ue.value=window.innerHeight,pe.value&&(J.value=pe.value.$el.offsetWidth)},200),ae=()=>Math.max(2,Math.floor(Ue.value-150)),ze=u(!1);return Cl(async()=>{await Promise.all([be(),Pe()]),ze.value=!0,we(),C.value.worlds=m.value?.worlds||[],Ve(),window.addEventListener("resize",Ve),pl(),bl()}),Il(()=>{Ee(),Re(),window.removeEventListener("beforeunload",Ee),window.removeEventListener("beforeunload",Re),window.removeEventListener("resize",Ve)}),(f,o)=>{const h=hl,H=vl,We=$l("copy");return e(w).gameVersion.local!==0?(s(),F(N,{key:0},[e(w).room.id!==0?(s(),F(N,{key:0},[e(ze)?(s(),F(N,{key:0},[a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(S,{ref_key:"card1Ref",ref:pe,"min-height":"350"},{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card1.title")),1)]),_:1}),a($,{class:"mt-8 mb-4"},{default:l(()=>[a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-2"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.roomName")),1)]),_:1}),g((s(),i(b,{variant:"text","append-icon":"ri-file-copy-line",class:"text-none"},{default:l(()=>[n(r(e(ql)(e(m).room.gameName,e(P)?(e(J)-200)/15:(e(J)-400)/30)),1)]),_:1})),[[We,e(m).room.gameName]])]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-2"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.connectCode")),1)]),_:1}),g(a(b,{loading:e(ke),variant:"text",icon:"ri-file-copy-line"},null,8,["loading"]),[[We,e(_e)],[k,e(_e)]]),g((s(),i(b,{variant:"text",color:"default",onClick:o[0]||(o[0]=d=>R.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.button")),1)]),_:1})),[[k,e(t)("dashboard.card1.item.custom.tip")]]),a(z,{modelValue:e(R),"onUpdate:modelValue":o[4]||(o[4]=d=>U(R)?R.value=d:null),width:e(P)?"90%":"60%"},{default:l(()=>[a(S,null,{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.title")),1)]),_:1}),a(Ll,{ref_key:"customConnectionCodeFormRef",ref:Ae,onSubmit:Dl(ol,["prevent"])},{default:l(()=>[a($,null,{default:l(()=>[a(Ye,{text:e(t)("dashboard.card1.item.custom.tip"),type:"info",variant:"tonal",class:"mb-8"},null,8,["text"]),g(a(qe,{modelValue:e(j).ip,"onUpdate:modelValue":o[1]||(o[1]=d=>e(j).ip=d),rules:e(Fe).ip,label:e(t)("dashboard.card1.item.custom.ip.title"),class:"mb-8"},null,8,["modelValue","rules","label"]),[[k,e(t)("dashboard.card1.item.custom.ip.tip")]]),g(a(Ml,{modelValue:e(j).port,"onUpdate:modelValue":o[2]||(o[2]=d=>e(j).port=d),rules:e(Fe).port,label:e(t)("dashboard.card1.item.custom.port.title"),min:1,max:65535},null,8,["modelValue","rules","label"]),[[k,e(t)("dashboard.card1.item.custom.port.tip")]])]),_:1}),a(te,{class:"mr-4 mb-4"},{default:l(()=>[a(E),a(b,{variant:"elevated",color:"defalut",onClick:o[3]||(o[3]=d=>R.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),g((s(),i(b,{variant:"elevated",color:"warning",onClick:dl},{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.clear.title")),1)]),_:1})),[[k,e(t)("dashboard.card1.item.custom.clear.tip")]]),a(b,{variant:"elevated",color:"primary",type:"submit"},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue","width"])]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.cycles")),1)]),_:1}),e(m).session.cycles!==-1?(s(),i(c,{key:0},{default:l(()=>[n(r(e(m).session.cycles),1)]),_:1})):(s(),i(c,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gameMode")),1)]),_:1}),a(c,null,{default:l(()=>[n(r(e(t)(`game.base.step1.gameMode.modes.${e(m).room.gameMode}`)),1)]),_:1})]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gameSeason")),1)]),_:1}),e(m).session.season!=="error"?(s(),i(c,{key:0},{default:l(()=>[n(r(e(t)(`dashboard.card1.season.${e(m).session.season}`))+"("+r(e(m).session.elapsedDays)+"/"+r(e(m).session.seasonLength[e(m).session.season])+") ",1)]),_:1})):(s(),i(c,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gamePhase")),1)]),_:1}),e(m).session.phase!=="error"?(s(),i(c,{key:0},{default:l(()=>[n(r(e(t)(`dashboard.card1.phase.${e(m).session.phase}`)),1)]),_:1})):(s(),i(c,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),(e(m).room.modInOne?e(K)(e(m).room.modData).length:e(K)(e(m).worlds[0].modData).length)===0?(s(),i(c,{key:0},{default:l(()=>[n(r(e(m).room.modInOne?e(K)(e(m).room.modData).length:e(K)(e(m).worlds[0].modData).length),1)]),_:1})):(s(),i(c,{key:1,onClick:o[5]||(o[5]=d=>{de.value=!0,al()})},{default:l(()=>[n(r(e(m).room.modInOne?e(K)(e(m).room.modData).length:e(K)(e(m).worlds[0].modData).length),1)]),_:1})),a(z,{modelValue:e(de),"onUpdate:modelValue":o[6]||(o[6]=d=>U(de)?de.value=d:null),width:e(P)?"90%":"60%"},{default:l(()=>[a(S,null,{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),e(ye)?(s(),i($,{key:1},{default:l(()=>[a(h,{type:"info",title:e(t)("game.base.loading"),height:ae()/2},null,8,["title","height"])]),_:1})):(s(),i($,{key:0},{default:l(()=>[a(je,{border:"",rounded:"",class:"mt-4"},{default:l(()=>[a(Je,{headers:tl,items:e(Me)},{loading:l(()=>[a(Al,{type:"table-row@10"})]),"item.preview_url":l(({value:d})=>[a(Ul,{src:d,width:100,cover:"",rounded:"","aspect-ratio":"1",class:"ma-2"},{placeholder:l(()=>[L("div",Nl,[a(Sl,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),"item.name":l(({value:d})=>[a(c,{label:"",color:"info"},{default:l(()=>[n(r(d),1)]),_:2},1024)]),"item.serverSize":l(({value:d})=>[a(c,{label:"",color:"primary"},{default:l(()=>[n(r(e(He)(parseInt(d))),1)]),_:2},1024)]),"item.id":l(({value:d})=>[a(c,{label:""},{default:l(()=>[n(r(d),1)]),_:2},1024)]),"item.update":l(({item:d})=>[d.file_url!==""?(s(),i(c,{key:0,label:""},{default:l(()=>[n(r(e(t)("game.mod.add.notUGC")),1)]),_:1})):O("",!0),d.file_url===""&&d.serverSize===d.localSize?(s(),i(c,{key:1,label:"",color:"success"},{default:l(()=>[n(r(e(t)("game.mod.add.needNoUpdate")),1)]),_:1})):O("",!0),d.file_url===""&&d.serverSize!==d.localSize?(s(),i(c,{key:2,label:"",color:"error"},{default:l(()=>[n(r(e(t)("game.mod.add.needUpdate")),1)]),_:1})):O("",!0)]),"item.actions":l(({item:d})=>[a(b,{color:"info","append-icon":"ri-arrow-drop-down-line",variant:"text"},{default:l(()=>[n(r(e(t)("game.mod.add.actions"))+" ",1),a(Xe,{activator:"parent"},{default:l(()=>[a(Ze,null,{default:l(()=>[a(Ce,{disabled:f.modEnableLoading,class:"text-success",onClick:D=>f.handleModAction("enable",d)},{prepend:l(()=>[a(ce,{icon:"ri-file-check-line",size:"22"})]),default:l(()=>[a(xe,null,{default:l(()=>[n(r(e(t)("game.mod.add.enable")),1)]),_:1})]),_:1},8,["disabled","onClick"]),a(Ce,{disabled:f.modUpdateLoading,class:"text-info",onClick:D=>f.handleModAction("update",d)},{prepend:l(()=>[a(ce,{icon:"ri-arrow-up-circle-line",size:"22"})]),default:l(()=>[a(xe,null,{default:l(()=>[n(r(e(t)("game.mod.add.updateMod")),1)]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(c,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.players")),1)]),_:1}),g((s(),i(c,null,{default:l(()=>[n(" ("+r(e(m).players?.length||0)+"/"+r(e(m).room.maxPlayer)+") ",1)]),_:1})),[[k,e(m).players.map(d=>d.nickname).join(", ")]])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(S,{"min-height":"350"},{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card2.title")),1)]),_:1}),a($,null,{default:l(()=>[a(y,{class:"mt-4"},{default:l(()=>[a(v,{cols:"12",md:"5"},{default:l(()=>[L("div",null,[L("div",Ol,[a(ce,{icon:"ri-cpu-line"}),o[45]||(o[45]=L("span",{class:"mr-2 ml-1"},"CPU",-1)),a(Ke,{"model-value":e(M).cpu,rounded:"",height:"8",indeterminate:e(M).cpu===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),L("span",El,r(e(M).cpu.toFixed(1))+"%",1)]),a(el,{width:e(J)/12*5,height:306-22.5-72,gradient:Te,"gradient-direction":"top","line-width":3,"model-value":e(ve),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1}),e(P)?O("",!0):(s(),i(E,{key:0})),a(v,{cols:"12",md:"5"},{default:l(()=>[L("div",null,[L("div",Rl,[a(ce,{icon:"ri-ram-2-line"}),L("span",zl,r(e(t)("dashboard.card2.memory")),1),a(Ke,{"model-value":e(M).memory,rounded:"",height:"8",indeterminate:e(M).memory===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),L("span",Wl,r(e(M).memory.toFixed(1))+"%",1)]),a(el,{width:e(J)/12*5,height:306-22.5-72,gradient:Te,"gradient-direction":"top","line-width":3,"model-value":e(he),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(S,{"min-height":"295"},{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card3.title")),1)]),_:1}),a($,{class:"mx-4"},{default:l(()=>[a(y,{class:"mt-4"},{default:l(()=>[g((s(),i(b,{class:"mr-4 mb-4",color:"success",onClick:o[7]||(o[7]=d=>e(p).startup.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.startup.title")),1)]),_:1})),[[k,e(t)("dashboard.card3.startup.tip")]]),a(H,{modelValue:e(p).startup.visible,"onUpdate:modelValue":o[8]||(o[8]=d=>e(p).startup.visible=d),type:"info",title:e(t)("dashboard.card3.startup.title"),content:e(t)("dashboard.card3.startup.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).startup.loading,onConfirm:o[9]||(o[9]=d=>V({type:"startup",extra:"all"})),onCancel:o[10]||(o[10]=d=>e(p).startup.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:"error",onClick:o[11]||(o[11]=d=>e(p).shutdown.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.shutdown.title")),1)]),_:1})),[[k,e(t)("dashboard.card3.shutdown.tip")]]),a(H,{modelValue:e(p).shutdown.visible,"onUpdate:modelValue":o[12]||(o[12]=d=>e(p).shutdown.visible=d),type:"info",title:e(t)("dashboard.card3.shutdown.title"),content:e(t)("dashboard.card3.shutdown.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).shutdown.loading,onConfirm:o[13]||(o[13]=d=>V({type:"shutdown",extra:"all"})),onCancel:o[14]||(o[14]=d=>e(p).shutdown.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:"warning",onClick:o[15]||(o[15]=d=>e(p).restart.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.restart.title")),1)]),_:1})),[[k,e(t)("dashboard.card3.restart.tip")]]),a(H,{modelValue:e(p).restart.visible,"onUpdate:modelValue":o[16]||(o[16]=d=>e(p).restart.visible=d),type:"info",title:e(t)("dashboard.card3.restart.title"),content:e(t)("dashboard.card3.restart.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).restart.loading,onConfirm:o[17]||(o[17]=d=>V({type:"restart"})),onCancel:o[18]||(o[18]=d=>e(p).restart.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:"info",disabled:e(Se).userInfo.role!=="admin",loading:e(M).updating,onClick:o[19]||(o[19]=d=>G.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1},8,["disabled","loading"])),[[k,e(t)("dashboard.card3.update.tip")]]),a(z,{modelValue:e(G),"onUpdate:modelValue":o[23]||(o[23]=d=>U(G)?G.value=d:null),width:e(P)?"85%":"40%"},{default:l(()=>[a(S,null,{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1}),a($,null,{default:l(()=>[a(De,{modelValue:e(Z),"onUpdate:modelValue":o[20]||(o[20]=d=>U(Z)?Z.value=d:null),inline:"",color:"primary",class:"mt-2"},{prepend:l(()=>[a(c,null,{default:l(()=>[n(r(e(t)("dashboard.card3.update.type")),1)]),_:1})]),default:l(()=>[g(a(Y,{label:e(t)("dashboard.card3.update.frontend.title"),value:"frontend"},null,8,["label"]),[[k,e(t)("dashboard.card3.update.frontend.tip")]]),g(a(Y,{label:e(t)("dashboard.card3.update.backend.title"),value:"backend"},null,8,["label"]),[[k,e(t)("dashboard.card3.update.backend.tip")]])]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:l(()=>[a(E),a(b,{color:"default",variant:"elevated",onClick:o[21]||(o[21]=d=>G.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),e(Z)==="frontend"?(s(),i(b,{key:0,variant:"elevated",to:"/install"},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):O("",!0),e(Z)==="backend"?(s(),i(b,{key:1,variant:"elevated",onClick:o[22]||(o[22]=d=>{V({type:"update"}),G.value=!1,e(M).updating=!0})},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),a(y,{class:"mb-4"},{default:l(()=>[g((s(),i(b,{class:"mr-4 mb-4",color:e(me).purple.base,onClick:o[24]||(o[24]=d=>B.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1},8,["color"])),[[k,e(t)("dashboard.card3.reset.tip")]]),a(z,{modelValue:e(B),"onUpdate:modelValue":o[28]||(o[28]=d=>U(B)?B.value=d:null),width:e(P)?"85%":"40%"},{default:l(()=>[a(S,null,{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1}),a($,null,{default:l(()=>[a(De,{modelValue:e(oe),"onUpdate:modelValue":o[25]||(o[25]=d=>U(oe)?oe.value=d:null),inline:"",color:"primary",class:"mt-2"},{prepend:l(()=>[a(c,null,{default:l(()=>[n(r(e(t)("dashboard.card3.reset.resetType")),1)]),_:1})]),default:l(()=>[g(a(Y,{label:e(t)("dashboard.card3.reset.noForced.title"),value:"reset-no-force"},null,8,["label"]),[[k,e(t)("dashboard.card3.reset.noForced.tip")]]),g(a(Y,{label:e(t)("dashboard.card3.reset.forced.title"),value:"force"},null,8,["label"]),[[k,e(t)("dashboard.card3.reset.forced.tip")]])]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:l(()=>[a(E),a(b,{color:"default",variant:"elevated",onClick:o[26]||(o[26]=d=>B.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),a(b,{variant:"elevated",onClick:o[27]||(o[27]=d=>{V({type:"reset",extra:e(oe)}),B.value=!1})},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),g((s(),i(b,{class:"mr-4 mb-4",color:e(me).brown.base},{default:l(()=>[n(r(e(t)("dashboard.card3.clean.title"))+" ",1),a(Xe,{activator:"parent"},{default:l(()=>[a(Ze,null,{default:l(()=>[(s(!0),F(N,null,Ie(e(C).worlds,(d,D)=>(s(),i(Ce,{key:D,value:d.id,onClick:Ge=>{Le.value=d.id,e(p).clean.visible=!0}},{default:l(()=>[a(xe,null,{default:l(()=>[n(r(d.worldName),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["color"])),[[k,e(t)("dashboard.card3.clean.tip")]]),a(H,{modelValue:e(p).clean.visible,"onUpdate:modelValue":o[29]||(o[29]=d=>e(p).clean.visible=d),type:"info",title:e(t)("dashboard.card3.clean.title"),content:e(t)("dashboard.card3.clean.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).clean.loading,onConfirm:o[30]||(o[30]=d=>V({type:"delete",worldID:e(Le)})),onCancel:o[31]||(o[31]=d=>e(p).clean.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:e(me).cyan.darken1,onClick:o[32]||(o[32]=d=>ee.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.quickCmd.title")),1)]),_:1},8,["color"])),[[k,e(t)("dashboard.card3.quickCmd.tip")]]),a(z,{modelValue:e(ee),"onUpdate:modelValue":o[36]||(o[36]=d=>U(ee)?ee.value=d:null),width:e(P)?"90%":"60%"},{default:l(()=>[a(S,null,{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card3.quickCmd.title")),1)]),_:1}),a($,null,{default:l(()=>[a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(De,{modelValue:e(le),"onUpdate:modelValue":o[33]||(o[33]=d=>U(le)?le.value=d:null),inline:"",color:"primary",class:"my-4"},{default:l(()=>[a(Y,{label:e(t)("dashboard.card3.quickCmd.player"),value:"player"},null,8,["label"]),a(Y,{label:e(t)("dashboard.card3.quickCmd.world"),value:"world"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[(s(!0),F(N,null,Ie(e(m).players,d=>(s(),i(b,{variant:"text",class:"mr-2",onClick:D=>I.value=d.uid},{default:l(()=>[n(r(d.nickname),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(fe,{modelValue:e(x),"onUpdate:modelValue":[o[34]||(o[34]=d=>U(x)?x.value=d:null),il],disabled:e(I)===""||e(le)!=="player",items:sl,label:e(t)("dashboard.card3.quickCmd.playerCmd"),"item-title":"label","item-value":"value"},null,8,["modelValue","disabled","label"])]),_:1}),e(P)?O("",!0):(s(),i(E,{key:0}))]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(fe,{modelValue:e(A),"onUpdate:modelValue":[o[35]||(o[35]=d=>U(A)?A.value=d:null),cl],disabled:e(le)!=="world",items:ul,label:e(t)("dashboard.card3.quickCmd.worldCmd"),"item-title":"label","item-value":"value"},null,8,["modelValue","disabled","label"])]),_:1}),e(P)?O("",!0):(s(),i(E,{key:0}))]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(e(Pl),{"model-value":"```lua ::open\n"+e(_),theme:e(nl),language:e(fl),"preview-theme":"github",class:"mdp"},null,8,["model-value","theme","language"])]),_:1})]),_:1})]),_:1}),a(te,null,{default:l(()=>[a(E),a(b,{variant:"elevated",text:e(t)("dashboard.card3.quickCmd.insert"),onClick:ml},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),g((s(),i(b,{class:"mr-4 mb-4",color:e(me).teal.base},{default:l(()=>[n(r(e(t)("dashboard.card3.check.title"))+" ",1),a(z,{activator:"parent",width:e(P)?"90%":"60%",onAfterEnter:Oe},{default:l(({isActive:d})=>[a(S,{"min-height":"520"},{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card3.check.title")),1)]),_:1}),a($,null,{default:l(()=>[a(fe,{modelValue:e(se),"onUpdate:modelValue":o[37]||(o[37]=D=>U(se)?se.value=D:null),multiple:"",chips:"",density:"compact",label:e(t)("dashboard.card3.check.region"),class:"mt-8","item-title":"label","item-value":"value",items:rl,disabled:e(ne),"onUpdate:menu":Oe},null,8,["modelValue","label","disabled"]),e(ne)?(s(),i(h,{key:0,height:476,type:"info",title:e(t)("dashboard.card3.check.result.loading.title"),"sub-title":e(t)("dashboard.card3.check.result.loading.subTitle")},null,8,["title","sub-title"])):(s(),F(N,{key:1},[e(Ne)?(s(),i(h,{key:0,height:476,type:"success",title:e(t)("dashboard.card3.check.result.success.title"),"sub-title":e(t)("dashboard.card3.check.result.success.subTitle")},null,8,["title","sub-title"])):(s(),i(h,{key:1,height:476,type:"error",title:e(t)("dashboard.card3.check.result.error.title"),"sub-title":e(t)("dashboard.card3.check.result.error.subTitle")},null,8,["title","sub-title"]))],64))]),_:1})]),_:1})]),_:1},8,["width"])]),_:1},8,["color"])),[[k,e(t)("dashboard.card3.check.tip")]])]),_:1}),a(y,null,{default:l(()=>[g((s(),i(c,{label:"",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card3.rollback.title")),1)]),_:1})),[[k,e(t)("dashboard.card3.rollback.tip")]]),(s(!0),F(N,null,Ie(e(P)?[1,2,3,4]:[1,2,3,4,5,6,7,8,9],d=>(s(),i(b,{color:"default",size:"x-small",class:"mr-4 mb-4"},{default:l(()=>[n(r(d)+" ",1),a(z,{activator:"parent","max-width":"500px",persistent:""},{default:l(({isActive:D})=>[a(S,null,{default:l(()=>[a(T,{class:"d-flex align-center"},{default:l(()=>[L("span",null,r(e(t)("dashboard.card3.rollback.title")),1)]),_:1}),a($,null,{default:l(()=>[a(Ye,{text:e(t)("dashboard.card3.rollback.confirm.c1")+d+e(t)("dashboard.card3.rollback.confirm.c2"),type:"info",variant:"tonal"},null,8,["text"])]),_:2},1024),a(te,{class:"pa-4"},{default:l(()=>[a(E),a(b,{variant:"elevated",color:"default",onClick:Ge=>D.value=!1},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1},8,["onClick"]),a(b,{variant:"elevated",loading:e(p).rollback.loading,onClick:Ge=>{V({type:"console",extra:`c_rollback(${d})`,worldID:e(m).worlds[0].id}),D.value=!1}},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(S,{"min-height":"295"},{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card4.title")),1)]),_:1}),a($,null,{default:l(()=>[a(y,{class:"mt-8"},{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(qe,{modelValue:e(X),"onUpdate:modelValue":o[38]||(o[38]=d=>U(X)?X.value=d:null),"append-inner-icon":"ri-send-plane-fill",class:"w-100",label:e(t)("dashboard.card4.announce"),clearable:"","onClick:appendInner":o[39]||(o[39]=d=>V({type:"announce",extra:e(X)})),onKeyup:o[40]||(o[40]=Qe(d=>V({type:"announce",extra:e(X)}),["enter"]))},null,8,["modelValue","label"])]),_:1})]),_:1}),a(y,{class:"my-8"},{default:l(()=>[a(v,{cols:"12",md:"3"},{default:l(()=>[a(fe,{modelValue:e(C).selectedWorldID,"onUpdate:modelValue":o[41]||(o[41]=d=>e(C).selectedWorldID=d),label:e(t)("dashboard.card4.world"),class:"mr-1","item-title":"worldName","item-value":"id",items:e(C).worlds},null,8,["modelValue","label","items"])]),_:1}),a(v,{cols:"12",md:"9"},{default:l(()=>[a(qe,{modelValue:e(C).cmd,"onUpdate:modelValue":o[42]||(o[42]=d=>e(C).cmd=d),"append-inner-icon":"ri-send-plane-fill",label:e(t)("dashboard.card4.cmd"),clearable:"",disabled:e(C).selectedWorldID===void 0,"onClick:appendInner":o[43]||(o[43]=d=>V({type:"console",extra:e(C).cmd,worldID:e(C).selectedWorldID})),onKeyup:o[44]||(o[44]=Qe(d=>V({type:"console",extra:e(C).cmd,worldID:e(C).selectedWorldID}),["enter"]))},null,8,["modelValue","label","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(S,null,{default:l(()=>[a(T,null,{default:l(()=>[n(r(e(t)("dashboard.card5.title")),1)]),_:1}),a($,{class:"my-8"},{default:l(()=>[a(y,null,{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(je,{rounded:"",border:""},{default:l(()=>[a(Je,{items:e(m).worlds,headers:ll,"hide-default-footer":""},{"item.worldName":l(({value:d})=>[a(c,{color:"primary",label:""},{default:l(()=>[n(r(d),1)]),_:2},1024)]),"item.isMaster":l(({value:d})=>[d?(s(),i(c,{key:0,color:"success",label:""},{default:l(()=>[...o[46]||(o[46]=[n(" 是 ",-1)])]),_:1})):(s(),i(c,{key:1,label:""},{default:l(()=>[...o[47]||(o[47]=[n(" 否 ",-1)])]),_:1}))]),"item.cpu":l(({item:d})=>[a(c,{label:"",color:"info"},{default:l(()=>[n(r(d.performanceStatus.cpu.toFixed(2))+"% ",1)]),_:2},1024)]),"item.mem":l(({item:d})=>[a(c,{label:"",color:"info"},{default:l(()=>[n(r(d.performanceStatus.mem.toFixed(2))+"% ("+r(d.performanceStatus.memSize)+" MB) ",1)]),_:2},1024)]),"item.disk":l(({item:d})=>[a(c,{label:"",color:"info"},{default:l(()=>[n(r(e(He)(d.performanceStatus.disk)),1)]),_:2},1024)]),"item.status":l(({item:d})=>[a(Fl,{modelValue:d.status,"onUpdate:modelValue":D=>d.status=D,loading:e(ge),color:"success","hide-details":"",onChange:D=>d.status?V({type:"startup",worldID:d.id}):V({type:"shutdown",worldID:d.id})},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)):(s(),i(h,{key:1,type:"info",title:e(t)("game.base.loading"),height:ae()},null,8,["title","height"]))],64)):(s(),i(h,{key:1,title:e(t)("global.result.title"),"sub-title":e(t)("global.result.subTitle"),type:"error",height:ae()},{default:l(()=>[a(b,{to:"/rooms",class:"mt-4"},{default:l(()=>[n(r(e(t)("global.result.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(s(),F(N,{key:1},[e(Se).userInfo.role==="admin"?(s(),i(h,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:ae(),type:"error"},{default:l(()=>[a(b,{to:"/install",class:"mt-4"},{default:l(()=>[n(r(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(s(),i(h,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:ae(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{Da as default};
