import{f as Be,e as Fe}from"./VInput-DLKXZnps.js";import{u as _e,V as ge,m as Le}from"./VTextField-BC-Dauxh.js";import{ac as pe,ad as te,bx as Pe,L as Y,ae as he,k as I,F as se,A as F,aR as Ce,e as Ee,a1 as N,bM as ye,h as ee,j as _,cd as Oe,c3 as xe,aL as fe,aq as Me,aw as Te,bz as Ae,bX as He,aY as ze,$ as ce,bZ as qe,f as Ne,ce as Ue,a as k,bq as ie,n as $e,H as Ke,a_ as je,aF as We,cb as Xe,Z as Ye,am as Ve,bW as Ze,bB as ve,G as we,P as be,cf as Ge,U as Je,z as Qe,cg as et,af as tt,q as lt,aH as nt,a$ as at,an as ot,ch as ke,ci as Se,ak as ut}from"./index-CUqMz98Q.js";import{u as st,V as rt,a as it,m as ct}from"./VList-B5PfedMW.js";import{V as dt}from"./VMenu-ClswS2ZL.js";import{V as ft}from"./VCheckboxBtn-D568hA48.js";import{V as Ie}from"./VChip-D52a5STx.js";import{V as vt}from"./dialog-transition-DKWwBUaX.js";const mt=te({renderless:Boolean,...Ce()},"VVirtualScrollItem"),pt=pe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:mt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:r,slots:n}=s;const{resizeRef:f,contentRect:p}=Pe(void 0,"border");Y(()=>p.value?.height,o=>{o!=null&&r("update:height",o)}),he(()=>e.renderless?I(se,null,[n.default?.({itemRef:f})]):I("div",F({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},l),[n.default?.()]))}}),ht=-1,gt=1,me=100,yt=te({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Vt(e,s){const l=Ee(),r=N(0);ye(()=>{r.value=parseFloat(e.itemHeight||0)});const n=N(0),f=N(Math.ceil((parseInt(e.height)||l.height.value)/(r.value||16))||1),p=N(0),o=N(0),c=ee(),S=ee();let u=0;const{resizeRef:R,contentRect:B}=Pe();ye(()=>{R.value=c.value});const L=_(()=>c.value===document.documentElement?l.height.value:B.value?.height||parseInt(e.height)||0),Z=_(()=>!!(c.value&&S.value&&L.value&&r.value));let y=Array.from({length:s.value.length}),b=Array.from({length:s.value.length});const P=N(0);let C=-1;function U(a){return y[a]||r.value}const $=Oe(()=>{const a=performance.now();b[0]=0;const d=s.value.length;for(let V=1;V<=d;V++)b[V]=(b[V-1]||0)+U(V-1);P.value=Math.max(P.value,performance.now()-a)},P),E=Y(Z,a=>{a&&(E(),u=S.value.offsetTop,$.immediate(),O(),~C&&Te(()=>{Ae&&window.requestAnimationFrame(()=>{ue(C),C=-1})}))});xe(()=>{$.clear()});function le(a,d){const V=y[a],x=r.value;r.value=x?Math.min(r.value,d):d,(V!==d||x!==r.value)&&(y[a]=d,$())}function D(a){a=fe(a,0,s.value.length);const d=Math.floor(a),V=a%1,x=d+1,j=b[d]||0,t=b[x]||j;return j+(t-j)*V}function h(a){return wt(b,a)}let G=0,K=0,ne=0;Y(L,(a,d)=>{O(),a<d&&requestAnimationFrame(()=>{K=0,O()})});let ae=-1;function M(){if(!c.value||!S.value)return;const a=c.value.scrollTop,d=performance.now();d-ne>500?(K=Math.sign(a-G),u=S.value.offsetTop):K=a-G,G=a,ne=d,window.clearTimeout(ae),ae=window.setTimeout(re,500),O()}function re(){!c.value||!S.value||(K=0,ne=0,window.clearTimeout(ae),O())}let oe=-1;function O(){cancelAnimationFrame(oe),oe=requestAnimationFrame(de)}function de(){if(!c.value||!L.value||!r.value)return;const a=G-u,d=Math.sign(K),V=Math.max(0,a-me),x=fe(h(V),0,s.value.length),j=a+L.value+me,t=fe(h(j)+1,x+1,s.value.length);if((d!==ht||x<n.value)&&(d!==gt||t>f.value)){const m=D(n.value)-D(x),w=D(t)-D(f.value);Math.max(m,w)>me?(n.value=x,f.value=t):(x<=0&&(n.value=x),t>=s.value.length&&(f.value=t))}p.value=D(n.value),o.value=D(s.value.length)-D(f.value)}function ue(a){const d=D(a);!c.value||a&&!d?C=a:c.value.scrollTop=d}const J=_(()=>s.value.slice(n.value,f.value).map((a,d)=>{const V=d+n.value;return{raw:a,index:V,key:Me(a,e.itemKey,V)}}));return Y(s,()=>{y=Array.from({length:s.value.length}),b=Array.from({length:s.value.length}),$.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:c,markerRef:S,computedItems:J,paddingTop:p,paddingBottom:o,scrollToIndex:ue,handleScroll:M,handleScrollend:re,handleItemResize:le}}function wt(e,s){let l=e.length-1,r=0,n=0,f=null,p=-1;if(e[l]<s)return l;for(;r<=l;)if(n=r+l>>1,f=e[n],f>s)l=n-1;else if(f<s)p=n,r=n+1;else return f===s?n:r;return p}const bt=te({items:{type:Array,default:()=>[]},renderless:Boolean,...yt(),...Ce(),...je()},"VVirtualScroll"),kt=pe()({name:"VVirtualScroll",props:bt(),setup(e,s){let{slots:l}=s;const r=He("VVirtualScroll"),{dimensionStyles:n}=ze(e),{calculateVisibleItems:f,containerRef:p,markerRef:o,handleScroll:c,handleScrollend:S,handleItemResize:u,scrollToIndex:R,paddingTop:B,paddingBottom:L,computedItems:Z}=Vt(e,ce(()=>e.items));return qe(()=>e.renderless,()=>{function y(){const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[P]("scroll",c,{passive:!0}),document[P]("scrollend",S)):(p.value?.[P]("scroll",c,{passive:!0}),p.value?.[P]("scrollend",S))}Ne(()=>{p.value=Ue(r.vnode.el,!0),y(!0)}),xe(y)}),he(()=>{const y=Z.value.map(b=>k(pt,{key:b.key,renderless:e.renderless,"onUpdate:height":P=>u(b.index,P)},{default:P=>l.default?.({item:b.raw,index:b.index,...P})}));return e.renderless?I(se,null,[I("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:ie(B.value)}},null),y,I("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ie(L.value)}},null)]):I("div",{ref:p,class:Ke(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:S,style:$e([n.value,e.style])},[I("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:ie(B.value),paddingBottom:ie(L.value)}},[y])])}),{calculateVisibleItems:f,scrollToIndex:R}}});function St(e,s){const l=N(!1);let r;function n(o){cancelAnimationFrame(r),l.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(l.value){const c=Y(l,()=>{c(),o()})}else o()})}async function p(o){if(o.key==="Tab"&&s.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=e.value?.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await f();const S=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=c.getBoundingClientRect().top;for(const R of S)if(R.getBoundingClientRect().top>=u){R.focus();break}}else{const u=c.getBoundingClientRect().bottom;for(const R of[...S].reverse())if(R.getBoundingClientRect().bottom<=u){R.focus();break}}}return{onScrollPassive:n,onKeydown:p}}const It=te({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Pt(e,s){const l=We(),r=_(()=>`menu-${l}`),n=ce(()=>Xe(s)),f=ce(()=>r.value);return{menuId:r,ariaExpanded:n,ariaControls:f}}const Ct=te({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ut,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...It(),...ct({itemChildren:!1})},"Select"),xt=te({...Ct(),...ot(Le({modelValue:null,role:"combobox"}),["validationValue","dirty"]),...at({transition:{component:vt}})},"VSelect"),Et=pe()({name:"VSelect",props:xt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:r}=Ye(),n=ee(),f=ee(),p=ee(),{items:o,transformIn:c,transformOut:S}=st(e),u=Ve(e,"modelValue",[],t=>c(t===null?[null]:Ze(t)),t=>{const m=S(t);return e.multiple?m:m[0]??null}),R=_(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),B=Be(e),L=_e(e),Z=_(()=>u.value.map(t=>t.value)),y=N(!1),b=ce(()=>e.closableChips&&!B.isReadonly.value&&!B.isDisabled.value),{InputIcon:P}=Fe(e);let C="",U=0,$;const E=_(()=>e.hideSelected?o.value.filter(t=>!u.value.some(m=>(e.valueComparator||ve)(m,t))):o.value),le=_(()=>e.hideNoData&&!E.value.length||B.isReadonly.value||B.isDisabled.value),D=Ve(e,"menu"),h=_({get:()=>D.value,set:t=>{D.value&&!t&&f.value?.Î¨openChildren.size||t&&le.value||(D.value=t)}}),{menuId:G,ariaExpanded:K,ariaControls:ne}=Pt(e,h),ae=_(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),M=ee(),re=St(M,n);function oe(t){e.openOnClear&&(h.value=!0)}function O(){le.value||(h.value=!h.value)}function de(t){ke(t)&&ue(t)}function ue(t){if(!t.key||B.isReadonly.value)return;if(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(h.value=!0),["Escape","Tab"].includes(t.key)&&(h.value=!1),e.clearable&&t.key==="Backspace"){t.preventDefault(),u.value=[],oe();return}t.key==="Home"?M.value?.focus("first"):t.key==="End"&&M.value?.focus("last");const m=1e3;if(!ke(t))return;const w=performance.now();w-$>m&&(C="",U=0),C+=t.key.toLowerCase(),$=w;const H=E.value;function z(){let v=T();return v||C.at(-1)===C.at(-2)&&(C=C.slice(0,-1),U++,v=T(),v)||(U=0,v=T(),v)?v:(C=t.key.toLowerCase(),T())}function T(){for(let v=U;v<H.length;v++){const W=H[v];if(W.title.toLowerCase().startsWith(C))return[W,v]}}const q=z();if(!q)return;const[i,g]=q;U=g,M.value?.focus(g),e.multiple||(u.value=[i])}function J(t){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const w=u.value.findIndex(z=>(e.valueComparator||ve)(z.value,t.value)),H=m??!~w;if(~w){const z=H?[...u.value,t]:[...u.value];z.splice(w,1),u.value=z}else H&&(u.value=[...u.value,t])}else{const w=m!==!1;u.value=w?[t]:[],Te(()=>{h.value=!1})}}function a(t){M.value?.$el.contains(t.relatedTarget)||(h.value=!1)}function d(){e.eager&&p.value?.calculateVisibleItems()}function V(){y.value&&n.value?.focus()}function x(t){y.value=!0}function j(t){if(t==null)u.value=[];else if(Se(n.value,":autofill")||Se(n.value,":-webkit-autofill")){const m=o.value.find(w=>w.title===t);m&&J(m)}else n.value&&(n.value.value="")}return Y(h,()=>{if(!e.hideSelected&&h.value&&u.value.length){const t=E.value.findIndex(m=>u.value.some(w=>(e.valueComparator||ve)(w.value,m.value)));Ae&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&p.value?.scrollToIndex(t)})}}),Y(o,(t,m)=>{h.value||y.value&&e.hideNoData&&!m.length&&t.length&&(h.value=!0)}),he(()=>{const t=!!(e.chips||l.chip),m=!!(!e.hideNoData||E.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),w=u.value.length>0,H=ge.filterProps(e),z=w||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return k(ge,F({ref:n},H,{modelValue:u.value.map(T=>T.props.title).join(", "),name:void 0,"onUpdate:modelValue":j,focused:y.value,"onUpdate:focused":T=>y.value=T,validationValue:u.externalValue,counterValue:R.value,dirty:w,class:["v-select",{"v-select--active-menu":h.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:z,"onClick:clear":oe,"onMousedown:control":O,onBlur:a,onKeydown:ue,"aria-expanded":K.value,"aria-controls":ne.value}),{...l,default:T=>{let{id:q}=T;return I(se,null,[I("select",{hidden:!0,multiple:e.multiple,name:L.fieldName.value},[o.value.map(i=>I("option",{key:i.value,value:i.value,selected:Z.value.includes(i.value)},null))]),k(dt,F({id:G.value,ref:f,modelValue:h.value,"onUpdate:modelValue":i=>h.value=i,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:d,onAfterLeave:V},ae.value),{default:()=>[m&&k(rt,F({ref:M,selected:Z.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:de,onFocusin:x,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-labelledby":`${q.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},re,e.listProps),{default:()=>[l["prepend-item"]?.(),!E.value.length&&!e.hideNoData&&(l["no-data"]?.()??k(be,{key:"no-data",title:r(e.noDataText)},null)),k(kt,{ref:p,renderless:!0,items:E.value,itemKey:"value"},{default:i=>{let{item:g,index:v,itemRef:W}=i;const X=Ge(g.props),Q=F(g.props,{ref:W,key:g.value,onClick:()=>J(g,null),"aria-posinset":v+1,"aria-setsize":E.value.length});return g.type==="divider"?l.divider?.({props:g.raw,index:v})??k(Je,F(g.props,{key:`divider-${v}`}),null):g.type==="subheader"?l.subheader?.({props:g.raw,index:v})??k(it,F(g.props,{key:`subheader-${v}`}),null):l.item?.({item:g,index:v,props:Q})??k(be,F(Q,{role:"option"}),{prepend:A=>{let{isSelected:De}=A;return I(se,null,[e.multiple&&!e.hideSelected?k(ft,{key:g.value,modelValue:De,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Re=>Re.preventDefault()},null):void 0,X.prependAvatar&&k(Qe,{image:X.prependAvatar},null),X.prependIcon&&k(we,{icon:X.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),u.value.map((i,g)=>{function v(A){A.stopPropagation(),A.preventDefault(),J(i,!1)}const W=F(Ie.filterProps(i.props),{"onClick:close":v,onKeydown(A){A.key!=="Enter"&&A.key!==" "||(A.preventDefault(),A.stopPropagation(),v(A))},onMousedown(A){A.preventDefault(),A.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),X=t?!!l.chip:!!l.selection,Q=X?et(t?l.chip({item:i,index:g,props:W}):l.selection({item:i,index:g})):void 0;if(!(X&&!Q))return I("div",{key:i.value,class:"v-select__selection"},[t?l.chip?k(tt,{key:"chip-defaults",defaults:{VChip:{closable:b.value,size:"small",text:i.title}}},{default:()=>[Q]}):k(Ie,F({key:"chip",closable:b.value,size:"small",text:i.title,disabled:i.props.disabled},W),null):Q??I("span",{class:"v-select__selection-text"},[i.title,e.multiple&&g<u.value.length-1&&I("span",{class:"v-select__selection-comma"},[lt(",")])])])})])},"append-inner":function(){for(var T=arguments.length,q=new Array(T),i=0;i<T;i++)q[i]=arguments[i];return I(se,null,[l["append-inner"]?.(...q),e.menuIcon?k(we,{class:"v-select__menu-icon",color:n.value?.fieldIconColor,icon:e.menuIcon,"aria-hidden":!0},null):void 0,e.appendInnerIcon&&k(P,{key:"append-icon",name:"appendInner",color:q[0].iconColor.value},null)])}})}),nt({isFocused:y,menu:h,select:J},n)}});export{Et as V};
