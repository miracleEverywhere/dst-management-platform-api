import{V as ve,m as Ae}from"./VTextField-l-FdgV9P.js";import{ac as de,ad as Z,bN as we,L as j,ae as fe,k as x,F as Y,A as H,aN as ke,e as Re,a1 as U,a$ as me,h as W,j as _,aZ as De,a_ as Se,aG as re,aq as Be,aw as Pe,br as Ie,bB as Fe,b4 as Le,$ as ae,bO as _e,f as Ee,bs as Oe,a as I,bh as ne,n as Me,H as He,b6 as ze,Z as Te,aI as Ne,bK as pe,am as he,by as Ue,bG as ie,G as ge,P as ye,bP as qe,U as Ke,z as $e,bQ as je,af as Ge,q as We,aU as Ze,b7 as Qe,an as Xe,bR as Ve,bS as be,ak as Ye}from"./index-DSqAz1aK.js";import{a as Je}from"./VInput-BKyi7uEB.js";import{u as et,V as tt,a as lt,m as nt}from"./VList-BEO0zeM6.js";import{V as at}from"./VMenu-D73OD9NE.js";import{V as ot}from"./VCheckboxBtn-BRs82zRR.js";import{V as st}from"./VChip-DOXEbDsk.js";import{V as ut}from"./dialog-transition-BcXBGmd8.js";const rt=Z({renderless:Boolean,...ke()},"VVirtualScrollItem"),it=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:rt(),emits:{"update:height":e=>!0},setup(e,u){let{attrs:l,emit:i,slots:n}=u;const{resizeRef:v,contentRect:h}=we(void 0,"border");j(()=>h.value?.height,a=>{a!=null&&i("update:height",a)}),fe(()=>e.renderless?x(Y,null,[n.default?.({itemRef:v})]):x("div",H({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},l),[n.default?.()]))}}),ct=-1,dt=1,ce=100,ft=Z({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function vt(e,u){const l=Re(),i=U(0);me(()=>{i.value=parseFloat(e.itemHeight||0)});const n=U(0),v=U(Math.ceil((parseInt(e.height)||l.height.value)/(i.value||16))||1),h=U(0),a=U(0),c=W(),k=W();let s=0;const{resizeRef:C,contentRect:z}=we();me(()=>{C.value=c.value});const E=_(()=>c.value===document.documentElement?l.height.value:z.value?.height||parseInt(e.height)||0),A=_(()=>!!(c.value&&k.value&&E.value&&i.value));let y=Array.from({length:u.value.length}),V=Array.from({length:u.value.length});const S=U(0);let R=-1;function Q(o){return y[o]||i.value}const N=De(()=>{const o=performance.now();V[0]=0;const d=u.value.length;for(let w=1;w<=d;w++)V[w]=(V[w-1]||0)+Q(w-1);S.value=Math.max(S.value,performance.now()-o)},S),b=j(A,o=>{o&&(b(),s=k.value.offsetTop,N.immediate(),F(),~R&&Pe(()=>{Ie&&window.requestAnimationFrame(()=>{le(R),R=-1})}))});Se(()=>{N.clear()});function oe(o,d){const w=y[o],t=i.value;i.value=t?Math.min(i.value,d):d,(w!==d||t!==i.value)&&(y[o]=d,N())}function D(o){o=re(o,0,u.value.length);const d=Math.floor(o),w=o%1,t=d+1,f=V[d]||0,m=V[t]||f;return f+(m-f)*w}function J(o){return mt(V,o)}let q=0,K=0,B=0;j(E,(o,d)=>{d&&(F(),o<d&&requestAnimationFrame(()=>{K=0,F()}))});let X=-1;function se(){if(!c.value||!k.value)return;const o=c.value.scrollTop,d=performance.now();d-B>500?(K=Math.sign(o-q),s=k.value.offsetTop):K=o-q,q=o,B=d,window.clearTimeout(X),X=window.setTimeout(ee,500),F()}function ee(){!c.value||!k.value||(K=0,B=0,window.clearTimeout(X),F())}let te=-1;function F(){cancelAnimationFrame(te),te=requestAnimationFrame(G)}function G(){if(!c.value||!E.value||!i.value)return;const o=q-s,d=Math.sign(K),w=Math.max(0,o-ce),t=re(J(w),0,u.value.length),f=o+E.value+ce,m=re(J(f)+1,t+1,u.value.length);if((d!==ct||t<n.value)&&(d!==dt||m>v.value)){const O=D(n.value)-D(t),L=D(m)-D(v.value);Math.max(O,L)>ce?(n.value=t,v.value=m):(t<=0&&(n.value=t),m>=u.value.length&&(v.value=m))}h.value=D(n.value),a.value=D(u.value.length)-D(v.value)}function le(o){const d=D(o);!c.value||o&&!d?R=o:c.value.scrollTop=d}const ue=_(()=>u.value.slice(n.value,v.value).map((o,d)=>{const w=d+n.value;return{raw:o,index:w,key:Be(o,e.itemKey,w)}}));return j(u,()=>{y=Array.from({length:u.value.length}),V=Array.from({length:u.value.length}),N.immediate(),F()},{deep:1}),{calculateVisibleItems:F,containerRef:c,markerRef:k,computedItems:ue,paddingTop:h,paddingBottom:a,scrollToIndex:le,handleScroll:se,handleScrollend:ee,handleItemResize:oe}}function mt(e,u){let l=e.length-1,i=0,n=0,v=null,h=-1;if(e[l]<u)return l;for(;i<=l;)if(n=i+l>>1,v=e[n],v>u)l=n-1;else if(v<u)h=n,i=n+1;else return v===u?n:i;return h}const pt=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...ke(),...ze()},"VVirtualScroll"),ht=de()({name:"VVirtualScroll",props:pt(),setup(e,u){let{slots:l}=u;const i=Fe("VVirtualScroll"),{dimensionStyles:n}=Le(e),{calculateVisibleItems:v,containerRef:h,markerRef:a,handleScroll:c,handleScrollend:k,handleItemResize:s,scrollToIndex:C,paddingTop:z,paddingBottom:E,computedItems:A}=vt(e,ae(()=>e.items));return _e(()=>e.renderless,()=>{function y(){const S=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[S]("scroll",c,{passive:!0}),document[S]("scrollend",k)):(h.value?.[S]("scroll",c,{passive:!0}),h.value?.[S]("scrollend",k))}Ee(()=>{h.value=Oe(i.vnode.el,!0),y(!0)}),Se(y)}),fe(()=>{const y=A.value.map(V=>I(it,{key:V.key,renderless:e.renderless,"onUpdate:height":S=>s(V.index,S)},{default:S=>l.default?.({item:V.raw,index:V.index,...S})}));return e.renderless?x(Y,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(z.value)}},null),y,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(E.value)}},null)]):x("div",{ref:h,class:He(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:k,style:Me([n.value,e.style])},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(z.value),paddingBottom:ne(E.value)}},[y])])}),{calculateVisibleItems:v,scrollToIndex:C}}});function gt(e,u){const l=U(!1);let i;function n(a){cancelAnimationFrame(i),l.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{l.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const c=j(l,()=>{c(),a()})}else a()})}async function h(a){if(a.key==="Tab"&&u.value?.focus(),!["PageDown","PageUp","Home","End"].includes(a.key))return;const c=e.value?.$el;if(!c)return;(a.key==="Home"||a.key==="End")&&c.scrollTo({top:a.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await v();const k=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const s=c.getBoundingClientRect().top;for(const C of k)if(C.getBoundingClientRect().top>=s){C.focus();break}}else{const s=c.getBoundingClientRect().bottom;for(const C of[...k].reverse())if(C.getBoundingClientRect().bottom<=s){C.focus();break}}}return{onScrollPassive:n,onKeydown:h}}const yt=Z({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Vt(e,u){const{t:l}=Te(),i=Ne(),n=_(()=>`menu-${i}`),v=ae(()=>pe(u)),h=ae(()=>n.value),a=ae(()=>l(pe(u)?e.closeText:e.openText));return{menuId:n,ariaExpanded:v,ariaControls:h,ariaLabel:a}}const bt=Z({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Ye,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...yt(),...nt({itemChildren:!1})},"Select"),wt=Z({...bt(),...Xe(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Qe({transition:{component:ut}})},"VSelect"),Rt=de()({name:"VSelect",props:wt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,u){let{slots:l}=u;const{t:i}=Te(),n=W(),v=W(),h=W(),{items:a,transformIn:c,transformOut:k}=et(e),s=he(e,"modelValue",[],t=>c(t===null?[null]:Ue(t)),t=>{const f=k(t);return e.multiple?f:f[0]??null}),C=_(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:s.value.length),z=Je(e),E=_(()=>s.value.map(t=>t.value)),A=U(!1);let y="",V=-1,S;const R=_(()=>e.hideSelected?a.value.filter(t=>!s.value.some(f=>(e.valueComparator||ie)(f,t))):a.value),Q=_(()=>e.hideNoData&&!R.value.length||z.isReadonly.value||z.isDisabled.value),N=he(e,"menu"),b=_({get:()=>N.value,set:t=>{N.value&&!t&&v.value?.Î¨openChildren.size||t&&Q.value||(N.value=t)}}),{menuId:oe,ariaExpanded:D,ariaControls:J,ariaLabel:q}=Vt(e,b),K=_(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),B=W(),X=gt(B,n);function se(t){e.openOnClear&&(b.value=!0)}function ee(){Q.value||(b.value=!b.value)}function te(t){Ve(t)&&F(t)}function F(t){if(!t.key||z.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(b.value=!0),["Escape","Tab"].includes(t.key)&&(b.value=!1),t.key==="Home"?B.value?.focus("first"):t.key==="End"&&B.value?.focus("last");const f=1e3;if(!Ve(t))return;const m=performance.now();m-S>f&&(y="",V=-1),y+=t.key.toLowerCase(),S=m;const O=R.value;function L(){let g=r();return g||y.at(-1)===y.at(-2)&&(y=y.slice(0,-1),g=r(),g)||(V=-1,g=r(),g)?g:(y=t.key.toLowerCase(),r())}function r(){for(let g=V+1;g<O.length;g++){const M=O[g];if(M.title.toLowerCase().startsWith(y))return[M,g]}}const p=L();if(!p)return;const[P,$]=p;V=$,B.value?.focus($),e.multiple||(s.value=[P])}function G(t){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const m=s.value.findIndex(L=>(e.valueComparator||ie)(L.value,t.value)),O=f??!~m;if(~m){const L=O?[...s.value,t]:[...s.value];L.splice(m,1),s.value=L}else O&&(s.value=[...s.value,t])}else{const m=f!==!1;s.value=m?[t]:[],Pe(()=>{b.value=!1})}}function le(t){B.value?.$el.contains(t.relatedTarget)||(b.value=!1)}function ue(){e.eager&&h.value?.calculateVisibleItems()}function o(){A.value&&n.value?.focus()}function d(t){A.value=!0}function w(t){if(t==null)s.value=[];else if(be(n.value,":autofill")||be(n.value,":-webkit-autofill")){const f=a.value.find(m=>m.title===t);f&&G(f)}else n.value&&(n.value.value="")}return j(b,()=>{if(!e.hideSelected&&b.value&&s.value.length){const t=R.value.findIndex(f=>s.value.some(m=>(e.valueComparator||ie)(m.value,f.value)));Ie&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&h.value?.scrollToIndex(t)})}}),j(a,(t,f)=>{b.value||A.value&&e.hideNoData&&!f.length&&t.length&&(b.value=!0)}),fe(()=>{const t=!!(e.chips||l.chip),f=!!(!e.hideNoData||R.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=s.value.length>0,O=ve.filterProps(e),L=m||!A.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return I(ve,H({ref:n},O,{modelValue:s.value.map(r=>r.props.value).join(", "),"onUpdate:modelValue":w,focused:A.value,"onUpdate:focused":r=>A.value=r,validationValue:s.externalValue,counterValue:C.value,dirty:m,class:["v-select",{"v-select--active-menu":b.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:L,"onClick:clear":se,"onMousedown:control":ee,onBlur:le,onKeydown:F,"aria-expanded":D.value,"aria-controls":J.value,"aria-label":q.value,title:q.value}),{...l,default:()=>x(Y,null,[I(at,H({id:oe.value,ref:v,modelValue:b.value,"onUpdate:modelValue":r=>b.value=r,activator:"parent",contentClass:"v-select__content",disabled:Q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ue,onAfterLeave:o},K.value),{default:()=>[f&&I(tt,H({ref:B,selected:E.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:te,onFocusin:d,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},X,e.listProps),{default:()=>[l["prepend-item"]?.(),!R.value.length&&!e.hideNoData&&(l["no-data"]?.()??I(ye,{key:"no-data",title:i(e.noDataText)},null)),I(ht,{ref:h,renderless:!0,items:R.value,itemKey:"value"},{default:r=>{let{item:p,index:P,itemRef:$}=r;const g=qe(p.props),M=H(p.props,{ref:$,key:p.value,onClick:()=>G(p,null)});return p.type==="divider"?l.divider?.({props:p.raw,index:P})??I(Ke,H(p.props,{key:`divider-${P}`}),null):p.type==="subheader"?l.subheader?.({props:p.raw,index:P})??I(lt,H(p.props,{key:`subheader-${P}`}),null):l.item?.({item:p,index:P,props:M})??I(ye,H(M,{role:"option"}),{prepend:T=>{let{isSelected:xe}=T;return x(Y,null,[e.multiple&&!e.hideSelected?I(ot,{key:p.value,modelValue:xe,ripple:!1,tabindex:"-1",onClick:Ce=>Ce.preventDefault()},null):void 0,g.prependAvatar&&I($e,{image:g.prependAvatar},null),g.prependIcon&&I(ge,{icon:g.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),s.value.map((r,p)=>{function P(T){T.stopPropagation(),T.preventDefault(),G(r,!1)}const $={"onClick:close":P,onKeydown(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),P(T))},onMousedown(T){T.preventDefault(),T.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},g=t?!!l.chip:!!l.selection,M=g?je(t?l.chip({item:r,index:p,props:$}):l.selection({item:r,index:p})):void 0;if(!(g&&!M))return x("div",{key:r.value,class:"v-select__selection"},[t?l.chip?I(Ge,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[M]}):I(st,H({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},$),null):M??x("span",{class:"v-select__selection-text"},[r.title,e.multiple&&p<s.value.length-1&&x("span",{class:"v-select__selection-comma"},[We(",")])])])})]),"append-inner":function(){for(var r=arguments.length,p=new Array(r),P=0;P<r;P++)p[P]=arguments[P];return x(Y,null,[l["append-inner"]?.(...p),e.menuIcon?I(ge,{class:"v-select__menu-icon",color:n.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Ze({isFocused:A,menu:b,select:G},n)}});export{Rt as V};
