import{_ as R}from"./Result-BIL1pwa_.js";import q from"./log-CO3z7mZw.js";import{g as D,e as E,b as F,f as u,j as H,a4 as T,N as j,y as c,o,w as l,a,k as x,c as y,t as h,l as e,s as B,q as I,F as z,A as P,p as U}from"./index-Bqc3lyXn.js";import{l as $}from"./logs-djS3guxL.js";import{c as A,a as G,V as J}from"./VCard-BPBrtcT4.js";import{V as K}from"./VSwitch-CVXeTECc.js";import{V as O}from"./VChip-GdHkVFP7.js";import{V as Q}from"./VRow-CzEMzOz2.js";import{V as W}from"./VSpacer-jmaFPQaT.js";import{V as X}from"./VCol-C_pvNnB5.js";import{V as Y}from"./VNumberInput-DB8cRig6.js";import"./VContainer-Bd1rNs0W.js";/* empty css              */import"./preview-ELoA6hly.js";import"./axios-DLz-BKzx.js";import"./index-C6guhLaH.js";import"./VInput-CD3yFHM1.js";import"./VSelectionControl-CUDzPAtb.js";import"./VTextField-a6NQ0nVD.js";const Z={class:"card-header"},ee={key:0},te={key:1},oe={class:"fcc"},ke={__name:"singleLog",props:{type:{type:String,default:""},chat:{type:Boolean,default:!1}},setup(L){const r=L,M=D(),{mobile:N}=E(),{t:n}=F(),d=u(""),m=u(!0),i=u(0),_=u(!1),v=()=>{const t={roomID:M.room.id,worldID:0,logType:r.type,lines:i.value};$.content.get(t).then(s=>{s.data===null?d.value="":d.value=s.data.join(`
`),_.value=!0})};let p=null;const S=()=>{p=setInterval(()=>{m.value&&v()},2e3)},w=()=>{p&&(clearInterval(p),p=null)},k=()=>{let t=390;return r.chat&&(t=t+37),Math.round(Math.max(2,Math.floor(g.value-t))/22.5)},f=()=>{let t=0;return r.chat&&(t=37),Math.max(2,Math.floor(g.value-160-t))},g=u(window.innerHeight),C=T(()=>{g.value=window.innerHeight,i.value=k()},200);return H(async()=>{window.addEventListener("resize",C),i.value=k(),S()}),j(()=>{w(),window.removeEventListener("beforeunload",w),window.removeEventListener("resize",C)}),(t,s)=>{const b=R;return o(),c(J,{height:f(),flat:""},{default:l(()=>[a(A,{class:"my-2"},{default:l(()=>[x("div",Z,[r.chat?(o(),y("span",ee,h(e(n)("logs.current")),1)):(o(),y("span",te,h(e(n)(`logs.${r.type}`)),1)),x("div",oe,[a(K,{modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=V=>B(m)?m.value=V:null),color:"info","hide-details":""},{prepend:l(()=>[a(O,{color:"info"},{default:l(()=>[I(h(e(n)("logs.autoPull")),1)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),a(G,null,{default:l(()=>[e(_)?(o(),y(z,{key:0},[e(d)?(o(),c(q,{key:0,content:e(d),height:f()-150},null,8,["content","height"])):(o(),c(b,{key:1,type:"info",height:f()-150,title:e(n)("logs.noContent")},null,8,["height","title"]))],64)):(o(),c(b,{key:1,type:"info",title:e(n)("logs.fetching"),height:f()-150},null,8,["title","height"])),a(Q,{class:"my-4"},{default:l(()=>[e(N)?P("",!0):(o(),c(W,{key:0})),a(X,{class:"d-flex align-center justify-end"},{default:l(()=>[a(Y,{modelValue:e(i),"onUpdate:modelValue":s[1]||(s[1]=V=>B(i)?i.value=V:null),label:e(n)("logs.line"),"hide-details":"",density:"compact",class:"mr-4","max-width":"120"},null,8,["modelValue","label"]),a(U,{onClick:v},{default:l(()=>[I(h(e(n)("logs.pull")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"])}}};export{ke as default};
