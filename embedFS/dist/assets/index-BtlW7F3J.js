import{_ as gl}from"./ConfirmBox-EquM784R.js";import{_ as yl}from"./Result-rnvi5bSi.js";import{h as c,g as kl,d as _l,e as wl,b as Cl,j as He,a2 as Vl,f as xl,a3 as Il,a4 as $l,a5 as ql,c as R,l as e,o as s,y as i,F as A,a,w as l,q as n,t as r,x as g,p as b,W as Dl,s as T,m as Ul,a6 as K,a7 as Ke,P as Ve,Q as xe,G as ce,E as N,a8 as Qe,V as Sl,k,a9 as Ie,aa as Ye,v as $e,ab as Je,B as qe}from"./index-CUqMz98Q.js";import{h as Q}from"./axios-BviZ8UZz.js";import{c as me}from"./colors-DoZdCu1D.js";import{m as Tl}from"./mod-Cq3Jm249.js";import{M as Pl}from"./preview-ulVFMS0l.js";import{V as v}from"./VCol-CNyyfCgI.js";import{V as P,c as F,a as D,b as te}from"./VCard-CCXXQnDc.js";import{V as y}from"./VRow-DjJRgvp1.js";import{V as m}from"./VChip-D52a5STx.js";import{T as _}from"./index-Df1qgLoa.js";import{V as z}from"./VDialog-BvP4GPN7.js";import{V as Fl}from"./VForm-CMZ2txzh.js";import{V as Xe}from"./VAlert-CnUevvd0.js";import{V as De}from"./VTextField-BC-Dauxh.js";import{V as Ll}from"./VNumberInput-IUTPFh61.js";import{V as O}from"./VSpacer-CWRfoVLU.js";import{V as Ze}from"./VDataTable-BSVgJcrp.js";import{V as el}from"./VMenu-ClswS2ZL.js";import{V as ll}from"./VList-B5PfedMW.js";import{V as Ml}from"./VSkeletonLoader-DLqqQt2M.js";import{V as al}from"./VSparkline-4U_ou8VD.js";import{V as Ue,a as Y}from"./VRadioGroup-Dk3I0OTD.js";import{V as fe}from"./VSelect-kc192oZf.js";import{V as Rl}from"./VSwitch-Cdzh9wkz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VContainer-Qfl3VloT.js";/* empty css              */import"./index-DMUK-Sdt.js";import"./VTooltip-V4dyfnab.js";import"./dialog-transition-DKWwBUaX.js";import"./VInput-DLKXZnps.js";import"./VPagination-B16lOeCs.js";import"./VCheckboxBtn-D568hA48.js";import"./VSelectionControl-DBFUmGqW.js";import"./VTable-B_CghHR2.js";import"./filter-EJ8IWv9v.js";import"./ssrBoot-BWJBvRlE.js";const W={exec:{game:{url:"/dashboard/exec/game",post:async function(U){return await Q.post(this.url,U)}}},info:{base:{url:"/dashboard/info/base",get:async function(U){return await Q.get(this.url,U)}},sys:{url:"/dashboard/info/sys",get:async function(U){return await Q.get(this.url,U)}}},connectionCode:{url:"/dashboard/connection_code",get:async function(U){return await Q.get(this.url,U)},put:async function(U){return await Q.put(this.url,U)}},check:{lobby:{url:"/dashboard/check/lobby",post:async function(U){return await Q.post(this.url,U)}}}},Al={class:"d-flex align-center justify-center fill-height"},Nl={class:"fcc"},Ol={class:"ml-2"},El={class:"d-flex align-center justify-center"},zl={class:"mr-2 ml-1"},Wl={class:"ml-2"},Gl={class:"d-flex flex-column align-center justify-center"},Bl={class:"d-flex flex-column align-center justify-center"},Sa={__name:"index",setup(U){const Se=c(window.innerHeight),x=kl(),Te=_l(),{mobile:L}=wl(),{t}=Cl(),f=c(),pe=c(),J=c(0),be=async()=>{if(x.room.id===0)return;const u={roomID:x.room.id},o=await W.info.base.get(u);f.value=o.data},C=c(),Pe=["#f72047","#ffd200","#1feaea"],ve=c(Array(30).fill(0)),he=c(Array(30).fill(0)),Fe=async()=>{if(x.room.id===0)return;const u=await W.info.sys.get();if(!u.data)return;const o=Number(u.data.cpu)||0,h=Number(u.data.memory)||0;C.value={...u.data,cpu:o,memory:h},ve.value=[...ve.value.slice(1),o],he.value=[...he.value.slice(1),h]},p=c({startup:{visible:!1,loading:!1},shutdown:{visible:!1,loading:!1},restart:{visible:!1,loading:!1},clean:{visible:!1,loading:!1},rollback:{visible:!1,loading:!1}}),tl=[{title:t("dashboard.card5.worldName"),value:"worldName"},{title:t("dashboard.card5.isMaster"),value:"isMaster"},{title:"CPU",value:"cpu"},{title:t("dashboard.card5.mem"),value:"mem"},{title:t("dashboard.card5.disk"),value:"disk"},{title:t("dashboard.card5.status"),value:"status",minWidth:100}],ge=c(!1),I=u=>{const o={type:u.type,roomID:x.room.id,worldID:u.worldID,extra:u.extra};ge.value=!0,Object.keys(p.value).forEach(h=>{p.value[h].loading=!0}),W.exec.game.post(o).then(h=>{qe(h.message),Object.keys(p.value).forEach(H=>{p.value[H].visible=!1})}).finally(()=>{Object.keys(p.value).forEach(h=>{p.value[h].loading=!1}),ge.value=!1,be()})},X=c(""),$=c({worlds:[],selectedWorldID:void 0,cmd:""}),G=c(!1),Z=c("frontend"),B=c(!1),oe=c("reset-no-force"),Le=c(),de=c(!1),ye=c(!1),Me=c([]),ol=async()=>{ye.value=!0;const u={roomID:x.room.id,worldID:f.value.worlds[0].id},o=await Tl.setting.enabledMods.get(u);Me.value=o.data,ye.value=!1},dl=[{key:"preview_url",title:t("game.mod.add.preview")},{key:"name",title:t("game.mod.add.name")},{key:"serverSize",title:t("game.mod.add.size")},{key:"id",title:"ID"}],ke=c(!1),_e=c(""),we=()=>{if(x.room.id===0)return;ke.value=!0;const u={roomID:x.room.id};W.connectionCode.get(u).then(o=>{_e.value=o.data}).finally(()=>{ke.value=!1})},E=c(!1),Re=c(),j=c({id:"",port:void 0}),Ae=c({ip:[u=>u?!0:t("dashboard.card1.item.custom.ip.required")],port:[u=>u?!0:t("dashboard.card1.item.custom.port.required")]}),re=c(!1),rl=async()=>{const{valid:u}=await Re.value.validate();if(!u)return;re.value=!0;const o={roomID:x.room.id,ip:j.value.ip,port:j.value.port},h=await W.connectionCode.put(o);re.value=!1,E.value=!1,qe(h.message),we()},nl=()=>{re.value=!0;const u={roomID:x.room.id,ip:"",port:0};W.connectionCode.put(u).then(o=>{E.value=!1,qe(o.message),we()}).finally(()=>{re.value=!1})},Ne=c(!1),ne=c(!1),sl=[{label:"ap-southeast-1",value:"ap-southeast-1"},{label:"ap-east-1",value:"ap-east-1"},{label:"us-east-1",value:"us-east-1"},{label:"eu-central-1",value:"eu-central-1"}],se=c(["ap-southeast-1","ap-east-1"]),Oe=(u=!1)=>{if(u)return;ne.value=!0;const o={gameName:f.value.room.gameName,maxPlayer:f.value.room.maxPlayer,regions:se.value};W.check.lobby.post(o).then(h=>{Ne.value=h.data}).finally(()=>{ne.value=!1})},ee=c(!1),il=He(()=>x.theme),le=c("player"),q=c(),V=c(""),M=c(),w=c(""),ul=[{label:t("dashboard.card3.quickCmd.playerOptions.godmode"),value:0},{label:t("dashboard.card3.quickCmd.playerOptions.buildermode"),value:1},{label:t("dashboard.card3.quickCmd.playerOptions.invisiblemode"),value:2},{label:t("dashboard.card3.quickCmd.playerOptions.oneattacktokill"),value:3},{label:t("dashboard.card3.quickCmd.playerOptions.unlockalltech"),value:4},{label:t("dashboard.card3.quickCmd.playerOptions.movingspeed4"),value:5},{label:t("dashboard.card3.quickCmd.playerOptions.reselectcharacter"),value:6},{label:t("dashboard.card3.quickCmd.playerOptions.respawn"),value:7},{label:t("dashboard.card3.quickCmd.playerOptions.mapclear"),value:8}],cl=()=>{if(!/^KU_/.test(V.value)){koiMsgError(language.value==="zh"?"请输入正确的玩家UID":"Please input the correct player UID");return}q.value===0&&(w.value=`UserToPlayer('${V.value}').components.health:SetInvincible(true)`),q.value===1&&(w.value=`for k, v in pairs(AllPlayers) do if v.userid=='${V.value}' then AllPlayers[k].components.builder:GiveAllRecipes() end end`),q.value===2&&(w.value=`UserToPlayer('${V.value}'):AddTag('debugnoattack')`),q.value===3&&(w.value=`UserToPlayer('${V.value}').components.combat.CalcDamage = function() return 9999999999 * 9 end`),q.value===4&&(w.value=`UserToPlayer('${V.value}').components.builder:UnlockRecipesForTech({SCIENCE = 1, MAGIC = 1, ANCIENT = 1, SHADOW = 1, CARTOGRAPHY = 1})`),q.value===5&&(w.value=`UserToPlayer('${V.value}').components.locomotor:SetExternalSpeedMultiplier(UserToPlayer('${V.value}'), 'c_speedmult', 4)`),q.value===6&&(w.value=`c_despawn(UserToPlayer('${V.value}'))`),q.value===7&&(w.value=`for k, v in pairs(AllPlayers) do if v.userid=='${V.value}' then AllPlayers[k]:PushEvent('respawnfromghost') end end`),q.value===8&&(w.value=`local p=UserToPlayer('${V.value}')if p then local s=2*TheWorld.Map:GetSize()for x=-s,s,32 do for z=-s,s,32 do p.player_classified.MapExplorer:RevealArea(x,0,z)end end end`)},ml=[{label:t("dashboard.card3.quickCmd.worldOptions.rollback6days"),value:0},{label:t("dashboard.card3.quickCmd.worldOptions.skip1day"),value:1},{label:t("dashboard.card3.quickCmd.worldOptions.nextphase"),value:2},{label:t("dashboard.card3.quickCmd.worldOptions.save"),value:3}],fl=()=>{M.value===0&&(w.value="c_rollback(6)"),M.value===1&&(w.value="c_skip(1)"),M.value===2&&(w.value="TheWorld:PushEvent('ms_nextphase')"),M.value===3&&(w.value="c_save()")},pl=()=>{$.value.cmd=w.value,ee.value=!1,w.value="",q.value=void 0,M.value=void 0},bl=He(()=>Vl(x.language)),Ee=u=>u>=0&&u<25?"success":u>=25&&u<50?"info":u>=50&&u<75?"warning":u>=75?"error":"primary";let ie=null,ue=null;const vl=()=>{ie=setInterval(()=>{be()},1e4)},hl=()=>{ue=setInterval(()=>{Fe()},2e3)},ze=()=>{ie&&(clearInterval(ie),ie=null)},We=()=>{ue&&(clearInterval(ue),ue=null)},Ce=Il(()=>{Se.value=window.innerHeight,pe.value&&(J.value=pe.value.$el.offsetWidth)},200),ae=()=>Math.max(2,Math.floor(Se.value-150)),Ge=c(!1);return xl(async()=>{await Promise.all([be(),Fe()]),Ge.value=!0,we(),$.value.worlds=f.value?.worlds||[],Ce(),window.addEventListener("resize",Ce),vl(),hl()}),$l(()=>{ze(),We(),window.removeEventListener("beforeunload",ze),window.removeEventListener("beforeunload",We),window.removeEventListener("resize",Ce)}),(u,o)=>{const h=yl,H=gl,Be=ql("copy");return e(x).gameVersion.local!==0?(s(),R(A,{key:0},[e(x).room.id!==0?(s(),R(A,{key:0},[e(Ge)?(s(),R(A,{key:0},[a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(P,{ref_key:"card1Ref",ref:pe,"min-height":"350"},{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card1.title")),1)]),_:1}),a(D,{class:"mt-8 mb-4"},{default:l(()=>[a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-2"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.roomName")),1)]),_:1}),g((s(),i(b,{variant:"text","append-icon":"ri-file-copy-line",class:"text-none"},{default:l(()=>[n(r(e(Dl)(e(f).room.gameName,e(L)?(e(J)-200)/15:(e(J)-400)/30)),1)]),_:1})),[[Be,e(f).room.gameName]])]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-2"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.connectCode")),1)]),_:1}),g(a(b,{loading:e(ke),variant:"text",icon:"ri-file-copy-line"},null,8,["loading"]),[[Be,e(_e)],[_,e(_e)]]),g((s(),i(b,{variant:"text",color:"default",onClick:o[0]||(o[0]=d=>E.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.button")),1)]),_:1})),[[_,e(t)("dashboard.card1.item.custom.tip")]]),a(z,{modelValue:e(E),"onUpdate:modelValue":o[4]||(o[4]=d=>T(E)?E.value=d:null),width:e(L)?"90%":"60%"},{default:l(()=>[a(P,null,{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.title")),1)]),_:1}),a(Fl,{ref_key:"customConnectionCodeFormRef",ref:Re,onSubmit:Ul(rl,["prevent"])},{default:l(()=>[a(D,null,{default:l(()=>[a(Xe,{text:e(t)("dashboard.card1.item.custom.tip"),type:"info",variant:"tonal",class:"mb-8"},null,8,["text"]),g(a(De,{modelValue:e(j).ip,"onUpdate:modelValue":o[1]||(o[1]=d=>e(j).ip=d),rules:e(Ae).ip,label:e(t)("dashboard.card1.item.custom.ip.title"),class:"mb-8"},null,8,["modelValue","rules","label"]),[[_,e(t)("dashboard.card1.item.custom.ip.tip")]]),g(a(Ll,{modelValue:e(j).port,"onUpdate:modelValue":o[2]||(o[2]=d=>e(j).port=d),rules:e(Ae).port,label:e(t)("dashboard.card1.item.custom.port.title"),min:1,max:65535},null,8,["modelValue","rules","label"]),[[_,e(t)("dashboard.card1.item.custom.port.tip")]])]),_:1}),a(te,{class:"mr-4 mb-4"},{default:l(()=>[a(O),a(b,{variant:"elevated",color:"defalut",onClick:o[3]||(o[3]=d=>E.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),g((s(),i(b,{variant:"elevated",color:"warning",onClick:nl},{default:l(()=>[n(r(e(t)("dashboard.card1.item.custom.clear.title")),1)]),_:1})),[[_,e(t)("dashboard.card1.item.custom.clear.tip")]]),a(b,{variant:"elevated",color:"primary",type:"submit"},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue","width"])]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.cycles")),1)]),_:1}),e(f).session.cycles!==-1?(s(),i(m,{key:0},{default:l(()=>[n(r(e(f).session.cycles),1)]),_:1})):(s(),i(m,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gameMode")),1)]),_:1}),a(m,null,{default:l(()=>[n(r(e(t)(`game.base.step1.gameMode.modes.${e(f).room.gameMode}`)),1)]),_:1})]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gameSeason")),1)]),_:1}),e(f).session.season!=="error"?(s(),i(m,{key:0},{default:l(()=>[n(r(e(t)(`dashboard.card1.season.${e(f).session.season}`))+"("+r(e(f).session.elapsedDays)+"/"+r(e(f).session.seasonLength[e(f).session.season])+") ",1)]),_:1})):(s(),i(m,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.gamePhase")),1)]),_:1}),e(f).session.phase!=="error"?(s(),i(m,{key:0},{default:l(()=>[n(r(e(t)(`dashboard.card1.phase.${e(f).session.phase}`)),1)]),_:1})):(s(),i(m,{key:1,color:"error"},{default:l(()=>[n(r(e(t)("dashboard.card1.error")),1)]),_:1}))]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),(e(f).room.modInOne?e(K)(e(f).room.modData).length:e(K)(e(f).worlds[0].modData).length)===0?(s(),i(m,{key:0},{default:l(()=>[n(r(e(f).room.modInOne?e(K)(e(f).room.modData).length:e(K)(e(f).worlds[0].modData).length),1)]),_:1})):(s(),i(m,{key:1,onClick:o[5]||(o[5]=d=>{de.value=!0,ol()})},{default:l(()=>[n(r(e(f).room.modInOne?e(K)(e(f).room.modData).length:e(K)(e(f).worlds[0].modData).length),1)]),_:1})),a(z,{modelValue:e(de),"onUpdate:modelValue":o[6]||(o[6]=d=>T(de)?de.value=d:null),width:e(L)?"90%":"60%"},{default:l(()=>[a(P,null,{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card1.item.mods")),1)]),_:1}),e(ye)?(s(),i(D,{key:1},{default:l(()=>[a(h,{type:"info",title:e(t)("game.base.loading"),height:ae()/2},null,8,["title","height"])]),_:1})):(s(),i(D,{key:0},{default:l(()=>[a(Ke,{border:"",rounded:"",class:"mt-4"},{default:l(()=>[a(Ze,{headers:dl,items:e(Me)},{loading:l(()=>[a(Ml,{type:"table-row@10"})]),"item.preview_url":l(({value:d})=>[a(Sl,{src:d,width:100,cover:"",rounded:"","aspect-ratio":"1",class:"ma-2"},{placeholder:l(()=>[k("div",Al,[a(Ie,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),"item.name":l(({value:d})=>[a(m,{label:"",color:"info"},{default:l(()=>[n(r(d),1)]),_:2},1024)]),"item.serverSize":l(({value:d})=>[a(m,{label:"",color:"primary"},{default:l(()=>[n(r(e(Qe)(parseInt(d))),1)]),_:2},1024)]),"item.id":l(({value:d})=>[a(m,{label:""},{default:l(()=>[n(r(d),1)]),_:2},1024)]),"item.update":l(({item:d})=>[d.file_url!==""?(s(),i(m,{key:0,label:""},{default:l(()=>[n(r(e(t)("game.mod.add.notUGC")),1)]),_:1})):N("",!0),d.file_url===""&&d.serverSize===d.localSize?(s(),i(m,{key:1,label:"",color:"success"},{default:l(()=>[n(r(e(t)("game.mod.add.needNoUpdate")),1)]),_:1})):N("",!0),d.file_url===""&&d.serverSize!==d.localSize?(s(),i(m,{key:2,label:"",color:"error"},{default:l(()=>[n(r(e(t)("game.mod.add.needUpdate")),1)]),_:1})):N("",!0)]),"item.actions":l(({item:d})=>[a(b,{color:"info","append-icon":"ri-arrow-drop-down-line",variant:"text"},{default:l(()=>[n(r(e(t)("game.mod.add.actions"))+" ",1),a(el,{activator:"parent"},{default:l(()=>[a(ll,null,{default:l(()=>[a(Ve,{disabled:u.modEnableLoading,class:"text-success",onClick:S=>u.handleModAction("enable",d)},{prepend:l(()=>[a(ce,{icon:"ri-file-check-line",size:"22"})]),default:l(()=>[a(xe,null,{default:l(()=>[n(r(e(t)("game.mod.add.enable")),1)]),_:1})]),_:1},8,["disabled","onClick"]),a(Ve,{disabled:u.modUpdateLoading,class:"text-info",onClick:S=>u.handleModAction("update",d)},{prepend:l(()=>[a(ce,{icon:"ri-arrow-up-circle-line",size:"22"})]),default:l(()=>[a(xe,null,{default:l(()=>[n(r(e(t)("game.mod.add.updateMod")),1)]),_:1})]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(m,{label:"",color:"info",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card1.item.players")),1)]),_:1}),g((s(),i(m,null,{default:l(()=>[n(" ("+r(e(f).players?.length||0)+"/"+r(e(f).room.maxPlayer)+") ",1)]),_:1})),[[_,e(f).players.map(d=>d.nickname).join(", ")]])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(P,{"min-height":"350"},{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card2.title")),1)]),_:1}),a(D,null,{default:l(()=>[e(L)?(s(),i(y,{key:1,class:"mt-4"},{default:l(()=>[a(v,{cols:"6",class:"fcc",style:{height:"240px"}},{default:l(()=>[a(Ie,{"model-value":e(C).cpu.toFixed(1),size:140,width:10,color:Ee(e(C).cpu),rounded:""},{default:l(()=>[k("div",Gl,[o[46]||(o[46]=k("div",null,[k("span",null,"CPU")],-1)),k("div",null,r(e(C).cpu.toFixed(1))+"% ",1)])]),_:1},8,["model-value","color"])]),_:1}),a(v,{cols:"6",class:"fcc",style:{height:"240px"}},{default:l(()=>[a(Ie,{"model-value":e(C).memory.toFixed(1),size:140,width:10,color:Ee(e(C).memory),rounded:""},{default:l(()=>[k("div",Bl,[k("div",null,[k("span",null,r(e(t)("dashboard.card2.memory")),1)]),k("div",null,r(e(C).memory.toFixed(1))+"% ",1)])]),_:1},8,["model-value","color"])]),_:1})]),_:1})):(s(),i(y,{key:0,class:"mt-4"},{default:l(()=>[a(v,{cols:"12",md:"5"},{default:l(()=>[k("div",null,[k("div",Nl,[a(ce,{icon:"ri-cpu-line"}),o[45]||(o[45]=k("span",{class:"mr-2 ml-1"},"CPU",-1)),a(Ye,{"model-value":e(C).cpu,rounded:"",height:"8",indeterminate:e(C).cpu===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),k("span",Ol,r(e(C).cpu.toFixed(1))+"%",1)]),a(al,{width:e(J)/12*5,height:306-22.5-72,gradient:Pe,"gradient-direction":"top","line-width":3,"model-value":e(ve),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1}),a(O),a(v,{cols:"12",md:"5"},{default:l(()=>[k("div",null,[k("div",El,[a(ce,{icon:"ri-ram-2-line"}),k("span",zl,r(e(t)("dashboard.card2.memory")),1),a(Ye,{"model-value":e(C).memory,rounded:"",height:"8",indeterminate:e(C).memory===0,"rounded-bar":"",color:"grey-lighten-2",class:"w-33 ml-2"},null,8,["model-value","indeterminate"]),k("span",Wl,r(e(C).memory.toFixed(1))+"%",1)]),a(al,{width:e(J)/12*5,height:306-22.5-72,gradient:Pe,"gradient-direction":"top","line-width":3,"model-value":e(he),padding:"8",smooth:"","stroke-linecap":"round",type:"trend","auto-draw":"",class:"mt-4"},null,8,["width","model-value"])])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12",md:"6"},{default:l(()=>[a(P,{"min-height":"295"},{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card3.title")),1)]),_:1}),a(D,{class:"mx-4"},{default:l(()=>[a(y,{class:"mt-4"},{default:l(()=>[g((s(),i(b,{class:"mr-4 mb-4",color:"success",onClick:o[7]||(o[7]=d=>e(p).startup.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.startup.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.startup.tip")]]),a(H,{modelValue:e(p).startup.visible,"onUpdate:modelValue":o[8]||(o[8]=d=>e(p).startup.visible=d),type:"info",title:e(t)("dashboard.card3.startup.title"),content:e(t)("dashboard.card3.startup.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).startup.loading,onConfirm:o[9]||(o[9]=d=>I({type:"startup",extra:"all"})),onCancel:o[10]||(o[10]=d=>e(p).startup.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:"error",onClick:o[11]||(o[11]=d=>e(p).shutdown.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.shutdown.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.shutdown.tip")]]),a(H,{modelValue:e(p).shutdown.visible,"onUpdate:modelValue":o[12]||(o[12]=d=>e(p).shutdown.visible=d),type:"info",title:e(t)("dashboard.card3.shutdown.title"),content:e(t)("dashboard.card3.shutdown.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).shutdown.loading,onConfirm:o[13]||(o[13]=d=>I({type:"shutdown",extra:"all"})),onCancel:o[14]||(o[14]=d=>e(p).shutdown.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:"warning",onClick:o[15]||(o[15]=d=>e(p).restart.visible=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.restart.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.restart.tip")]]),a(H,{modelValue:e(p).restart.visible,"onUpdate:modelValue":o[16]||(o[16]=d=>e(p).restart.visible=d),type:"info",title:e(t)("dashboard.card3.restart.title"),content:e(t)("dashboard.card3.restart.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).restart.loading,onConfirm:o[17]||(o[17]=d=>I({type:"restart"})),onCancel:o[18]||(o[18]=d=>e(p).restart.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:"info",disabled:e(Te).userInfo.role!=="admin",loading:e(C).updating,onClick:o[19]||(o[19]=d=>G.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1},8,["disabled","loading"])),[[_,e(t)("dashboard.card3.update.tip")]]),a(z,{modelValue:e(G),"onUpdate:modelValue":o[23]||(o[23]=d=>T(G)?G.value=d:null),width:e(L)?"85%":"40%"},{default:l(()=>[a(P,null,{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card3.update.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(Ue,{modelValue:e(Z),"onUpdate:modelValue":o[20]||(o[20]=d=>T(Z)?Z.value=d:null),inline:"",color:"primary",class:"mt-2"},{prepend:l(()=>[a(m,null,{default:l(()=>[n(r(e(t)("dashboard.card3.update.type")),1)]),_:1})]),default:l(()=>[g(a(Y,{label:e(t)("dashboard.card3.update.frontend.title"),value:"frontend"},null,8,["label"]),[[_,e(t)("dashboard.card3.update.frontend.tip")]]),g(a(Y,{label:e(t)("dashboard.card3.update.backend.title"),value:"backend"},null,8,["label"]),[[_,e(t)("dashboard.card3.update.backend.tip")]])]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:l(()=>[a(O),a(b,{color:"default",variant:"elevated",onClick:o[21]||(o[21]=d=>G.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),e(Z)==="frontend"?(s(),i(b,{key:0,variant:"elevated",to:"/install"},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):N("",!0),e(Z)==="backend"?(s(),i(b,{key:1,variant:"elevated",onClick:o[22]||(o[22]=d=>{I({type:"update"}),G.value=!1,e(C).updating=!0})},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","width"])]),_:1}),a(y,{class:"mb-4"},{default:l(()=>[g((s(),i(b,{class:"mr-4 mb-4",color:e(me).purple.base,onClick:o[24]||(o[24]=d=>B.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.reset.tip")]]),a(z,{modelValue:e(B),"onUpdate:modelValue":o[28]||(o[28]=d=>T(B)?B.value=d:null),width:e(L)?"85%":"40%"},{default:l(()=>[a(P,null,{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card3.reset.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(Ue,{modelValue:e(oe),"onUpdate:modelValue":o[25]||(o[25]=d=>T(oe)?oe.value=d:null),inline:"",color:"primary",class:"mt-2"},{prepend:l(()=>[a(m,null,{default:l(()=>[n(r(e(t)("dashboard.card3.reset.resetType")),1)]),_:1})]),default:l(()=>[g(a(Y,{label:e(t)("dashboard.card3.reset.noForced.title"),value:"reset-no-force"},null,8,["label"]),[[_,e(t)("dashboard.card3.reset.noForced.tip")]]),g(a(Y,{label:e(t)("dashboard.card3.reset.forced.title"),value:"force"},null,8,["label"]),[[_,e(t)("dashboard.card3.reset.forced.tip")]])]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:l(()=>[a(O),a(b,{color:"default",variant:"elevated",onClick:o[26]||(o[26]=d=>B.value=!1)},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1}),a(b,{variant:"elevated",onClick:o[27]||(o[27]=d=>{I({type:"reset",extra:e(oe)}),B.value=!1})},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),g((s(),i(b,{class:"mr-4 mb-4",color:e(me).brown.base},{default:l(()=>[n(r(e(t)("dashboard.card3.clean.title"))+" ",1),a(el,{activator:"parent"},{default:l(()=>[a(ll,null,{default:l(()=>[(s(!0),R(A,null,$e(e($).worlds,(d,S)=>(s(),i(Ve,{key:S,value:d.id,onClick:je=>{Le.value=d.id,e(p).clean.visible=!0}},{default:l(()=>[a(xe,null,{default:l(()=>[n(r(d.worldName),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.clean.tip")]]),a(H,{modelValue:e(p).clean.visible,"onUpdate:modelValue":o[29]||(o[29]=d=>e(p).clean.visible=d),type:"info",title:e(t)("dashboard.card3.clean.title"),content:e(t)("dashboard.card3.clean.confirm"),"confirm-text":e(t)("global.confirm.confirm"),"cancel-text":e(t)("global.confirm.cancel"),"confirm-loading":e(p).clean.loading,onConfirm:o[30]||(o[30]=d=>I({type:"delete",worldID:e(Le)})),onCancel:o[31]||(o[31]=d=>e(p).clean.visible=!1)},null,8,["modelValue","title","content","confirm-text","cancel-text","confirm-loading"]),g((s(),i(b,{class:"mr-4 mb-4",color:e(me).cyan.darken1,onClick:o[32]||(o[32]=d=>ee.value=!0)},{default:l(()=>[n(r(e(t)("dashboard.card3.quickCmd.title")),1)]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.quickCmd.tip")]]),a(z,{modelValue:e(ee),"onUpdate:modelValue":o[36]||(o[36]=d=>T(ee)?ee.value=d:null),width:e(L)?"90%":"60%"},{default:l(()=>[a(P,null,{default:l(()=>[a(F,null,{default:l(()=>[k("span",null,r(e(t)("dashboard.card3.quickCmd.title")),1),e(V)!==""?(s(),i(m,{key:0,label:"",color:"success",class:"ml-2"},{default:l(()=>[n(r(e(f).players.find(d=>d.uid===e(V)).nickname),1)]),_:1})):N("",!0)]),_:1}),a(D,null,{default:l(()=>[a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(Ue,{modelValue:e(le),"onUpdate:modelValue":o[33]||(o[33]=d=>T(le)?le.value=d:null),inline:"",color:"primary",class:"my-4"},{default:l(()=>[a(Y,{label:e(t)("dashboard.card3.quickCmd.player"),value:"player"},null,8,["label"]),a(Y,{label:e(t)("dashboard.card3.quickCmd.world"),value:"world"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[(s(!0),R(A,null,$e(e(f).players,d=>(s(),i(b,{variant:"text",class:"mr-2",onClick:S=>V.value=d.uid},{default:l(()=>[n(r(d.nickname),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(fe,{modelValue:e(q),"onUpdate:modelValue":[o[34]||(o[34]=d=>T(q)?q.value=d:null),cl],disabled:e(V)===""||e(le)!=="player",items:ul,label:e(t)("dashboard.card3.quickCmd.playerCmd"),"item-title":"label","item-value":"value"},null,8,["modelValue","disabled","label"])]),_:1}),e(L)?N("",!0):(s(),i(O,{key:0}))]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(fe,{modelValue:e(M),"onUpdate:modelValue":[o[35]||(o[35]=d=>T(M)?M.value=d:null),fl],disabled:e(le)!=="world",items:ml,label:e(t)("dashboard.card3.quickCmd.worldCmd"),"item-title":"label","item-value":"value"},null,8,["modelValue","disabled","label"])]),_:1}),e(L)?N("",!0):(s(),i(O,{key:0}))]),_:1}),a(y,null,{default:l(()=>[a(v,null,{default:l(()=>[a(e(Pl),{"model-value":"```lua ::open\n"+e(w),theme:e(il),language:e(bl),"preview-theme":"github",class:"mdp"},null,8,["model-value","theme","language"])]),_:1})]),_:1})]),_:1}),a(te,null,{default:l(()=>[a(O),a(b,{variant:"elevated",text:e(t)("dashboard.card3.quickCmd.insert"),onClick:pl},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["modelValue","width"]),g((s(),i(b,{class:"mr-4 mb-4",color:e(me).teal.base},{default:l(()=>[n(r(e(t)("dashboard.card3.check.title"))+" ",1),a(z,{activator:"parent",width:e(L)?"90%":"60%",onAfterEnter:Oe},{default:l(({isActive:d})=>[a(P,{"min-height":"520"},{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card3.check.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(fe,{modelValue:e(se),"onUpdate:modelValue":o[37]||(o[37]=S=>T(se)?se.value=S:null),multiple:"",chips:"",density:"compact",label:e(t)("dashboard.card3.check.region"),class:"mt-8","item-title":"label","item-value":"value",items:sl,disabled:e(ne),"onUpdate:menu":Oe},null,8,["modelValue","label","disabled"]),e(ne)?(s(),i(h,{key:0,height:476,type:"info",title:e(t)("dashboard.card3.check.result.loading.title"),"sub-title":e(t)("dashboard.card3.check.result.loading.subTitle")},null,8,["title","sub-title"])):(s(),R(A,{key:1},[e(Ne)?(s(),i(h,{key:0,height:476,type:"success",title:e(t)("dashboard.card3.check.result.success.title"),"sub-title":e(t)("dashboard.card3.check.result.success.subTitle")},null,8,["title","sub-title"])):(s(),i(h,{key:1,height:476,type:"error",title:e(t)("dashboard.card3.check.result.error.title"),"sub-title":e(t)("dashboard.card3.check.result.error.subTitle")},null,8,["title","sub-title"]))],64))]),_:1})]),_:1})]),_:1},8,["width"])]),_:1},8,["color"])),[[_,e(t)("dashboard.card3.check.tip")]])]),_:1}),a(y,null,{default:l(()=>[g((s(),i(m,{label:"",class:"mr-4"},{default:l(()=>[n(r(e(t)("dashboard.card3.rollback.title")),1)]),_:1})),[[_,e(t)("dashboard.card3.rollback.tip")]]),(s(!0),R(A,null,$e(e(L)?[1,2,3,4]:[1,2,3,4,5,6,7,8,9],d=>(s(),i(b,{color:"default",size:"x-small",class:"mr-4 mb-4"},{default:l(()=>[n(r(d)+" ",1),a(z,{activator:"parent","max-width":"500px",persistent:""},{default:l(({isActive:S})=>[a(P,null,{default:l(()=>[a(F,{class:"d-flex align-center"},{default:l(()=>[k("span",null,r(e(t)("dashboard.card3.rollback.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(Xe,{text:e(t)("dashboard.card3.rollback.confirm.c1")+d+e(t)("dashboard.card3.rollback.confirm.c2"),type:"info",variant:"tonal"},null,8,["text"])]),_:2},1024),a(te,{class:"pa-4"},{default:l(()=>[a(O),a(b,{variant:"elevated",color:"default",onClick:je=>S.value=!1},{default:l(()=>[n(r(e(t)("global.confirm.cancel")),1)]),_:1},8,["onClick"]),a(b,{variant:"elevated",loading:e(p).rollback.loading,onClick:je=>{I({type:"console",extra:`c_rollback(${d})`,worldID:e(f).worlds[0].id}),S.value=!1}},{default:l(()=>[n(r(e(t)("global.confirm.confirm")),1)]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",md:"6"},{default:l(()=>[a(P,{"min-height":"295"},{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card4.title")),1)]),_:1}),a(D,null,{default:l(()=>[a(y,{class:"mt-8"},{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(De,{modelValue:e(X),"onUpdate:modelValue":o[38]||(o[38]=d=>T(X)?X.value=d:null),"append-inner-icon":"ri-send-plane-fill",class:"w-100",label:e(t)("dashboard.card4.announce"),clearable:"","onClick:appendInner":o[39]||(o[39]=d=>I({type:"announce",extra:e(X)})),onKeyup:o[40]||(o[40]=Je(d=>I({type:"announce",extra:e(X)}),["enter"]))},null,8,["modelValue","label"])]),_:1})]),_:1}),a(y,{class:"my-8"},{default:l(()=>[a(v,{cols:"12",md:"3"},{default:l(()=>[a(fe,{modelValue:e($).selectedWorldID,"onUpdate:modelValue":o[41]||(o[41]=d=>e($).selectedWorldID=d),label:e(t)("dashboard.card4.world"),class:"mr-1","item-title":"worldName","item-value":"id",items:e($).worlds},null,8,["modelValue","label","items"])]),_:1}),a(v,{cols:"12",md:"9"},{default:l(()=>[a(De,{modelValue:e($).cmd,"onUpdate:modelValue":o[42]||(o[42]=d=>e($).cmd=d),"append-inner-icon":"ri-send-plane-fill",label:e(t)("dashboard.card4.cmd"),clearable:"",disabled:e($).selectedWorldID===void 0,"onClick:appendInner":o[43]||(o[43]=d=>I({type:"console",extra:e($).cmd,worldID:e($).selectedWorldID})),onKeyup:o[44]||(o[44]=Je(d=>I({type:"console",extra:e($).cmd,worldID:e($).selectedWorldID}),["enter"]))},null,8,["modelValue","label","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(y,null,{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(P,null,{default:l(()=>[a(F,null,{default:l(()=>[n(r(e(t)("dashboard.card5.title")),1)]),_:1}),a(D,{class:"my-8"},{default:l(()=>[a(y,null,{default:l(()=>[a(v,{cols:"12"},{default:l(()=>[a(Ke,{rounded:"",border:""},{default:l(()=>[a(Ze,{items:e(f).worlds,headers:tl,"hide-default-footer":""},{"item.worldName":l(({value:d})=>[a(m,{color:"primary",label:""},{default:l(()=>[n(r(d),1)]),_:2},1024)]),"item.isMaster":l(({value:d})=>[d?(s(),i(m,{key:0,color:"success",label:""},{default:l(()=>[...o[47]||(o[47]=[n(" 是 ",-1)])]),_:1})):(s(),i(m,{key:1,label:""},{default:l(()=>[...o[48]||(o[48]=[n(" 否 ",-1)])]),_:1}))]),"item.cpu":l(({item:d})=>[a(m,{label:"",color:"info"},{default:l(()=>[n(r(d.performanceStatus.cpu.toFixed(2))+"% ",1)]),_:2},1024)]),"item.mem":l(({item:d})=>[a(m,{label:"",color:"info"},{default:l(()=>[n(r(d.performanceStatus.mem.toFixed(2))+"% ("+r(d.performanceStatus.memSize)+" MB) ",1)]),_:2},1024)]),"item.disk":l(({item:d})=>[a(m,{label:"",color:"info"},{default:l(()=>[n(r(e(Qe)(d.performanceStatus.disk)),1)]),_:2},1024)]),"item.status":l(({item:d})=>[a(Rl,{modelValue:d.status,"onUpdate:modelValue":S=>d.status=S,loading:e(ge),color:"success","hide-details":"",onChange:S=>d.status?I({type:"startup",worldID:d.id}):I({type:"shutdown",worldID:d.id})},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)):(s(),i(h,{key:1,type:"info",title:e(t)("game.base.loading"),height:ae()},null,8,["title","height"]))],64)):(s(),i(h,{key:1,title:e(t)("global.noRoomSelected.title"),"sub-title":e(t)("global.noRoomSelected.subTitle"),type:"error",height:ae()},{default:l(()=>[a(b,{to:"/rooms",class:"mt-4"},{default:l(()=>[n(r(e(t)("global.noRoomSelected.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(s(),R(A,{key:1},[e(Te).userInfo.role==="admin"?(s(),i(h,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:ae(),type:"error"},{default:l(()=>[a(b,{to:"/install",class:"mt-4"},{default:l(()=>[n(r(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(s(),i(h,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:ae(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{Sa as default};
