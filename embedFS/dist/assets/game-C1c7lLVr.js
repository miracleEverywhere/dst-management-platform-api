import M from"./log-CbT-vWrS.js";import{h as N}from"./axios-lI9Ovfql.js";import{r as _}from"./room-Bs-z0h-W.js";import{g as q,h as n,f as B,a3 as R,N as S,y as k,o as D,w as o,a as t,k as f,l as i,s as V,q as b,p as H}from"./index-DSqAz1aK.js";import{c as T,a as U,V as z}from"./VCard-DJ_zJ5IC.js";import{V as E}from"./VSelect-DxoiOzce.js";import{V as A}from"./VSwitch-CHzJJw3C.js";import{V as F}from"./VChip-DOXEbDsk.js";import{V as W}from"./VRow-DoMtucbK.js";import{V as $}from"./VSpacer-Ds6AzTck.js";import{V as j}from"./VCol-Q6N_ObRy.js";import{V as P}from"./VNumberInput-CHPQGelO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTextField-l-FdgV9P.js";import"./index-9rJqgBB5.js";import"./VInput-BKyi7uEB.js";import"./VList-BEO0zeM6.js";import"./ssrBoot-DOEArNsD.js";import"./VMenu-D73OD9NE.js";import"./dialog-transition-BcXBGmd8.js";import"./VCheckboxBtn-BRs82zRR.js";import"./VSelectionControl-BBgZzpZM.js";import"./VSlideGroup-BYN7qME8.js";/* empty css              */const G={content:{url:"/logs/content",get:async function(v){return await N.get(this.url,v)}}},J={class:"card-header"},K={class:"fcc"},he={__name:"game",setup(v){const g=q(),d=n(""),l=n(0),m=n(!0),a=n(0),w=()=>{if(l.value===0)return;const s={roomID:g.room.id,worldID:l.value,logType:"game",lines:a.value};G.content.get(s).then(e=>{d.value=e.data.join(`
`)})},c=n([]),x=async()=>{const s={roomID:g.room.id},e=await _.worlds.get(s);c.value=e.data,l.value=c.value[0]?.id||0};let u=null;const L=()=>{u=setInterval(()=>{m.value&&w()},2e3)},h=()=>{u&&(clearInterval(u),u=null)},y=()=>Math.round(Math.max(2,Math.floor(p.value-390))/22.5),C=()=>Math.max(2,Math.floor(p.value-160)),p=n(window.innerHeight),I=R(()=>{p.value=window.innerHeight,a.value=y()},200);return B(async()=>{window.addEventListener("resize",I),await x(),a.value=y(),L()}),S(()=>{h(),window.removeEventListener("beforeunload",h),window.removeEventListener("resize",I)}),(s,e)=>(D(),k(z,{height:C()},{default:o(()=>[t(T,{class:"my-2"},{default:o(()=>[f("div",J,[e[5]||(e[5]=f("span",null,"游戏日志",-1)),f("div",K,[t(E,{modelValue:i(l),"onUpdate:modelValue":[e[0]||(e[0]=r=>V(l)?l.value=r:null),e[1]||(e[1]=r=>d.value="")],items:i(c),"item-title":"worldName","item-value":"id",label:"世界",density:"compact",class:"mr-4"},null,8,["modelValue","items"]),t(A,{modelValue:i(m),"onUpdate:modelValue":e[2]||(e[2]=r=>V(m)?m.value=r:null),color:"info","hide-details":""},{prepend:o(()=>[t(F,{color:"info"},{default:o(()=>[...e[4]||(e[4]=[b(" 自动刷新 ",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),t(U,null,{default:o(()=>[t(M,{content:i(d),height:C()-150},null,8,["content","height"]),t(W,{class:"my-4"},{default:o(()=>[t($),t(j,{cols:"6",md:"2",class:"fcc"},{default:o(()=>[t(P,{modelValue:i(a),"onUpdate:modelValue":e[3]||(e[3]=r=>V(a)?a.value=r:null),label:"行","hide-details":"",density:"compact",class:"mr-4"},null,8,["modelValue"]),t(H,{onClick:w},{default:o(()=>[...e[6]||(e[6]=[b(" 刷新 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["height"]))}};export{he as default};
