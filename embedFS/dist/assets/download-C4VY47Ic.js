import{_ as k}from"./Result-BHEY1t55.js";import{l as S}from"./logs-n3af1s2k.js";import{g as v,d as V,e as x,b as T,h as f,f as B,a3 as G,N,c as p,l as e,o as l,y as i,w as o,a as n,p as u,q as m,t as c,F as _}from"./index-dR3X8DmH.js";import{a as z,V as C}from"./VCard-DFyB8pZL.js";import"./VContainer-DeU_6QGn.js";/* empty css              */import"./axios-B15C4sn7.js";const $={__name:"download",setup(H){const r=v(),w=V();x();const{t}=T(),d=f(!1),y=()=>{d.value=!0;const b={roomID:r.room.id};S.download.download(b,"logs.zip").finally(()=>{d.value=!1})},a=()=>Math.max(2,Math.floor(g.value-160)),g=f(window.innerHeight),h=G(()=>{g.value=window.innerHeight},200);return B(async()=>{window.addEventListener("resize",h)}),N(()=>{window.removeEventListener("resize",h)}),(b,L)=>{const s=k;return e(r).gameVersion.local!==0?(l(),p(_,{key:0},[e(r).room.id!==0?(l(),i(C,{key:0,height:a()},{default:o(()=>[n(z,null,{default:o(()=>[n(s,{height:a(),type:"info",title:e(t)("logs.download.title"),"sub-title":e(t)("logs.download.subTitle")},{default:o(()=>[n(u,{loading:e(d),class:"mt-4",onClick:y},{default:o(()=>[m(c(e(t)("logs.download.button")),1)]),_:1},8,["loading"])]),_:1},8,["height","title","sub-title"])]),_:1})]),_:1},8,["height"])):(l(),i(s,{key:1,title:e(t)("global.noRoomSelected.title"),"sub-title":e(t)("global.noRoomSelected.subTitle"),type:"error",height:a()},{default:o(()=>[n(u,{to:"/rooms",class:"mt-4"},{default:o(()=>[m(c(e(t)("global.noRoomSelected.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"]))],64)):(l(),p(_,{key:1},[e(w).userInfo.role==="admin"?(l(),i(s,{key:0,title:e(t)("global.noGame.title"),"sub-title":e(t)("global.noGame.subTitle"),height:a(),type:"error"},{default:o(()=>[n(u,{to:"/install",class:"mt-4"},{default:o(()=>[m(c(e(t)("global.noGame.button")),1)]),_:1})]),_:1},8,["title","sub-title","height"])):(l(),i(s,{key:1,title:e(t)("global.noGameNoAdmin.title"),"sub-title":e(t)("global.noGameNoAdmin.subTitle"),height:a(),type:"error"},null,8,["title","sub-title","height"]))],64))}}};export{$ as default};
