import{j as f,c as x,o as m,k as t,E as N,F as w,v as b,y,G as p,n as B,l as r,t as i,b as F,h as D,w as s,a as o,V,aa as z,q as d,s as E,a9 as A,p as k,A as R,B as T}from"./index-Cpi_5jeC.js";import{m as M}from"./mod-D8v3TQGF.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as _}from"./VChip-Bh9Ug9id.js";import{V as P}from"./VTooltip-D-HEEtuq.js";import{V as j}from"./VDialog-DWc1dWI_.js";import{V as C,a as q}from"./VCard-ZqPzOf5v.js";import{V as L}from"./VTable-B_THj38S.js";import{V as H}from"./VContainer-BaYWzqnG.js";import"./axios-DcC5xP6t.js";import"./index-C79QJLOU.js";import"./dialog-transition-Cs1ajW-l.js";/* empty css              */const O={class:"precise-rating"},W={class:"rating-container"},G={class:"stars-background"},U={key:0},J={__name:"PreciseRating",props:{value:{type:Number,required:!0,validator:h=>h>=0},length:{type:Number,default:5},size:{type:[Number,String],default:"small"},color:{type:String,default:"#FFC107"},backgroundColor:{type:String,default:"#E0E0E0"},showActualValue:{type:Boolean,default:!0}},setup(h){const e=h,a=f(()=>{const l=Number(e.size);return isNaN(l)?{"x-small":16,small:24,default:24,medium:28,large:32,"x-large":36}[e.size]||24:l}),n=f(()=>Number(e.value).toFixed(1)),$=f(()=>{const l=a.value;return{position:"absolute",top:0,left:0,width:`${e.value*l}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex"}});return(l,g)=>(m(),x("div",O,[t("div",W,[t("div",G,[(m(!0),x(w,null,b(e.length,u=>(m(),y(p,{key:`star-bg-${u}`,color:e.backgroundColor,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))]),t("div",{style:B(r($)),class:"stars-foreground"},[(m(!0),x(w,null,b(e.length,u=>(m(),y(p,{key:`star-fg-${u}`,color:e.color,size:e.size,icon:"ri-star-fill"},null,8,["color","size"]))),128))],4)]),e.showActualValue?(m(),x("span",U,i(r(n)),1)):N("",!0)]))}},I=S(J,[["__scopeId","data-v-82ef83df"]]);class K{constructor(e){this.codes=[],this.setCodes(e)}parse(e){return this.codes.reduce((a,n)=>a.replace(n.regexp,n.replacement),e)}add(e,a){return this.codes.push({regexp:new RegExp(e,"igms"),replacement:a}),this}setCodes(e){return this.codes=Object.keys(e).map(function(a){const n=e[a];return{regexp:new RegExp(a,"igms"),replacement:n}},this),this}}const Q=new K({"\\[br\\]":"<br>","\\[b\\](.+?)\\[/b\\]":"<strong>$1</strong>","\\[i\\](.+?)\\[/i\\]":"<em>$1</em>","\\[u\\](.+?)\\[/u\\]":"<u>$1</u>","\\[h1\\](.+?)\\[/h1\\]":"<h1>$1</h1>","\\[h2\\](.+?)\\[/h2\\]":"<h2>$1</h2>","\\[h3\\](.+?)\\[/h3\\]":"<h3>$1</h3>","\\[h4\\](.+?)\\[/h4\\]":"<h4>$1</h4>","\\[h5\\](.+?)\\[/h5\\]":"<h5>$1</h5>","\\[h6\\](.+?)\\[/h6\\]":"<h6>$1</h6>","\\[p\\](.+?)\\[/p\\]":"<p>$1</p>","\\[code\\](.+?)\\[/code\\]":"<pre>$1</pre>","\\[color=(.+?)\\](.+?)\\[/color\\]":'<span style="color:$1">$2</span>',"\\[size=([0-9]+)\\](.+?)\\[/size\\]":'<span style="font-size:$1px">$2</span>',"\\[img\\](.+?)\\[/img\\]":'<img src="$1">',"\\[img=(.+?)\\]":'<img src="$1">',"\\[email\\](.+?)\\[/email\\]":'<a href="mailto:$1">$1</a>',"\\[email=(.+?)\\](.+?)\\[/email\\]":'<a href="mailto:$1">$2</a>',"\\[url\\](.+?)\\[/url\\]":'<a href="$1">$1</a>',"\\[url=(.+?)\\|onclick\\](.+?)\\[/url\\]":'<a onclick="$1">$2</a>',"\\[url=(.+?)\\starget=(.+?)\\](.+?)\\[/url\\]":'<a href="$1" target="$2">$3</a>',"\\[url=(.+?)\\](.+?)\\[/url\\]":'<a href="$1">$2</a>',"\\[a=(.+?)\\](.+?)\\[/a\\]":'<a href="$1" name="$1">$2</a>',"\\[list\\](.+?)\\[/list\\]":"<ul>$1</ul>","\\[\\*\\](.+?)\\[/\\*\\]":"<li>$1</li>"}),X={class:"fcc",style:{height:"135px"}},Y={style:{width:"80px",height:"80px"}},Z={class:"fcc fill-height"},ee={style:{width:"200px"}},te={class:"fcc"},oe={style:{margin:"5px 0"},class:"fcc"},se={class:"fcc"},ae={rowspan:"2",class:"text-center"},re={rowspan:"2",class:"text-center"},le={class:"fcc my-2",style:{width:"100%",height:"150px"}},ie={style:{width:"150px",height:"150px"}},ne={class:"d-flex align-center justify-center fill-height"},ce={class:"text-center"},de={class:"text-center"},ue={class:"text-center"},me={class:"text-center"},he={class:"text-center"},pe={class:"text-center"},_e={class:"text-center"},fe={class:"text-center"},ge={colspan:"3",class:"text-center"},ve=["innerHTML"],xe={__name:"modInfo",props:{mod:{type:Object,default:{}},roomID:{type:Number,default:0}},setup(h){const e=h,{t:a}=F(),n=f(()=>parseFloat((e.mod.vote_data.score*5).toFixed(2))),$=f(()=>e.mod.name.length>20?e.mod.name.slice(0,20)+"...":e.mod.name),l=D(!1),g=()=>{const u={roomID:e.roomID,id:e.mod.id,file_url:e.mod.file_url};M.download.post(u).then(c=>{T(c.message)})};return(u,c)=>(m(),y(C,{hover:!0,variant:"flat",height:"135",class:"cursor-auto"},{default:s(()=>[t("div",X,[t("div",Y,[o(V,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:s(()=>[t("div",Z,[o(z,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])]),t("div",ee,[t("div",te,[o(_,{label:"",size:"small",color:"primary"},{default:s(()=>[d(i(r($))+" ",1),o(P,{activator:"parent","open-delay":"300","scroll-strategy":"close"},{default:s(()=>[d(i(e.mod.name),1)]),_:1})]),_:1})]),t("div",oe,[o(I,{value:r(n),length:5,"show-actual-value":!0,size:"24"},null,8,["value"])]),t("div",se,[o(j,{modelValue:r(l),"onUpdate:modelValue":c[1]||(c[1]=v=>E(l)?l.value=v:null),class:"flex-wrap","max-width":"60%"},{activator:s(({props:v})=>[o(k,R({color:"info",density:"compact",size:"small"},v,{class:"mr-4",onClick:c[0]||(c[0]=$e=>l.value=!0)}),{default:s(()=>[d(i(r(a)("game.mod.download.modInfo.detail")),1)]),_:1},16)]),default:s(({isActive:v})=>[o(C,{title:e.mod.name},{default:s(()=>[o(q,null,{default:s(()=>[o(L,{class:"custom-table"},{default:s(()=>[t("tbody",null,[t("tr",null,[t("td",ae,[o(p,{icon:"ri-image-line"})]),t("td",re,[t("div",le,[t("div",ie,[o(V,{src:e.mod.preview_url,cover:"",rounded:"","aspect-ratio":"1"},{placeholder:s(()=>[t("div",ne,[o(z,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"])])])]),c[2]||(c[2]=t("td",{class:"text-center"}," ID ",-1)),t("td",ce,[o(_,{color:"info",label:""},{default:s(()=>[d(i(e.mod.id),1)]),_:1})])]),t("tr",null,[t("td",de,i(r(a)("game.mod.download.modInfo.size")),1),t("td",ue,[o(_,{color:"info",label:""},{default:s(()=>[d(i(r(A)(e.mod.size)),1)]),_:1})])]),t("tr",null,[t("td",me,[o(p,{icon:"ri-thumb-up-fill",color:"success"})]),t("td",he,[o(_,{color:"success",label:""},{default:s(()=>[d(i(e.mod.vote_data.votes_up),1)]),_:1})]),t("td",pe,[o(p,{icon:"ri-thumb-down-fill",color:"error"})]),t("td",_e,[o(_,{color:"error",label:""},{default:s(()=>[d(i(e.mod.vote_data.votes_down),1)]),_:1})])]),t("tr",null,[t("td",fe,[o(p,{icon:"ri-star-fill",color:"warning"})]),t("td",ge,[o(I,{value:r(n),length:5,"show-actual-value":!0,size:"24"},null,8,["value"])])])])]),_:1}),o(H,{height:"30vh"},{default:s(()=>[t("div",{innerHTML:r(Q).parse(e.mod.file_description)},null,8,ve)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),o(k,{color:"success",density:"compact",size:"small",onClick:g},{default:s(()=>[d(i(r(a)("game.mod.download.modInfo.download")),1)]),_:1})])])])]),_:1}))}},Ee=S(xe,[["__scopeId","data-v-170188a2"]]);export{Ee as default};
