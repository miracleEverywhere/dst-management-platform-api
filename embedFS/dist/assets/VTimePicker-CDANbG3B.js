import{ac as G,ad as J,h as f,aX as ge,aY as ve,j as g,L as ee,ae as K,k as v,n as te,H as h,aZ as ye,Z as fe,a as y,p as R,q as oe,ag as Me,a7 as ce,af as Ve,A as j,at as Se,am as re,f as Pe,an as _e,aH as ne}from"./index-CBjUexYG.js";function A(e){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(M,"0")}const xe=J({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),de=G()({name:"VTimePickerClock",props:xe(),emits:{change:e=>!0,input:e=>!0},setup(e,M){let{emit:o}=M;const V=f(null),S=f(null),a=f(void 0),r=f(!1),m=f(null),x=f(null),E=ye(t=>o("change",t),750),{textColorClasses:F,textColorStyles:P}=ge(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:Q}=ve(()=>e.color),N=g(()=>e.max-e.min+1),w=g(()=>e.double?N.value/2:N.value),b=g(()=>360/w.value),z=g(()=>b.value*Math.PI/180),_=g(()=>e.modelValue==null?e.min:e.modelValue),L=g(()=>.62),U=g(()=>{const t=[];for(let l=e.min;l<=e.max;l=l+e.step)t.push(l);return t});ee(()=>e.modelValue,t=>{a.value=t});function q(t){a.value!==t&&(a.value=t),o("input",t)}function C(t){return!e.allowedValues||e.allowedValues(t)}function Y(t){if(!e.scrollable||e.disabled)return;t.preventDefault();const l=Math.sign(-t.deltaY||1);let u=_.value;do u=u+l,u=(u-e.min+N.value)%N.value+e.min;while(!C(u)&&u!==_.value);u!==e.displayedValue&&q(u),E(u)}function O(t){return e.double&&t-e.min>=w.value}function I(t){return O(t)?L.value:1}function p(t){const l=e.rotate*Math.PI/180;return{x:Math.sin((t-e.min)*z.value+l)*I(t),y:-Math.cos((t-e.min)*z.value+l)*I(t)}}function W(t,l){const u=(Math.round(t/b.value)+(l?w.value:0))%N.value+e.min;return t<360-b.value/2?u:l?e.max-w.value+1:e.min}function n(t){const{x:l,y:u}=p(t);return{left:`${Math.round(50+l*50)}%`,top:`${Math.round(50+u*50)}%`}}function c(t,l){const u=l.x-t.x,D=l.y-t.y;return Math.sqrt(u*u+D*D)}function s(t,l){const u=2*Math.atan2(l.y-t.y-c(t,l),l.x-t.x);return Math.abs(u*180/Math.PI)}function i(t){m.value===null&&(m.value=t),x.value=t,q(t)}function k(t){if(t.preventDefault(),!r.value&&t.type!=="click"||!V.value)return;const{width:l,top:u,left:D}=V.value?.getBoundingClientRect(),{width:B}=S.value?.getBoundingClientRect()??{width:0},{clientX:X,clientY:we}="touches"in t?t.touches[0]:t,le={x:l/2,y:-l/2},ae={x:X-D,y:u-we},ie=Math.round(s(le,ae)-e.rotate+360)%360,ue=e.double&&c(le,ae)<(B+B*L.value)/4,be=Math.ceil(15/b.value);let $;for(let Z=0;Z<be;Z++)if($=W(ie+Z*b.value,ue),C($)||($=W(ie-Z*b.value,ue),C($)))return i($)}function H(t){e.disabled||(t.preventDefault(),window.addEventListener("mousemove",k),window.addEventListener("touchmove",k),window.addEventListener("mouseup",T),window.addEventListener("touchend",T),m.value=null,x.value=null,r.value=!0,k(t))}function T(t){t.stopPropagation(),window.removeEventListener("mousemove",k),window.removeEventListener("touchmove",k),window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T),r.value=!1,x.value!==null&&C(x.value)&&o("change",x.value)}K(()=>v("div",{class:h([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:H,onTouchstart:H,onWheel:Y,ref:V},[v("div",{class:"v-time-picker-clock__inner",ref:S},[v("div",{class:h([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":O(e.modelValue)},F.value]),style:te([{transform:`rotate(${e.rotate+b.value*(_.value-e.min)}deg) scaleY(${I(_.value)})`},P.value])},null),U.value.map(t=>{const l=t===_.value;return v("div",{class:h([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":l,"v-time-picker-clock__item--disabled":e.disabled||!C(t)},l&&d.value]),style:te([n(t),l&&Q.value])},[v("span",null,[e.format(t)])])})])]))}}),Ce=J({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),se=G()({name:"VTimePickerControls",props:Ce(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,M){let{emit:o,slots:V}=M;const{t:S}=fe();return K(()=>{let a=e.hour;return e.ampm&&(a=a?(a-1)%12+1:12),v("div",{class:"v-time-picker-controls"},[v("div",{class:h({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[y(R,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:h({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":A(`${a}`),onClick:()=>o("update:viewMode","hour")},null),v("span",{class:h(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[oe(":")]),y(R,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:h({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":A(e.minute),onClick:()=>o("update:viewMode","minute")},null),e.useSeconds&&v("span",{class:h(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[oe(":")]),e.useSeconds&&y(R,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>o("update:viewMode","second"),class:h({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":A(e.second)},null),e.ampm&&v("div",{class:"v-time-picker-controls__ampm"},[y(R,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:h({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:S("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?o("update:period","am"):null},null),y(R,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:h({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:S("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?o("update:period","pm"):null},null)])])])}),{}}}),He=Me("v-picker-title"),ke=J({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...Se()},"VPicker"),me=G()({name:"VPicker",props:ke(),setup(e,M){let{slots:o}=M;const{backgroundColorClasses:V,backgroundColorStyles:S}=ve(()=>e.color);return K(()=>{const a=ce.filterProps(e),r=!e.hideTitle&&!!(e.title||o.title);return y(ce,j(a,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&v("div",{key:"header",class:h([V.value]),style:te([S.value])},[r&&y(He,{key:"picker-title"},{default:()=>[o.title?.()??e.title]}),o.header&&v("div",{class:"v-picker__header"},[o.header()])]),v("div",{class:"v-picker__body"},[o.default?.()]),o.actions&&y(Ve,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[v("div",{class:"v-picker__actions"},[o.actions()])]})]})}),{}}}),Te=ne(24),he=ne(12),Ne=he.map(e=>e+12);ne(60);const Be=J({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,..._e(ke({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),Ie=G()({name:"VTimePicker",props:Be(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,M){let{emit:o,slots:V}=M;const{t:S}=fe(),a=f(null),r=f(null),m=f(null),x=f(null),E=f(null),F=f(null),P=re(e,"period","am"),d=re(e,"viewMode","hour"),Q=f(null),N=f(null),w=g(()=>{let n;if(e.allowedHours instanceof Array?n=i=>e.allowedHours.includes(i):n=e.allowedHours,!e.min&&!e.max)return n;const c=e.min?Number(e.min.split(":")[0]):0,s=e.max?Number(e.max.split(":")[0]):23;return i=>i>=Number(c)&&i<=Number(s)&&(!n||n(i))}),b=g(()=>{let n;const c=!w.value||a.value===null||w.value(a.value);if(e.allowedMinutes instanceof Array?n=l=>e.allowedMinutes.includes(l):n=e.allowedMinutes,!e.min&&!e.max)return c?n:()=>!1;const[s,i]=e.min?e.min.split(":").map(Number):[0,0],[k,H]=e.max?e.max.split(":").map(Number):[23,59],T=s*60+Number(i),t=k*60+Number(H);return l=>{const u=60*a.value+l;return u>=T&&u<=t&&c&&(!n||n(l))}}),z=g(()=>{let n;const s=(!w.value||a.value===null||w.value(a.value))&&(!b.value||r.value===null||b.value(r.value));if(e.allowedSeconds instanceof Array?n=B=>e.allowedSeconds.includes(B):n=e.allowedSeconds,!e.min&&!e.max)return s?n:()=>!1;const[i,k,H]=e.min?e.min.split(":").map(Number):[0,0,0],[T,t,l]=e.max?e.max.split(":").map(Number):[23,59,59],u=i*3600+k*60+Number(H||0),D=T*3600+t*60+Number(l||0);return B=>{const X=3600*a.value+60*r.value+B;return X>=u&&X<=D&&s&&(!n||n(B))}}),_=g(()=>e.format==="ampm");ee(()=>e.period,n=>I(n)),ee(()=>e.modelValue,n=>Y(n)),Pe(()=>{Y(e.modelValue)});function L(){return a.value!=null&&r.value!=null&&(!e.useSeconds||m.value!=null)?`${A(a.value)}:${A(r.value)}`+(e.useSeconds?`:${A(m.value)}`:""):null}function U(){const n=L();n!==null&&o("update:modelValue",n)}function q(n){return n?(n-1)%12+1:12}function C(n,c){return n%12+(c==="pm"?12:0)}function Y(n){if(n==null||n==="")a.value=null,r.value=null,m.value=null;else if(n instanceof Date)a.value=n.getHours(),r.value=n.getMinutes(),m.value=n.getSeconds();else{const[c,,s,,i,k]=n.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);a.value=k?C(parseInt(c,10),k):parseInt(c,10),r.value=parseInt(s,10),m.value=parseInt(i||0,10)}P.value=a.value==null||a.value<12?"am":"pm"}function O(n,c){const s=w.value;if(!s)return c;const i=_.value?c<12?he:Ne:Te;return((i.find(H=>s((H+c)%i.length+i[0]))||0)+c)%i.length+i[0]}function I(n){if(P.value=n,a.value!=null){const c=a.value+(P.value==="am"?-12:12);a.value=O("hour",c)}return o("update:period",n),U(),!0}function p(n){d.value==="hour"?a.value=_.value?C(n,P.value):n:d.value==="minute"?r.value=n:m.value=n}function W(n){switch(d.value||"hour"){case"hour":o("update:hour",n);break;case"minute":o("update:minute",n);break;case"second":o("update:second",n);break}const c=a.value!==null&&r.value!==null&&(e.useSeconds?m.value!==null:!0);d.value==="hour"?d.value="minute":e.useSeconds&&d.value==="minute"&&(d.value="second"),!(a.value===x.value&&r.value===E.value&&(!e.useSeconds||m.value===F.value)||L()===null)&&(x.value=a.value,E.value=r.value,e.useSeconds&&(F.value=m.value),c&&U())}K(()=>{const n=me.filterProps(e),c=se.filterProps(e),s=de.filterProps(_e(e,["format","modelValue","min","max"]));return y(me,j(n,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>V.title?.()??v("div",{class:"v-time-picker__title"},[S(e.title)]),header:()=>y(se,j(c,{ampm:_.value,hour:a.value,minute:r.value,period:P.value,second:m.value,viewMode:d.value,"onUpdate:period":i=>I(i),"onUpdate:viewMode":i=>d.value=i,ref:Q}),null),default:()=>y(de,j(s,{allowedValues:d.value==="hour"?w.value:d.value==="minute"?b.value:z.value,double:d.value==="hour"&&!_.value,format:d.value==="hour"?_.value?q:i=>i:i=>A(i,2),max:d.value==="hour"?_.value&&P.value==="am"?11:23:59,min:d.value==="hour"&&_.value&&P.value==="pm"?12:0,size:20,step:d.value==="hour"?1:5,modelValue:d.value==="hour"?a.value:d.value==="minute"?r.value:m.value,onChange:W,onInput:p,ref:N}),null),actions:V.actions})})}});export{Ie as V};
