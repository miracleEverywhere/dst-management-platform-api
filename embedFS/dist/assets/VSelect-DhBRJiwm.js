import{f as Be,e as Fe}from"./VInput-DvzUfva6.js";import{u as _e,V as ge,m as Ee}from"./VTextField-B4aqPjD_.js";import{ad as pe,ae as te,by as Pe,L as X,af as he,k as I,F as se,B as F,aS as Ce,e as Le,a2 as U,bN as ye,f as ee,i as _,ce as Oe,c4 as xe,aM as fe,ar as Me,ax as Te,bA as Ae,bY as He,aZ as ze,a0 as ce,b_ as Ne,j as Ue,cf as qe,a as k,br as ie,n as Ke,H as $e,a$ as je,aG as We,cc as Ge,Z as Xe,an as Ve,bX as Ye,bC as ve,G as be,P as we,cg as Ze,U as Je,z as Qe,ch as et,ag as tt,q as lt,aI as nt,b0 as at,ao as ot,ci as ke,cj as Se,al as ut}from"./index-BIB3igSj.js";import{u as st,V as rt,a as it,m as ct}from"./VList-vw8-LTod.js";import{V as dt}from"./VMenu-DhuiS5bX.js";import{V as ft}from"./VCheckboxBtn-DynxfNj7.js";import{V as Ie}from"./VChip-C4EMZ5EO.js";import{V as vt}from"./dialog-transition-CIOSZPEE.js";const mt=te({renderless:Boolean,...Ce()},"VVirtualScrollItem"),pt=pe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:mt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:r,slots:n}=s;const{resizeRef:f,contentRect:p}=Pe(void 0,"border");X(()=>p.value?.height,o=>{o!=null&&r("update:height",o)}),he(()=>e.renderless?I(se,null,[n.default?.({itemRef:f})]):I("div",F({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},l),[n.default?.()]))}}),ht=-1,gt=1,me=100,yt=te({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Vt(e,s){const l=Le(),r=U(0);ye(()=>{r.value=parseFloat(e.itemHeight||0)});const n=U(0),f=U(Math.ceil((parseInt(e.height)||l.height.value)/(r.value||16))||1),p=U(0),o=U(0),c=ee(),S=ee();let u=0;const{resizeRef:R,contentRect:B}=Pe();ye(()=>{R.value=c.value});const E=_(()=>c.value===document.documentElement?l.height.value:B.value?.height||parseInt(e.height)||0),Y=_(()=>!!(c.value&&S.value&&E.value&&r.value));let y=Array.from({length:s.value.length}),w=Array.from({length:s.value.length});const P=U(0);let C=-1;function q(a){return y[a]||r.value}const K=Oe(()=>{const a=performance.now();w[0]=0;const d=s.value.length;for(let V=1;V<=d;V++)w[V]=(w[V-1]||0)+q(V-1);P.value=Math.max(P.value,performance.now()-a)},P),L=X(Y,a=>{a&&(L(),u=S.value.offsetTop,K.immediate(),O(),~C&&Te(()=>{Ae&&window.requestAnimationFrame(()=>{ue(C),C=-1})}))});xe(()=>{K.clear()});function le(a,d){const V=y[a],x=r.value;r.value=x?Math.min(r.value,d):d,(V!==d||x!==r.value)&&(y[a]=d,K())}function D(a){a=fe(a,0,s.value.length);const d=Math.floor(a),V=a%1,x=d+1,j=w[d]||0,t=w[x]||j;return j+(t-j)*V}function h(a){return bt(w,a)}let Z=0,$=0,ne=0;X(E,(a,d)=>{O(),a<d&&requestAnimationFrame(()=>{$=0,O()})});let ae=-1;function M(){if(!c.value||!S.value)return;const a=c.value.scrollTop,d=performance.now();d-ne>500?($=Math.sign(a-Z),u=S.value.offsetTop):$=a-Z,Z=a,ne=d,window.clearTimeout(ae),ae=window.setTimeout(re,500),O()}function re(){!c.value||!S.value||($=0,ne=0,window.clearTimeout(ae),O())}let oe=-1;function O(){cancelAnimationFrame(oe),oe=requestAnimationFrame(de)}function de(){if(!c.value||!E.value||!r.value)return;const a=Z-u,d=Math.sign($),V=Math.max(0,a-me),x=fe(h(V),0,s.value.length),j=a+E.value+me,t=fe(h(j)+1,x+1,s.value.length);if((d!==ht||x<n.value)&&(d!==gt||t>f.value)){const m=D(n.value)-D(x),b=D(t)-D(f.value);Math.max(m,b)>me?(n.value=x,f.value=t):(x<=0&&(n.value=x),t>=s.value.length&&(f.value=t))}p.value=D(n.value),o.value=D(s.value.length)-D(f.value)}function ue(a){const d=D(a);!c.value||a&&!d?C=a:c.value.scrollTop=d}const J=_(()=>s.value.slice(n.value,f.value).map((a,d)=>{const V=d+n.value;return{raw:a,index:V,key:Me(a,e.itemKey,V)}}));return X(s,()=>{y=Array.from({length:s.value.length}),w=Array.from({length:s.value.length}),K.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:c,markerRef:S,computedItems:J,paddingTop:p,paddingBottom:o,scrollToIndex:ue,handleScroll:M,handleScrollend:re,handleItemResize:le}}function bt(e,s){let l=e.length-1,r=0,n=0,f=null,p=-1;if(e[l]<s)return l;for(;r<=l;)if(n=r+l>>1,f=e[n],f>s)l=n-1;else if(f<s)p=n,r=n+1;else return f===s?n:r;return p}const wt=te({items:{type:Array,default:()=>[]},renderless:Boolean,...yt(),...Ce(),...je()},"VVirtualScroll"),kt=pe()({name:"VVirtualScroll",props:wt(),setup(e,s){let{slots:l}=s;const r=He("VVirtualScroll"),{dimensionStyles:n}=ze(e),{calculateVisibleItems:f,containerRef:p,markerRef:o,handleScroll:c,handleScrollend:S,handleItemResize:u,scrollToIndex:R,paddingTop:B,paddingBottom:E,computedItems:Y}=Vt(e,ce(()=>e.items));return Ne(()=>e.renderless,()=>{function y(){const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[P]("scroll",c,{passive:!0}),document[P]("scrollend",S)):(p.value?.[P]("scroll",c,{passive:!0}),p.value?.[P]("scrollend",S))}Ue(()=>{p.value=qe(r.vnode.el,!0),y(!0)}),xe(y)}),he(()=>{const y=Y.value.map(w=>k(pt,{key:w.key,renderless:e.renderless,"onUpdate:height":P=>u(w.index,P)},{default:P=>l.default?.({item:w.raw,index:w.index,...P})}));return e.renderless?I(se,null,[I("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:ie(B.value)}},null),y,I("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ie(E.value)}},null)]):I("div",{ref:p,class:$e(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:S,style:Ke([n.value,e.style])},[I("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:ie(B.value),paddingBottom:ie(E.value)}},[y])])}),{calculateVisibleItems:f,scrollToIndex:R}}});function St(e,s){const l=U(!1);let r;function n(o){cancelAnimationFrame(r),l.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(l.value){const c=X(l,()=>{c(),o()})}else o()})}async function p(o){if(o.key==="Tab"&&s.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=e.value?.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await f();const S=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=c.getBoundingClientRect().top;for(const R of S)if(R.getBoundingClientRect().top>=u){R.focus();break}}else{const u=c.getBoundingClientRect().bottom;for(const R of[...S].reverse())if(R.getBoundingClientRect().bottom<=u){R.focus();break}}}return{onScrollPassive:n,onKeydown:p}}const It=te({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Pt(e,s){const l=We(),r=_(()=>`menu-${l}`),n=ce(()=>Ge(s)),f=ce(()=>r.value);return{menuId:r,ariaExpanded:n,ariaControls:f}}const Ct=te({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ut,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...It(),...ct({itemChildren:!1})},"Select"),xt=te({...Ct(),...ot(Ee({modelValue:null,role:"combobox"}),["validationValue","dirty"]),...at({transition:{component:vt}})},"VSelect"),Lt=pe()({name:"VSelect",props:xt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:r}=Xe(),n=ee(),f=ee(),p=ee(),{items:o,transformIn:c,transformOut:S}=st(e),u=Ve(e,"modelValue",[],t=>c(t===null?[null]:Ye(t)),t=>{const m=S(t);return e.multiple?m:m[0]??null}),R=_(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),B=Be(e),E=_e(e),Y=_(()=>u.value.map(t=>t.value)),y=U(!1),w=ce(()=>e.closableChips&&!B.isReadonly.value&&!B.isDisabled.value),{InputIcon:P}=Fe(e);let C="",q=0,K;const L=_(()=>e.hideSelected?o.value.filter(t=>!u.value.some(m=>(e.valueComparator||ve)(m,t))):o.value),le=_(()=>e.hideNoData&&!L.value.length||B.isReadonly.value||B.isDisabled.value),D=Ve(e,"menu"),h=_({get:()=>D.value,set:t=>{D.value&&!t&&f.value?.Î¨openChildren.size||t&&le.value||(D.value=t)}}),{menuId:Z,ariaExpanded:$,ariaControls:ne}=Pt(e,h),ae=_(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),M=ee(),re=St(M,n);function oe(t){e.openOnClear&&(h.value=!0)}function O(){le.value||(h.value=!h.value)}function de(t){ke(t)&&ue(t)}function ue(t){if(!t.key||B.isReadonly.value)return;if(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(h.value=!0),["Escape","Tab"].includes(t.key)&&(h.value=!1),e.clearable&&t.key==="Backspace"){t.preventDefault(),u.value=[],oe();return}t.key==="Home"?M.value?.focus("first"):t.key==="End"&&M.value?.focus("last");const m=1e3;if(!ke(t))return;const b=performance.now();b-K>m&&(C="",q=0),C+=t.key.toLowerCase(),K=b;const H=L.value;function z(){let v=T();return v||C.at(-1)===C.at(-2)&&(C=C.slice(0,-1),q++,v=T(),v)||(q=0,v=T(),v)?v:(C=t.key.toLowerCase(),T())}function T(){for(let v=q;v<H.length;v++){const W=H[v];if(W.title.toLowerCase().startsWith(C))return[W,v]}}const N=z();if(!N)return;const[i,g]=N;q=g,M.value?.focus(g),e.multiple||(u.value=[i])}function J(t){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const b=u.value.findIndex(z=>(e.valueComparator||ve)(z.value,t.value)),H=m??!~b;if(~b){const z=H?[...u.value,t]:[...u.value];z.splice(b,1),u.value=z}else H&&(u.value=[...u.value,t])}else{const b=m!==!1;u.value=b?[t]:[],Te(()=>{h.value=!1})}}function a(t){M.value?.$el.contains(t.relatedTarget)||(h.value=!1)}function d(){e.eager&&p.value?.calculateVisibleItems()}function V(){y.value&&n.value?.focus()}function x(t){y.value=!0}function j(t){if(t==null)u.value=[];else if(Se(n.value,":autofill")||Se(n.value,":-webkit-autofill")){const m=o.value.find(b=>b.title===t);m&&J(m)}else n.value&&(n.value.value="")}return X(h,()=>{if(!e.hideSelected&&h.value&&u.value.length){const t=L.value.findIndex(m=>u.value.some(b=>(e.valueComparator||ve)(b.value,m.value)));Ae&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&p.value?.scrollToIndex(t)})}}),X(o,(t,m)=>{h.value||y.value&&e.hideNoData&&!m.length&&t.length&&(h.value=!0)}),he(()=>{const t=!!(e.chips||l.chip),m=!!(!e.hideNoData||L.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),b=u.value.length>0,H=ge.filterProps(e),z=b||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return k(ge,F({ref:n},H,{modelValue:u.value.map(T=>T.props.title).join(", "),name:void 0,"onUpdate:modelValue":j,focused:y.value,"onUpdate:focused":T=>y.value=T,validationValue:u.externalValue,counterValue:R.value,dirty:b,class:["v-select",{"v-select--active-menu":h.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:z,"onClick:clear":oe,"onMousedown:control":O,onBlur:a,onKeydown:ue,"aria-expanded":$.value,"aria-controls":ne.value}),{...l,default:T=>{let{id:N}=T;return I(se,null,[I("select",{hidden:!0,multiple:e.multiple,name:E.fieldName.value},[o.value.map(i=>I("option",{key:i.value,value:i.value,selected:Y.value.includes(i.value)},null))]),k(dt,F({id:Z.value,ref:f,modelValue:h.value,"onUpdate:modelValue":i=>h.value=i,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:d,onAfterLeave:V},ae.value),{default:()=>[m&&k(rt,F({ref:M,selected:Y.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:de,onFocusin:x,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-labelledby":`${N.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},re,e.listProps),{default:()=>[l["prepend-item"]?.(),!L.value.length&&!e.hideNoData&&(l["no-data"]?.()??k(we,{key:"no-data",title:r(e.noDataText)},null)),k(kt,{ref:p,renderless:!0,items:L.value,itemKey:"value"},{default:i=>{let{item:g,index:v,itemRef:W}=i;const G=Ze(g.props),Q=F(g.props,{ref:W,key:g.value,onClick:()=>J(g,null),"aria-posinset":v+1,"aria-setsize":L.value.length});return g.type==="divider"?l.divider?.({props:g.raw,index:v})??k(Je,F(g.props,{key:`divider-${v}`}),null):g.type==="subheader"?l.subheader?.({props:g.raw,index:v})??k(it,F(g.props,{key:`subheader-${v}`}),null):l.item?.({item:g,index:v,props:Q})??k(we,F(Q,{role:"option"}),{prepend:A=>{let{isSelected:De}=A;return I(se,null,[e.multiple&&!e.hideSelected?k(ft,{key:g.value,modelValue:De,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Re=>Re.preventDefault()},null):void 0,G.prependAvatar&&k(Qe,{image:G.prependAvatar},null),G.prependIcon&&k(be,{icon:G.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),u.value.map((i,g)=>{function v(A){A.stopPropagation(),A.preventDefault(),J(i,!1)}const W=F(Ie.filterProps(i.props),{"onClick:close":v,onKeydown(A){A.key!=="Enter"&&A.key!==" "||(A.preventDefault(),A.stopPropagation(),v(A))},onMousedown(A){A.preventDefault(),A.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),G=t?!!l.chip:!!l.selection,Q=G?et(t?l.chip({item:i,index:g,props:W}):l.selection({item:i,index:g})):void 0;if(!(G&&!Q))return I("div",{key:i.value,class:"v-select__selection"},[t?l.chip?k(tt,{key:"chip-defaults",defaults:{VChip:{closable:w.value,size:"small",text:i.title}}},{default:()=>[Q]}):k(Ie,F({key:"chip",closable:w.value,size:"small",text:i.title,disabled:i.props.disabled},W),null):Q??I("span",{class:"v-select__selection-text"},[i.title,e.multiple&&g<u.value.length-1&&I("span",{class:"v-select__selection-comma"},[lt(",")])])])})])},"append-inner":function(){for(var T=arguments.length,N=new Array(T),i=0;i<T;i++)N[i]=arguments[i];return I(se,null,[l["append-inner"]?.(...N),e.menuIcon?k(be,{class:"v-select__menu-icon",color:n.value?.fieldIconColor,icon:e.menuIcon,"aria-hidden":!0},null):void 0,e.appendInnerIcon&&k(P,{key:"append-icon",name:"appendInner",color:N[0].iconColor.value},null)])}})}),nt({isFocused:y,menu:h,select:J},n)}});export{Lt as V};
