import{c6 as it,bt as dt,ae as V,an as j,j as k,L as ge,bV as Te,aI as ie,am as W,Y as q,ad as z,Z as le,af as U,k as y,a as S,A as N,al as O,c7 as ct,bq as B,H as te,h as L,bK as ft,be as gt,c8 as mt,bU as Y,bL as vt,bz as Ve,a1 as ht,$ as C,c9 as ae,ca as Z,aS as bt,bj as yt,e as me,aV as pt,F as M,b9 as xt,aw as ve,aO as he,G as pe,n as St,cb as Pt,p as Fe,q as xe,cc as J,m as X,t as wt,bl as de,at as ce,ar as ee,aq as kt,as as It,U as Dt}from"./index-C_c0Exnr.js";import{V as Se}from"./VPagination-BvGVuOQq.js";import{V as Ce}from"./VSelect-Cd8ItLVw.js";import{V as Tt}from"./VChip-ZB3BK_Db.js";import{V as be}from"./VCheckboxBtn-Cv--o_EO.js";import{V as Pe,m as Vt}from"./VTable-BofIWAHS.js";import{u as Ft,m as Ct}from"./filter-BwZVfOUl.js";function we(e,t,l){return Object.keys(e).filter(a=>it(a)&&a.endsWith(t)).reduce((a,n)=>(a[n.slice(0,-t.length)]=r=>dt(e[n],r,l(r)),a),{})}const Bt=V({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Be=Symbol.for("vuetify:data-table-pagination");function Et(e){const t=j(e,"page",void 0,a=>Number(a??1)),l=j(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:t,itemsPerPage:l}}function _t(e){const{page:t,itemsPerPage:l,itemsLength:a}=e,n=k(()=>l.value===-1?0:l.value*(t.value-1)),r=k(()=>l.value===-1?a.value:Math.min(a.value,n.value+l.value)),s=k(()=>l.value===-1||a.value===0?1:Math.ceil(a.value/l.value));ge([t,s],()=>{t.value>s.value&&(t.value=s.value)});function i(f){l.value=f,t.value=1}function o(){t.value=ie(t.value+1,1,s.value)}function u(){t.value=ie(t.value-1,1,s.value)}function c(f){t.value=ie(f,1,s.value)}const m={page:t,itemsPerPage:l,startIndex:n,stopIndex:r,pageCount:s,itemsLength:a,nextPage:o,prevPage:u,setPage:c,setItemsPerPage:i};return q(Be,m),m}function Ot(){const e=W(Be);if(!e)throw new Error("Missing pagination!");return e}function At(e){const t=Te("usePaginatedItems"),{items:l,startIndex:a,stopIndex:n,itemsPerPage:r}=e,s=k(()=>r.value<=0?l.value:l.value.slice(a.value,n.value));return ge(s,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:s}}const Ee=V({prevIcon:{type:O,default:"$prev"},nextIcon:{type:O,default:"$next"},firstIcon:{type:O,default:"$first"},lastIcon:{type:O,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),ke=z()({name:"VDataTableFooter",props:Ee(),setup(e,t){let{slots:l}=t;const{t:a}=le(),{page:n,pageCount:r,startIndex:s,stopIndex:i,itemsLength:o,itemsPerPage:u,setItemsPerPage:c}=Ot(),m=k(()=>e.itemsPerPageOptions.map(f=>typeof f=="number"?{value:f,title:f===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(f)}:{...f,title:isNaN(Number(f.title))?a(f.title):f.title}));return U(()=>{const f=Se.filterProps(e);return y("div",{class:"v-data-table-footer"},[l.prepend?.(),y("div",{class:"v-data-table-footer__items-per-page"},[y("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),S(Ce,{items:m.value,modelValue:u.value,"onUpdate:modelValue":v=>c(Number(v)),density:"compact",variant:"outlined",hideDetails:!0},null)]),y("div",{class:"v-data-table-footer__info"},[y("div",null,[a(e.pageText,o.value?s.value+1:0,i.value,o.value)])]),y("div",{class:"v-data-table-footer__pagination"},[S(Se,N({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:r.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},f),null)])])}),{}}}),K=ct({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:l}=t;const a=e.tag??"td",n=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return S(a,{class:te(["v-data-table__td",{"v-data-table-column--fixed":n==="start","v-data-table-column--fixed-end":n==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:B(e.height),width:B(e.width),maxWidth:B(e.maxWidth),left:n==="start"?B(e.fixedOffset||null):void 0,right:n==="end"?B(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?B(e.indent):void 0}},{default:()=>[l.default?.()]})}),Nt=V({headers:Array},"DataTable-header"),_e=Symbol.for("vuetify:data-table-headers"),Oe={title:"",sortable:!1},Rt={...Oe,width:48};function $t(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(l=>({element:l,priority:0}));return{enqueue:(l,a)=>{let n=!1;for(let r=0;r<t.length;r++)if(t[r].priority>a){t.splice(r,0,{element:l,priority:a}),n=!0;break}n||t.push({element:l,priority:a})},size:()=>t.length,count:()=>{let l=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let n=0;n<t.length;n++)Math.floor(t[n].priority)===a&&(l+=1);return l},dequeue:()=>t.shift()}}function fe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const l of e.children)fe(l,t);return t}function Ae(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const l of e)l.key&&t.add(l.key),l.children&&Ae(l.children,t);return t}function Ht(e){if(e.key){if(e.key==="data-table-group")return Oe;if(["data-table-expand","data-table-select"].includes(e.key))return Rt}}function ye(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(l=>ye(l,t+1))):t}function Gt(e){let t=!1;function l(r,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(r)if(i!=="none"&&(r.fixed=i),r.fixed===!0&&(r.fixed="start"),r.fixed===s)if(r.children)if(s==="start")for(let o=r.children.length-1;o>=0;o--)l(r.children[o],s,s);else for(let o=0;o<r.children.length;o++)l(r.children[o],s,s);else!t&&s==="start"?r.lastFixed=!0:!t&&s==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?mt(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),t=!0;else if(r.children)if(s==="start")for(let o=r.children.length-1;o>=0;o--)l(r.children[o],s);else for(let o=0;o<r.children.length;o++)l(r.children[o],s);else t=!1}for(let r=e.length-1;r>=0;r--)l(e[r],"start");for(let r=0;r<e.length;r++)l(e[r],"end");let a=0;for(let r=0;r<e.length;r++)a=Ne(e[r],a);let n=0;for(let r=e.length-1;r>=0;r--)n=Re(e[r],n)}function Ne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const l of e.children)t=Ne(l,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Re(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const l of e.children)t=Re(l,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Lt(e,t){const l=[];let a=0;const n=$t(e);for(;n.size()>0;){let s=n.count();const i=[];let o=1;for(;s>0;){const{element:u,priority:c}=n.dequeue(),m=t-a-ye(u);if(i.push({...u,rowspan:m??1,colspan:u.children?fe(u).length:1}),u.children)for(const f of u.children){const v=c%1+o/Math.pow(10,a+2);n.enqueue(f,a+m+v)}o+=1,s-=1}a+=1,l.push(i)}return{columns:e.map(s=>fe(s)).flat(),headers:l}}function $e(e){const t=[];for(const l of e){const a={...Ht(l),...l},n=a.key??(typeof a.value=="string"?a.value:null),r=a.value??n??null,s={...a,key:n,value:r,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?$e(a.children):void 0};t.push(s)}return t}function jt(e,t){const l=L([]),a=L([]),n=L({}),r=L({}),s=L({});ft(()=>{const u=(e.headers||Object.keys(e.items[0]??{}).map(h=>({key:h,title:gt(h)}))).slice(),c=Ae(u);t?.groupBy?.value.length&&!c.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!c.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!c.has("data-table-expand")&&u.push({key:"data-table-expand"});const m=$e(u);Gt(m);const f=Math.max(...m.map(h=>ye(h)))+1,v=Lt(m,f);l.value=v.headers,a.value=v.columns;const P=v.headers.flat(1);for(const h of P)h.key&&(h.sortable&&(h.sort&&(n.value[h.key]=h.sort),h.sortRaw&&(r.value[h.key]=h.sortRaw)),h.filter&&(s.value[h.key]=h.filter))});const i={headers:l,columns:a,sortFunctions:n,sortRawFunctions:r,filterFunctions:s};return q(_e,i),i}function ne(){const e=W(_e);if(!e)throw new Error("Missing headers!");return e}const Mt={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:l}=e;return new Set(l?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},He={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:l,selected:a}=e;for(const n of t)l?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:t,currentPage:l,selected:a}=e;return He.select({items:l,value:t,selected:a})}},Wt={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:l,selected:a}=e;for(const n of t)l?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:t,allItems:l}=e;return new Set(t?l.map(a=>a.value):[])}},qt=V({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),Ge=Symbol.for("vuetify:data-table-selection");function zt(e,t){let{allItems:l,currentPage:a}=t;const n=j(e,"modelValue",e.modelValue,b=>{const p=e.valueComparator;return p?new Set(Y(b).map(D=>l.value.find(x=>p(D,x.value))?.value??D)):new Set(Y(b).map(D=>vt(D)?l.value.find(x=>D===x.value)?.value??D:l.value.find(x=>Ve(D,x.value))?.value??D))},b=>[...b.values()]),r=k(()=>l.value.filter(b=>b.selectable)),s=k(()=>a.value.filter(b=>b.selectable)),i=k(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Mt;case"all":return Wt;case"page":default:return He}}),o=ht(null);function u(b){return Y(b).every(p=>n.value.has(p.value))}function c(b){return Y(b).some(p=>n.value.has(p.value))}function m(b,p){const D=i.value.select({items:b,value:p,selected:new Set(n.value)});n.value=D}function f(b,p,D){const x=[];if(p=p??a.value.findIndex(E=>E.value===b.value),e.selectStrategy!=="single"&&D?.shiftKey&&o.value!==null){const[E,H]=[o.value,p].sort((A,w)=>A-w);x.push(...a.value.slice(E,H+1).filter(A=>A.selectable))}else x.push(b),o.value=p;m(x,!u([b]))}function v(b){const p=i.value.selectAll({value:b,allItems:r.value,currentPage:s.value,selected:new Set(n.value)});n.value=p}const P=k(()=>n.value.size>0),h=k(()=>{const b=i.value.allSelected({allItems:r.value,currentPage:s.value});return!!b.length&&u(b)}),d=C(()=>i.value.showSelectAll),T={toggleSelect:f,select:m,selectAll:v,isSelected:u,isSomeSelected:c,someSelected:P,allSelected:h,showSelectAll:d,lastSelectedIndex:o,selectStrategy:i};return q(Ge,T),T}function re(){const e=W(Ge);if(!e)throw new Error("Missing selection!");return e}const Kt=V({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Le=Symbol.for("vuetify:data-table-sort");function Ut(e){const t=j(e,"sortBy"),l=C(()=>e.mustSort),a=C(()=>e.multiSort);return{sortBy:t,mustSort:l,multiSort:a}}function Qt(e){const{sortBy:t,mustSort:l,multiSort:a,page:n}=e,r=o=>{if(o.key==null)return;let u=t.value.map(m=>({...m}))??[];const c=u.find(m=>m.key===o.key);c?c.order==="desc"?l.value&&u.length===1?c.order="asc":u=u.filter(m=>m.key!==o.key):c.order="desc":a.value?u.push({key:o.key,order:"asc"}):u=[{key:o.key,order:"asc"}],t.value=u,n&&(n.value=1)};function s(o){return!!t.value.find(u=>u.key===o.key)}const i={sortBy:t,toggleSort:r,isSorted:s};return q(Le,i),i}function je(){const e=W(Le);if(!e)throw new Error("Missing sort!");return e}function Yt(e,t,l,a){const n=le();return{sortedItems:k(()=>l.value.length?Zt(t.value,l.value,n.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):t.value)}}function Zt(e,t,l,a){const n=new Intl.Collator(l,{sensitivity:"accent",usage:"sort"});return e.map(s=>[s,a?.transform?a.transform(s):s]).sort((s,i)=>{for(let o=0;o<t.length;o++){let u=!1;const c=t[o].key,m=t[o].order??"asc";if(m===!1)continue;let f=ae(s[1],c),v=ae(i[1],c),P=s[0].raw,h=i[0].raw;if(m==="desc"&&([f,v]=[v,f],[P,h]=[h,P]),a?.sortRawFunctions?.[c]){const d=a.sortRawFunctions[c](P,h);if(d==null)continue;if(u=!0,d)return d}if(a?.sortFunctions?.[c]){const d=a.sortFunctions[c](f,v);if(d==null)continue;if(u=!0,d)return d}if(!u&&(f instanceof Date&&v instanceof Date&&(f=f.getTime(),v=v.getTime()),[f,v]=[f,v].map(d=>d!=null?d.toString().toLocaleLowerCase():d),f!==v))return Z(f)&&Z(v)?0:Z(f)?-1:Z(v)?1:!isNaN(f)&&!isNaN(v)?Number(f)-Number(v):n.compare(f,v)}return 0}).map(s=>{let[i]=s;return i})}const Me=V({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:O,default:"$sortAsc"},sortDescIcon:{type:O,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...he(),...ve(),...xt()},"VDataTableHeaders"),Ie=z()({name:"VDataTableHeaders",props:Me(),setup(e,t){let{slots:l}=t;const{t:a}=le(),{toggleSort:n,sortBy:r,isSorted:s}=je(),{someSelected:i,allSelected:o,selectAll:u,showSelectAll:c}=re(),{columns:m,headers:f}=ne(),{loaderClasses:v}=bt(e);function P(w,g){if(!(e.sticky||e.fixedHeader)&&!w.fixed)return;const I=typeof w.fixed=="string"?w.fixed:w.fixed?"start":"none";return{position:"sticky",left:I==="start"?B(w.fixedOffset):void 0,right:I==="end"?B(w.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${g})`:void 0}}function h(w,g){w.key==="Enter"&&!e.disableSort&&n(g)}function d(w){const g=r.value.find(I=>I.key===w.key);return g?g.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:T,backgroundColorStyles:b}=yt(()=>e.color),{displayClasses:p,mobile:D}=me(e),x=k(()=>({headers:f.value,columns:m.value,toggleSort:n,isSorted:s,sortBy:r.value,someSelected:i.value,allSelected:o.value,selectAll:u,getSortIcon:d})),E=k(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},p.value,v.value]),H=w=>{let{column:g,x:I,y:F}=w;const se=g.key==="data-table-select"||g.key==="data-table-expand",Q=g.key==="data-table-group"&&g.width===0&&!g.title,oe=N(e.headerProps??{},g.headerProps??{});return S(K,N({tag:"th",align:g.align,class:[{"v-data-table__th--sortable":g.sortable&&!e.disableSort,"v-data-table__th--sorted":s(g),"v-data-table__th--fixed":g.fixed},...E.value],style:{width:B(g.width),minWidth:B(g.minWidth),maxWidth:B(g.maxWidth),...P(g,F)},colspan:g.colspan,rowspan:g.rowspan,fixed:g.fixed,nowrap:g.nowrap,lastFixed:g.lastFixed,firstFixedEnd:g.firstFixedEnd,noPadding:se,empty:Q,tabindex:g.sortable?0:void 0,onClick:g.sortable?()=>n(g):void 0,onKeydown:g.sortable?R=>h(R,g):void 0},oe),{default:()=>{const R=`header.${g.key}`,G={column:g,selectAll:u,isSorted:s,toggleSort:n,sortBy:r.value,someSelected:i.value,allSelected:o.value,getSortIcon:d};return l[R]?l[R](G):Q?"":g.key==="data-table-select"?l["header.data-table-select"]?.(G)??(c.value&&S(be,{density:e.density,modelValue:o.value,indeterminate:i.value&&!o.value,"onUpdate:modelValue":u},null)):y("div",{class:"v-data-table-header__content"},[y("span",null,[g.title]),g.sortable&&!e.disableSort&&S(pe,{key:"icon",class:"v-data-table-header__sort-icon",icon:d(g)},null),e.multiSort&&s(g)&&y("div",{key:"badge",class:te(["v-data-table-header__sort-badge",...T.value]),style:St(b.value)},[r.value.findIndex(ue=>ue.key===g.key)+1])])}})},A=()=>{const w=k(()=>m.value.filter(I=>I?.sortable&&!e.disableSort)),g=k(()=>{if(m.value.find(F=>F.key==="data-table-select")!=null)return o.value?"$checkboxOn":i.value?"$checkboxIndeterminate":"$checkboxOff"});return S(K,N({tag:"th",class:[...E.value],colspan:f.value.length+1},e.headerProps),{default:()=>[y("div",{class:"v-data-table-header__content"},[S(Ce,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:w.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:g.value,"onClick:append":()=>u(!o.value)},{chip:I=>S(Tt,{onClick:I.item.raw?.sortable?()=>n(I.item.raw):void 0,onMousedown:F=>{F.preventDefault(),F.stopPropagation()}},{default:()=>[I.item.title,S(pe,{class:te(["v-data-table__td-sort-icon",s(I.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:d(I.item.raw),size:"small"},null)]})})])]})};U(()=>D.value?y("tr",null,[S(A,null,null)]):y(M,null,[l.headers?l.headers(x.value):f.value.map((w,g)=>y("tr",null,[w.map((I,F)=>S(H,{column:I,x:F,y:g},null))])),e.loading&&y("tr",{class:"v-data-table-progress"},[y("th",{colspan:m.value.length},[S(pt,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:l.loader})])])]))}}),Jt=V({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),We=Symbol.for("vuetify:data-table-group");function Xt(e){return{groupBy:j(e,"groupBy")}}function ea(e){const{disableSort:t,groupBy:l,sortBy:a}=e,n=L(new Set),r=k(()=>l.value.map(c=>({...c,order:c.order??!1})).concat(t?.value?[]:a.value));function s(c){return n.value.has(c.id)}function i(c){const m=new Set(n.value);s(c)?m.delete(c.id):m.add(c.id),n.value=m}function o(c){function m(f){const v=[];for(const P of f.items)"type"in P&&P.type==="group"?v.push(...m(P)):v.push(P);return[...new Set(v)]}return m({items:c})}const u={sortByWithGroups:r,toggleGroup:i,opened:n,groupBy:l,extractRows:o,isGroupOpen:s};return q(We,u),u}function qe(){const e=W(We);if(!e)throw new Error("Missing group!");return e}function ta(e,t){if(!e.length)return[];const l=new Map;for(const a of e){const n=ae(a.raw,t);l.has(n)||l.set(n,[]),l.get(n).push(a)}return l}function ze(e,t){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const n=ta(e,t[0]),r=[],s=t.slice(1);return n.forEach((i,o)=>{const u=t[0],c=`${a}_${u}_${o}`;r.push({depth:l,id:c,key:u,value:o,items:s.length?ze(i,s,l+1,c):i,type:"group"})}),r}function Ke(e,t,l){const a=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&a.push(n),(t.has(n.id)||n.value==null)&&(a.push(...Ke(n.items,t,l)),l&&a.push({...n,type:"group-summary"}))):a.push(n);return a}function aa(e,t,l,a){return{flatItems:k(()=>{if(!t.value.length)return e.value;const r=ze(e.value,t.value.map(s=>s.key));return Ke(r,l.value,Pt(a))})}}const Ue=V({item:{type:Object,required:!0},groupCollapseIcon:{type:O,default:"$tableGroupCollapse"},groupExpandIcon:{type:O,default:"$tableGroupExpand"},...he()},"VDataTableGroupHeaderRow"),la=z()({name:"VDataTableGroupHeaderRow",props:Ue(),setup(e,t){let{slots:l}=t;const{isGroupOpen:a,toggleGroup:n,extractRows:r}=qe(),{isSelected:s,isSomeSelected:i,select:o}=re(),{columns:u}=ne(),c=k(()=>r([e.item])),m=C(()=>u.value.length-(u.value.some(f=>f.key==="data-table-select")?1:0));return()=>y("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(f=>{if(f.key==="data-table-group"){const v=a(e.item)?e.groupCollapseIcon:e.groupExpandIcon,P=()=>n(e.item);return l["data-table-group"]?.({item:e.item,count:c.value.length,props:{icon:v,onClick:P}})??S(K,{class:"v-data-table-group-header-row__column",colspan:m.value},{default:()=>[S(Fe,{size:"small",variant:"text",icon:v,onClick:P},null),y("span",null,[e.item.value]),y("span",null,[xe("("),c.value.length,xe(")")])]})}else if(f.key==="data-table-select"){const v=s(c.value),P=i(c.value)&&!v,h=d=>o(c.value,d);return l["data-table-select"]?.({props:{modelValue:v,indeterminate:P,"onUpdate:modelValue":h}})??S(K,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[S(be,{density:e.density,modelValue:v,indeterminate:P,"onUpdate:modelValue":h},null)]})}return""})])}}),na=V({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Qe=Symbol.for("vuetify:datatable:expanded");function ra(e){const t=C(()=>e.expandOnClick),l=j(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function a(i,o){const u=new Set(l.value),c=J(i.value);if(o)u.add(c);else{const m=[...l.value].find(f=>J(f)===c);u.delete(m)}l.value=u}function n(i){const o=J(i.value);return[...l.value].some(u=>J(u)===o)}function r(i){a(i,!n(i))}const s={expand:a,expanded:l,expandOnClick:t,isExpanded:n,toggleExpand:r};return q(Qe,s),s}function Ye(){const e=W(Qe);if(!e)throw new Error("foo");return e}const Ze=V({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:O,default:"$collapse"},expandIcon:{type:O,default:"$expand"},onClick:de(),onContextmenu:de(),onDblclick:de(),...he(),...ve()},"VDataTableRow"),sa=z()({name:"VDataTableRow",props:Ze(),setup(e,t){let{slots:l}=t;const{displayClasses:a,mobile:n}=me(e,"v-data-table__tr"),{isSelected:r,toggleSelect:s,someSelected:i,allSelected:o,selectAll:u}=re(),{isExpanded:c,toggleExpand:m}=Ye(),{toggleSort:f,sortBy:v,isSorted:P}=je(),{columns:h}=ne();U(()=>y("tr",{class:te(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&h.value.map((d,T)=>{const b=e.item,p=`item.${d.key}`,D=`header.${d.key}`,x={index:e.index,item:b.raw,internalItem:b,value:ae(b.columns,d.key),column:d,isSelected:r,toggleSelect:s,isExpanded:c,toggleExpand:m},E={column:d,selectAll:u,isSorted:P,toggleSort:f,sortBy:v.value,someSelected:i.value,allSelected:o.value,getSortIcon:()=>""},H=typeof e.cellProps=="function"?e.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value,column:d}):e.cellProps,A=typeof d.cellProps=="function"?d.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value}):d.cellProps,w=d.key==="data-table-select"||d.key==="data-table-expand",g=d.key==="data-table-group"&&d.width===0&&!d.title;return S(K,N({align:d.align,indent:d.intent,class:{"v-data-table__td--expanded-row":d.key==="data-table-expand","v-data-table__td--select-row":d.key==="data-table-select"},fixed:d.fixed,fixedOffset:d.fixedOffset,fixedEndOffset:d.fixedEndOffset,lastFixed:d.lastFixed,firstFixedEnd:d.firstFixedEnd,maxWidth:n.value?void 0:d.maxWidth,noPadding:w,empty:g,nowrap:d.nowrap,width:n.value?void 0:d.width},H,A),{default:()=>{if(d.key==="data-table-select")return l["item.data-table-select"]?.({...x,props:{disabled:!b.selectable,modelValue:r([b]),onClick:X(()=>s(b),["stop"])}})??S(be,{disabled:!b.selectable,density:e.density,modelValue:r([b]),onClick:X(F=>s(b,e.index,F),["stop"])},null);if(d.key==="data-table-expand")return l["item.data-table-expand"]?.({...x,props:{icon:c(b)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:X(()=>m(b),["stop"])}})??S(Fe,{icon:c(b)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:X(()=>m(b),["stop"])},null);if(l[p]&&!n.value)return l[p](x);const I=wt(x.value);return n.value?y(M,null,[y("div",{class:"v-data-table__td-title"},[l[D]?.(E)??d.title]),y("div",{class:"v-data-table__td-value"},[l[p]?.(x)??I])]):I}})})]))}}),Je=V({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...ce(Ze(),["collapseIcon","expandIcon","density"]),...ce(Ue(),["groupCollapseIcon","groupExpandIcon","density"]),...ve()},"VDataTableRows"),De=z()({name:"VDataTableRows",inheritAttrs:!1,props:Je(),setup(e,t){let{attrs:l,slots:a}=t;const{columns:n}=ne(),{expandOnClick:r,toggleExpand:s,isExpanded:i}=Ye(),{isSelected:o,toggleSelect:u}=re(),{toggleGroup:c,isGroupOpen:m}=qe(),{t:f}=le(),{mobile:v}=me(e);return U(()=>{const P=ce(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||a.loading)?y("tr",{class:"v-data-table-rows-loading",key:"loading"},[y("td",{colspan:n.value.length},[a.loading?.()??f(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?y("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[y("td",{colspan:n.value.length},[a["no-data"]?.()??f(e.noDataText)])]):y(M,null,[e.items.map((h,d)=>{if(h.type==="group"){const p={index:d,item:h,columns:n.value,isExpanded:i,toggleExpand:s,isSelected:o,toggleSelect:u,toggleGroup:c,isGroupOpen:m};return a["group-header"]?a["group-header"](p):S(la,N({key:`group-header_${h.id}`,item:h},we(l,":groupHeader",()=>p),P),a)}if(h.type==="group-summary"){const p={index:d,item:h,columns:n.value,toggleGroup:c};return a["group-summary"]?.(p)??""}const T={index:d,item:h.raw,internalItem:h,columns:n.value,isExpanded:i,toggleExpand:s,isSelected:o,toggleSelect:u},b={...T,props:N({key:`item_${h.key??h.index}`,onClick:r.value?()=>{s(h)}:void 0,index:d,item:h,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:v.value},we(l,":row",()=>T),typeof e.rowProps=="function"?e.rowProps({item:T.item,index:T.index,internalItem:T.internalItem}):e.rowProps)};return y(M,{key:b.props.key},[a.item?a.item(b):S(sa,b.props,a),i(h)&&a["expanded-row"]?.(T)])})])}),{}}}),oa=V({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ua(e,t,l,a){const n=e.returnObject?t:ee(t,e.itemValue),r=ee(t,e.itemSelectable,!0),s=a.reduce((i,o)=>(o.key!=null&&(i[o.key]=ee(t,o.value)),i),{});return{type:"item",key:e.returnObject?ee(t,e.itemValue):n,index:l,value:n,selectable:r,columns:s,raw:t}}function ia(e,t,l){return t.map((a,n)=>ua(e,a,n,l))}function da(e,t){return{items:k(()=>ia(e,e.items,t.value))}}function ca(e){let{page:t,itemsPerPage:l,sortBy:a,groupBy:n,search:r}=e;const s=Te("VDataTable"),i=()=>({page:t.value,itemsPerPage:l.value,sortBy:a.value,groupBy:n.value,search:r.value});let o=null;ge(i,u=>{Ve(o,u)||(o&&o.search!==u.search&&(t.value=1),s.emit("update:options",u),o=u)},{deep:!0,immediate:!0})}const fa=V({...Je(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...na(),...Jt(),...Nt(),...oa(),...qt(),...Kt(),...Me(),...Vt()},"DataTable"),ga=V({...Bt(),...fa(),...Ct(),...Ee()},"VDataTable"),Sa=z()({name:"VDataTable",props:ga(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:l,slots:a}=t;const{groupBy:n}=Xt(e),{sortBy:r,multiSort:s,mustSort:i}=Ut(e),{page:o,itemsPerPage:u}=Et(e),{disableSort:c}=kt(e),{columns:m,headers:f,sortFunctions:v,sortRawFunctions:P,filterFunctions:h}=jt(e,{groupBy:n,showSelect:C(()=>e.showSelect),showExpand:C(()=>e.showExpand)}),{items:d}=da(e,m),T=C(()=>e.search),{filteredItems:b}=Ft(e,d,T,{transform:$=>$.columns,customKeyFilter:h}),{toggleSort:p}=Qt({sortBy:r,multiSort:s,mustSort:i,page:o}),{sortByWithGroups:D,opened:x,extractRows:E,isGroupOpen:H,toggleGroup:A}=ea({groupBy:n,sortBy:r,disableSort:c}),{sortedItems:w}=Yt(e,b,D,{transform:$=>({...$.raw,...$.columns}),sortFunctions:v,sortRawFunctions:P}),{flatItems:g}=aa(w,n,x,()=>!!a["group-summary"]),I=k(()=>g.value.length),{startIndex:F,stopIndex:se,pageCount:Q,setItemsPerPage:oe}=_t({page:o,itemsPerPage:u,itemsLength:I}),{paginatedItems:R}=At({items:g,startIndex:F,stopIndex:se,itemsPerPage:u}),G=k(()=>E(R.value)),{isSelected:ue,select:Xe,selectAll:et,toggleSelect:tt,someSelected:at,allSelected:lt}=zt(e,{allItems:d,currentPage:G}),{isExpanded:nt,toggleExpand:rt}=ra(e);ca({page:o,itemsPerPage:u,sortBy:r,groupBy:n,search:T}),It({VDataTableRows:{hideNoData:C(()=>e.hideNoData),noDataText:C(()=>e.noDataText),loading:C(()=>e.loading),loadingText:C(()=>e.loadingText)}});const _=k(()=>({page:o.value,itemsPerPage:u.value,sortBy:r.value,pageCount:Q.value,toggleSort:p,setItemsPerPage:oe,someSelected:at.value,allSelected:lt.value,isSelected:ue,select:Xe,selectAll:et,toggleSelect:tt,isExpanded:nt,toggleExpand:rt,isGroupOpen:H,toggleGroup:A,items:G.value.map($=>$.raw),internalItems:G.value,groupedItems:R.value,columns:m.value,headers:f.value}));return U(()=>{const $=ke.filterProps(e),st=Ie.filterProps(e),ot=De.filterProps(e),ut=Pe.filterProps(e);return S(Pe,N({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ut,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(_.value),default:()=>a.default?a.default(_.value):y(M,null,[a.colgroup?.(_.value),!e.hideDefaultHeader&&y("thead",{key:"thead"},[S(Ie,st,a)]),a.thead?.(_.value),!e.hideDefaultBody&&y("tbody",null,[a["body.prepend"]?.(_.value),a.body?a.body(_.value):S(De,N(l,ot,{items:R.value}),a),a["body.append"]?.(_.value)]),a.tbody?.(_.value),a.tfoot?.(_.value)]),bottom:()=>a.bottom?a.bottom(_.value):!e.hideDefaultFooter&&y(M,null,[S(Dt,null,null),S(ke,$,{prepend:a["footer.prepend"]})])})}),{}}});export{Sa as V,Ut as a,Et as b,Xt as c,jt as d,ea as e,_t as f,aa as g,zt as h,ra as i,ca as j,ke as k,Ie as l,De as m,Ee as n,fa as o,Qt as p,Bt as q,da as u};
