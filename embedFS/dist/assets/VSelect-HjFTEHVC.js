import{f as Be,e as Fe}from"./VInput-Dh0vzV9z.js";import{u as _e,V as ge,m as Ee}from"./VTextField-C20ssUm5.js";import{ah as pe,ai as te,br as Pe,O as J,aj as he,k as I,F as se,E as F,aW as Ce,e as Oe,a5 as N,bP as ye,f as ee,i as _,ci as Le,c8 as Te,aQ as fe,av as Me,aB as xe,bt as Ae,b_ as He,b1 as ze,a3 as ce,c0 as Ke,j as Ne,cj as Ue,a as k,bk as ie,n as qe,K as $e,b3 as je,aK as We,cg as Ye,a1 as Je,ar as Ve,bZ as Qe,bw as ve,J as be,U as we,ck as Xe,Y as Ze,B as Ge,cl as et,ak as tt,v as lt,aM as nt,b4 as at,as as ot,cm as ke,cn as Se,ap as ut}from"./index-ClrSl1t3.js";import{u as st,V as rt,a as it,m as ct}from"./VList-CRtGEhVV.js";import{V as dt}from"./VMenu-DVaqAgsw.js";import{V as ft}from"./VCheckboxBtn-CD061qxM.js";import{V as Ie}from"./VChip-DSSyFDgp.js";import{V as vt}from"./dialog-transition-BOVVgIJg.js";const mt=te({renderless:Boolean,...Ce()},"VVirtualScrollItem"),pt=pe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:mt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:r,slots:n}=s;const{resizeRef:f,contentRect:p}=Pe(void 0,"border");J(()=>p.value?.height,o=>{o!=null&&r("update:height",o)}),he(()=>e.renderless?I(se,null,[n.default?.({itemRef:f})]):I("div",F({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},l),[n.default?.()]))}}),ht=-1,gt=1,me=100,yt=te({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Vt(e,s){const l=Oe(),r=N(0);ye(()=>{r.value=parseFloat(e.itemHeight||0)});const n=N(0),f=N(Math.ceil((parseInt(e.height)||l.height.value)/(r.value||16))||1),p=N(0),o=N(0),c=ee(),S=ee();let u=0;const{resizeRef:R,contentRect:B}=Pe();ye(()=>{R.value=c.value});const E=_(()=>c.value===document.documentElement?l.height.value:B.value?.height||parseInt(e.height)||0),Q=_(()=>!!(c.value&&S.value&&E.value&&r.value));let y=Array.from({length:s.value.length}),w=Array.from({length:s.value.length});const P=N(0);let C=-1;function U(a){return y[a]||r.value}const q=Le(()=>{const a=performance.now();w[0]=0;const d=s.value.length;for(let V=1;V<=d;V++)w[V]=(w[V-1]||0)+U(V-1);P.value=Math.max(P.value,performance.now()-a)},P),O=J(Q,a=>{a&&(O(),u=S.value.offsetTop,q.immediate(),L(),~C&&xe(()=>{Ae&&window.requestAnimationFrame(()=>{ue(C),C=-1})}))});Te(()=>{q.clear()});function le(a,d){const V=y[a],T=r.value;r.value=T?Math.min(r.value,d):d,(V!==d||T!==r.value)&&(y[a]=d,q())}function D(a){a=fe(a,0,s.value.length);const d=Math.floor(a),V=a%1,T=d+1,j=w[d]||0,t=w[T]||j;return j+(t-j)*V}function h(a){return bt(w,a)}let X=0,$=0,ne=0;J(E,(a,d)=>{L(),a<d&&requestAnimationFrame(()=>{$=0,L()})});let ae=-1;function M(){if(!c.value||!S.value)return;const a=c.value.scrollTop,d=performance.now();d-ne>500?($=Math.sign(a-X),u=S.value.offsetTop):$=a-X,X=a,ne=d,window.clearTimeout(ae),ae=window.setTimeout(re,500),L()}function re(){!c.value||!S.value||($=0,ne=0,window.clearTimeout(ae),L())}let oe=-1;function L(){cancelAnimationFrame(oe),oe=requestAnimationFrame(de)}function de(){if(!c.value||!E.value||!r.value)return;const a=X-u,d=Math.sign($),V=Math.max(0,a-me),T=fe(h(V),0,s.value.length),j=a+E.value+me,t=fe(h(j)+1,T+1,s.value.length);if((d!==ht||T<n.value)&&(d!==gt||t>f.value)){const m=D(n.value)-D(T),b=D(t)-D(f.value);Math.max(m,b)>me?(n.value=T,f.value=t):(T<=0&&(n.value=T),t>=s.value.length&&(f.value=t))}p.value=D(n.value),o.value=D(s.value.length)-D(f.value)}function ue(a){const d=D(a);!c.value||a&&!d?C=a:c.value.scrollTop=d}const Z=_(()=>s.value.slice(n.value,f.value).map((a,d)=>{const V=d+n.value;return{raw:a,index:V,key:Me(a,e.itemKey,V)}}));return J(s,()=>{y=Array.from({length:s.value.length}),w=Array.from({length:s.value.length}),q.immediate(),L()},{deep:1}),{calculateVisibleItems:L,containerRef:c,markerRef:S,computedItems:Z,paddingTop:p,paddingBottom:o,scrollToIndex:ue,handleScroll:M,handleScrollend:re,handleItemResize:le}}function bt(e,s){let l=e.length-1,r=0,n=0,f=null,p=-1;if(e[l]<s)return l;for(;r<=l;)if(n=r+l>>1,f=e[n],f>s)l=n-1;else if(f<s)p=n,r=n+1;else return f===s?n:r;return p}const wt=te({items:{type:Array,default:()=>[]},renderless:Boolean,...yt(),...Ce(),...je()},"VVirtualScroll"),kt=pe()({name:"VVirtualScroll",props:wt(),setup(e,s){let{slots:l}=s;const r=He("VVirtualScroll"),{dimensionStyles:n}=ze(e),{calculateVisibleItems:f,containerRef:p,markerRef:o,handleScroll:c,handleScrollend:S,handleItemResize:u,scrollToIndex:R,paddingTop:B,paddingBottom:E,computedItems:Q}=Vt(e,ce(()=>e.items));return Ke(()=>e.renderless,()=>{function y(){const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[P]("scroll",c,{passive:!0}),document[P]("scrollend",S)):(p.value?.[P]("scroll",c,{passive:!0}),p.value?.[P]("scrollend",S))}Ne(()=>{p.value=Ue(r.vnode.el,!0),y(!0)}),Te(y)}),he(()=>{const y=Q.value.map(w=>k(pt,{key:w.key,renderless:e.renderless,"onUpdate:height":P=>u(w.index,P)},{default:P=>l.default?.({item:w.raw,index:w.index,...P})}));return e.renderless?I(se,null,[I("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:ie(B.value)}},null),y,I("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ie(E.value)}},null)]):I("div",{ref:p,class:$e(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:S,style:qe([n.value,e.style])},[I("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:ie(B.value),paddingBottom:ie(E.value)}},[y])])}),{calculateVisibleItems:f,scrollToIndex:R}}});function St(e,s){const l=N(!1);let r;function n(o){cancelAnimationFrame(r),l.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(l.value){const c=J(l,()=>{c(),o()})}else o()})}async function p(o){if(o.key==="Tab"&&s.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=e.value?.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await f();const S=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=c.getBoundingClientRect().top;for(const R of S)if(R.getBoundingClientRect().top>=u){R.focus();break}}else{const u=c.getBoundingClientRect().bottom;for(const R of[...S].reverse())if(R.getBoundingClientRect().bottom<=u){R.focus();break}}}return{onScrollPassive:n,onKeydown:p}}const It=te({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Pt(e,s){const l=We(),r=_(()=>`menu-${l}`),n=ce(()=>Ye(s)),f=ce(()=>r.value);return{menuId:r,ariaExpanded:n,ariaControls:f}}const Ct=te({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ut,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...It(),...ct({itemChildren:!1})},"Select"),Tt=te({...Ct(),...ot(Ee({modelValue:null,role:"combobox"}),["validationValue","dirty"]),...at({transition:{component:vt}})},"VSelect"),Ot=pe()({name:"VSelect",props:Tt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:r}=Je(),n=ee(),f=ee(),p=ee(),{items:o,transformIn:c,transformOut:S}=st(e),u=Ve(e,"modelValue",[],t=>c(t===null?[null]:Qe(t)),t=>{const m=S(t);return e.multiple?m:m[0]??null}),R=_(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),B=Be(e),E=_e(e),Q=_(()=>u.value.map(t=>t.value)),y=N(!1),w=ce(()=>e.closableChips&&!B.isReadonly.value&&!B.isDisabled.value),{InputIcon:P}=Fe(e);let C="",U=0,q;const O=_(()=>e.hideSelected?o.value.filter(t=>!u.value.some(m=>(e.valueComparator||ve)(m,t))):o.value),le=_(()=>e.hideNoData&&!O.value.length||B.isReadonly.value||B.isDisabled.value),D=Ve(e,"menu"),h=_({get:()=>D.value,set:t=>{D.value&&!t&&f.value?.Î¨openChildren.size||t&&le.value||(D.value=t)}}),{menuId:X,ariaExpanded:$,ariaControls:ne}=Pt(e,h),ae=_(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),M=ee(),re=St(M,n);function oe(t){e.openOnClear&&(h.value=!0)}function L(){le.value||(h.value=!h.value)}function de(t){ke(t)&&ue(t)}function ue(t){if(!t.key||B.isReadonly.value)return;if(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(h.value=!0),["Escape","Tab"].includes(t.key)&&(h.value=!1),e.clearable&&t.key==="Backspace"){t.preventDefault(),u.value=[],oe();return}t.key==="Home"?M.value?.focus("first"):t.key==="End"&&M.value?.focus("last");const m=1e3;if(!ke(t))return;const b=performance.now();b-q>m&&(C="",U=0),C+=t.key.toLowerCase(),q=b;const H=O.value;function z(){let v=x();return v||C.at(-1)===C.at(-2)&&(C=C.slice(0,-1),U++,v=x(),v)||(U=0,v=x(),v)?v:(C=t.key.toLowerCase(),x())}function x(){for(let v=U;v<H.length;v++){const W=H[v];if(W.title.toLowerCase().startsWith(C))return[W,v]}}const K=z();if(!K)return;const[i,g]=K;U=g,M.value?.focus(g),e.multiple||(u.value=[i])}function Z(t){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const b=u.value.findIndex(z=>(e.valueComparator||ve)(z.value,t.value)),H=m??!~b;if(~b){const z=H?[...u.value,t]:[...u.value];z.splice(b,1),u.value=z}else H&&(u.value=[...u.value,t])}else{const b=m!==!1;u.value=b?[t]:[],xe(()=>{h.value=!1})}}function a(t){M.value?.$el.contains(t.relatedTarget)||(h.value=!1)}function d(){e.eager&&p.value?.calculateVisibleItems()}function V(){y.value&&n.value?.focus()}function T(t){y.value=!0}function j(t){if(t==null)u.value=[];else if(Se(n.value,":autofill")||Se(n.value,":-webkit-autofill")){const m=o.value.find(b=>b.title===t);m&&Z(m)}else n.value&&(n.value.value="")}return J(h,()=>{if(!e.hideSelected&&h.value&&u.value.length){const t=O.value.findIndex(m=>u.value.some(b=>(e.valueComparator||ve)(b.value,m.value)));Ae&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&p.value?.scrollToIndex(t)})}}),J(o,(t,m)=>{h.value||y.value&&e.hideNoData&&!m.length&&t.length&&(h.value=!0)}),he(()=>{const t=!!(e.chips||l.chip),m=!!(!e.hideNoData||O.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),b=u.value.length>0,H=ge.filterProps(e),z=b||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return k(ge,F({ref:n},H,{modelValue:u.value.map(x=>x.props.title).join(", "),name:void 0,"onUpdate:modelValue":j,focused:y.value,"onUpdate:focused":x=>y.value=x,validationValue:u.externalValue,counterValue:R.value,dirty:b,class:["v-select",{"v-select--active-menu":h.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:z,"onClick:clear":oe,"onMousedown:control":L,onBlur:a,onKeydown:ue,"aria-expanded":$.value,"aria-controls":ne.value}),{...l,default:x=>{let{id:K}=x;return I(se,null,[I("select",{hidden:!0,multiple:e.multiple,name:E.fieldName.value},[o.value.map(i=>I("option",{key:i.value,value:i.value,selected:Q.value.includes(i.value)},null))]),k(dt,F({id:X.value,ref:f,modelValue:h.value,"onUpdate:modelValue":i=>h.value=i,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:d,onAfterLeave:V},ae.value),{default:()=>[m&&k(rt,F({ref:M,selected:Q.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:de,onFocusin:T,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-labelledby":`${K.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},re,e.listProps),{default:()=>[l["prepend-item"]?.(),!O.value.length&&!e.hideNoData&&(l["no-data"]?.()??k(we,{key:"no-data",title:r(e.noDataText)},null)),k(kt,{ref:p,renderless:!0,items:O.value,itemKey:"value"},{default:i=>{let{item:g,index:v,itemRef:W}=i;const Y=Xe(g.props),G=F(g.props,{ref:W,key:g.value,onClick:()=>Z(g,null),"aria-posinset":v+1,"aria-setsize":O.value.length});return g.type==="divider"?l.divider?.({props:g.raw,index:v})??k(Ze,F(g.props,{key:`divider-${v}`}),null):g.type==="subheader"?l.subheader?.({props:g.raw,index:v})??k(it,F(g.props,{key:`subheader-${v}`}),null):l.item?.({item:g,index:v,props:G})??k(we,F(G,{role:"option"}),{prepend:A=>{let{isSelected:De}=A;return I(se,null,[e.multiple&&!e.hideSelected?k(ft,{key:g.value,modelValue:De,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Re=>Re.preventDefault()},null):void 0,Y.prependAvatar&&k(Ge,{image:Y.prependAvatar},null),Y.prependIcon&&k(be,{icon:Y.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),u.value.map((i,g)=>{function v(A){A.stopPropagation(),A.preventDefault(),Z(i,!1)}const W=F(Ie.filterProps(i.props),{"onClick:close":v,onKeydown(A){A.key!=="Enter"&&A.key!==" "||(A.preventDefault(),A.stopPropagation(),v(A))},onMousedown(A){A.preventDefault(),A.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),Y=t?!!l.chip:!!l.selection,G=Y?et(t?l.chip({item:i,index:g,props:W}):l.selection({item:i,index:g})):void 0;if(!(Y&&!G))return I("div",{key:i.value,class:"v-select__selection"},[t?l.chip?k(tt,{key:"chip-defaults",defaults:{VChip:{closable:w.value,size:"small",text:i.title}}},{default:()=>[G]}):k(Ie,F({key:"chip",closable:w.value,size:"small",text:i.title,disabled:i.props.disabled},W),null):G??I("span",{class:"v-select__selection-text"},[i.title,e.multiple&&g<u.value.length-1&&I("span",{class:"v-select__selection-comma"},[lt(",")])])])})])},"append-inner":function(){for(var x=arguments.length,K=new Array(x),i=0;i<x;i++)K[i]=arguments[i];return I(se,null,[l["append-inner"]?.(...K),e.menuIcon?k(be,{class:"v-select__menu-icon",color:n.value?.fieldIconColor,icon:e.menuIcon,"aria-hidden":!0},null):void 0,e.appendInnerIcon&&k(P,{key:"append-icon",name:"appendInner",color:K[0].iconColor.value},null)])}})}),nt({isFocused:y,menu:h,select:Z},n)}});export{Ot as V};
