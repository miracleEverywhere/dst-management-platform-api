import{_ as w}from"./index-D36PTCpY.js";import{p as D}from"./platform-CQXcuSAW.js";import{h as a,e as E,b as B,f as N,y as C,o as A,w as d,a as s,k as h,t as b,l as e,n as O,E as U,s as L,p as M,q as T,cr as u}from"./index-1couzVnS.js";import{c as q,a as K,V as $}from"./VCard-C7H7Sju9.js";import{V as z}from"./VSelect-B3HjS30z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-CB_SZHga.js";import"./VInput-C0LjaVBJ.js";import"./index-BkP1PHzc.js";import"./VTextField-Dcr4kAma.js";import"./VList-wf-oZwyZ.js";import"./ssrBoot-ygy6s5Rr.js";import"./VMenu-Cf58fIpA.js";import"./dialog-transition-BfkTkg4N.js";import"./VCheckboxBtn-oP3uuWIw.js";import"./VSelectionControl-cqDQx6RQ.js";import"./VChip-PyGbOgmV.js";const I={class:"card-header"},ne={__name:"metrics",setup(P){const i=a(1),{mobile:v}=E(),{t:o}=B(),k=[{label:"1 "+o("platform.metrics.hour"),value:1},{label:"3 "+o("platform.metrics.hour"),value:3},{label:"6 "+o("platform.metrics.hour"),value:6},{label:"12 "+o("platform.metrics.hour"),value:12},{label:"24 "+o("platform.metrics.hour"),value:24}],S=a(),F=a(),_=a(),R=a(),V=a(),n=a({title:{text:"CPU"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#409EFF",lineStyle:{color:"#409EFF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#409EFF"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),f=a({title:{text:"Memory"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#67C23A",lineStyle:{color:"#67C23A"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#67C23A"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),p=a({title:{text:"Disk"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#8C57FF",lineStyle:{color:"#8C57FF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#8C57FF"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),m=a({title:{text:"Net ↑"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} KB/s"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#E6A23C",lineStyle:{color:"#E6A23C"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#E6A23C"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),c=a({title:{text:"Net ↓"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} KB/s"}},series:[{data:[],type:"line",smooth:!0,itemStyle:{normal:{color:"#F56C6C",lineStyle:{color:"#F56C6C"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#F56C6C"},{offset:1,color:"#ffffff00"}],global:!1}}}]}),y=a(!1),x=g=>{const l={timeRange:g};y.value=!0,D.metrics.get(l).then(r=>{n.value.xAxis.data=[],f.value.xAxis.data=[],p.value.xAxis.data=[],m.value.xAxis.data=[],c.value.xAxis.data=[],n.value.series[0].data=[],f.value.series[0].data=[],p.value.series[0].data=[],m.value.series[0].data=[],c.value.series[0].data=[];for(let t of r.data)n.value.xAxis.data.push(u(t.timestamp)),f.value.xAxis.data.push(u(t.timestamp)),p.value.xAxis.data.push(u(t.timestamp)),m.value.xAxis.data.push(u(t.timestamp)),c.value.xAxis.data.push(u(t.timestamp)),n.value.series[0].data.push(t.cpu.toFixed(2)),f.value.series[0].data.push(t.memory.toFixed(2)),p.value.series[0].data.push(t.disk.toFixed(2)),m.value.series[0].data.push(t.netUplink.toFixed(2)),c.value.series[0].data.push(t.netDownlink.toFixed(2))}).finally(()=>{y.value=!1})};return N(()=>{x(i.value)}),(g,l)=>{const r=w;return A(),C($,{class:"mb-4"},{default:d(()=>[s(q,{class:"mt-2"},{default:d(()=>[h("div",I,[h("div",null,b(e(o)("platform.metrics.title")),1),h("div",{style:O(e(v)?{width:"50%"}:{width:"20%"}),class:"fcc"},[s(z,{modelValue:e(i),"onUpdate:modelValue":[l[0]||(l[0]=t=>L(i)?i.value=t:null),l[1]||(l[1]=t=>x(e(i)))],items:k,loading:e(y),density:"compact","item-title":"label",label:e(o)("platform.metrics.timeRange")},null,8,["modelValue","loading","label"]),e(v)?U("",!0):(A(),C(M,{key:0,loading:e(y),color:"default",class:"ml-2",onClick:l[2]||(l[2]=t=>x(e(i)))},{default:d(()=>[T(b(e(o)("platform.metrics.refresh")),1)]),_:1},8,["loading"]))],4)])]),_:1}),s(K,{class:"mt-4"},{default:d(()=>[s(r,{ref_key:"cpuChartRef",ref:S,option:e(n),height:"30vh",class:"mb-4"},null,8,["option"]),s(r,{ref_key:"memoryChartRef",ref:F,option:e(f),height:"30vh",class:"mb-4"},null,8,["option"]),s(r,{ref_key:"diskChartRef",ref:_,option:e(p),height:"30vh",class:"mb-4"},null,8,["option"]),s(r,{ref_key:"netUplinkChartRef",ref:R,option:e(m),height:"30vh",class:"mb-4"},null,8,["option"]),s(r,{ref_key:"netDownlinkChartRef",ref:V,option:e(c),height:"30vh",class:"mb-4"},null,8,["option"])]),_:1})]),_:1})}}};export{ne as default};
