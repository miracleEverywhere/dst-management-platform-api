import{_ as Z,u as J,a as W,g as O,D as Q,G as X,d as Y,H as h,c as N,r as b,w as ee,I as A,J as d,K as te,f as C,i as le,l as o,m as a,n as t,p as l,t as n,j as s,q as B,v as se,s as ae,a4 as oe,A as ie,a0 as K,B as ne}from"./index-DJcsU7tJ.js";import{E as re}from"./index-DzC0UQhI.js";const de={class:"page-div"},ue={class:"card-header"},pe={style:{height:"auto"}},me={class:"tip custom-block"},ve={class:"bolder"},ce={class:"card-footer"},fe={class:"el-upload__text"},ge={class:"el-upload__tip"},be={__name:"import",setup(_e){const{t:i}=J(),{isMobile:M}=W(),r=O(),m=Q();X();const D=Y(),V=h("refresh"),v=N(()=>r.isDark),P=N(()=>r.language),_=b(!1),p=b(!1),c=b(!1),x=b(),q=()=>{x.value&&x.value.clearFiles(),c.value=!0},E=u=>/\.zip$/i.test(u.name)?!0:(ie(P.value==="zh"?"请上传zip文件":"Please upload a zip file"),!1),I=u=>{p.value=!0;const e=new FormData;e.append("file",u.file),e.append("clusterName",r.selectedDstCluster),K.import.upload.post(e).then(f=>{L(),ne(f.message)}).finally(()=>{c.value=!1,p.value=!1})},L=()=>{K.clusters.get().then(u=>{r.dstClusters=u.data,r.selectedDstCluster===null&&r.dstClusters!==null&&(r.selectedDstCluster=r.dstClusters[0].clusterName)})},z=new URL("/assets/zip-image-DCIK-Up-.png",import.meta.url).href,R=new URL("/assets/zip-image-master-BqrqyRWw.png",import.meta.url).href,T=new URL("/assets/help-lSGot43l.gif",import.meta.url).href,F=()=>{setTimeout(()=>{m.meta.isKeepAlive&&D.removeKeepAliveName(m.name),V(!1),A(()=>{m.meta.isKeepAlive&&D.addKeepAliveName(m.name),V(!0)})},0)};return ee(()=>r.selectedDstCluster,u=>{u&&A(()=>{F()})},{immediate:!1}),(u,e)=>{const f=d("el-button"),k=d("el-alert"),w=d("el-col"),y=d("el-image"),S=d("el-row"),G=d("el-card"),$=d("el-icon"),j=d("el-upload"),U=d("el-dialog"),H=te("loading");return C(),le("div",de,[o(S,{gutter:10},{default:a(()=>[o(w,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:a(()=>[o(G,{shadow:"never"},{header:a(()=>[t("div",ue,[l(n(s(i)("setting.import.title"))+" ",1),o(f,{type:"success",onClick:e[0]||(e[0]=g=>_.value=!0)},{default:a(()=>[l(n(s(i)("setting.import.buttonHelp")),1)]),_:1})])]),footer:a(()=>[t("div",ce,[o(f,{type:"primary",onClick:q},{default:a(()=>[l(n(s(i)("setting.import.button")),1)]),_:1})])]),default:a(()=>[s(M)?se("",!0):(C(),B(re,{key:0,title:s(i)("setting.import.tipTitle"),"dark-mode":v.value},{default:a(()=>[o(k,{closable:!1,type:"warning",effect:v.value?"light":"dark","show-icon":"",style:{"margin-bottom":"10px"}},{default:a(()=>[l(n(s(i)("setting.import.text1")),1)]),_:1},8,["effect"]),o(k,{closable:!1,type:"success",effect:v.value?"light":"dark","show-icon":"",style:{"margin-bottom":"10px"}},{default:a(()=>[l(n(s(i)("setting.import.text1_1")),1)]),_:1},8,["effect"])]),_:1},8,["title","dark-mode"])),t("div",pe,[t("div",null,[o(S,{gutter:20},{default:a(()=>[o(w,{lg:12,md:12,sm:24,span:12,xs:24},{default:a(()=>[t("div",me,[t("div",null,[t("span",ve,n(s(i)("setting.import.text2")),1)]),e[3]||(e[3]=t("div",null,".",-1)),e[4]||(e[4]=t("div",null,"├── adminlist.txt",-1)),e[5]||(e[5]=t("div",null,"├── blocklist.txt",-1)),e[6]||(e[6]=t("div",null,"├── Caves",-1)),e[7]||(e[7]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── backup")],-1)),e[8]||(e[8]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── leveldataoverride.lua")],-1)),e[9]||(e[9]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── modoverrides.lua")],-1)),e[10]||(e[10]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── save")],-1)),e[11]||(e[11]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── server_chat_log.txt")],-1)),e[12]||(e[12]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── server.ini")],-1)),e[13]||(e[13]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   └── server_log.txt")],-1)),e[14]||(e[14]=t("div",null,[t("span",{class:"bolder"},"├── cluster.ini")],-1)),e[15]||(e[15]=t("div",null,[t("span",{class:"bolder"},"├── cluster_token.txt")],-1)),e[16]||(e[16]=t("div",{class:"bolder"},"├── Master",-1)),e[17]||(e[17]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── backup")],-1)),e[18]||(e[18]=t("div",{class:"bolder"},[t("span",{class:"tree-tab"},"│"),l("   ├── leveldataoverride.lua")],-1)),e[19]||(e[19]=t("div",{class:"bolder"},[t("span",{class:"tree-tab"},"│"),l("   ├── modoverrides.lua")],-1)),e[20]||(e[20]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── save")],-1)),e[21]||(e[21]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── server_chat_log.txt")],-1)),e[22]||(e[22]=t("div",{class:"bolder"},[t("span",{class:"tree-tab"},"│"),l("   ├── server.ini")],-1)),e[23]||(e[23]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   └── server_log.txt")],-1)),e[24]||(e[24]=t("div",null,"└── whitelist.txt",-1))])]),_:1}),o(w,{lg:12,md:12,sm:24,span:12,xs:24},{default:a(()=>[t("div",null,[o(y,{"hide-on-click-modal":!0,"initial-index":4,"max-scale":7,"min-scale":.2,"preview-src-list":[s(z)],src:s(z),"zoom-rate":1.2,fit:"cover",style:{"margin-top":"10px","margin-bottom":"10px"}},null,8,["preview-src-list","src"])]),t("div",null,[o(y,{"hide-on-click-modal":!0,"initial-index":4,"max-scale":7,"min-scale":.2,"preview-src-list":[s(R)],src:s(R),"zoom-rate":1.2,fit:"cover",style:{"margin-top":"10px","margin-bottom":"10px"}},null,8,["preview-src-list","src"])])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1}),o(U,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=g=>c.value=g),"close-on-click-modal":!p.value,"close-on-press-escape":!p.value,"show-close":!p.value,title:s(i)("setting.import.dialog.title"),width:"45%"},{default:a(()=>[ae((C(),B(j,{ref_key:"uploadRef",ref:x,"before-upload":E,"http-request":I,limit:1,drag:""},{tip:a(()=>[t("div",ge,n(s(i)("setting.import.dialog.tip")),1)]),default:a(()=>[o($,{class:"el-icon--upload"},{default:a(()=>[o(s(oe))]),_:1}),t("div",fe,[l(n(s(i)("setting.import.dialog.text1"))+" ",1),t("em",null,n(s(i)("setting.import.dialog.text2")),1)])]),_:1})),[[H,p.value]])]),_:1},8,["modelValue","close-on-click-modal","close-on-press-escape","show-close","title"]),o(U,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=g=>_.value=g),title:s(i)("setting.import.dialog2.title"),width:"70%"},{default:a(()=>[o(k,{closable:!1,effect:v.value?"light":"dark",type:"error"},{default:a(()=>[l(n(s(i)("setting.import.dialog2.text1")),1)]),_:1},8,["effect"]),o(y,{src:s(T),class:"fcc",fit:"fill",loading:"lazy",style:{"margin-top":"10px"}},null,8,["src"])]),_:1},8,["modelValue","title"])])}}},we=Z(be,[["__scopeId","data-v-57790164"]]);export{we as default};
