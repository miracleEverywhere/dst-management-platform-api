import{ae as It,af as an,_ as on,u as rn,o as un,r as Re,a as sn,g as dn,b as fn,c as Pt,G as cn,H as pn,d as mn,I as gn,a2 as kt,R as hn,w as Tn,J as bt,K as Ae,f as N,i as le,k as C,l as G,j as a,n as ge,m as X,t as J,z as dt,v as nt,q as pe,ag as qt,F as Ce,y as Be,D as rt,B as xt}from"./index-LjC6pfaj.js";import{s as Kt}from"./index-BDqNgSKQ.js";import{g as Tt,_ as Me,o as A,a as St,c as Lt,b as Et,d as vt}from"./levelDataSetting-B8af_5jH.js";import{M as yn}from"./preview-8iURu0b0.js";var Ft={exports:{}};Ft.exports;(function(ft,S){(function(ye,V,I){var Se=S&&!S.nodeType&&S,_e=ft&&!ft.nodeType&&ft,Le=Se&&_e&&typeof It=="object"&&It,we=_e&&_e.exports===Se&&Se;Le&&(Le.global===Le||Le.window===Le||Le.self===Le)&&(ye=Le),I(Se&&_e?we?_e.exports:Se:ye[V]={})})(It,"luaparse",function(ye){ye.version="0.3.1";var V,I,Se,_e,Le,we=ye.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function yt(n,o){return o=o||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(o|192|n>>6,o|128|n&63):n<65536?String.fromCharCode(o|224|n>>12,o|128|n>>6&63,o|128|n&63):n<1114112?String.fromCharCode(o|240|n>>18,o|128|n>>12&63,o|128|n>>6&63,o|128|n&63):null}function Ie(n,o){for(var y=n.toString(16);y.length<o;)y="0"+y;return y}function ct(n){return function(o){var y=n.exec(o);if(!y)return o;ue(null,ce.invalidCodeUnit,Ie(y[0].charCodeAt(0),4).toUpperCase())}}var _t={"pseudo-latin1":{fixup:ct(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return yt(n)}},"x-user-defined":{fixup:ct(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return yt(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},it=1,Qe=2,et=4,je=8,lt=16,qe=32,pt=64,tt=128,Ee=256;ye.tokenTypes={EOF:it,StringLiteral:Qe,Keyword:et,Identifier:je,NumericLiteral:lt,Punctuator:qe,BooleanLiteral:pt,NilLiteral:tt,VarargLiteral:Ee};var ce=ye.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},ie=ye.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,o){return{type:"IfClause",condition:n,body:o}},elseifClause:function(n,o){return{type:"ElseifClause",condition:n,body:o}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,o){return{type:"WhileStatement",condition:n,body:o}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,o){return{type:"RepeatStatement",condition:n,body:o}},localStatement:function(n,o){return{type:"LocalStatement",variables:n,init:o}},assignmentStatement:function(n,o){return{type:"AssignmentStatement",variables:n,init:o}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,o,y,F){return{type:"FunctionDeclaration",identifier:n,isLocal:y,parameters:o,body:F}},forNumericStatement:function(n,o,y,F,z){return{type:"ForNumericStatement",variable:n,start:o,end:y,step:F,body:z}},forGenericStatement:function(n,o,y){return{type:"ForGenericStatement",variables:n,iterators:o,body:y}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,o,y){return n=n===Qe?"StringLiteral":n===lt?"NumericLiteral":n===pt?"BooleanLiteral":n===tt?"NilLiteral":"VarargLiteral",{type:n,value:o,raw:y}},tableKey:function(n,o){return{type:"TableKey",key:n,value:o}},tableKeyString:function(n,o){return{type:"TableKeyString",key:n,value:o}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,o,y){var F=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:F,operator:n,left:o,right:y}},unaryExpression:function(n,o){return{type:"UnaryExpression",operator:n,argument:o}},memberExpression:function(n,o,y){return{type:"MemberExpression",indexer:o,identifier:y,base:n}},indexExpression:function(n,o){return{type:"IndexExpression",base:n,index:o}},callExpression:function(n,o){return{type:"CallExpression",base:n,arguments:o}},tableCallExpression:function(n,o){return{type:"TableCallExpression",base:n,arguments:o}},stringCallExpression:function(n,o){return{type:"StringCallExpression",base:n,argument:o}},comment:function(n,o){return{type:"Comment",value:n,raw:o}}};function fe(n){if(x){var o=U.pop();o.complete(),o.bless(n)}return I.onCreateNode&&I.onCreateNode(n),n}var at=Array.prototype.slice,mt=function(n,o){for(var y=0,F=n.length;y<F;++y)if(n[y]===o)return y;return-1};Array.prototype.indexOf&&(mt=function(n,o){return n.indexOf(o)});function he(n,o,y){for(var F=0,z=n.length;F<z;++F)if(n[F][o]===y)return F;return-1}function gt(n){var o=at.call(arguments,1);return n=n.replace(/%(\d)/g,function(y,F){return""+o[F-1]||""}),n}var De=function(n){for(var o=at.call(arguments,1),y,F,z=0,Te=o.length;z<Te;++z){y=o[z];for(F in y)Object.prototype.hasOwnProperty.call(y,F)&&(n[F]=y[F])}return n};Object.assign&&(De=Object.assign),ye.SyntaxError=SyntaxError;function ht(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function ue(n){var o=gt.apply(null,at.call(arguments,1)),y,F;throw n===null||typeof n.line>"u"?(F=h-s+1,y=ht(new SyntaxError(gt("[%1:%2] %3",d,F,o))),y.index=h,y.line=d,y.column=F):(F=n.range[0]-n.lineStart,y=ht(new SyntaxError(gt("[%1:%2] %3",n.line,F,o))),y.line=n.line,y.index=n.range[0],y.column=F),y}function Ve(n){var o=V.slice(n.range[0],n.range[1]);return o||n.value}function He(n,o){ue(o,ce.expectedToken,n,Ve(o))}function ut(n){var o=Ve(Je);if(typeof n.type<"u"){var y;switch(n.type){case Qe:y="string";break;case et:y="keyword";break;case je:y="identifier";break;case lt:y="number";break;case qe:y="symbol";break;case pt:y="boolean";break;case tt:return ue(n,ce.unexpected,"symbol","nil",o);case it:return ue(n,ce.unexpectedEOF)}return ue(n,ce.unexpected,y,Ve(n),o)}return ue(n,ce.unexpected,"symbol",n,o)}var h,w,ze,Je,ne,_,d,s;ye.lex=g;function g(){for(e();V.charCodeAt(h)===45&&V.charCodeAt(h+1)===45;)Ge(),e();if(h>=Se)return{type:it,value:"<eof>",line:d,lineStart:s,range:[h,h]};var n=V.charCodeAt(h),o=V.charCodeAt(h+1);if(_=h,Pe(n))return T();switch(n){case 39:case 34:return p();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t();case 46:return Y(o)?t():o===46?V.charCodeAt(h+2)===46?c():f(".."):f(".");case 61:return f(o===61?"==":"=");case 62:return _e.bitwiseOperators&&o===62?f(">>"):f(o===61?">=":">");case 60:return _e.bitwiseOperators&&o===60?f("<<"):f(o===61?"<=":"<");case 126:if(o===61)return f("~=");if(!_e.bitwiseOperators)break;return f("~");case 58:return _e.labels&&o===58?f("::"):f(":");case 91:return o===91||o===61?k():f("[");case 47:return _e.integerDivision&&o===47?f("//"):f("/");case 38:case 124:if(!_e.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return f(V.charAt(h))}return ut(V.charAt(h))}function m(){var n=V.charCodeAt(h),o=V.charCodeAt(h+1);return L(n)?(n===10&&o===13&&++h,n===13&&o===10&&++h,++d,s=++h,!0):!1}function e(){for(;h<Se;){var n=V.charCodeAt(h);if(R(n))++h;else if(!m())break}}function T(){for(var n,o;$e(V.charCodeAt(++h)););return n=Le.fixup(V.slice(_,h)),Ze(n)?o=et:n==="true"||n==="false"?(o=pt,n=n==="true"):n==="nil"?(o=tt,n=null):o=je,{type:o,value:n,line:d,lineStart:s,range:[_,h]}}function f(n){return h+=n.length,{type:qe,value:n,line:d,lineStart:s,range:[_,h]}}function c(){return h+=3,{type:Ee,value:"...",line:d,lineStart:s,range:[_,h]}}function p(){for(var n=V.charCodeAt(h++),o=d,y=s,F=h,z=Le.discardStrings?null:"",Te;Te=V.charCodeAt(h++),n!==Te;)if((h>Se||L(Te))&&(z+=V.slice(F,h-1),ue(null,ce.unfinishedString,V.slice(_,h-1))),Te===92){if(!Le.discardStrings){var ve=V.slice(F,h-1);z+=Le.fixup(ve)}var Ue=se();Le.discardStrings||(z+=Ue),F=h}return Le.discardStrings||(z+=Le.encodeByte(null),z+=Le.fixup(V.slice(F,h-1))),{type:Qe,value:z,line:o,lineStart:y,lastLine:d,lastLineStart:s,range:[_,h]}}function k(){var n=d,o=s,y=We(!1);return y===!1&&ue(w,ce.expected,"[",Ve(w)),{type:Qe,value:Le.discardStrings?null:Le.fixup(y),line:n,lineStart:o,lastLine:d,lastLineStart:s,range:[_,h]}}function t(){var n=V.charAt(h),o=V.charAt(h+1),y=n==="0"&&"xX".indexOf(o||null)>=0?u():B(),F=l(),z=i();return z&&(F||y.hasFractionPart)&&ue(null,ce.malformedNumber,V.slice(_,h)),{type:lt,value:y.value,line:d,lineStart:s,range:[_,h]}}function l(){if(_e.imaginaryNumbers)return"iI".indexOf(V.charAt(h)||null)>=0?(++h,!0):!1}function i(){if(_e.integerSuffixes){if("uU".indexOf(V.charAt(h)||null)>=0)if(++h,"lL".indexOf(V.charAt(h)||null)>=0){if(++h,"lL".indexOf(V.charAt(h)||null)>=0)return++h,"ULL";ue(null,ce.malformedNumber,V.slice(_,h))}else ue(null,ce.malformedNumber,V.slice(_,h));else if("lL".indexOf(V.charAt(h)||null)>=0){if(++h,"lL".indexOf(V.charAt(h)||null)>=0)return++h,"LL";ue(null,ce.malformedNumber,V.slice(_,h))}}}function u(){var n=0,o=1,y=1,F,z,Te,ve;for(ve=h+=2,me(V.charCodeAt(h))||ue(null,ce.malformedNumber,V.slice(_,h));me(V.charCodeAt(h));)++h;F=parseInt(V.slice(ve,h),16);var Ue=!1;if(V.charAt(h)==="."){for(Ue=!0,z=++h;me(V.charCodeAt(h));)++h;n=V.slice(z,h),n=z===h?0:parseInt(n,16)/Math.pow(16,h-z)}var Ct=!1;if("pP".indexOf(V.charAt(h)||null)>=0){for(Ct=!0,++h,"+-".indexOf(V.charAt(h)||null)>=0&&(y=V.charAt(h++)==="+"?1:-1),Te=h,Y(V.charCodeAt(h))||ue(null,ce.malformedNumber,V.slice(_,h));Y(V.charCodeAt(h));)++h;o=V.slice(Te,h),o=Math.pow(2,o*y)}return{value:(F+n)*o,hasFractionPart:Ue||Ct}}function B(){for(;Y(V.charCodeAt(h));)++h;var n=!1;if(V.charAt(h)===".")for(n=!0,++h;Y(V.charCodeAt(h));)++h;var o=!1;if("eE".indexOf(V.charAt(h)||null)>=0)for(o=!0,++h,"+-".indexOf(V.charAt(h)||null)>=0&&++h,Y(V.charCodeAt(h))||ue(null,ce.malformedNumber,V.slice(_,h));Y(V.charCodeAt(h));)++h;return{value:parseFloat(V.slice(_,h)),hasFractionPart:n||o}}function re(){var n=h++;for(V.charAt(h++)!=="{"&&ue(null,ce.braceExpected,"{","\\"+V.slice(n,h)),me(V.charCodeAt(h))||ue(null,ce.hexadecimalDigitExpected,"\\"+V.slice(n,h));V.charCodeAt(h)===48;)++h;for(var o=h;me(V.charCodeAt(h));)++h,h-o>6&&ue(null,ce.tooLargeCodepoint,"\\"+V.slice(n,h));var y=V.charAt(h++);y!=="}"&&(y==='"'||y==="'"?ue(null,ce.braceExpected,"}","\\"+V.slice(n,h--)):ue(null,ce.hexadecimalDigitExpected,"\\"+V.slice(n,h)));var F=parseInt(V.slice(o,h-1)||"0",16),z="\\"+V.slice(n,h);return F>1114111&&ue(null,ce.tooLargeCodepoint,z),Le.encodeUTF8(F,z)}function se(){var n=h;switch(V.charAt(h)){case"a":return++h,"\x07";case"n":return++h,`
`;case"r":return++h,"\r";case"t":return++h,"	";case"v":return++h,"\v";case"b":return++h,"\b";case"f":return++h,"\f";case"\r":case`
`:return m(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Y(V.charCodeAt(h))&&h-n<3;)++h;var o=V.slice(n,h),y=parseInt(o,10);return y>255&&ue(null,ce.decimalEscapeTooLarge,"\\"+y),Le.encodeByte(y,"\\"+o);case"z":if(_e.skipWhitespaceEscape)return++h,e(),"";break;case"x":if(_e.hexEscapes){if(me(V.charCodeAt(h+1))&&me(V.charCodeAt(h+2)))return h+=3,Le.encodeByte(parseInt(V.slice(n+1,h),16),"\\"+V.slice(n,h));ue(null,ce.hexadecimalDigitExpected,"\\"+V.slice(n,h+2))}break;case"u":if(_e.unicodeEscapes)return re();break;case"\\":case'"':case"'":return V.charAt(h++)}return _e.strictEscapes&&ue(null,ce.invalidEscape,"\\"+V.slice(n,h+1)),V.charAt(h++)}function Ge(){_=h,h+=2;var n=V.charAt(h),o="",y=!1,F=h,z=s,Te=d;if(n==="["&&(o=We(!0),o===!1?o=n:y=!0),!y){for(;h<Se&&!L(V.charCodeAt(h));)++h;I.comments&&(o=V.slice(F,h))}if(I.comments){var ve=ie.comment(o,V.slice(_,h));I.locations&&(ve.loc={start:{line:Te,column:_-z},end:{line:d,column:h-s}}),I.ranges&&(ve.range=[_,h]),I.onCreateNode&&I.onCreateNode(ve),ne.push(ve)}}function We(n){var o=0,y="",F=!1,z,Te,ve=d;for(++h;V.charAt(h+o)==="=";)++o;if(V.charAt(h+o)!=="[")return!1;for(h+=o+1,L(V.charCodeAt(h))&&m(),Te=h;h<Se;){for(;L(V.charCodeAt(h));)m();if(z=V.charAt(h++),z==="]"){F=!0;for(var Ue=0;Ue<o;++Ue)V.charAt(h+Ue)!=="="&&(F=!1);V.charAt(h+o)!=="]"&&(F=!1)}if(F)return y+=V.slice(Te,h-1),h+=o+1,y}ue(null,n?ce.unfinishedLongComment:ce.unfinishedLongString,ve,"<eof>")}function ee(){ze=w,w=Je,Je=g()}function O(n){return n===w.value?(ee(),!0):!1}function ae(n){n===w.value?ee():ue(w,ce.expected,n,Ve(w))}function R(n){return n===9||n===32||n===11||n===12}function L(n){return n===10||n===13}function Y(n){return n>=48&&n<=57}function me(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function Pe(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||_e.extendedIdentifiers&&n>=128)}function $e(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||_e.extendedIdentifiers&&n>=128)}function Ze(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:_e.labels&&!_e.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function Ne(n){return qe===n.type?"#-~".indexOf(n.value)>=0:et===n.type?n.value==="not":!1}function Fe(n){if(it===n.type)return!0;if(et!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var Xe,st,ot;function Ke(){var n=Xe[st++].slice();Xe.push(n),I.onCreateScope&&I.onCreateScope()}function v(){Xe.pop(),--st,I.onDestroyScope&&I.onDestroyScope()}function M(n){I.onLocalDeclaration&&I.onLocalDeclaration(n),mt(Xe[st],n)===-1&&Xe[st].push(n)}function E(n){M(n.name),b(n,!0)}function b(n,o){!o&&he(ot,"name",n.name)===-1&&ot.push(n),n.isLocal=o}function P(n){return mt(Xe[st],n)!==-1}var U=[],x;function W(){return new te(w)}function te(n){I.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),I.ranges&&(this.range=[n.range[0],0])}te.prototype.complete=function(){I.locations&&(this.loc.end.line=ze.lastLine||ze.line,this.loc.end.column=ze.range[1]-(ze.lastLineStart||ze.lineStart)),I.ranges&&(this.range[1]=ze.range[1])},te.prototype.bless=function(n){if(this.loc){var o=this.loc;n.loc={start:{line:o.start.line,column:o.start.column},end:{line:o.end.line,column:o.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function de(){x&&U.push(W())}function Z(n){x&&U.push(n)}function ke(){this.scopes=[],this.pendingGotos=[]}ke.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},ke.prototype.pushScope=function(n){var o={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(o)},ke.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var o=this.pendingGotos[n];o.maxDepth>=this.scopes.length&&--o.maxDepth<=0&&ue(o.token,ce.labelNotVisible,o.target)}this.scopes.pop()},ke.prototype.addGoto=function(n,o){for(var y=[],F=0;F<this.scopes.length;++F){var z=this.scopes[F];if(y.push(z.locals.length),Object.prototype.hasOwnProperty.call(z.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:o,localCounts:y})},ke.prototype.addLabel=function(n,o){var y=this.currentScope();if(Object.prototype.hasOwnProperty.call(y.labels,n))ue(o,ce.labelAlreadyDefined,n,y.labels[n].line);else{for(var F=[],z=0;z<this.pendingGotos.length;++z){var Te=this.pendingGotos[z];if(Te.maxDepth>=this.scopes.length&&Te.target===n){Te.localCounts[this.scopes.length-1]<y.locals.length&&y.deferredGotos.push(Te);continue}F.push(Te)}this.pendingGotos=F}y.labels[n]={localCount:y.locals.length,line:o.line}},ke.prototype.addLocal=function(n,o){this.currentScope().locals.push({name:n,token:o})},ke.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},ke.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),o=n.deferredGotos,y=0;y<o.length;++y){var F=o[y];ue(F.token,ce.gotoJumpInLocalScope,F.target,n.locals[F.localCounts[this.scopes.length-1]].name)}};function Oe(){this.level=0,this.loopLevels=[]}Oe.prototype.isInLoop=function(){return!!this.loopLevels.length},Oe.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},Oe.prototype.popScope=function(){var n=this.loopLevels,o=n.length;o&&n[o-1]===this.level&&n.pop(),--this.level},Oe.prototype.addGoto=Oe.prototype.addLabel=function(){throw new Error("This should never happen")},Oe.prototype.addLocal=Oe.prototype.raiseDeferredErrors=function(){};function be(){return _e.labels?new ke:new Oe}function D(){ee(),de(),I.scope&&Ke();var n=be();n.allowVararg=!0,n.pushScope();var o=r(n);return n.popScope(),I.scope&&v(),it!==w.type&&ut(w),x&&!o.length&&(ze=w),fe(ie.chunk(o))}function r(n){for(var o=[],y;!Fe(w);){if(w.value==="return"||!_e.relaxedBreak&&w.value==="break"){o.push(Q(n));break}y=Q(n),O(";"),y&&o.push(y)}return o}function Q(n){if(de(),qe===w.type&&O("::"))return q(n);if(_e.emptyStatement&&O(";")){x&&U.pop();return}if(n.raiseDeferredErrors(),et===w.type)switch(w.value){case"local":return ee(),Xt(n);case"if":return ee(),Yt(n);case"return":return ee(),Jt(n);case"function":ee();var o=en();return Bt(o);case"while":return ee(),H(n);case"for":return ee(),Zt(n);case"repeat":return ee(),oe(n);case"break":return ee(),n.isInLoop()||ue(w,ce.noLoopToBreak,w.value),K();case"do":return ee(),j(n);case"goto":return ee(),$(n)}return _e.contextualGoto&&w.type===je&&w.value==="goto"&&Je.type===je&&Je.value!=="goto"?(ee(),$(n)):(x&&U.pop(),Qt(n))}function q(n){var o=w,y=Ye();return I.scope&&(M("::"+o.value+"::"),b(y,!0)),ae("::"),n.addLabel(o.value,o),fe(ie.labelStatement(y))}function K(){return fe(ie.breakStatement())}function $(n){var o=w.value,y=ze,F=Ye();return n.addGoto(o,y),fe(ie.gotoStatement(F))}function j(n){I.scope&&Ke(),n.pushScope();var o=r(n);return n.popScope(),I.scope&&v(),ae("end"),fe(ie.doStatement(o))}function H(n){var o=xe(n);ae("do"),I.scope&&Ke(),n.pushScope(!0);var y=r(n);return n.popScope(),I.scope&&v(),ae("end"),fe(ie.whileStatement(o,y))}function oe(n){I.scope&&Ke(),n.pushScope(!0);var o=r(n);ae("until"),n.raiseDeferredErrors();var y=xe(n);return n.popScope(),I.scope&&v(),fe(ie.repeatStatement(y,o))}function Jt(n){var o=[];if(w.value!=="end"){var y=Vt(n);for(y!=null&&o.push(y);O(",");)y=xe(n),o.push(y);O(";")}return fe(ie.returnStatement(o))}function Yt(n){var o=[],y,F,z;for(x&&(z=U[U.length-1],U.push(z)),y=xe(n),ae("then"),I.scope&&Ke(),n.pushScope(),F=r(n),n.popScope(),I.scope&&v(),o.push(fe(ie.ifClause(y,F))),x&&(z=W());O("elseif");)Z(z),y=xe(n),ae("then"),I.scope&&Ke(),n.pushScope(),F=r(n),n.popScope(),I.scope&&v(),o.push(fe(ie.elseifClause(y,F))),x&&(z=W());return O("else")&&(x&&(z=new te(ze),U.push(z)),I.scope&&Ke(),n.pushScope(),F=r(n),n.popScope(),I.scope&&v(),o.push(fe(ie.elseClause(F)))),ae("end"),fe(ie.ifStatement(o))}function Zt(n){var o=Ye(),y;if(I.scope&&(Ke(),E(o)),O("=")){var F=xe(n);ae(",");var z=xe(n),Te=O(",")?xe(n):null;return ae("do"),n.pushScope(!0),y=r(n),n.popScope(),ae("end"),I.scope&&v(),fe(ie.forNumericStatement(o,F,z,Te,y))}else{for(var ve=[o];O(",");)o=Ye(),I.scope&&E(o),ve.push(o);ae("in");var Ue=[];do{var Ct=xe(n);Ue.push(Ct)}while(O(","));return ae("do"),n.pushScope(!0),y=r(n),n.popScope(),ae("end"),I.scope&&v(),fe(ie.forGenericStatement(ve,Ue,y))}}function Xt(n){var o,y=ze;if(je===w.type){var F=[],z=[];do o=Ye(),F.push(o),n.addLocal(o.name,y);while(O(","));if(O("="))do{var Te=xe(n);z.push(Te)}while(O(","));if(I.scope)for(var ve=0,Ue=F.length;ve<Ue;++ve)E(F[ve]);return fe(ie.localStatement(F,z))}if(O("function"))return o=Ye(),n.addLocal(o.name,y),I.scope&&(E(o),Ke()),Bt(o,!0);He("<name>",w)}function Qt(n){var o,y,F,z,Te,ve=[];x&&(y=W());do{if(x&&(o=W()),je===w.type)Te=w.value,z=Ye(),I.scope&&b(z,P(Te)),F=!0;else if(w.value==="(")ee(),z=xe(n),ae(")"),F=!1;else return ut(w);e:for(;;){switch(Qe===w.type?'"':w.value){case".":case"[":F=!0;break;case":":case"(":case"{":case'"':F=null;break;default:break e}z=zt(z,o,n)}if(ve.push(z),w.value!==",")break;if(!F)return ut(w);ee()}while(!0);if(ve.length===1&&F===null)return Z(o),fe(ie.callStatement(ve[0]));if(!F)return ut(w);ae("=");var Ue=[];do Ue.push(xe(n));while(O(","));return Z(y),fe(ie.assignmentStatement(ve,Ue))}function Ye(){de();var n=w.value;return je!==w.type&&He("<name>",w),ee(),fe(ie.identifier(n))}function Bt(n,o){var y=be();y.pushScope();var F=[];if(ae("("),!O(")"))for(;;){if(je===w.type){var z=Ye();if(I.scope&&E(z),F.push(z),O(","))continue}else Ee===w.type?(y.allowVararg=!0,F.push(Rt(y))):He("<name> or '...'",w);ae(")");break}var Te=r(y);return y.popScope(),ae("end"),I.scope&&v(),o=o||!1,fe(ie.functionStatement(n,F,o,Te))}function en(){var n,o,y;for(x&&(y=W()),n=Ye(),I.scope&&(b(n,P(n.name)),Ke());O(".");)Z(y),o=Ye(),n=fe(ie.memberExpression(n,".",o));return O(":")&&(Z(y),o=Ye(),n=fe(ie.memberExpression(n,":",o)),I.scope&&M("self")),n}function Dt(n){for(var o=[],y,F;;){if(de(),qe===w.type&&O("["))y=xe(n),ae("]"),ae("="),F=xe(n),o.push(fe(ie.tableKey(y,F)));else if(je===w.type)Je.value==="="?(y=Ye(),ee(),F=xe(n),o.push(fe(ie.tableKeyString(y,F)))):(F=xe(n),o.push(fe(ie.tableValue(F))));else{if((F=Vt(n))==null){U.pop();break}o.push(fe(ie.tableValue(F)))}if(",;".indexOf(w.value)>=0){ee();continue}break}return ae("}"),fe(ie.tableConstructorExpression(o))}function Vt(n){var o=Mt(0,n);return o}function xe(n){var o=Vt(n);if(o==null)He("<expression>",w);else return o}function tn(n){var o=n.charCodeAt(0),y=n.length;if(y===1)switch(o){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(y===2)switch(o){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(o===97&&n==="and")return 2;return 0}function Mt(n,o){var y=w.value,F,z;if(x&&(z=W()),Ne(w)){de(),ee();var Te=Mt(10,o);Te==null&&He("<expression>",w),F=fe(ie.unaryExpression(y,Te))}if(F==null&&(F=Rt(o),F==null&&(F=nn(o))),F==null)return null;for(var ve;y=w.value,ve=qe===w.type||et===w.type?tn(y):0,!(ve===0||ve<=n);){(y==="^"||y==="..")&&--ve,ee();var Ue=Mt(ve,o);Ue==null&&He("<expression>",w),x&&U.push(z),F=fe(ie.binaryExpression(y,F,Ue))}return F}function zt(n,o,y){var F,z;if(qe===w.type)switch(w.value){case"[":return Z(o),ee(),F=xe(y),ae("]"),fe(ie.indexExpression(n,F));case".":return Z(o),ee(),z=Ye(),fe(ie.memberExpression(n,".",z));case":":return Z(o),ee(),z=Ye(),n=fe(ie.memberExpression(n,":",z)),Z(o),Gt(n,y);case"(":case"{":return Z(o),Gt(n,y)}else if(Qe===w.type)return Z(o),Gt(n,y);return null}function nn(n){var o,y,F;if(x&&(F=W()),je===w.type)y=w.value,o=Ye(),I.scope&&b(o,P(y));else if(O("("))o=xe(n),ae(")");else return null;for(;;){var z=zt(o,F,n);if(z===null)break;o=z}return o}function Gt(n,o){if(qe===w.type)switch(w.value){case"(":_e.emptyStatement||w.line!==ze.line&&ue(null,ce.ambiguousSyntax,w.value),ee();var y=[],F=Vt(o);for(F!=null&&y.push(F);O(",");)F=xe(o),y.push(F);return ae(")"),fe(ie.callExpression(n,y));case"{":de(),ee();var z=Dt(o);return fe(ie.tableCallExpression(n,z))}else if(Qe===w.type)return fe(ie.stringCallExpression(n,Rt(o)));He("function arguments",w)}function Rt(n){var o=Qe|lt|pt|tt|Ee,y=w.value,F=w.type,z;if(x&&(z=W()),F===Ee&&!n.allowVararg&&ue(w,ce.cannotUseVararg,w.value),F&o){Z(z);var Te=V.slice(w.range[0],w.range[1]);return ee(),fe(ie.literal(F,y,Te))}else{if(et===F&&y==="function")return Z(z),ee(),I.scope&&Ke(),Bt(null);if(O("{"))return Z(z),Dt(n)}}ye.parse=ln;var Wt={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function ln(n,o){if(typeof o>"u"&&typeof n=="object"&&(o=n,n=void 0),o||(o={}),V=n||"",I=De({},we,o),h=0,d=1,s=0,Se=V.length,Xe=[[]],st=0,ot=[],U=[],!Object.prototype.hasOwnProperty.call(Wt,I.luaVersion))throw new Error(gt("Lua version '%1' not supported",I.luaVersion));if(_e=De({},Wt[I.luaVersion]),I.extendedIdentifiers!==void 0&&(_e.extendedIdentifiers=!!I.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(_t,I.encodingMode))throw new Error(gt("Encoding mode '%1' not supported",I.encodingMode));return Le=_t[I.encodingMode],I.comments&&(ne=[]),I.wait?ye:Ot()}ye.write=$t;function $t(n){return V+=String(n),Se=V.length,ye}ye.end=Ot;function Ot(n){typeof n<"u"&&$t(n),V&&V.substr(0,2)==="#!"&&(V=V.replace(/^.*/,function(y){return y.replace(/./g," ")})),Se=V.length,x=I.locations||I.ranges,Je=g();var o=D();if(I.comments&&(o.comments=ne),I.scope&&(o.globals=ot),U.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return o}})})(Ft,Ft.exports);var _n=Ft.exports;const wt=an(_n);var At={},Ut={exports:{}};Ut.exports;(function(ft){function S(ne){for(var _=0,d=ne.length;d--;)_+=ne.charCodeAt(d),_+=_<<10,_^=_>>6;return _+=_<<3,_^=_>>11,_+=_<<15,_}const ye=console.log,V=function(ne,_){if(!ne)throw _};function I(ne,_){if(!ne)return 0;var d=ne.toString().split(".");return d.length>1?parseInt(d[0],_)+parseInt(d[1],_)/Math.pow(_,d[1].length):parseInt(d[0],_)}let Se=[" ",`
`,"	","\r"],_e={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const Le=new Proxy(_e,{get(ne,_){return I(_)}});let we=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Ie=["0","1","2","3","4","5","6","7","8","9"],ct=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],_t=["0","1"],it=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Qe=["~","=",">","<"],et=["+","-","*","/","^","..","%","//"],je=["+=","-=","*=","/=","^=","..=","%=","//="],lt=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],qe=["else","elseif","until","end"],pt=["-","not","#","~"],tt=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],Ee=11,ce={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function ie(ne){let _=0,d=ne.length,s=[];function g(t){return t=t||0,_<=d?ne.substr(_+t,1):""}function m(){if(_<=d){let t=ne.substr(_,1);return _++,t}else return""}function e(t){let l=0,i=1,u=1;for(;l<=_;)ne.substr(l,1)==`
`?(i++,u=1):u++;let B;for(B=0;B<s.length;B++){let re=s[B];ye(`${re.Type}<${re.Source}>`)}throw`file<${i}:${u}>: ${t}`}function T(t){for(;;){let l=m();if(l=="")e("Unfinished long string.");else if(l=="]"){let i=!0,u;for(u=1;u<=t;u++)if(g()=="=")_++;else{i=!1;break}if(i&&m()=="]")return}}}function f(){let t=_;for(;g()=="=";)_++;if(g()=="[")return _++,_-t-1;_=t}let c=0,p=0;function k(t){let l=ne.substr(p,_-p),i=null;t=="Number"&&(l.substr(0,2).toLowerCase()=="0x"?(i="hex",parseInt(l,16)<999999999999&&(l=parseInt(l,16))):l.substr(0,2).toLowerCase()=="0b"&&(i="bin",parseInt(l.substr(2),2)<999999999999&&(l=parseInt(l.substr(2),2))));let u={Type:t,LeadingWhite:ne.substr(c,p-c),Source:l};return i!==null&&(u.NType=i),s.push(u),c=_,p=_,u}for(;;){for(c=_;;){let l=g();if(l=="")break;if(l=="-")if(g(1)=="-")if(_+=2,g()=="["){_++;let i=f();if(i!=null)T(i),c=_;else for(;;){let u=m();if(u==""||u==`
`)break}}else for(;;){let i=m();if(i==""||i==`
`)break}else break;else if(Se.includes(l))_++;else break}ne.substr(c,_-c),p=_;let t=m();if(t==""){k("Eof");break}else if(t=="'"||t=='"'){for(;;){let l=m();if(l=="\\"){let i=m();if(Le[i]==null)throw`Invalid Escape Sequence \`${i}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}k("String")}else if(t=="`"){for(;;){let l=m();if(l=="\\"){let i=m();if(Le[i]==null)throw`Invalid Escape Sequence \`${i}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}k("Hash")}else if(we.includes(t)){for(;yt.includes(g());)_++;lt.includes(ne.substr(p,_-p))?k("Keyword"):k("Ident")}else if(Ie.includes(t)||t=="."&&Ie.includes(g())){if(t=="0"&&g().toLowerCase()=="x")for(_++;ct.includes(g())||g()==="_";)_++;else if(t=="0"&&g().toLowerCase()=="b")for(_++;_t.includes(g())||g()==="_";)_++;else{for(;Ie.includes(g())||g()==="_";)_++;if(g()==".")for(_++;Ie.includes(g());)_++;if(g()=="e"||g()=="E")for(_++,(g()=="-"||g()=="+")&&_++;Ie.includes(g());)_++}k("Number")}else if(t=="["){let l=f();l!=null?(T(l),k("String")):k("Symbol")}else if(t==".")g()=="."&&(m(),(g()=="."||g()=="=")&&m()),k("Symbol");else if(t+g()=="//")m(),g()=="="&&m(),k("Symbol");else if(t+g()=="::")m(),k("Symbol");else if(tt.includes(t+g()))m(),k("Symbol");else if(Qe.includes(t))g()=="="&&_++,k("Symbol");else if(et.includes(t)&&g()=="=")m(),k("Symbol");else if(it.includes(t))k("Symbol");else throw`Bad symbol \`${t}\` in source. ${_}`}return s}function fe(ne){let _=ie(ne),d=0;function s(){let v=_[d];return d<_.length&&d++,v}function g(v){return v=d+(v||0),_[v]||_[_.length-1]}function m(v){let M=1,E=0,b=0;for(;;){let P=_[b],U;P==v?U=P.LeadingWhite:U=P.LeadingWhite+P.Source;let x;for(x=0;x<=U.length;x++)U.substr(x,1)==`
`?(M++,E=0):E++;if(P==v)break;b++}return`${M}:${E+1}`}function e(){let v=g();return`<${v.Type} \`${v.Source}\`> at: ${m(v)}`}function T(){let v=g();return v.Type=="Eof"||v.Type=="Keyword"&&qe.includes(v.Source)}function f(){return pt.includes(g().Source)||!1}function c(){return tt.includes(g().Source)||!1}function p(v,M){let E=g();if(E.Type==v&&(M==null||E.Source==M))return s();{let b;for(b=-3;b<=3;b++)ye(`Tokens[${b}] = \`${g(b).Source}\``);throw M?`${m(E)}: \`${M}\` expected.`:`${m(E)}: ${v} expected.`}}function k(v){let M=v.GetFirstToken,E=v.GetLastToken,b=v;return v.GetFirstToken=function(){let P=M(b);return V(P),P},v.GetLastToken=function(){let P=E(b);return V(P),P},v}let t,l;function i(v,M){let E=[l(v,M)],b=[];for(;g().Source==",";)b.push(s()),E.push(l(v,M));return[E,b]}function u(v,M){var b,P,U,x;let E=g();if(E.Source=="("){let W=s(),te=l(v,M),de=p("Symbol",")"),Z;return Z=k({Type:"ParenExpr",Expression:te,Token_OpenParen:W,Token_CloseParen:de,GetFirstToken:()=>Z.Token_OpenParen,GetLastToken:()=>Z.Token_CloseParen}),Z}else if(E.Type=="Ident"){let W;return W=k({Type:"VariableExpr",Token:s(),GetFirstToken:()=>W.Token,GetLastToken:()=>W.Token}),v[W.Token.Source]!=null&&((P=(b=v[W.Token.Source])==null?void 0:b.Tokens)==null?void 0:P.push)!=null?(v[W.Token.Source].Tokens.push(W.Token),v[W.Token.Source].UseCountIncrease()):M[W.Token.Source]!=null&&((x=(U=M[W.Token.Source])==null?void 0:U.Tokens)==null?void 0:x.push)!=null&&(M[W.Token.Source].Tokens.push(W.Token),M[W.Token.Source].UseCountIncrease()),W}else throw ye(e()),`${m(E)}: Unexpected symbol. ${E.Type} ${E.Source}`}function B(v,M){let E=p("Symbol","{"),b=[],P=[];for(;g().Source!="}";){if(g().Source=="["){let W=s(),te=l(v,M),de=p("Symbol","]"),Z=p("Symbol","="),ke=l(v,M);te.Token&&te.Token.Source,b.push({EntryType:"Index",Index:te,Value:ke,Token_OpenBracket:W,Token_CloseBracket:de,Token_Equals:Z})}else if(g().Type=="Ident"&&g(1).Source=="="){let W=s(),te=s(),de=l(v,M);b.push({EntryType:"Field",Field:W,Value:de,Token_Equals:te})}else{let W=l(v,M);b.push({EntryType:"Value",Value:W})}if(g().Source==","||g().Source==";")P.push(s());else break}let U=p("Symbol","}"),x;return x=k({Type:"TableLiteral",EntryList:b,Token_SeperatorList:P,Token_OpenBrace:E,Token_CloseBrace:U,GetFirstToken:()=>x.Token_OpenBrace,GetLastToken:()=>x.Token_CloseBrace}),x}function re(v,M){let E=[],b=[];if(g().Type=="Ident"){let P=s();if(M&&g().Source=="<"&&g(2).Source==">"){let U=g(1).Source;P.Attribute={LeadingWhite:g().LeadingWhite,Source:`<${U}>`},s(),s(),s()}E.push(P)}else if(g().Source=="..."&&v)return[E,b,s()];for(;g().Source==",";){if(b.push(s()),g().Source=="..."&&v)return[E,b,s()];{let P=p("Ident");if(M&&g().Source=="<"&&g(2).Source==">"){let U=g(1).Source;P.Attribute={LeadingWhite:g().LeadingWhite,Source:`<${U}>`},s(),s(),s()}E.push(P)}}return[E,b]}function se(v,M,E){let b=t(M,E),P=g();if(P.Type=="Keyword"&&P.Source==v)return s(),[b,P];throw ye(P.Type,P.Source),`${m(P)}: ${v} expected.`}function Ge(v,M,E,b){let P=s(),U,x;if(!v){U=[],x=[];let r=p("Ident");for(U.push(r);g().Source==".";)x.push(s()),U.push(p("Ident"));g().Source==":"&&(x.push(s()),U.push(p("Ident")))}let W=p("Symbol","("),[te,de,Z]=re(!0),ke=p("Symbol",")"),[Oe,be]=se("end",M,E),D;return D=k({Type:v==!0?"FunctionLiteral":"FunctionStat",NameChain:U,ArgList:te,Body:Oe,Token_Function:P,Token_NameChainSeperator:x,Token_OpenParen:W,Token_Varg:Z,Token_ArgCommaList:de,Token_CloseParen:ke,Token_End:be,GetFirstToken:()=>D.Token_Function,GetLastToken:()=>D.Token_End}),D}function We(v,M){let E=g();if(E.Source=="("){let b=s(),P=[],U=[];for(;g().Source!=")"&&(P.push(l(v,M)),g().Source==",");)U.push(s());let x=p("Symbol",")"),W;return W=k({CallType:"ArgCall",ArgList:P,Token_CommaList:U,Token_OpenParen:b,Token_CloseParen:x,GetFirstToken:()=>W.Token_OpenParen,GetLastToken:()=>W.Token_CloseParen}),W}else if(E.Source=="{"){let b;return b=k({CallType:"TableCall",TableExpr:l(v,M),GetFirstToken:()=>b.TableExpr.GetFirstToken(),GetLastToken:()=>b.TableExpr.GetLastToken()}),b}else if(E.Type=="String"){let b;return b=k({CallType:"StringCall",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else throw"Function arguments expected."}function ee(v,M){let E=u(v,M);for(V(E,"nil prefixexpr");;){let b=g();if(b.Source=="."){let P=s(),U=p("Ident"),x;x=k({Type:"FieldExpr",Base:E,Field:U,Token_Dot:P,GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.Field}),E=x}else if(b.Source==":"){let P=s(),U=p("Ident"),x=We(v,M),W;W=k({Type:"MethodExpr",Base:E,Method:U,FunctionArguments:x,Token_Colon:P,GetFirstToken:()=>W.Base.GetFirstToken(),GetLastToken:()=>W.FunctionArguments.GetLastToken()}),E=W}else if(b.Source=="["){let P=s(),U=l(v,M),x=p("Symbol","]"),W;W=k({Type:"IndexExpr",Base:E,Index:U,Token_OpenBracket:P,Token_CloseBracket:x,GetFirstToken:()=>W.Base.GetFirstToken(),GetLastToken:()=>W.Token_CloseBracket}),E=W}else if(b.Source=="{"||b.Source=="("||b.Type=="String"){let P;P=k({Type:"CallExpr",Base:E,FunctionArguments:We(v,M),GetFirstToken:()=>P.Base.GetFirstToken(),GetLastToken:()=>P.FunctionArguments.GetLastToken()}),E=P}else if(je.includes(b.Source)){let P=s(),U=l(v,M),x;x=k({Type:"CompoundStat",Base:E,Token_Compound:P,Rhs:U,Lhs:E,GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.Rhs.GetLastToken()}),E=x}else return E}}function O(v,M){let E=g();if(E.Type=="Number"){let b;return b=k({Type:"NumberLiteral",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Type=="String"){let b;return b=k({Type:"StringLiteral",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Type=="Hash"){let b;return b=k({Type:"HashLiteral",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Source=="nil"){let b;return b=k({Type:"NilLiteral",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Source=="true"||E.Source=="false"){let b;return b=k({Type:"BooleanLiteral",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Source=="..."){let b;return b=k({Type:"VargLiteral",Token:s(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else return E.Source=="{"?B(v,M):E.Source=="function"?Ge(!0,v,M):ee(v,M)}function ae(v,M,E){let b;if(f()){let P=s(),U=ae(Ee,M,E),x;x=k({Type:"UnopExpr",Token_Op:P,Rhs:U,GetFirstToken:()=>x.Token_Op,GetLastToken:()=>x.Rhs.GetLastToken()}),b=x}else b=O(M,E),V(b,"nil sipleexpr");for(;c()&&ce[g().Source]!=null&&ce[g().Source][0]>v;){let P=s(),U=ae(ce[P.Source][1],M,E);V(U,"RhsNeeded");let x;x=k({Type:"BinopExpr",Lhs:b,Rhs:U,Token_Op:P,GetFirstToken:()=>x.Lhs.GetFirstToken(),GetLastToken:()=>x.Rhs.GetLastToken()}),b=x}return b}l=(v,M)=>ae(0,v,M);function R(v,M){let E=ee(v,M);if(E.Type=="MethodExpr"||E.Type=="CallExpr"){let b;return b=k({Type:"CallExprStat",Expression:E,GetFirstToken:()=>b.Expression.GetFirstToken(),GetLastToken:()=>b.Expression.GetLastToken()}),b}else{if(E.Type=="CompoundStat")return E;{let b=[E],P=[];for(;g().Source==",";){P.push(s());let de=ee(v,M);if(de.Type=="MethodExpr"||de.Type=="CallExpr")throw"Bad left hand side of asignment";b.push(de)}let U=p("Symbol","="),x=[l(v,M)],W=[];for(;g().Source==",";)W.push(s()),x.push(l(v,M));let te;return te=k({Type:"AssignmentStat",Rhs:x,Lhs:b,Token_Equals:U,Token_LhsSeperatorList:P,Token_RhsSeperatorList:W,GetFirstToken:()=>te.Lhs[0].GetFirstToken(),GetLastToken:()=>te.Rhs[te.Rhs.length-1].GetLastToken()}),te}}}function L(v,M){let E=s(),b=l(v,M),P=p("Keyword","then"),U=t(v,M),x=[];for(;g().Source=="elseif"||g().Source=="else";){let de=s(),Z,ke;de.Source=="elseif"&&(Z=l(v,M),ke=p("Keyword","then"));let Oe=t(v,M);if(x.push({Condition:Z,Body:Oe,ClauseType:de.Source,Token:de,Token_Then:ke}),de.Source=="else")break}let W=p("Keyword","end"),te;return te=k({Type:"IfStat",Condition:b,Body:U,ElseClauseList:x,Token_If:E,Token_Then:P,Token_End:W,GetFirstToken:()=>te.Token_If,GetLastToken:()=>te.Token_End}),te}function Y(v,M){let E=s(),[b,P]=se("end",v,M),U;return U=k({Type:"DoStat",Body:b,Token_Do:E,Token_End:P,GetFirstToken:()=>U.Token_Do,GetLastToken:()=>U.Token_End}),U}function me(v,M){let E=s(),b=l(v,M),P=p("Keyword","do"),[U,x]=se("end",v,M),W;return W=k({Type:"WhileStat",Condition:b,Body:U,Token_While:E,Token_Do:P,Token_End:x,GetFirstToken:()=>W.Token_While,GetLastToken:()=>W.Token_End}),W}function Pe(v,M){let E=s(),[b,P]=re();if(g().Source=="="){let U=s(),[x,W]=i(v,M);if(x.length<2||x.length>3)throw"Expected 2 or 3 values for range bounds";let te=p("Keyword","do"),[de,Z]=se("end",v,M),ke;return ke=k({Type:"NumericForStat",VarList:b,RangeList:x,Body:de,Token_For:E,Token_VarCommaList:P,Token_Equals:U,Token_RangeCommaList:W,Token_Do:te,Token_End:Z,GetFirstToken:()=>ke.Token_For,GetLastToken:()=>ke.Token_End}),ke}else if(g().Source=="in"){let U=s(),[x,W]=i(v,M),te=p("Keyword","do"),[de,Z]=se("end",v,M),ke;return ke=k({Type:"GenericForStat",VarList:b,GeneratorList:x,Body:de,Token_For:E,Token_VarCommaList:P,Token_In:U,Token_GeneratorCommaList:W,Token_Do:te,Token_End:Z,GetFirstToken:()=>ke.Token_For,GetLastToken:()=>ke.Token_End}),ke}}function $e(v,M){let E=s(),[b,P]=se("until",v),U=l(v,M),x;return x=k({Type:"RepeatStat",Body:b,Condition:U,Token_Repeat:E,Token_Until:P,GetFirstToken:()=>x.Token_Repeat,GetLastToken:()=>x.Condition.GetLastToken()}),x}function Ze(v,M){let E=s();if(g().Source=="function"){let b=Ge(!1,v,M);if(b.NameChain.length>1)throw m(b.Token_NameChainSeperator[0])+": `(` expected.";let P;return P=k({Type:"LocalFunctionStat",FunctionStat:b,Token_Local:E,GetFirstToken:()=>P.Token_Local,GetLastToken:()=>P.FunctionStat.GetLastToken()}),P}else if(g().Type=="Ident"){let[b,P]=re(!1,!0),U=[],x=[],W;if(g().Source=="="){W=s();let[de,Z]=i(v,M);U=de,x=Z}let te;return te=k({Type:"LocalVarStat",VarList:b,ExprList:U,Token_Local:E,Token_Equals:W,Token_VarCommaList:P,Token_ExprCommaList:x,GetFirstToken:()=>te.Token_Local,GetLastToken:function(){return te.ExprList.length>0?te.ExprList[te.ExprList.length-1].GetLastToken():te.VarList[te.VarList.length-1]}}),te}else throw"`function` or ident expected"}function Ne(v,M){let E=s(),b,P;T()||g().Source==";"?(b=[],P=[]):[b,P]=i(v,M);let U;return U={Type:"ReturnStat",ExprList:b,Token_Return:E,Token_CommaList:P,GetFirstToken:()=>U.Token_Return,GetLastToken:function(){return U.ExprList.length>0?U.ExprList[U.ExprList.length-1].GetLastToken():U.Token_Return}},U}function Fe(v,M){let E=s(),b;return b={Type:"BreakStat",Token_Break:E,GetFirstToken:()=>b.Token_Break,GetLastToken:()=>b.Token_Break},b}function Xe(v,M){let E=s(),b;return b={Type:"ContinueStat",Token_Continue:E,GetFirstToken:()=>b.Token_Continue,GetLastToken:()=>b.Token_Continue},b}function st(){let v=s(),M;g().Type=="Keyword"?M=p("Keyword"):M=p("Ident");let E;return E={Type:"GotoStat",Token_Goto:v,Token_Label:M,GetFirstToken:()=>E.Token_Goto,GetLastToken:()=>E.Token_Label},E}function ot(){let v=s(),M;g().Type=="Keyword"?M=p("Keyword"):M=p("Ident");let E=p("Symbol","::"),b;return b={Type:"LabelStat",Token_ColonsLeft:v,Token_Label:M,Token_ColonsRight:E,GetFirstToken:()=>b.Token_ColonsLeft,GetLastToken:()=>b.Token_ColonsRight},b}function Ke(v,M){let E=g();return E.Source=="if"?[!1,L(v,M)]:E.Source=="while"?[!1,me(v,M)]:E.Source=="do"?[!1,Y(v,M)]:E.Source=="for"?[!1,Pe(v,M)]:E.Source=="repeat"?[!1,$e(v,M)]:E.Source=="function"?[!1,Ge(!1,v,M)]:E.Source=="local"?[!1,Ze(v,M)]:E.Source=="return"?[!0,Ne(v,M)]:E.Source=="break"?[!0,Fe()]:E.Source=="continue"?[!0,Xe()]:E.Source=="goto"?[!1,st()]:E.Source=="::"?[!1,ot()]:[!1,R(v,M)]}return t=function(v,M){let E=[],b=[],P={},U={};if(M!=null)for(let[de,Z]of Object.entries(M))U[de]=Z;if(v!=null)for(let[de,Z]of Object.entries(v))U[de]=Z;let x,W=0;for(;!T();){x&&x==g()&&ye(`INFINITE LOOP POSSIBLE ON STATEMENT ${x.Source} :`,x),x=g();let[de,Z]=Ke(P,U);if(Z)switch(E.push(Z),Z.Type){case"LocalVarStat":Z.VarList.forEach(be=>{be.UseCount=0,be.Number=W++,P[be.Source]=be;let D=[];function r(){be.UseCount++,D.forEach(Q=>{Q.UseCount=be.UseCount})}be.Tokens={},be.Tokens.push=Q=>{Q.UseCountIncrease=r,Q.UseCount=be.UseCount,Q.Tokens=be.Tokens,D.push(Q)},be.Tokens.get=()=>D,be.UseCountIncrease=r});break;case"LocalFunctionStat":let Oe=Z.FunctionStat.NameChain;if(Oe.length===1){let r=function(){be.UseCount++,D.forEach(Q=>{Q.UseCount=be.UseCount})},be=Oe[0];be.UseCount=0,be.Number=W++,P[be.Source]=be;let D=[];be.Tokens={},be.Tokens.push=Q=>{Q.UseCountIncrease=r,Q.UseCount=be.UseCount,Q.Tokens=be.Tokens,D.push(Q)},be.Tokens.get=()=>D,be.UseCountIncrease=r}break}let ke=g();ke.Type=="Symbol"&&ke.Source==";"&&(b[E.length-1]=s())}let te;return te={Type:"StatList",StatementList:E,SemicolonList:b,GetFirstToken:function(){var de;if(te.StatementList.length!=0)return(de=te.StatementList[0])==null?void 0:de.GetFirstToken()},GetLastToken:function(){if(te.StatementList.length!=0)return te.SemicolonList[te.StatementList.length-1]?te.SemicolonList[te.StatementList.length-1]:te.StatementList[te.StatementList.length-1].GetLastToken()}},te},t([],[])}function at(ne,_){let d={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},s={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[g,m]of Object.entries(_))if(!s[g]&&!d[g])throw`Invalid visitor target: \`${g}\``;function e(p){if(p!=null){let k=_[p.Type];if(typeof k=="function")return k(p);if(k&&k.Pre)return k.Pre(p)}}function T(p){let k=_[p.Type];if(k&&typeof k=="object"&&k.Post)return k.Post(p)}let f,c;f=function(p){if(!e(p)){if(p.Type=="BinopExpr")f(p.Lhs),f(p.Rhs);else if(p.Type=="UnopExpr")f(p.Rhs);else if(!(p.Type=="NumberLiteral"||p.Type=="StringLiteral"||p.Type=="NilLiteral"||p.Type=="BooleanLiteral"||p.Type=="VargLiteral"||p.Type=="HashLiteral")){if(p.Type=="FieldExpr")f(p.Base);else if(p.Type=="IndexExpr")f(p.Base),f(p.Index);else if(p.Type=="MethodExpr"||p.Type=="CallExpr")f(p.Base),p.FunctionArguments.CallType=="ArgCall"?p.FunctionArguments.ArgList.forEach((k,t)=>{f(k)}):p.FunctionArguments.CallType=="TableCall"&&f(p.FunctionArguments.TableExpr);else if(p.Type=="FunctionLiteral")c(p.Body);else if(p.Type!="VariableExpr")if(p.Type=="ParenExpr")f(p.Expression);else if(p.Type=="TableLiteral")p.EntryList.forEach((k,t)=>{if(k.EntryType=="Field")f(k.Value);else if(k.EntryType=="Index")f(k.Index),f(k.Value);else if(k.EntryType=="Value")f(k.Value);else throw"unreachable"});else if(p.Type=="CompoundStat")f(p.Lhs),f(p.Rhs);else throw`unreachable, type: ${p.Type}: ${p}`}T(p)}},c=function(p){if(!e(p)){if(p.Type=="StatList")p.StatementList.forEach((k,t)=>{if(k!=null){if(k===null||k.Type===null)return;k.Remove=()=>{p.StatementList[t]=null},c(k)}});else if(p.Type!="BreakStat"){if(p.Type!="ContinueStat"){if(p.Type!="GotoStat"){if(p.Type!="LabelStat")if(p.Type=="ReturnStat")p.ExprList.forEach((k,t)=>{f(k)});else if(p.Type=="LocalVarStat")p.Token_Equals&&p.ExprList.forEach((k,t)=>{f(k)});else if(p.Type=="LocalFunctionStat")c(p.FunctionStat.Body);else if(p.Type=="FunctionStat")c(p.Body);else if(p.Type=="RepeatStat")c(p.Body),f(p.Condition);else if(p.Type=="GenericForStat")p.GeneratorList.forEach((k,t)=>{f(k)}),c(p.Body);else if(p.Type=="NumericForStat")p.RangeList.forEach((k,t)=>{f(k)}),c(p.Body);else if(p.Type=="WhileStat")f(p.Condition),c(p.Body);else if(p.Type=="DoStat")c(p.Body);else if(p.Type=="IfStat")f(p.Condition),c(p.Body),p.ElseClauseList.forEach(k=>{k.Condition!=null&&f(k.Condition),c(k.Body)});else if(p.Type=="CallExprStat")f(p.Expression);else if(p.Type=="CompoundStat")f(p.Lhs),f(p.Rhs);else if(p.Type=="AssignmentStat")p.Lhs.forEach(k=>{f(k)}),p.Rhs.forEach(k=>{f(k)});else throw"unreachable"}}}T(p)}},s[ne.Type]?c(ne):f(ne)}function mt(ne){let _=[],d,s=0;function g(){return s++,s}function m(){d={ParentScope:d,ChildScopeList:[],VariableList:[],BeginLocation:g(),Depth:null,GetVar:null},d.ParentScope?(d.Depth=d.ParentScope.Depth+1,d.ParentScope.ChildScopeList.push(d)):d.Depth=1;let l=d;d.GetVar=function(i){for(const u of l.VariableList)if(u.Name==i)return u;if(l.ParentScope)return l.ParentScope.GetVar(i);for(const u of _)if(u.Name==i)return u}}function e(){let l=d;return l.EndLocation=g(),l.VariableList.forEach(i=>{i.ScopeEndLocation=l.EndLocation}),d=l.ParentScope,l}m();function T(l,i,u){V(u,"MIssing localInfo"),V(l,"Missing local var name");let B={Type:"Local",Name:l,RenameList:[i],AssignedTo:!1,Info:u,Scope:d,BeginLocation:g(),EndLocation:g(),ReferenceLocationList:[g()]};return B.Rename=function(re){B.Name=re,B.RenameList.forEach(se=>{se(re)})},d.VariableList.push(B),B}function f(l){for(const u of _)if(u.Name==l)return u;let i={Type:"Global",Name:l,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:g(),EndLocation:g(),ReferenceLocationList:[]};return i.Rename=function(u){i.Name=u,i.RenameList.forEach(B=>{B(u)})},_.push(i),i}function c(l,i){V(l,"Missing var name");let u=f(l);return u.RenameList.push(i),u}function p(l,i){let u;for(u=l.VariableList.length-1;u>=0;u--)if(l.VariableList[u].Name==i)return l.VariableList[u];if(l.ParentScope){let B=p(l.ParentScope,i);if(B)return B}}function k(l,i){V(l,"Missing var name");let u=p(d,l);u?u.RenameList.push(i):u=c(l,i);let B=g();return u.EndLocation=B,u.ReferenceLocationList.push(u.EndLocation),u}let t={};return t.FunctionLiteral={Pre:function(l){m(),l.ArgList.forEach((i,u)=>{let B=T(i.Source,function(re,se){se||(i.Source=re)},{Type:"Argument",Index:u});i.var=B})},Post:function(l){e()}},t.VariableExpr=function(l){l.Variable=k(l.Token.Source,function(i){l.Token.Source=i})},t.StatList={Pre:function(l){m()},Post:function(l){l.SkipPop||e()}},t.LocalVarStat={Post:function(l){l.VarList.forEach((i,u)=>{T(i.Source,function(B){l.VarList[u].Source=B},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(l){T(l.FunctionStat.NameChain[0].Source,function(i){l.FunctionStat.NameChain[0].Source=i},{Type:"LocalFunction"}),m(),l.FunctionStat.ArgList.forEach((i,u)=>{T(i.Source,function(B){i.Source=B},{Type:"Argument",Index:u})})},Post:function(){e()}},t.FunctionStat={Pre:function(l){let i=l.NameChain,u;i.length==1?p(d,i[0].Source)?u=k(i[0].Source,function(B){i[0].Source=B}):u=c(i[0].Source,function(B){i[0].Source=B}):u=k(i[0].Source,function(B){i[0].Source=B}),u.AssignedTo=!0,m(),l.ArgList.forEach((B,re)=>{T(B.Source,function(se){B.Source=se},{Type:"Argument",Index:re})})},Post:function(){e()}},t.GenericForStat={Pre:function(l){return l.GeneratorList.forEach(i=>{at(i,t)}),m(),l.VarList.forEach((i,u)=>{T(i.Source,function(B){i.Source=B},{Type:"ForRange",Index:u})}),at(l.Body,t),e(),!0}},t.NumericForStat={Pre:function(l){return l.RangeList.forEach(i=>{at(i,t)}),m(),l.VarList.forEach((i,u)=>{T(i.Source,function(B){i.Source=B},{Type:"ForRange",Index:u})}),at(l.Body,t),e(),!0}},t.RepeatStat={Pre:function(l){l.Body.SkipPop=!0},Post:function(l){e()}},t.AssignmentStat={Post:function(l){l.Lhs.forEach(i=>{i.Variable!=null&&(i.Variable.AssignedTo=!0)})}},at(ne,t),[_,e()]}function he(ne){let _,d,s="",g=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function m(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;s=`${s}${e.LeadingWhite}${e.Source}`}return d=function(e){if(e.Type=="BinopExpr")d(e.Lhs),m(e.Token_Op),d(e.Rhs);else if(e.Type=="UnopExpr")m(e.Token_Op),d(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")m(e.Token);else if(e.Type=="FieldExpr")d(e.Base),m(e.Token_Dot),m(e.Field);else if(e.Type=="IndexExpr")d(e.Base),m(e.Token_OpenBracket),d(e.Index),m(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")d(e.Base),e.Type=="MethodExpr"&&(m(e.Token_Colon),m(e.Method)),e.FunctionArguments.CallType=="StringCall"?m(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(m(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((T,f)=>{d(T);let c=e.FunctionArguments.Token_CommaList[f];c!=null&&m(c)}),m(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&d(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")m(e.Token_Function),m(e.Token_OpenParen),e.ArgList.forEach((T,f)=>{m(T);let c=e.Token_ArgCommaList[f];c!=null&&m(c)}),e.Token_Varg!=null&&m(e.Token_Varg),m(e.Token_CloseParen),_(e.Body),m(e.Token_End);else if(e.Type=="VariableExpr")m(e.Token);else if(e.Type=="ParenExpr")m(e.Token_OpenParen),d(e.Expression),m(e.Token_CloseParen);else if(e.Type=="TableLiteral")m(e.Token_OpenBrace),e.EntryList.forEach((T,f)=>{if(T.EntryType=="Field")m(T.Field),m(T.Token_Equals),d(T.Value);else if(T.EntryType=="Index")m(T.Token_OpenBracket),d(T.Index),m(T.Token_CloseBracket),m(T.Token_Equals),d(T.Value);else if(T.EntryType=="Value")d(T.Value);else throw"unreachable";let c=e.Token_SeperatorList[f];c!=null&&m(c)}),m(e.Token_CloseBrace);else if(e.Type=="CompoundStat")_(e);else throw`unreachable, type: ${e.Type}: ${e}`},_=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let T=g(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",s+=`${T}do `}e.Type=="StatList"?e.StatementList.forEach((T,f)=>{T===null||T.Type===null||(T.Remove=()=>{e.StatementList[f]=null},_(T),e.SemicolonList[f]&&m(e.SemicolonList[f]))}):e.Type=="BreakStat"?m(e.Token_Break):e.Type=="ContinueStat"?m(e.Token_Continue):e.Type=="GotoStat"?(m(e.Token_Goto),m(e.Token_Label)):e.Type=="LabelStat"?(m(e.Token_ColonsLeft),m(e.Token_Label),m(e.Token_ColonsRight)):e.Type=="ReturnStat"?(m(e.Token_Return),e.ExprList.forEach((T,f)=>{d(T),e.Token_CommaList[f]&&m(e.Token_CommaList[f])})):e.Type=="LocalVarStat"?(m(e.Token_Local),e.VarList.forEach((T,f)=>{m(T),T.Attribute!=null&&m(T.Attribute);let c=e.Token_VarCommaList[f];c!=null&&m(c)}),e.Token_Equals!=null&&(m(e.Token_Equals),e.ExprList.forEach((T,f)=>{d(T);let c=e.Token_ExprCommaList[f];c!=null&&m(c)}))):e.Type=="LocalFunctionStat"?(m(e.Token_Local),m(e.FunctionStat.Token_Function),m(e.FunctionStat.NameChain[0]),m(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((T,f)=>{m(T);let c=e.FunctionStat.Token_ArgCommaList[f];c!=null&&m(c)}),e.FunctionStat.Token_Varg&&m(e.FunctionStat.Token_Varg),m(e.FunctionStat.Token_CloseParen),_(e.FunctionStat.Body),m(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(m(e.Token_Function),e.NameChain.forEach((T,f)=>{m(T);let c=e.Token_NameChainSeperator[f];c!=null&&m(c)}),m(e.Token_OpenParen),e.ArgList.forEach((T,f)=>{m(T);let c=e.Token_ArgCommaList[f];c!=null&&m(c)}),e.Token_Varg&&m(e.Token_Varg),m(e.Token_CloseParen),_(e.Body),m(e.Token_End)):e.Type=="RepeatStat"?(m(e.Token_Repeat),_(e.Body),m(e.Token_Until),d(e.Condition)):e.Type=="GenericForStat"?(m(e.Token_For),e.VarList.forEach((T,f)=>{m(T);let c=e.Token_VarCommaList[f];c!=null&&m(c)}),m(e.Token_In),e.GeneratorList.forEach((T,f)=>{d(T);let c=e.Token_GeneratorCommaList[f];c!=null&&m(c)}),m(e.Token_Do),_(e.Body),m(e.Token_End)):e.Type=="NumericForStat"?(m(e.Token_For),e.VarList.forEach((T,f)=>{m(T);let c=e.Token_VarCommaList[f];c!=null&&m(c)}),m(e.Token_Equals),e.RangeList.forEach((T,f)=>{d(T);let c=e.Token_RangeCommaList[f];c!=null&&m(c)}),m(e.Token_Do),_(e.Body),m(e.Token_End)):e.Type=="WhileStat"?(m(e.Token_While),d(e.Condition),m(e.Token_Do),_(e.Body),m(e.Token_End)):e.Type=="DoStat"?(m(e.Token_Do),_(e.Body),m(e.Token_End)):e.Type=="IfStat"?(m(e.Token_If),d(e.Condition),m(e.Token_Then),_(e.Body),e.ElseClauseList.forEach(T=>{m(T.Token),T.Condition!=null&&(d(T.Condition),m(T.Token_Then)),_(T.Body)}),m(e.Token_End)):e.Type=="CallExprStat"?d(e.Expression):e.Type=="CompoundStat"?(d(e.Lhs),m(e.Token_Compound),d(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((T,f)=>{d(T);let c=e.Token_LhsSeperatorList[f];c!=null&&m(c)}),m(e.Token_Equals),e.Rhs.forEach((T,f)=>{d(T);let c=e.Token_RhsSeperatorList[f];c!=null&&m(c)})):V(!1,"unreachable"),e.WrapInDo&&(s+=" end ")}},_(ne),s}function gt(ne){let _,d,s=0;function g(t){if(t===void 0)return;let l=`
${"	".repeat(s)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-l.length,l.length)!=l){let i="",u;for(u=t.LeadingWhite.length;u>=0;u--){let B=t.LeadingWhite.substr(u,1);if(!(B==""||B.match(/\s/g))){i=t.LeadingWhite.substr(0,u+1);break}}t.LeadingWhite=`${i}${l}`}}function m(){s++}function e(){s--,V(s>=0,"Undented too far")}function T(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function f(t){t.LeadingWhite=t.LeadingWhite.trim()}function c(t){f(t),Se.includes(T(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function p(t){c(t.GetFirstToken())}function k(t,l,i){m(),_(l),e(),g(i)}d=function(t){if(t.Type=="BinopExpr")d(t.Lhs),d(t.Rhs),p(t.Rhs),c(t.Token_Op);else if(t.Type=="UnopExpr")f(t.Token_Op),d(t.Rhs),t.Token_Op.Source[0]&&c(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")f(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+S(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")d(t.Base);else if(t.Type=="IndexExpr")d(t.Base),d(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")d(t.Base),f(t.FunctionArguments.GetFirstToken()),f(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,i)=>{d(l),i>0&&p(l);let u=t.FunctionArguments.Token_CommaList[i];u!=null&&f(u)}):t.FunctionArguments.CallType=="TableCall"&&d(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((l,i)=>{i>0&&c(l),t.Token_ArgCommaList[i]}),t.ArgList.length>0&&t.Token_Varg!=null&&c(t.Token_Varg),k(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")f(t.Token_OpenParen),f(t.Token_CloseParen),d(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){m();let l=100;t.EntryList.forEach((i,u)=>{i.EntryType=="Field"?(t.EntryList.length>l?De(i.Value):g(i.Field),c(i.Token_Equals),d(i.Value),p(i.Value)):i.EntryType=="Index"?(t.EntryList.length>l?f(i.Token_OpenBracket):g(i.Token_OpenBracket),d(i.Index),c(i.Token_Equals),d(i.Value),p(i.Value)):i.EntryType=="Value"?(d(i.Value),t.EntryList.length>l?De(i.Value):g(i.Value.GetFirstToken())):V(!1,"unreachable");let B=t.Token_SeperatorList[u];B!=null&&(t.EntryList.length>l?B.LeadingWhite="":f(B))}),e(),t.EntryList.length>l?t.Token_CloseBrace.LeadingWhite="":g(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")_(t);else throw ye(t),`unreachable, type: ${t.Type}:`+t},_=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,i)=>{l===null||l.Type===null||l.Type==="StatList"&&l.StatementList.length===0||(l.Remove=()=>{l.StatementList[i]=null},_(l),g(l.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,i)=>{d(l),p(l),t.Token_CommaList[i]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((l,i)=>{c(l),l.Attribute&&(l.Attribute.LeadingWhite=" "),t.Token_VarCommaList[i]}),t.Token_Equals){f(t.Token_Equals),c(t.Token_Equals);let l=[],i=[];t.ExprList.forEach((u,B)=>{u!=null&&(B<t.VarList.length||u.Type=="CallExpr"||u.Type=="ParenExpr"||u.Type=="VargLiteral"||u.Type=="BinopExpr"||u.Type=="UnopExpr")&&(l.push(u),i.push(t.Token_ExprCommaList[B]))}),t.ExprList=l,t.CommaList=i,t.ExprList.forEach((u,B)=>{u!=null&&(d(u),p(u),t.Token_ExprCommaList[B]!=null&&t.ExprList.length-1==B&&(t.Token_ExprCommaList[B]=null))})}}else if(t.Type=="LocalFunctionStat")c(t.FunctionStat.Token_Function),c(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((l,i)=>{i>0?c(l):f(l);let u=t.FunctionStat.Token_ArgCommaList[i];u&&f(u)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(f(t.FunctionStat.Token_Varg),c(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&f(t.FunctionStat.Token_Varg),f(t.FunctionStat.Token_OpenParen),f(t.FunctionStat.Token_CloseParen),k(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((l,i)=>{i==0&&c(l),t.Token_NameChainSeperator[i]}),t.ArgList.forEach((l,i)=>{i>0&&c(l),t.Token_ArgCommaList[i]}),t.ArgList.length>0&&t.Token_Varg&&c(t.Token_Varg),k(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")k(t.Token_Repeat,t.Body,t.Token_Until),d(t.Condition),p(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((l,i)=>{c(l),t.Token_VarCommaList[i]}),c(t.Token_In),t.GeneratorList.forEach((l,i)=>{d(l),p(l),t.Token_GeneratorCommaList[i]}),c(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((l,i)=>{c(l),t.Token_VarCommaList[i]}),c(t.Token_Equals),t.RangeList.forEach((l,i)=>{d(l),p(l),t.Token_RangeCommaList[i]}),c(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")d(t.Condition),p(t.Condition),c(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){d(t.Condition),p(t.Condition),c(t.Token_Then);let l=t.Token_Then,i=t.Body;t.ElseClauseList.forEach(u=>{k(l,i,u.Token),l=u.Token,u.Condition!=null&&(d(u.Condition),p(u.Condition),c(u.Token_Then),l=u.Token_Then),i=u.Body}),k(l,i,t.Token_End)}else t.Type=="CallExprStat"?d(t.Expression):t.Type=="CompoundStat"?(d(t.Lhs),d(t.Rhs),p(t.Lhs),p(t.Rhs),c(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((l,i)=>{d(l),i>0&&p(l),t.Token_LhsSeperatorList[i]}),c(t.Token_Equals),t.Rhs.forEach((l,i)=>{d(l),p(l),t.Token_RhsSeperatorList[i]})):V(!1,"Unreachable")}}}},_(ne)}function De(ne){let _,d;function s(e){e&&(e.LeadingWhite="")}function g(e,T,f=!1){s(T);let c=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),p=(typeof T.Source=="string"?T.Source:T.Source.toString()).substr(0,1);c=="-"&&p=="-"||yt.includes(c)&&yt.includes(p)||f&&c==")"&&p=="("?T.LeadingWhite=f?";":" ":T.LeadingWhite=""}function m(e,T,f){_(T),s(f);let c=T.GetFirstToken(),p=T.GetLastToken();c!=null?(g(e,c),g(p,f)):g(e,f)}d=function(e){if(e.Type==="BinopExpr")d(e.Lhs),d(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(s(e.Token_Op),g(e.Lhs.GetLastToken(),e.Token_Op)),g(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")s(e.Token_Op),d(e.Rhs),g(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")s(e.Token);else if(e.Type=="FieldExpr")d(e.Base),s(e.Token_Dot),s(e.Field);else if(e.Type=="IndexExpr")d(e.Base),s(e.Token_OpenBracket),d(e.Index),s(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")d(e.Base),e.Type=="MethodExpr"&&(s(e.Token_Colon),s(e.Method)),e.FunctionArguments.CallType=="StringCall"?s(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(s(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((T,f)=>{d(T);let c=e.FunctionArguments.Token_CommaList[f];c!=null&&s(c)}),s(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&d(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")s(e.Token_Function),s(e.Token_OpenParen),e.ArgList.forEach((T,f)=>{s(T);let c=e.Token_ArgCommaList[f];c!=null&&s(c)}),e.Token_Varg!=null&&s(e.Token_Varg),s(e.Token_CloseParen),m(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")s(e.Token);else if(e.Type=="ParenExpr")s(e.Token_OpenParen),d(e.Expression),s(e.Token_CloseParen);else if(e.Type=="TableLiteral")s(e.Token_OpenBrace),e.EntryList.forEach((T,f)=>{T.EntryType=="Field"?(s(T.Field),s(T.Token_Equals),d(T.Value)):T.EntryType=="Index"?(s(T.Token_OpenBracket),d(T.Index),s(T.Token_CloseBracket),s(T.Token_Equals),d(T.Value)):T.EntryType=="Value"?d(T.Value):V(!1,"unreachable");let c=e.Token_SeperatorList[f];c!=null&&s(c)}),e.Token_SeperatorList[e.EntryList.length-1]=null,s(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},_=function(e){if(e.Type=="StatList"){let T;for(T=0;T<=e.StatementList.length;T++){let f=e.StatementList[T];if(f==null)continue;_(f),s(f.GetFirstToken());let c=e.StatementList[T-1];if(c!=null){let p={")":["(","["],"]":["(","["]};if(e.SemicolonList[T-1]){let k=c.GetLastToken().Source,t=f.GetFirstToken().Source;(p[k]===null||p[k]===void 0||!p[k].includes(t))&&(e.SemicolonList[T-1]=null)}e.SemicolonList[T-1]||g(c.GetLastToken(),f.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&s(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")s(e.Token_Break);else if(e.Type=="ContinueStat")s(e.Token_Continue);else if(e.Type=="GotoStat")s(e.Token_Goto),g(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")s(e.Token_ColonsLeft),s(e.Token_Label),s(e.Token_ColonsRight);else if(e.Type=="ReturnStat")s(e.Token_Return),e.ExprList.forEach((T,f)=>{d(T),e.Token_CommaList[f]!=null&&s(e.Token_CommaList[f])}),e.ExprList.length>0&&g(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){s(e.Token_Local);let T=!1;e.VarList.forEach((f,c)=>{c==0?g(e.Token_Local,f):s(f),f.Attribute&&(s(f.Attribute),c+1==e.VarList.length&&(T=!0));let p=e.Token_VarCommaList[c];p!=null&&s(p)}),e.Token_Equals!=null&&(T||s(e.Token_Equals),e.ExprList.forEach((f,c)=>{d(f);let p=e.Token_ExprCommaList[c];p!=null&&s(p)}))}else if(e.Type=="LocalFunctionStat")s(e.Token_Local),g(e.Token_Local,e.FunctionStat.Token_Function),g(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),g(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((T,f)=>{s(T);let c=e.FunctionStat.Token_ArgCommaList[f];c!=null&&s(c)}),e.FunctionStat.Token_Varg&&s(e.FunctionStat.Token_Varg),s(e.FunctionStat.Token_CloseParen),m(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")s(e.Token_Function),e.NameChain.forEach((T,f)=>{f==0?g(e.Token_Function,T):s(T);let c=e.Token_NameChainSeperator[f];c!=null&&s(c)}),s(e.Token_OpenParen),e.ArgList.forEach((T,f)=>{s(T);let c=e.Token_ArgCommaList[f];c!=null&&s(c)}),e.Token_Varg&&s(e.Token_Varg),s(e.Token_CloseParen),m(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")s(e.Token_Repeat),m(e.Token_Repeat,e.Body,e.Token_Until),d(e.Condition),g(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")s(e.Token_For),e.VarList.forEach((T,f)=>{f==0?g(e.Token_For,T):s(T);let c=e.Token_VarCommaList[f];c!=null&&s(c)}),g(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((T,f)=>{d(T),f==0&&g(e.Token_In,T.GetFirstToken());let c=e.Token_GeneratorCommaList[f];c!=null&&s(c)}),g(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")s(e.Token_For),e.VarList.forEach((T,f)=>{f==0?g(e.Token_For,T):s(T);let c=e.Token_VarCommaList[f];c!=null&&s(c)}),g(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((T,f)=>{d(T),f==0&&g(e.Token_Equals,T.GetFirstToken());let c=e.Token_RangeCommaList[f];c!=null&&s(c)}),g(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")s(e.Token_While),d(e.Condition),s(e.Token_Do),g(e.Token_While,e.Condition.GetFirstToken()),g(e.Condition.GetLastToken(),e.Token_Do),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")s(e.Token_Do),s(e.Token_End),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){s(e.Token_If),d(e.Condition),g(e.Token_If,e.Condition.GetFirstToken()),g(e.Condition.GetLastToken(),e.Token_Then);let T=e.Token_Then,f=e.Body;e.ElseClauseList.forEach((c,p)=>{m(T,f,c.Token),T=c.Token,c.Condition!=null&&(d(c.Condition),g(c.Token,c.Condition.GetFirstToken()),g(c.Condition.GetLastToken(),c.Token_Then),T=c.Token_Then),_(c.Body),f=c.Body}),m(T,f,e.Token_End)}else if(e.Type=="CallExprStat")d(e.Expression);else if(e.Type=="CompoundStat")d(e.Lhs),s(e.Token_Compound),d(e.Rhs),g(e.Lhs.GetLastToken(),e.Token_Compound),g(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((T,f)=>{d(T);let c=e.Token_LhsSeperatorList[f];c!=null&&s(c)}),s(e.Token_Equals),e.Rhs.forEach((T,f)=>{d(T);let c=e.Token_RhsSeperatorList[f];c!=null&&s(c)});else return d(e)},_(ne)}function ht(ne){let _,d,s={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function g(t,l,i=null){let u;return u={Type:t,Token:{Type:i??"Number",LeadingWhite:"",Source:l},GetFirstToken:()=>u.Token,GetLastToken:()=>u.Token},u}function m(t,l,i){let u;return u={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:l,Rhs:i,GetFirstToken:()=>u.Lhs.GetFirstToken(),GetLastToken:()=>u.Rhs.GetLastToken()},u}function e(t,l){let i;return i={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:l,GetFirstToken:()=>i.Token_Op,GetLastToken:()=>i.Rhs.GetLastToken()},i}function T(t,l){if(l!=null)for(var[i,u]of Object.entries(l))t[i]=u}function f(t){if(t==null||t.substr==null)return;let l=t.substr(0,1),i;if((l=='"'||l=="'")&&(i=t.substr(1,t.length-2)),l=="["){let re=0,se=1;for(;t.substr(se,1)=="=";)re++,se++;i=t.substr(2+re,t.length-4-re-2)}if(i==null)return"";let u="",B;for(B=0;B<=i.length;B++){let re=i.substr(B,1);re=="'"||re=='"'?u+=`\\${re}`:u+=re}return u}function c(t){if(typeof t=="object"&&t.Type=="ParenExpr")return T(t,t.Expression)}function p(t,l,i){let u=l,B=i;if(l&&l.Type=="ParenExpr"&&(u=l.Expression),i&&i.Type=="ParenExpr"&&(B=i.Expression),u==null||B==null||u.Type==null||B.Type==null||u.Type=="VariableExpr"||u.Type=="CallExpr"||u.Type=="BinopExpr"||B.Type=="CallExpr"||B.Type=="BinopExpr"||B.Type=="VariableExpr")return;let re=u.Token||u.Expression!=null&&u.Expression.Token||null,se=B.Token||B.Expression!=null&&B.Expression.Token||null,Ge=re!=null?re.Source:null,We=se!=null?se.Source:null,ee,O;if(u.Type=="BooleanLiteral"&&(ee=Ge=="true"),B.Type=="BooleanLiteral"&&(O=We=="true"),!(u.Type=="NumberLiteral"&&(ee=I(Ge),ee==null))&&!(B.Type=="NumberLiteral"&&(O=I(We),O==null))&&((u.Type=="StringLiteral"||u.Type=="HashLiteral")&&(ee=Ge.toString()),(B.Type=="StringLiteral"||B.Type=="HashLiteral")&&(O=We.toString()),ee!=null&&O!=null)){if(t=="==")return ee==O;if(t=="~=")return ee!=O;if(t=="and")return ee&&O;if(t=="or")return ee||O;if(t==".."&&u.Type=="StringLiteral"&&B.Type=="StringLiteral")return`"${f(Ge)+f(We)}"`;if(u.Type=="StringLiteral"&&(ee=I(f(ee))),B.Type=="StringLiteral"&&(O=I(f(O))),ee==null||O==null)return;let ae;if(t=="+"&&(ae=ee+O),t=="-"&&(ae=ee-O),t=="*"&&(ae=ee*O),t=="/"&&(ae=ee/O),t=="^"&&(ae=ee**O),t=="%"&&(ae=ee%O),t==">"&&(ae=ee>O),t=="<"&&(ae=ee<O),t==">="&&(ae=ee>=O),t=="<="&&(ae=ee<=O),ae==!1||ae==!0||isFinite(ae)&&ae>-(10**6)&&ae<10**6)return ae}}function k(t,l){let i=l.Token||l.Expression||l.EntryList||l;if(i==null||i.Source==null&&l.Type!="TableLiteral"||l.Type=="VariableExpr"||l.Type=="CallExpr"||l.Type=="BinopExpr")return;let u=i.Source,B;if(l.Type=="TableLiteral"&&i!=null){let re=[],se=0,Ge=!1,We=!1,ee=0;if(i.forEach((O,ae)=>{if(Ge)re.push(O);else if(O.EntryType=="Value"||O.EntryType=="Index")if((O.Index==null||O.Index.Type=="NumberLiteral")&&O.Value){if((O.Index!=null&&O.Index.Token!=null&&O.Index.Token.Source!==null?O.Index.Token.Source:ee+1).toString()!==(++ee).toString())return Ge=!0,We=!0,re.push(O);O.Value.Type!="CallExpr"?se++:(Ge=!0,re.push(O))}else re.push(O)}),We)return;if(t=="#")return l.EntryList=re,l.EntryList.length<=0?g("NumberLiteral",se!==null?se:l.EntryList.length):se<=0?e("#",l):m("+",g("NumberLiteral",se),e("#",l))}if(l.Type=="BooleanLiteral"&&(B=u=="true"),!(l.Type=="NumberLiteral"&&(B=I(u),B===null))){if(l.Type=="StringLiteral"&&(B=u.substr(1,u.length-2)),t=="not"&&l.Type!==null)return l.Type=="NilLiteral"||l.Type=="BooleanLiteral"&&B===!1;if(B!=null){if(t=="#")return B.length;if(t=="-")return-B}}}d=function(t){if(t.Type=="BinopExpr"){if(d(t.Lhs),d(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let l=t.Token_Op;if(l!=null&&l.Source!=null){let i=p(l.Source,t.Lhs,t.Rhs);if(i!=null){if(typeof i=="boolean"){let u=g("BooleanLiteral",i.toString(),"Keyword");T(t,u);return}else if(typeof i=="number"){if(isFinite(i)==!0){let u=g("NumberLiteral",i.toString(),"Number");T(t,u);return}}else if(typeof i=="string"){let u=g("StringLiteral",i,"String");T(t,u);return}else if(typeof i=="object"){T(t,i);return}return}}if(t.Lhs.Type=="ParenExpr"){let u=t.Lhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let u=t.Rhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(d(t.Rhs),t.Rhs!=null&&s[t.Rhs.Type]==!0){let l=t.Token_Op;if(l!=null&&l.Source!=null){let i=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,u=k(l.Source,i);if(u!=null){if(typeof u=="boolean"){let B=g("BooleanLiteral",u.toString(),"Keyword");T(t,B);return}else if(typeof u=="number"){if(isFinite(u)==!0){let B=g("NumberLiteral",u,"Number");T(t,B);return}}else if(typeof u=="string"){let B=g("StringLiteral",u,"String");T(t,B);return}else if(typeof u=="object"){T(t,u);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let l=t.Token;if(l!=null){if(l.Type=="Number"){let i=l.Source.toString().split("e");if(i.length===2){let u=I(i[0]),B=I(i[1]);isFinite(u)&&isFinite(B)&&u**B<999999999&&!l.Source.includes("+")&&l.Source.includes(".")&&!l.Source.includes("-")&&(l.Source=(u**B).toString())}}l.Type=="String"&&(l.Source=l.Source.replace(/\\\d+/gi,i=>{let u=I(i.substr(1,i.length-1));return u&&isFinite(u)&&(u>=97&&u<=122||u>=65&&u<=90||u>=33&&u<=47||u>=58&&u<=64||u>=91&&u<=96||u>=123&&u<=126)&&u!==34&&u!==39&&u!==92?String.fromCharCode(u):i}))}}else if(t.Type=="FieldExpr")d(t.Base);else if(t.Type=="IndexExpr")d(t.Base),d(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(d(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,i)=>{d(l)}):t.FunctionArguments.CallType=="TableCall"&&d(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let l=t.Base.Expression;t.FunctionArguments.ArgList.forEach((i,u)=>{let B=t.FunctionArguments.ArgList[u];if(B!==void 0&&(B.Type=="NumberLiteral"||B.Type=="StringLiteral"||B.Type=="NilLiteral"||B.Type=="BooleanLiteral"||B.Type=="HashLiteral")){let re=l.ArgList[u];re&&re.var.RenameList.forEach(se=>{se(B.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")_(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let l=t.Expression;l!=null&&l.Type=="ParenExpr"&&(t.Expression=l.Expression),d(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&c(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((l,i)=>{l.EntryType=="Field"?d(l.Value):l.EntryType=="Index"?(d(l.Index),d(l.Value)):l.EntryType=="Value"?d(l.Value):V(!1,"unreachable")})},_=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,i)=>{l===null||l.Type===null||(l.Remove=()=>{t.StatementList[i]=null},_(l))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,i)=>{d(l)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((l,i)=>{d(l)});else if(t.Type=="LocalFunctionStat")_(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")_(t.Body);else if(t.Type=="RepeatStat")_(t.Body),d(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((l,i)=>{d(l)}),_(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((O,ae)=>{d(O)}),_(t.Body);let l=t.RangeList[0],i=t.RangeList[1],u=t.RangeList[2];if(l==null||i==null)return t.Remove();if(c(l),c(i),c(u),l.Type!="NumberLiteral"||i.Type!="NumberLiteral"||u!=null&&u.Type!="NumberLiteral"||u==null)return;let B=I(l.Token.Source),re=I(i.Token.Source),se=u!=null&&I(u.Token.Source)||1,Ge=se>0&&B<=re||se<0&&B>=re,We=(re-B+se)/se;if(!(Ge&&We>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){d(t.Condition),_(t.Body);let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(_(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let l=t.Body.StatementList[0];l.Type!=="ContinueStat"&&l.Type!=="BreakStat"&&l.Type!=="ReturnStat"&&T(t,l)}}else if(t.Type=="IfStat"){d(t.Condition),_(t.Body),t.ElseClauseList.forEach((i,u)=>{i.Condition!=null&&d(i.Condition),_(i.Body)});let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?d(t.Expression):t.Type=="CompoundStat"?(d(t.Lhs),d(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((l,i)=>{d(l)}),t.Rhs.forEach((l,i)=>{d(l)}))}},_(ne)}let ue=[],Ve;for(Ve=97;Ve<=122;Ve++)ue.push(String.fromCharCode(Ve));for(Ve=65;Ve<=90;Ve++)ue.push(String.fromCharCode(Ve));for(Ve=48;Ve<=57;Ve++)ue.push(String.fromCharCode(Ve));ue.push("_");let He=[];for(Ve=97;Ve<=122;Ve++)He.push(String.fromCharCode(Ve));for(Ve=65;Ve<=90;Ve++)He.push(String.fromCharCode(Ve));function ut(ne){let _="",d=ne%He.length;for(ne=(ne-d)/He.length,_=`${_}${He[d]}`;ne>0;){let s=ne%ue.length;ne=(ne-s)/ue.length,_=`${_}${ue[s]}`}return _}function h(ne,_,d){let s=[];for(var[g,m]of Object.entries(lt))s[g]=!0;let e=[];ne.forEach(k=>{k.AssignedTo&&d?e.push(k):s[k.Name]=!0});function T(k){k.VariableList.forEach(t=>{e.push(t)}),k.ChildScopeList.forEach(t=>{T(t)})}T(_),e.forEach(k=>{k.UsedNameArray=[]}),e.sort((k,t)=>k-t);let f=0,c=[];function p(k){let t=c[k];if(t==null){for(t=ut(f),f++;s[t];)t=ut(f),f++;c[k]=t}return t}e.forEach((k,t)=>{k.Renamed=!0;let l=0;for(;k.UsedNameArray[l];)l++;k.Rename(p(l)),k.Scope?e.forEach(i=>{i.Renamed||(!i.Scope||i.Scope.Depth<k.Scope.Depth?i.ReferenceLocationList.some(u=>u>=k.BeginLocation&&u<=k.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1):i.Scope.Depth>k.Scope.Depth?k.ReferenceLocationList.some(u=>u>=i.BeginLocation&&u<=i.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1):k.BeginLocation<i.EndLocation&&k.EndLocation>i.BeginLocation&&(i.UsedNameArray[l]=!0))}):e.forEach(i=>{if(!i.Renamed)if(i.Type=="Global")i.UsedNameArray[l]=!0;else if(i.Type=="Local")k.ReferenceLocationList.some(u=>u>=i.BeginLocation&&u<=i.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1);else throw"Unreachable"})})}function w(ne,_,d){let s=[];ne.forEach(f=>{(!f.AssignedTo||!d)&&(s[f.Name]=!0)});let g=1,m=1;function e(f,c){f.Name=c,f.RenameList.forEach(p=>{p(c)})}if(d){let f={};ne.forEach(c=>{c.AssignedTo&&!c.ChangedName&&(f[c.Name]=f[c.Name]||`G_${m}_`,c.ChangedName=!0,e(c,f[c.Name]),m++)})}function T(f){f.VariableList.forEach(c=>{let p=`L_${g}_`;c.Info.Type=="Argument"?p=`${p}arg${c.Info.Index}`:c.Info.Type=="LocalFunction"?p=`${p}func`:c.Info.Type=="ForRange"&&(p=`${p}forvar${c.Info.Index}`),e(c,p),g++}),f.ChildScopeList.forEach(c=>{T(c)})}T(_)}let ze=`--[[
	Code generated using github.com/Herrtt/luamin.js
	An open source Lua beautifier and minifier.
--]]

`,Je={};Je.Minify=function(ne,_){let d=fe(ne),[s,g]=mt(d);_.RenameVariables==!0&&h(s,g,_.RenameGlobals),_.SolveMath==!0&&ht(d),De(d);let m=he(d);return m=`${ze}

${m}`,m},Je.Beautify=function(ne,_){let d=fe(ne),[s,g]=mt(d);_.RenameVariables&&w(s,g,_.RenameGlobals),_.SolveMath==!0&&ht(d),gt(d);let m=he(d);return m=`${ze}

${m}`,m};try{ft!=null&&ft.exports!=null&&(ft.exports.Beautify=Je.Beautify,ft.exports.Minify=Je.Minify)}catch{}})(Ut);var kn=Ut.exports;const Nt=kn;At.Beautify=Nt.Beautify;At.Minify=Nt.Minify;At.Uglify=Nt.Uglify;const jt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Ht={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},bn={class:"page-div"},Sn={class:"card-header"},Ln={key:0},vn={class:"el-form-item-msg"},Vn={class:"card-header"},Cn={style:{display:"flex","flex-wrap":"wrap"}},En={style:{width:"99%"}},wn={style:{width:"100%"}},Fn={style:{"font-weight":"bolder"}},An={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Mn={class:"item-container"},Gn={style:{"font-weight":"bolder"}},Rn={class:"item-container"},In={style:{"font-weight":"bolder"}},Pn={class:"item-container"},xn={style:{"font-weight":"bolder"}},Un={class:"item-container"},Nn={style:{"font-weight":"bolder"}},Dn={class:"item-container"},zn={style:{"font-weight":"bolder"}},Wn={class:"item-container"},$n={style:{"font-weight":"bolder"}},On={class:"item-container"},qn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},Zn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},el={class:"item-container"},tl={style:{"font-weight":"bolder"}},nl={class:"item-container"},ll={style:{"font-weight":"bolder"}},al={class:"item-container"},ol={style:{"font-weight":"bolder"}},rl={class:"item-container"},il={style:{"font-weight":"bolder"}},ul={class:"item-container"},sl={style:{"font-weight":"bolder"}},dl={class:"item-container"},fl={style:{"font-weight":"bolder"}},cl={class:"item-container"},pl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},hl={class:"item-container"},Tl={style:{"font-weight":"bolder"}},yl={class:"item-container"},_l={style:{"font-weight":"bolder"}},kl={class:"item-container"},bl={class:"tip"},Sl={style:{display:"flex","align-items":"center"}},Ll={style:{display:"flex","justify-content":"flex-end"}},vl={class:"tip_warning"},Vl={style:{margin:"10px"}},Cl={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},El={__name:"room",setup(ft){const{t:S}=rn();un(async()=>{V.value=window.innerHeight,window.addEventListener("resize",()=>{V.value=window.innerHeight}),await je(),await ae(),await pt(),await ue(),c()});const ye=Re(!1),V=Re(0),{isMobile:I}=sn(),Se=dn(),_e=fn(),Le=Pt(()=>Se.isDark),we=Pt(()=>Se.language),yt=_e.userInfo,Ie=Pt(()=>{const L=(et.value||[]).findIndex(Y=>Y.clusterName===Se.selectedDstCluster);return L!==-1?L:0}),ct=cn();pn();const _t=mn(),it=gn("refresh"),Qe=(R,L)=>{let Y=null;return(...me)=>{Y&&clearTimeout(Y),Y=setTimeout(()=>R(...me),L)}},et=Re([]),je=()=>{kt.clusters.all.get().then(R=>{et.value=R.data})},lt=()=>{kt.clusters.get().then(R=>{Se.dstClusters=R.data,Se.selectedDstCluster===null&&Se.dstClusters!==null&&(Se.selectedDstCluster=Se.dstClusters[0].clusterName)})},qe=Re(0),pt=()=>{hn.userInfo.get().then(R=>{qe.value=R.data.maxWorldsPerCluster})},tt=()=>{setTimeout(()=>{ct.meta.isKeepAlive&&_t.removeKeepAliveName(ct.name),it(!1),bt(()=>{ct.meta.isKeepAlive&&_t.addKeepAliveName(ct.name),it(!0)})},0)},Ee=Re(0),ce=Re(!1),ie=R=>{Ee.value>R&&(Ee.value=R)},fe=()=>{Ee.value--},at=async()=>{if(Ee.value===0&&mt.value.validate(async R=>{R&&(ht.value||(g.value=1,m.value="World1",e.value=[{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Ie.value*10,shardMasterPort:10888+Ie.value*10,steamMasterPort:27018+Ie.value*10,steamAuthenticationPort:8768+Ie.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0,saved:!1}]),Ee.value++)}),Ee.value===1){if(yt.role!=="admin"&&e.value.length>qe.value){let L="";we.value==="zh"?L=`超过最大可创建世界数量，当前最大可创建世界数为${qe.value}`:L=`Exceeds the maximum number of worlds that can be created. The current maximum is ${qe.value}`,rt(L);return}const R=["serverPort","shardMasterPort","steamMasterPort","steamAuthenticationPort"];for(let L of e.value)for(const Y of O.value)if(Y.clusterName!==Se.selectedDstCluster){for(let me of R)if(Y.worldPort!==null&&Y.worldPort.includes(L[me])){rt(`[${S(`setting.roomWorldForm.${me}`)}]:${L[me]} ${we.value==="zh"?"端口冲突，请检查并修改":"Port Conflicted, please check and modify"}`,3e3);return}}for(let L in f)f!=null&&f.key&&await f[L].validate();for(let L of e.value){if(L.levelData===""){rt(we.value==="zh"?"请输入世界配置":"Please input world configure");return}if(L.shardMasterPort!==e.value[0].shardMasterPort){rt(we.value==="zh"?"主节点端口必须一致":"Master Port must be same");return}try{wt.parse(L.levelData)}catch{rt(S("setting.luaError"));return}}Ee.value++;return}if(Ee.value===2)if(De.value)try{wt.parse(De.value.mod),Ee.value++}catch{rt(S("setting.luaError"))}else Ee.value++},mt=Re(),he=Re({clusterName:Se.selectedDstCluster,name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,consoleEnabled:!0,password:"",token:""}),gt={name:[{required:!0,message:S("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:S("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:S("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:S("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:S("setting.roomBaseFormRules.token"),trigger:"blur"}]},De=Re({mod:""}),ht=Re(!1),ue=()=>{const R={clusterName:Se.selectedDstCluster};kt.cluster.get(R).then(L=>{if(he.value=L.data.clusterSetting,L.data.worlds){e.value=L.data.worlds;let Y=1,me=999999;for(let Pe of e.value){let $e=parseInt(Pe.name.replace("World",""));$e>Y&&(Y=$e),$e<me&&(me=$e),Pe.saved=!0}g.value=Y,m.value="World"+me.toString(),ht.value=!0}else ht.value=!1;De.value.mod=L.data.mod})},Ve=async R=>{switch(R){case"save":He();break;case"saveAndRestart":ut();break;case"generateNewWorld":h();break}},He=()=>{const R={clusterSetting:he.value,worlds:e.value,mod:De.value.mod,sysSetting:{}};ye.value=!0,kt.cluster.save.post(R).then(L=>{xt(L.message),ye.value=!1,lt()}).finally(()=>{ye.value=!1,bt(()=>{tt()})})},ut=()=>{const R={clusterSetting:he.value,worlds:e.value,mod:De.value.mod,sysSetting:{}};ye.value=!0,kt.cluster.saveRestart.post(R).then(L=>{xt(L.message),ye.value=!1,lt()}).finally(()=>{ye.value=!1,bt(()=>{tt()})})},h=()=>{const R={clusterSetting:he.value,worlds:e.value,mod:De.value.mod,sysSetting:{}};ye.value=!0,kt.cluster.saveRegenerate.post(R).then(L=>{xt(L.message),ye.value=!1,lt()}).finally(()=>{ye.value=!1,bt(()=>{tt()})})},w=Re({}),ze=R=>{if(R==="")return;const L=wt.parse(R),Y=Je(L);w.value=ne(Y)};function Je(R){const Y=R.body[0].arguments[0];for(const me of Y.fields)if(me.key.type==="Identifier"&&me.key.name==="overrides")return me.value;return null}function ne(R){const L={};for(const Y of R.fields){const me=Y.key.name;L[me]=Y.value.raw.replace(/"/g,"")}return L}const _=R=>{let L=At.Beautify(R,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return L=L.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),L=L.replace(/ = /g,"="),L=L.replace(/\t/g,"  "),L=L.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),L=L.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),L=L.replace(/(.+)},\n/g,`$1
  },
`),L=L.replace(/^ +?\n/gm,""),L},d=Qe(R=>{const L=R.name,Y=R.value;for(let me of e.value)if(me.name===m.value){const Pe=wt.parse(me.levelData),$e=Je(Pe);for(let Ze of $e.fields)Ze.key.name===L&&(Ze.value.raw=`"${Y}"`);me.levelData=s(Pe);break}},100),s=(R,L=0)=>{const Y="    ".repeat(L);switch(R.type){case"Chunk":return R.body.map(me=>s(me,L)).join(`
`);case"LocalStatement":return`${Y}local ${R.variables.map(s).join(", ")} = ${R.init.map(s).join(", ")}`;case"FunctionDeclaration":return`${Y}function ${s(R.identifier)}(${R.parameters.map(s).join(", ")}) 
${s(R.body,L+1)}
${Y}end`;case"ReturnStatement":return`${Y}return ${R.arguments.map(s).join(", ")}`;case"BinaryExpression":return`${s(R.left)} ${R.operator} ${s(R.right)}`;case"CallStatement":return`${Y}${s(R.expression)}`;case"Identifier":return R.name;case"StringLiteral":return`${R.raw}`;case"NumericLiteral":return R.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${Y}{ ${R.fields.map(me=>s(me,L+1)).join(`,
`+Y)} }`;case"Field":return R.key?`${s(R.key)} = ${s(R.value)}`:s(R.value);case"AssignmentStatement":return`${Y}${R.variables.map(s).join(", ")} = ${R.init.map(s).join(", ")}`;case"CallExpression":return`${s(R.base)}(${R.arguments.map(s).join(", ")})`;case"TableKeyString":return`${s(R.key)} = ${s(R.value)}`;case"BooleanLiteral":return R.raw;case"TableKey":return`[${s(R.key)}] = ${s(R.value)}`;case"TableValue":return s(R.value);default:throw new Error(`Unsupported node type: ${R.type}`)}},g=Re(1),m=Re("World1"),e=Re([{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Ie.value*10,shardMasterPort:10888+Ie.value*10,steamMasterPort:27018+Ie.value*10,steamAuthenticationPort:8768+Ie.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}]),T={id:[{required:!0,message:S("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:S("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:S("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:S("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:S("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:S("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:S("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},f={},c=()=>{for(let R of e.value){const L=e.value.length;g.value=L,f[`World${L}`]=Re()}},p=(R,L)=>{if(L==="add"){g.value++;const Y=`World${g.value}`;f[Y]=Re(),e.value.push({id:g.value+100,name:Y,isMaster:!1,levelData:"",serverPort:11e3+g.value+Ie.value*10,shardMasterPort:10888+Ie.value*10,steamMasterPort:27017+g.value+Ie.value*10,steamAuthenticationPort:8767+g.value+Ie.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}),m.value=Y}else if(L==="remove"){if(e.value.length===1){rt(we.value==="zh"?"每个房间至少含有一个世界":"Every room must include at least one world");return}const Y=e.value;let me=m.value;Y.forEach((Pe,$e)=>{if(Pe.name===R){const Ze=Y[$e+1]||Y[$e-1];Ze&&(me=Ze.name)}}),m.value=me,e.value=Y.filter(Pe=>Pe.name!==R),delete f[R]}k.value="Code"},k=Re("Code"),t=R=>{for(let L of e.value)L.name===m.value&&(R.clusterType==="endless"&&(R.worldType==="ground"&&(L.levelData=jt.master),R.worldType==="cave"&&(L.levelData=jt.caves)),R.clusterType==="survival"&&(R.worldType==="ground"&&(L.levelData=Ht.master),R.worldType==="cave"&&(L.levelData=Ht.caves)))},l=Re(""),i=async R=>{if(R==="Visualization")try{for(let L of e.value)if(L.name===m.value){l.value=u(L.levelData),await ze(L.levelData);break}}catch{rt(we.value==="zh"?"可视化配置加载失败":"Visualization load failed")}R==="Code"&&await bt(()=>{for(let L of e.value)if(L.name===m.value){L.levelData=_(L.levelData);break}})},u=R=>{const L=/location\s*=\s*"([^"]*)"/,Y=R.match(L);return Y?Y[1]:""},B=()=>{k.value="Code"},re=Re(!1),se=Re(""),Ge=Re([]),We=()=>{Ge.value=[{ID:void 0,name:"",maxPlayers:void 0}],se.value="",re.value=!0},ee=()=>{let R="",L="";for(let Y of Ge.value){if(!Y.ID){rt(we.value==="zh"?"世界ID未填写":"World ID is required");return}if(!Y.name){rt(we.value==="zh"?"世界名未填写":"World name is required");return}if(!Y.maxPlayers){rt(we.value==="zh"?"世界最大玩家数未填写":"World max players is required");return}R=R+`["${Y.ID}"]="${Y.name}",`,L=L+`["${Y.ID}"]="${Y.maxPlayers}",`}se.value=`
  ["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${L}},
      say_dest=true,
      world_name={${R}},
      world_prompt=true
    },
    enabled=true
  }`,se.value="```lua ::open\n"+se.value},O=Re([]),ae=()=>{kt.clustersWorldPort.get().then(R=>{O.value=R.data})};return Tn(()=>Se.selectedDstCluster,R=>{R&&bt(()=>{tt()})},{immediate:!1}),(R,L)=>{const Y=Ae("el-step"),me=Ae("el-steps"),Pe=Ae("el-card"),$e=Ae("el-col"),Ze=Ae("el-row"),Ne=Ae("el-input"),Fe=Ae("el-form-item"),Xe=Ae("el-radio"),st=Ae("el-radio-group"),ot=Ae("el-switch"),Ke=Ae("el-slider"),v=Ae("el-link"),M=Ae("el-form"),E=Ae("el-scrollbar"),b=Ae("el-icon"),P=Ae("el-button"),U=Ae("el-dropdown-item"),x=Ae("el-dropdown-menu"),W=Ae("el-dropdown"),te=Ae("el-tooltip"),de=Ae("el-tab-pane"),Z=Ae("el-divider"),ke=Ae("el-tabs"),Oe=Ae("el-result"),be=Ae("el-dialog");return N(),le("div",bn,[C(Ze,{gutter:10},{default:G(()=>[C($e,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:G(()=>[C(Pe,{shadow:"never"},{default:G(()=>[C(me,{active:Ee.value,"align-center":"","finish-status":"success"},{default:G(()=>[C(Y,{title:a(I)?a(S)("setting.roomSettingMobile"):a(S)("setting.roomSetting"),onClick:L[0]||(L[0]=D=>ie(0))},null,8,["title"]),C(Y,{title:a(I)?a(S)("setting.worldSettingMobile"):a(S)("setting.worldSetting"),onClick:L[1]||(L[1]=D=>ie(1))},null,8,["title"]),C(Y,{title:a(I)?a(S)("setting.modSettingMobile"):a(S)("setting.modSetting"),onClick:L[2]||(L[2]=D=>ie(3))},null,8,["title"]),C(Y,{title:a(I)?a(S)("setting.finishSettingMobile"):a(S)("setting.finishSetting"),onClick:L[3]||(L[3]=D=>ie(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),C(Ze,{gutter:10,style:{"margin-top":"5px"}},{default:G(()=>[C($e,{lg:24,md:24,sm:24,span:24,xs:24},{default:G(()=>[Ee.value===0?(N(),ge(Pe,{key:0,shadow:"never"},{header:G(()=>[X("div",Sn,[X("span",null,J(a(S)("setting.roomSetting")),1)])]),default:G(()=>[C(E,{height:V.value-438},{default:G(()=>[C(M,{ref_key:"clusterSettingFormRef",ref:mt,"label-position":a(I)?"top":"left","label-width":a(I)?"70":"auto",model:he.value,rules:gt,size:a(I)?"small":"large",style:{"margin-right":"16px"}},{default:G(()=>[C(Fe,{label:a(S)("setting.baseForm.room"),prop:"name",style:dt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[C(Ne,{modelValue:he.value.name,"onUpdate:modelValue":L[4]||(L[4]=D=>he.value.name=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),a(I)?nt("",!0):(N(),le("div",Ln)),C(Fe,{label:a(S)("setting.baseForm.description"),prop:"description",style:dt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[C(Ne,{modelValue:he.value.description,"onUpdate:modelValue":L[5]||(L[5]=D=>he.value.description=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.gameMode.name"),prop:"gameMode",style:dt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[C(st,{modelValue:he.value.gameMode,"onUpdate:modelValue":L[6]||(L[6]=D=>he.value.gameMode=D)},{default:G(()=>[C(Xe,{label:a(S)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),C(Xe,{label:a(S)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),C(Xe,{label:a(S)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),C(Xe,{label:a(S)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.pvp"),prop:"pvp",style:dt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[C(ot,{modelValue:he.value.pvp,"onUpdate:modelValue":L[7]||(L[7]=D=>he.value.pvp=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.playerNum"),prop:"playerNum",style:dt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[C(Ke,{modelValue:he.value.playerNum,"onUpdate:modelValue":L[8]||(L[8]=D=>he.value.playerNum=D),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.backDays"),prop:"backDays",style:dt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[C(Ke,{modelValue:he.value.backDays,"onUpdate:modelValue":L[9]||(L[9]=D=>he.value.backDays=D),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.vote"),prop:"vote",style:dt(a(I)?"padding-top: 0px":"padding-top: 29px")},{default:G(()=>[C(ot,{modelValue:he.value.vote,"onUpdate:modelValue":L[10]||(L[10]=D=>he.value.vote=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.password"),style:dt(a(I)?"padding-top: 0px":"padding-top: 30px")},{default:G(()=>[C(Ne,{modelValue:he.value.password,"onUpdate:modelValue":L[11]||(L[11]=D=>he.value.password=D),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["label","style"]),C(Fe,{label:a(S)("setting.baseForm.token"),prop:"token",style:dt(a(I)?"padding-top: 0px":"padding-top: 30px")},{default:G(()=>[C(Ne,{modelValue:he.value.token,"onUpdate:modelValue":L[12]||(L[12]=D=>he.value.token=D),"show-password":""},null,8,["modelValue"]),X("div",vn,[C(v,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:G(()=>[pe(J(a(S)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label","style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):nt("",!0),Ee.value===1?(N(),ge(Pe,{key:1,shadow:"never"},{header:G(()=>[X("div",Vn,[X("span",null,J(a(S)("setting.worldSetting")),1),X("div",null,[C(W,{trigger:"click",onCommand:t},{dropdown:G(()=>[C(x,null,{default:G(()=>[C(U,{command:{clusterType:"endless",worldType:"ground"},disabled:he.value.gameMode!=="endless"},{default:G(()=>[pe(J(a(S)("setting.endless"))+"-"+J(a(S)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),C(U,{command:{clusterType:"endless",worldType:"cave"},disabled:he.value.gameMode!=="endless"},{default:G(()=>[pe(J(a(S)("setting.endless"))+"-"+J(a(S)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"]),C(U,{command:{clusterType:"survival",worldType:"ground"},disabled:he.value.gameMode!=="survival"},{default:G(()=>[pe(J(a(S)("setting.survival"))+"-"+J(a(S)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),C(U,{command:{clusterType:"survival",worldType:"cave"},disabled:he.value.gameMode!=="survival"},{default:G(()=>[pe(J(a(S)("setting.survival"))+"-"+J(a(S)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"])]),_:1})]),default:G(()=>[C(P,{disabled:k.value!=="Code",type:"success"},{default:G(()=>[pe(J(a(S)("setting.oneClick"))+" ",1),C(b,{class:"el-icon--right"},{default:G(()=>[C(a(qt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:G(()=>[C(E,{height:V.value-450},{default:G(()=>[C(ke,{modelValue:m.value,"onUpdate:modelValue":L[14]||(L[14]=D=>m.value=D),editable:"",type:"card",onEdit:p,onTabChange:B,style:{"margin-right":"16px"}},{default:G(()=>[(N(!0),le(Ce,null,Be(e.value,D=>(N(),ge(de,{key:D.name,label:we.value==="zh"?"世界":"World",name:D.name},{default:G(()=>[C(Ze,null,{default:G(()=>[C(M,{ref_for:!0,ref:r=>f[D.name]=r,"label-position":a(I)||we.value==="en"?"top":"left",model:D,rules:T,size:a(I)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:G(()=>[X("div",Cn,[C(Fe,{label:a(S)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.isMasterTip"),effect:"light",placement:"top"},{default:G(()=>[C(ot,{modelValue:D.isMaster,"onUpdate:modelValue":r=>D.isMaster=r,"active-text":we.value==="zh"?"是":"Y","inactive-text":we.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:G(()=>[C(ot,{modelValue:D.encodeUserPath,"onUpdate:modelValue":r=>D.encodeUserPath=r,"active-text":we.value==="zh"?"是":"Y","inactive-text":we.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.idTip"),effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.id,"onUpdate:modelValue":r=>D.id=r,modelModifiers:{number:!0},disabled:D.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.serverPortTip"),effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.serverPort,"onUpdate:modelValue":r=>D.serverPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.noEdit")+"，cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.shardMasterPort,"onUpdate:modelValue":r=>D.shardMasterPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.noEdit")+"，server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.steamMasterPort,"onUpdate:modelValue":r=>D.steamMasterPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.noEdit")+"，server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.steamAuthenticationPort,"onUpdate:modelValue":r=>D.steamAuthenticationPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.shardMasterIp,"onUpdate:modelValue":r=>D.shardMasterIp=r,disabled:D.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),C(Fe,{label:a(S)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:G(()=>[C(te,{"show-after":100,content:a(S)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:G(()=>[C(Ne,{modelValue:D.clusterKey,"onUpdate:modelValue":r=>D.clusterKey=r,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),X("div",En,[C(ke,{modelValue:k.value,"onUpdate:modelValue":L[13]||(L[13]=r=>k.value=r),onTabChange:i},{default:G(()=>[C(de,{label:we.value==="zh"?"配置文件":"Code",name:"Code"},{default:G(()=>[X("div",wn,[C(M,{model:D},{default:G(()=>[C(Fe,null,{default:G(()=>[C(Kt,{modelValue:D.levelData,"onUpdate:modelValue":r=>D.levelData=r,height:V.value*.5,theme:Le.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(he.value.gameMode==="endless"||he.value.gameMode==="survival")&&D.levelData!==""?(N(),ge(de,{key:0,label:a(S)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:G(()=>[l.value==="forest"&&Object.keys(w.value).length!==0?(N(),le(Ce,{key:0},[C(Z,{"content-position":"center"},{default:G(()=>[X("span",Fn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),X("div",An,[(N(!0),le(Ce,null,Be(a(Tt).global,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Bn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),X("div",Mn,[(N(!0),le(Ce,null,Be(a(Tt).events,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Gn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),X("div",Rn,[(N(!0),le(Ce,null,Be(a(Tt).survivors,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",In,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),X("div",Pn,[(N(!0),le(Ce,null,Be(a(Tt).world,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",xn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),X("div",Un,[(N(!0),le(Ce,null,Be(a(Tt).resourceRegrowth,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Nn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),X("div",Dn,[(N(!0),le(Ce,null,Be(a(Tt).unnaturalPortalResource,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",zn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),X("div",Wn,[(N(!0),le(Ce,null,Be(a(Tt).creatures,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",$n,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),X("div",On,[(N(!0),le(Ce,null,Be(a(Tt).hostileCreatures,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",qn,J(a(S)("setting.groundVisualizationRule")),1),pe(" - "+J(a(S)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),X("div",Kn,[(N(!0),le(Ce,null,Be(a(Tt).giants,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",jn,J(a(S)("setting.groundVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),X("div",Hn,[(N(!0),le(Ce,null,Be(a(St).global,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Jn,J(a(S)("setting.groundVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),X("div",Yn,[(N(!0),le(Ce,null,Be(a(St).world,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Zn,J(a(S)("setting.groundVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),X("div",Xn,[(N(!0),le(Ce,null,Be(a(St).resources,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Qn,J(a(S)("setting.groundVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),X("div",el,[(N(!0),le(Ce,null,Be(a(St).creaturesAndSpawners,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",tl,J(a(S)("setting.groundVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),X("div",nl,[(N(!0),le(Ce,null,Be(a(St).hostileCreaturesAndSpawners,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):nt("",!0),l.value==="cave"&&Object.keys(w.value).length!==0?(N(),le(Ce,{key:1},[C(Z,{"content-position":"center"},{default:G(()=>[X("span",ll,J(a(S)("setting.cavesVisualizationRule")),1),pe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),X("div",al,[(N(!0),le(Ce,null,Be(a(Lt).world,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",ol,J(a(S)("setting.cavesVisualizationRule")),1),pe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),X("div",rl,[(N(!0),le(Ce,null,Be(a(Lt).resourceRegrowth,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",il,J(a(S)("setting.cavesVisualizationRule")),1),pe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),X("div",ul,[(N(!0),le(Ce,null,Be(a(Lt).creatures,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",sl,J(a(S)("setting.cavesVisualizationRule")),1),pe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),X("div",dl,[(N(!0),le(Ce,null,Be(a(Lt).hostileCreatures,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",fl,J(a(S)("setting.cavesVisualizationRule")),1),pe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),X("div",cl,[(N(!0),le(Ce,null,Be(a(Lt).giants,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",pl,J(a(S)("setting.cavesVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),X("div",ml,[(N(!0),le(Ce,null,Be(a(Et).world,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(vt)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(vt)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(vt)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(vt)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(vt)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",gl,J(a(S)("setting.cavesVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),X("div",hl,[(N(!0),le(Ce,null,Be(a(Et).resources,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",Tl,J(a(S)("setting.cavesVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),X("div",yl,[(N(!0),le(Ce,null,Be(a(Et).creaturesAndSpawners,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),C(Z,{"content-position":"center"},{default:G(()=>[X("span",_l,J(a(S)("setting.cavesVisualizationGeneration")),1),pe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),X("div",kl,[(N(!0),le(Ce,null,Be(a(Et).hostileCreaturesAndSpawners,(r,Q)=>{var q,K,$,j,H;return N(),le("div",null,[(N(),ge(Me,{key:Q,modelValue:w.value[r],"onUpdate:modelValue":oe=>w.value[r]=oe,configs:((q=a(A)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(A)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:(($=a(A)[r])==null?void 0:$.modelValue)||"undefined",i18n:((j=a(A)[r])==null?void 0:j.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):nt("",!0)]),_:2},1032,["label"])):nt("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):nt("",!0),Ee.value===2?(N(),ge(Pe,{key:2,shadow:"never"},{default:G(()=>[X("div",bl,[X("div",Sl,[X("span",null,J(a(S)("setting.multiWorldTip")),1),C(P,{size:"small",style:{"margin-left":"10px"},type:"primary",onClick:We},{default:G(()=>[pe(J(we.value==="zh"?"多层世界":"Multi-world"),1)]),_:1})])]),C(M,{model:De.value},{default:G(()=>[C(Fe,null,{default:G(()=>[C(Kt,{modelValue:De.value.mod,"onUpdate:modelValue":L[15]||(L[15]=D=>De.value.mod=D),height:V.value-481,theme:Le.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):nt("",!0),Ee.value===3?(N(),ge(Pe,{key:3,shadow:"never"},{default:G(()=>[X("div",{style:dt({height:`${V.value-381}px`}),class:"fcc"},[C(Oe,{"sub-title":a(S)("setting.finish.description"),title:a(S)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):nt("",!0)]),_:1})]),_:1}),C(Ze,{gutter:10},{default:G(()=>[C($e,{lg:24,md:24,sm:24,span:24,xs:24},{default:G(()=>[C(Pe,{shadow:"never"},{default:G(()=>[X("div",Ll,[Ee.value>0?(N(),ge(P,{key:0,onClick:fe},{default:G(()=>[pe(J(a(S)("setting.button.prev")),1)]),_:1})):nt("",!0),Ee.value<3?(N(),ge(P,{key:1,type:"primary",loading:ce.value,onClick:at},{default:G(()=>[pe(J(a(S)("setting.button.next")),1)]),_:1},8,["loading"])):nt("",!0),Ee.value===3?(N(),ge(W,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:Ve},{dropdown:G(()=>[C(x,null,{default:G(()=>[C(U,{command:"save"},{default:G(()=>[pe(J(a(S)("setting.button.save")),1)]),_:1}),C(U,{command:"saveAndRestart"},{default:G(()=>[pe(J(a(S)("setting.button.saveAndRestart")),1)]),_:1}),C(U,{command:"generateNewWorld"},{default:G(()=>[pe(J(a(S)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:G(()=>[C(P,{loading:ye.value,type:"warning"},{default:G(()=>[pe(J(a(S)("setting.button.actions"))+" ",1),C(b,{class:"el-icon--right"},{default:G(()=>[C(a(qt))]),_:1})]),_:1},8,["loading"])]),_:1})):nt("",!0)])]),_:1})]),_:1})]),_:1}),C(be,{modelValue:re.value,"onUpdate:modelValue":L[17]||(L[17]=D=>re.value=D),width:"65%"},{header:G(()=>[pe(J(a(S)("setting.multiWorldDialog.title")),1)]),default:G(()=>[X("div",vl,J(a(S)("setting.multiWorldDialog.tip")),1),X("div",Vl,[C(M,{model:Ge.value,"label-position":"top"},{default:G(()=>[(N(!0),le(Ce,null,Be(Ge.value,D=>(N(),ge(Fe,null,{default:G(()=>[C(Ne,{modelValue:D.ID,"onUpdate:modelValue":r=>D.ID=r,placeholder:a(S)("setting.multiWorldDialog.placeholder0"),type:"number",style:{width:"20%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),C(Ne,{modelValue:D.name,"onUpdate:modelValue":r=>D.name=r,placeholder:a(S)("setting.multiWorldDialog.placeholder1"),style:{"margin-left":"2%",width:"48%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),C(Ne,{modelValue:D.maxPlayers,"onUpdate:modelValue":r=>D.maxPlayers=r,placeholder:a(S)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"2%",width:"28%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),X("div",Cl,[C(P,{type:"success",onClick:L[16]||(L[16]=D=>Ge.value.push({ID:void 0,name:"",maxPlayers:void 0}))},{default:G(()=>[pe(J(we.value==="zh"?"新增一条":"New Line"),1)]),_:1}),C(P,{type:"primary",onClick:ee},{default:G(()=>[pe(J(we.value==="zh"?"生成配置":"Generate"),1)]),_:1})])]),_:1},8,["model"]),se.value?(N(),ge(Z,{key:0})):nt("",!0),se.value?(N(),ge(a(yn),{key:1,ref:"threeCodeOneRef",modelValue:se.value,theme:Le.value?"dark":"light",previewTheme:"github"},null,8,["modelValue","theme"])):nt("",!0)])]),_:1},8,["modelValue"])])}}},Ml=on(El,[["__scopeId","data-v-cb7dcf21"]]);export{Ml as default};
