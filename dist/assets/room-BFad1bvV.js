import{a9 as qt,aa as un,_ as sn,u as dn,o as fn,r as Le,a as cn,g as mn,b as pn,c as Wt,D as gn,G as _n,d as hn,H as yn,a0 as ht,Q as Tn,w as bn,I as kt,J as Ae,f as G,i as le,l as b,m as S,j as a,q as re,n as N,t as U,z as at,v as Ve,p as ue,ab as Xt,F as Me,x as Be,C as et,A as Rt}from"./index-DtBQZkmr.js";import{s as Yt}from"./index-BmaSOlBi.js";import{g as pt,_ as Re,o as A,a as Ct,c as Et,b as Gt,d as Ft}from"./levelDataSetting-CFpx4KyV.js";import{M as kn}from"./preview-CuPZt9W6.js";import{b as vn}from"./tools-BzPVPLnk.js";var Pt={exports:{}};Pt.exports;(function(st,T){(function(Ce,M,z){var ye=T&&!T.nodeType&&T,de=st&&!st.nodeType&&st,Ee=ye&&de&&typeof qt=="object"&&qt,dt=de&&de.exports===ye&&ye;Ee&&(Ee.global===Ee||Ee.window===Ee||Ee.self===Ee)&&(Ce=Ee),z(ye&&de?dt?de.exports:ye:Ce[M]={})})(qt,"luaparse",function(Ce){Ce.version="0.3.1";var M,z,ye,de,Ee,dt=Ce.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function ke(n,o){return o=o||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(o|192|n>>6,o|128|n&63):n<65536?String.fromCharCode(o|224|n>>12,o|128|n>>6&63,o|128|n&63):n<1114112?String.fromCharCode(o|240|n>>18,o|128|n>>12&63,o|128|n>>6&63,o|128|n&63):null}function ft(n,o){for(var v=n.toString(16);v.length<o;)v="0"+v;return v}function ze(n){return function(o){var v=n.exec(o);if(!v)return o;fe(null,ae.invalidCodeUnit,ft(v[0].charCodeAt(0),4).toUpperCase())}}var ct={"pseudo-latin1":{fixup:ze(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return ke(n)}},"x-user-defined":{fixup:ze(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return ke(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},lt=1,je=2,Je=4,Oe=8,ot=16,qe=32,Xe=64,rt=128,Ye=256;Ce.tokenTypes={EOF:lt,StringLiteral:je,Keyword:Je,Identifier:Oe,NumericLiteral:ot,Punctuator:qe,BooleanLiteral:Xe,NilLiteral:rt,VarargLiteral:Ye};var ae=Ce.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},ge=Ce.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,o){return{type:"IfClause",condition:n,body:o}},elseifClause:function(n,o){return{type:"ElseifClause",condition:n,body:o}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,o){return{type:"WhileStatement",condition:n,body:o}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,o){return{type:"RepeatStatement",condition:n,body:o}},localStatement:function(n,o){return{type:"LocalStatement",variables:n,init:o}},assignmentStatement:function(n,o){return{type:"AssignmentStatement",variables:n,init:o}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,o,v,x){return{type:"FunctionDeclaration",identifier:n,isLocal:v,parameters:o,body:x}},forNumericStatement:function(n,o,v,x,W){return{type:"ForNumericStatement",variable:n,start:o,end:v,step:x,body:W}},forGenericStatement:function(n,o,v){return{type:"ForGenericStatement",variables:n,iterators:o,body:v}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,o,v){return n=n===je?"StringLiteral":n===ot?"NumericLiteral":n===Xe?"BooleanLiteral":n===rt?"NilLiteral":"VarargLiteral",{type:n,value:o,raw:v}},tableKey:function(n,o){return{type:"TableKey",key:n,value:o}},tableKeyString:function(n,o){return{type:"TableKeyString",key:n,value:o}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,o,v){var x=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:x,operator:n,left:o,right:v}},unaryExpression:function(n,o){return{type:"UnaryExpression",operator:n,argument:o}},memberExpression:function(n,o,v){return{type:"MemberExpression",indexer:o,identifier:v,base:n}},indexExpression:function(n,o){return{type:"IndexExpression",base:n,index:o}},callExpression:function(n,o){return{type:"CallExpression",base:n,arguments:o}},tableCallExpression:function(n,o){return{type:"TableCallExpression",base:n,arguments:o}},stringCallExpression:function(n,o){return{type:"StringCallExpression",base:n,argument:o}},comment:function(n,o){return{type:"Comment",value:n,raw:o}}};function ce(n){if(I){var o=P.pop();o.complete(),o.bless(n)}return z.onCreateNode&&z.onCreateNode(n),n}var tt=Array.prototype.slice,gt=function(n,o){for(var v=0,x=n.length;v<x;++v)if(n[v]===o)return v;return-1};Array.prototype.indexOf&&(gt=function(n,o){return n.indexOf(o)});function _t(n,o,v){for(var x=0,W=n.length;x<W;++x)if(n[x][o]===v)return x;return-1}function K(n){var o=tt.call(arguments,1);return n=n.replace(/%(\d)/g,function(v,x){return""+o[x-1]||""}),n}var mt=function(n){for(var o=tt.call(arguments,1),v,x,W=0,be=o.length;W<be;++W){v=o[W];for(x in v)Object.prototype.hasOwnProperty.call(v,x)&&(n[x]=v[x])}return n};Object.assign&&(mt=Object.assign),Ce.SyntaxError=SyntaxError;function We(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function fe(n){var o=K.apply(null,tt.call(arguments,1)),v,x;throw n===null||typeof n.line>"u"?(x=k-d+1,v=We(new SyntaxError(K("[%1:%2] %3",m,x,o))),v.index=k,v.line=m,v.column=x):(x=n.range[0]-n.lineStart,v=We(new SyntaxError(K("[%1:%2] %3",n.line,x,o))),v.line=n.line,v.index=n.range[0],v.column=x),v}function Fe(n){var o=M.slice(n.range[0],n.range[1]);return o||n.value}function $e(n,o){fe(o,ae.expectedToken,n,Fe(o))}function it(n){var o=Fe(te);if(typeof n.type<"u"){var v;switch(n.type){case je:v="string";break;case Je:v="keyword";break;case Oe:v="identifier";break;case ot:v="number";break;case qe:v="symbol";break;case Xe:v="boolean";break;case rt:return fe(n,ae.unexpected,"symbol","nil",o);case lt:return fe(n,ae.unexpectedEOF)}return fe(n,ae.unexpected,v,Fe(n),o)}return fe(n,ae.unexpected,"symbol",n,o)}var k,$,Y,te,E,f,m,d;Ce.lex=_;function _(){for(h();M.charCodeAt(k)===45&&M.charCodeAt(k+1)===45;)Ge(),h();if(k>=ye)return{type:lt,value:"<eof>",line:m,lineStart:d,range:[k,k]};var n=M.charCodeAt(k),o=M.charCodeAt(k+1);if(f=k,yt(n))return c();switch(n){case 39:case 34:return C();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l();case 46:return Ke(o)?l():o===46?M.charCodeAt(k+2)===46?p():s(".."):s(".");case 61:return s(o===61?"==":"=");case 62:return de.bitwiseOperators&&o===62?s(">>"):s(o===61?">=":">");case 60:return de.bitwiseOperators&&o===60?s("<<"):s(o===61?"<=":"<");case 126:if(o===61)return s("~=");if(!de.bitwiseOperators)break;return s("~");case 58:return de.labels&&o===58?s("::"):s(":");case 91:return o===91||o===61?t():s("[");case 47:return de.integerDivision&&o===47?s("//"):s("/");case 38:case 124:if(!de.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return s(M.charAt(k))}return it(M.charAt(k))}function e(){var n=M.charCodeAt(k),o=M.charCodeAt(k+1);return Ze(n)?(n===10&&o===13&&++k,n===13&&o===10&&++k,++m,d=++k,!0):!1}function h(){for(;k<ye;){var n=M.charCodeAt(k);if(vt(n))++k;else if(!e())break}}function c(){for(var n,o;Tt(M.charCodeAt(++k)););return n=Ee.fixup(M.slice(f,k)),bt(n)?o=Je:n==="true"||n==="false"?(o=Xe,n=n==="true"):n==="nil"?(o=rt,n=null):o=Oe,{type:o,value:n,line:m,lineStart:d,range:[f,k]}}function s(n){return k+=n.length,{type:qe,value:n,line:m,lineStart:d,range:[f,k]}}function p(){return k+=3,{type:Ye,value:"...",line:m,lineStart:d,range:[f,k]}}function C(){for(var n=M.charCodeAt(k++),o=m,v=d,x=k,W=Ee.discardStrings?null:"",be;be=M.charCodeAt(k++),n!==be;)if((k>ye||Ze(be))&&(W+=M.slice(x,k-1),fe(null,ae.unfinishedString,M.slice(f,k-1))),be===92){if(!Ee.discardStrings){var Se=M.slice(x,k-1);W+=Ee.fixup(Se)}var Ue=Pe();Ee.discardStrings||(W+=Ue),x=k}return Ee.discardStrings||(W+=Ee.encodeByte(null),W+=Ee.fixup(M.slice(x,k-1))),{type:je,value:W,line:o,lineStart:v,lastLine:m,lastLineStart:d,range:[f,k]}}function t(){var n=m,o=d,v=_e(!1);return v===!1&&fe($,ae.expected,"[",Fe($)),{type:je,value:Ee.discardStrings?null:Ee.fixup(v),line:n,lineStart:o,lastLine:m,lastLineStart:d,range:[f,k]}}function l(){var n=M.charAt(k),o=M.charAt(k+1),v=n==="0"&&"xX".indexOf(o||null)>=0?B():me(),x=r(),W=u();return W&&(x||v.hasFractionPart)&&fe(null,ae.malformedNumber,M.slice(f,k)),{type:ot,value:v.value,line:m,lineStart:d,range:[f,k]}}function r(){if(de.imaginaryNumbers)return"iI".indexOf(M.charAt(k)||null)>=0?(++k,!0):!1}function u(){if(de.integerSuffixes){if("uU".indexOf(M.charAt(k)||null)>=0)if(++k,"lL".indexOf(M.charAt(k)||null)>=0){if(++k,"lL".indexOf(M.charAt(k)||null)>=0)return++k,"ULL";fe(null,ae.malformedNumber,M.slice(f,k))}else fe(null,ae.malformedNumber,M.slice(f,k));else if("lL".indexOf(M.charAt(k)||null)>=0){if(++k,"lL".indexOf(M.charAt(k)||null)>=0)return++k,"LL";fe(null,ae.malformedNumber,M.slice(f,k))}}}function B(){var n=0,o=1,v=1,x,W,be,Se;for(Se=k+=2,He(M.charCodeAt(k))||fe(null,ae.malformedNumber,M.slice(f,k));He(M.charCodeAt(k));)++k;x=parseInt(M.slice(Se,k),16);var Ue=!1;if(M.charAt(k)==="."){for(Ue=!0,W=++k;He(M.charCodeAt(k));)++k;n=M.slice(W,k),n=W===k?0:parseInt(n,16)/Math.pow(16,k-W)}var Bt=!1;if("pP".indexOf(M.charAt(k)||null)>=0){for(Bt=!0,++k,"+-".indexOf(M.charAt(k)||null)>=0&&(v=M.charAt(k++)==="+"?1:-1),be=k,Ke(M.charCodeAt(k))||fe(null,ae.malformedNumber,M.slice(f,k));Ke(M.charCodeAt(k));)++k;o=M.slice(be,k),o=Math.pow(2,o*v)}return{value:(x+n)*o,hasFractionPart:Ue||Bt}}function me(){for(;Ke(M.charCodeAt(k));)++k;var n=!1;if(M.charAt(k)===".")for(n=!0,++k;Ke(M.charCodeAt(k));)++k;var o=!1;if("eE".indexOf(M.charAt(k)||null)>=0)for(o=!0,++k,"+-".indexOf(M.charAt(k)||null)>=0&&++k,Ke(M.charCodeAt(k))||fe(null,ae.malformedNumber,M.slice(f,k));Ke(M.charCodeAt(k));)++k;return{value:parseFloat(M.slice(f,k)),hasFractionPart:n||o}}function Te(){var n=k++;for(M.charAt(k++)!=="{"&&fe(null,ae.braceExpected,"{","\\"+M.slice(n,k)),He(M.charCodeAt(k))||fe(null,ae.hexadecimalDigitExpected,"\\"+M.slice(n,k));M.charCodeAt(k)===48;)++k;for(var o=k;He(M.charCodeAt(k));)++k,k-o>6&&fe(null,ae.tooLargeCodepoint,"\\"+M.slice(n,k));var v=M.charAt(k++);v!=="}"&&(v==='"'||v==="'"?fe(null,ae.braceExpected,"}","\\"+M.slice(n,k--)):fe(null,ae.hexadecimalDigitExpected,"\\"+M.slice(n,k)));var x=parseInt(M.slice(o,k-1)||"0",16),W="\\"+M.slice(n,k);return x>1114111&&fe(null,ae.tooLargeCodepoint,W),Ee.encodeUTF8(x,W)}function Pe(){var n=k;switch(M.charAt(k)){case"a":return++k,"\x07";case"n":return++k,`
`;case"r":return++k,"\r";case"t":return++k,"	";case"v":return++k,"\v";case"b":return++k,"\b";case"f":return++k,"\f";case"\r":case`
`:return e(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Ke(M.charCodeAt(k))&&k-n<3;)++k;var o=M.slice(n,k),v=parseInt(o,10);return v>255&&fe(null,ae.decimalEscapeTooLarge,"\\"+v),Ee.encodeByte(v,"\\"+o);case"z":if(de.skipWhitespaceEscape)return++k,h(),"";break;case"x":if(de.hexEscapes){if(He(M.charCodeAt(k+1))&&He(M.charCodeAt(k+2)))return k+=3,Ee.encodeByte(parseInt(M.slice(n+1,k),16),"\\"+M.slice(n,k));fe(null,ae.hexadecimalDigitExpected,"\\"+M.slice(n,k+2))}break;case"u":if(de.unicodeEscapes)return Te();break;case"\\":case'"':case"'":return M.charAt(k++)}return de.strictEscapes&&fe(null,ae.invalidEscape,"\\"+M.slice(n,k+1)),M.charAt(k++)}function Ge(){f=k,k+=2;var n=M.charAt(k),o="",v=!1,x=k,W=d,be=m;if(n==="["&&(o=_e(!0),o===!1?o=n:v=!0),!v){for(;k<ye&&!Ze(M.charCodeAt(k));)++k;z.comments&&(o=M.slice(x,k))}if(z.comments){var Se=ge.comment(o,M.slice(f,k));z.locations&&(Se.loc={start:{line:be,column:f-W},end:{line:m,column:k-d}}),z.ranges&&(Se.range=[f,k]),z.onCreateNode&&z.onCreateNode(Se),E.push(Se)}}function _e(n){var o=0,v="",x=!1,W,be,Se=m;for(++k;M.charAt(k+o)==="=";)++o;if(M.charAt(k+o)!=="[")return!1;for(k+=o+1,Ze(M.charCodeAt(k))&&e(),be=k;k<ye;){for(;Ze(M.charCodeAt(k));)e();if(W=M.charAt(k++),W==="]"){x=!0;for(var Ue=0;Ue<o;++Ue)M.charAt(k+Ue)!=="="&&(x=!1);M.charAt(k+o)!=="]"&&(x=!1)}if(x)return v+=M.slice(be,k-1),k+=o+1,v}fe(null,n?ae.unfinishedLongComment:ae.unfinishedLongString,Se,"<eof>")}function j(){Y=$,$=te,te=_()}function ie(n){return n===$.value?(j(),!0):!1}function ve(n){n===$.value?j():fe($,ae.expected,n,Fe($))}function vt(n){return n===9||n===32||n===11||n===12}function Ze(n){return n===10||n===13}function Ke(n){return n>=48&&n<=57}function He(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function yt(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||de.extendedIdentifiers&&n>=128)}function Tt(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||de.extendedIdentifiers&&n>=128)}function bt(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:de.labels&&!de.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function ut(n){return qe===n.type?"#-~".indexOf(n.value)>=0:Je===n.type?n.value==="not":!1}function wt(n){if(lt===n.type)return!0;if(Je!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var nt,F,w;function g(){var n=nt[F++].slice();nt.push(n),z.onCreateScope&&z.onCreateScope()}function L(){nt.pop(),--F,z.onDestroyScope&&z.onDestroyScope()}function V(n){z.onLocalDeclaration&&z.onLocalDeclaration(n),gt(nt[F],n)===-1&&nt[F].push(n)}function y(n){V(n.name),R(n,!0)}function R(n,o){!o&&_t(w,"name",n.name)===-1&&w.push(n),n.isLocal=o}function D(n){return gt(nt[F],n)!==-1}var P=[],I;function Z(){return new oe($)}function oe(n){z.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),z.ranges&&(this.range=[n.range[0],0])}oe.prototype.complete=function(){z.locations&&(this.loc.end.line=Y.lastLine||Y.line,this.loc.end.column=Y.range[1]-(Y.lastLineStart||Y.lineStart)),z.ranges&&(this.range[1]=Y.range[1])},oe.prototype.bless=function(n){if(this.loc){var o=this.loc;n.loc={start:{line:o.start.line,column:o.start.column},end:{line:o.end.line,column:o.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function ne(){I&&P.push(Z())}function pe(n){I&&P.push(n)}function De(){this.scopes=[],this.pendingGotos=[]}De.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},De.prototype.pushScope=function(n){var o={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(o)},De.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var o=this.pendingGotos[n];o.maxDepth>=this.scopes.length&&--o.maxDepth<=0&&fe(o.token,ae.labelNotVisible,o.target)}this.scopes.pop()},De.prototype.addGoto=function(n,o){for(var v=[],x=0;x<this.scopes.length;++x){var W=this.scopes[x];if(v.push(W.locals.length),Object.prototype.hasOwnProperty.call(W.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:o,localCounts:v})},De.prototype.addLabel=function(n,o){var v=this.currentScope();if(Object.prototype.hasOwnProperty.call(v.labels,n))fe(o,ae.labelAlreadyDefined,n,v.labels[n].line);else{for(var x=[],W=0;W<this.pendingGotos.length;++W){var be=this.pendingGotos[W];if(be.maxDepth>=this.scopes.length&&be.target===n){be.localCounts[this.scopes.length-1]<v.locals.length&&v.deferredGotos.push(be);continue}x.push(be)}this.pendingGotos=x}v.labels[n]={localCount:v.locals.length,line:o.line}},De.prototype.addLocal=function(n,o){this.currentScope().locals.push({name:n,token:o})},De.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},De.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),o=n.deferredGotos,v=0;v<o.length;++v){var x=o[v];fe(x.token,ae.gotoJumpInLocalScope,x.target,n.locals[x.localCounts[this.scopes.length-1]].name)}};function he(){this.level=0,this.loopLevels=[]}he.prototype.isInLoop=function(){return!!this.loopLevels.length},he.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},he.prototype.popScope=function(){var n=this.loopLevels,o=n.length;o&&n[o-1]===this.level&&n.pop(),--this.level},he.prototype.addGoto=he.prototype.addLabel=function(){throw new Error("This should never happen")},he.prototype.addLocal=he.prototype.raiseDeferredErrors=function(){};function Ie(){return de.labels?new De:new he}function Qe(){j(),ne(),z.scope&&g();var n=Ie();n.allowVararg=!0,n.pushScope();var o=we(n);return n.popScope(),z.scope&&L(),lt!==$.type&&it($),I&&!o.length&&(Y=$),ce(ge.chunk(o))}function we(n){for(var o=[],v;!wt($);){if($.value==="return"||!de.relaxedBreak&&$.value==="break"){o.push(St(n));break}v=St(n),ie(";"),v&&o.push(v)}return o}function St(n){if(ne(),qe===$.type&&ie("::"))return Ne(n);if(de.emptyStatement&&ie(";")){I&&P.pop();return}if(n.raiseDeferredErrors(),Je===$.type)switch($.value){case"local":return j(),i(n);case"if":return j(),At(n);case"return":return j(),Dt(n);case"function":j();var o=X();return Q(o);case"while":return j(),xe(n);case"for":return j(),q(n);case"repeat":return j(),xt(n);case"break":return j(),n.isInLoop()||fe($,ae.noLoopToBreak,$.value),Mt();case"do":return j(),Vt(n);case"goto":return j(),Lt(n)}return de.contextualGoto&&$.type===Oe&&$.value==="goto"&&te.type===Oe&&te.value!=="goto"?(j(),Lt(n)):(I&&P.pop(),se(n))}function Ne(n){var o=$,v=O();return z.scope&&(V("::"+o.value+"::"),R(v,!0)),ve("::"),n.addLabel(o.value,o),ce(ge.labelStatement(v))}function Mt(){return ce(ge.breakStatement())}function Lt(n){var o=$.value,v=Y,x=O();return n.addGoto(o,v),ce(ge.gotoStatement(x))}function Vt(n){z.scope&&g(),n.pushScope();var o=we(n);return n.popScope(),z.scope&&L(),ve("end"),ce(ge.doStatement(o))}function xe(n){var o=ee(n);ve("do"),z.scope&&g(),n.pushScope(!0);var v=we(n);return n.popScope(),z.scope&&L(),ve("end"),ce(ge.whileStatement(o,v))}function xt(n){z.scope&&g(),n.pushScope(!0);var o=we(n);ve("until"),n.raiseDeferredErrors();var v=ee(n);return n.popScope(),z.scope&&L(),ce(ge.repeatStatement(v,o))}function Dt(n){var o=[];if($.value!=="end"){var v=H(n);for(v!=null&&o.push(v);ie(",");)v=ee(n),o.push(v);ie(";")}return ce(ge.returnStatement(o))}function At(n){var o=[],v,x,W;for(I&&(W=P[P.length-1],P.push(W)),v=ee(n),ve("then"),z.scope&&g(),n.pushScope(),x=we(n),n.popScope(),z.scope&&L(),o.push(ce(ge.ifClause(v,x))),I&&(W=Z());ie("elseif");)pe(W),v=ee(n),ve("then"),z.scope&&g(),n.pushScope(),x=we(n),n.popScope(),z.scope&&L(),o.push(ce(ge.elseifClause(v,x))),I&&(W=Z());return ie("else")&&(I&&(W=new oe(Y),P.push(W)),z.scope&&g(),n.pushScope(),x=we(n),n.popScope(),z.scope&&L(),o.push(ce(ge.elseClause(x)))),ve("end"),ce(ge.ifStatement(o))}function q(n){var o=O(),v;if(z.scope&&(g(),y(o)),ie("=")){var x=ee(n);ve(",");var W=ee(n),be=ie(",")?ee(n):null;return ve("do"),n.pushScope(!0),v=we(n),n.popScope(),ve("end"),z.scope&&L(),ce(ge.forNumericStatement(o,x,W,be,v))}else{for(var Se=[o];ie(",");)o=O(),z.scope&&y(o),Se.push(o);ve("in");var Ue=[];do{var Bt=ee(n);Ue.push(Bt)}while(ie(","));return ve("do"),n.pushScope(!0),v=we(n),n.popScope(),ve("end"),z.scope&&L(),ce(ge.forGenericStatement(Se,Ue,v))}}function i(n){var o,v=Y;if(Oe===$.type){var x=[],W=[];do o=O(),x.push(o),n.addLocal(o.name,v);while(ie(","));if(ie("="))do{var be=ee(n);W.push(be)}while(ie(","));if(z.scope)for(var Se=0,Ue=x.length;Se<Ue;++Se)y(x[Se]);return ce(ge.localStatement(x,W))}if(ie("function"))return o=O(),n.addLocal(o.name,v),z.scope&&(y(o),g()),Q(o,!0);$e("<name>",$)}function se(n){var o,v,x,W,be,Se=[];I&&(v=Z());do{if(I&&(o=Z()),Oe===$.type)be=$.value,W=O(),z.scope&&R(W,D(be)),x=!0;else if($.value==="(")j(),W=ee(n),ve(")"),x=!1;else return it($);e:for(;;){switch(je===$.type?'"':$.value){case".":case"[":x=!0;break;case":":case"(":case"{":case'"':x=null;break;default:break e}W=jt(W,o,n)}if(Se.push(W),$.value!==",")break;if(!x)return it($);j()}while(!0);if(Se.length===1&&x===null)return pe(o),ce(ge.callStatement(Se[0]));if(!x)return it($);ve("=");var Ue=[];do Ue.push(ee(n));while(ie(","));return pe(v),ce(ge.assignmentStatement(Se,Ue))}function O(){ne();var n=$.value;return Oe!==$.type&&$e("<name>",$),j(),ce(ge.identifier(n))}function Q(n,o){var v=Ie();v.pushScope();var x=[];if(ve("("),!ie(")"))for(;;){if(Oe===$.type){var W=O();if(z.scope&&y(W),x.push(W),ie(","))continue}else Ye===$.type?(v.allowVararg=!0,x.push(Ot(v))):$e("<name> or '...'",$);ve(")");break}var be=we(v);return v.popScope(),ve("end"),z.scope&&L(),o=o||!1,ce(ge.functionStatement(n,x,o,be))}function X(){var n,o,v;for(I&&(v=Z()),n=O(),z.scope&&(R(n,D(n.name)),g());ie(".");)pe(v),o=O(),n=ce(ge.memberExpression(n,".",o));return ie(":")&&(pe(v),o=O(),n=ce(ge.memberExpression(n,":",o)),z.scope&&V("self")),n}function J(n){for(var o=[],v,x;;){if(ne(),qe===$.type&&ie("["))v=ee(n),ve("]"),ve("="),x=ee(n),o.push(ce(ge.tableKey(v,x)));else if(Oe===$.type)te.value==="="?(v=O(),j(),x=ee(n),o.push(ce(ge.tableKeyString(v,x)))):(x=ee(n),o.push(ce(ge.tableValue(x))));else{if((x=H(n))==null){P.pop();break}o.push(ce(ge.tableValue(x)))}if(",;".indexOf($.value)>=0){j();continue}break}return ve("}"),ce(ge.tableConstructorExpression(o))}function H(n){var o=zt(0,n);return o}function ee(n){var o=H(n);if(o==null)$e("<expression>",$);else return o}function ln(n){var o=n.charCodeAt(0),v=n.length;if(v===1)switch(o){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(v===2)switch(o){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(o===97&&n==="and")return 2;return 0}function zt(n,o){var v=$.value,x,W;if(I&&(W=Z()),ut($)){ne(),j();var be=zt(10,o);be==null&&$e("<expression>",$),x=ce(ge.unaryExpression(v,be))}if(x==null&&(x=Ot(o),x==null&&(x=on(o))),x==null)return null;for(var Se;v=$.value,Se=qe===$.type||Je===$.type?ln(v):0,!(Se===0||Se<=n);){(v==="^"||v==="..")&&--Se,j();var Ue=zt(Se,o);Ue==null&&$e("<expression>",$),I&&P.push(W),x=ce(ge.binaryExpression(v,x,Ue))}return x}function jt(n,o,v){var x,W;if(qe===$.type)switch($.value){case"[":return pe(o),j(),x=ee(v),ve("]"),ce(ge.indexExpression(n,x));case".":return pe(o),j(),W=O(),ce(ge.memberExpression(n,".",W));case":":return pe(o),j(),W=O(),n=ce(ge.memberExpression(n,":",W)),pe(o),Nt(n,v);case"(":case"{":return pe(o),Nt(n,v)}else if(je===$.type)return pe(o),Nt(n,v);return null}function on(n){var o,v,x;if(I&&(x=Z()),Oe===$.type)v=$.value,o=O(),z.scope&&R(o,D(v));else if(ie("("))o=ee(n),ve(")");else return null;for(;;){var W=jt(o,x,n);if(W===null)break;o=W}return o}function Nt(n,o){if(qe===$.type)switch($.value){case"(":de.emptyStatement||$.line!==Y.line&&fe(null,ae.ambiguousSyntax,$.value),j();var v=[],x=H(o);for(x!=null&&v.push(x);ie(",");)x=ee(o),v.push(x);return ve(")"),ce(ge.callExpression(n,v));case"{":ne(),j();var W=J(o);return ce(ge.tableCallExpression(n,W))}else if(je===$.type)return ce(ge.stringCallExpression(n,Ot(o)));$e("function arguments",$)}function Ot(n){var o=je|ot|Xe|rt|Ye,v=$.value,x=$.type,W;if(I&&(W=Z()),x===Ye&&!n.allowVararg&&fe($,ae.cannotUseVararg,$.value),x&o){pe(W);var be=M.slice($.range[0],$.range[1]);return j(),ce(ge.literal(x,v,be))}else{if(Je===x&&v==="function")return pe(W),j(),z.scope&&g(),Q(null);if(ie("{"))return pe(W),J(n)}}Ce.parse=rn;var Ht={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function rn(n,o){if(typeof o>"u"&&typeof n=="object"&&(o=n,n=void 0),o||(o={}),M=n||"",z=mt({},dt,o),k=0,m=1,d=0,ye=M.length,nt=[[]],F=0,w=[],P=[],!Object.prototype.hasOwnProperty.call(Ht,z.luaVersion))throw new Error(K("Lua version '%1' not supported",z.luaVersion));if(de=mt({},Ht[z.luaVersion]),z.extendedIdentifiers!==void 0&&(de.extendedIdentifiers=!!z.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(ct,z.encodingMode))throw new Error(K("Encoding mode '%1' not supported",z.encodingMode));return Ee=ct[z.encodingMode],z.comments&&(E=[]),z.wait?Ce:Jt()}Ce.write=Qt;function Qt(n){return M+=String(n),ye=M.length,Ce}Ce.end=Jt;function Jt(n){typeof n<"u"&&Qt(n),M&&M.substr(0,2)==="#!"&&(M=M.replace(/^.*/,function(v){return v.replace(/./g," ")})),ye=M.length,I=z.locations||z.ranges,te=_();var o=Qe();if(z.comments&&(o.comments=E),z.scope&&(o.globals=w),P.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return o}})})(Pt,Pt.exports);var wn=Pt.exports;const It=un(wn);var Ut={},$t={exports:{}};$t.exports;(function(st){function T(te){for(var E=0,f=te.length;f--;)E+=te.charCodeAt(f),E+=E<<10,E^=E>>6;return E+=E<<3,E^=E>>11,E+=E<<15,E}const Ce=console.log,M=function(te,E){if(!te)throw E};function z(te,E){if(!te)return 0;var f=te.toString().split(".");return f.length>1?parseInt(f[0],E)+parseInt(f[1],E)/Math.pow(E,f[1].length):parseInt(f[0],E)}let ye=[" ",`
`,"	","\r"],de={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const Ee=new Proxy(de,{get(te,E){return z(E)}});let dt=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ke=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],ft=["0","1","2","3","4","5","6","7","8","9"],ze=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],ct=["0","1"],lt=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],je=["~","=",">","<"],Je=["+","-","*","/","^","..","%","//"],Oe=["+=","-=","*=","/=","^=","..=","%=","//="],ot=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],qe=["else","elseif","until","end"],Xe=["-","not","#","~"],rt=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],Ye=11,ae={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function ge(te){let E=0,f=te.length,m=[];function d(t){return t=t||0,E<=f?te.substr(E+t,1):""}function _(){if(E<=f){let t=te.substr(E,1);return E++,t}else return""}function e(t){let l=0,r=1,u=1;for(;l<=E;)te.substr(l,1)==`
`?(r++,u=1):u++;let B;for(B=0;B<m.length;B++){let me=m[B];Ce(`${me.Type}<${me.Source}>`)}throw`file<${r}:${u}>: ${t}`}function h(t){for(;;){let l=_();if(l=="")e("Unfinished long string.");else if(l=="]"){let r=!0,u;for(u=1;u<=t;u++)if(d()=="=")E++;else{r=!1;break}if(r&&_()=="]")return}}}function c(){let t=E;for(;d()=="=";)E++;if(d()=="[")return E++,E-t-1;E=t}let s=0,p=0;function C(t){let l=te.substr(p,E-p),r=null;t=="Number"&&(l.substr(0,2).toLowerCase()=="0x"?(r="hex",parseInt(l,16)<999999999999&&(l=parseInt(l,16))):l.substr(0,2).toLowerCase()=="0b"&&(r="bin",parseInt(l.substr(2),2)<999999999999&&(l=parseInt(l.substr(2),2))));let u={Type:t,LeadingWhite:te.substr(s,p-s),Source:l};return r!==null&&(u.NType=r),m.push(u),s=E,p=E,u}for(;;){for(s=E;;){let l=d();if(l=="")break;if(l=="-")if(d(1)=="-")if(E+=2,d()=="["){E++;let r=c();if(r!=null)h(r),s=E;else for(;;){let u=_();if(u==""||u==`
`)break}}else for(;;){let r=_();if(r==""||r==`
`)break}else break;else if(ye.includes(l))E++;else break}te.substr(s,E-s),p=E;let t=_();if(t==""){C("Eof");break}else if(t=="'"||t=='"'){for(;;){let l=_();if(l=="\\"){let r=_();if(Ee[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}C("String")}else if(t=="`"){for(;;){let l=_();if(l=="\\"){let r=_();if(Ee[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}C("Hash")}else if(dt.includes(t)){for(;ke.includes(d());)E++;ot.includes(te.substr(p,E-p))?C("Keyword"):C("Ident")}else if(ft.includes(t)||t=="."&&ft.includes(d())){if(t=="0"&&d().toLowerCase()=="x")for(E++;ze.includes(d())||d()==="_";)E++;else if(t=="0"&&d().toLowerCase()=="b")for(E++;ct.includes(d())||d()==="_";)E++;else{for(;ft.includes(d())||d()==="_";)E++;if(d()==".")for(E++;ft.includes(d());)E++;if(d()=="e"||d()=="E")for(E++,(d()=="-"||d()=="+")&&E++;ft.includes(d());)E++}C("Number")}else if(t=="["){let l=c();l!=null?(h(l),C("String")):C("Symbol")}else if(t==".")d()=="."&&(_(),(d()=="."||d()=="=")&&_()),C("Symbol");else if(t+d()=="//")_(),d()=="="&&_(),C("Symbol");else if(t+d()=="::")_(),C("Symbol");else if(rt.includes(t+d()))_(),C("Symbol");else if(je.includes(t))d()=="="&&E++,C("Symbol");else if(Je.includes(t)&&d()=="=")_(),C("Symbol");else if(lt.includes(t))C("Symbol");else throw`Bad symbol \`${t}\` in source. ${E}`}return m}function ce(te){let E=ge(te),f=0;function m(){let g=E[f];return f<E.length&&f++,g}function d(g){return g=f+(g||0),E[g]||E[E.length-1]}function _(g){let L=1,V=0,y=0;for(;;){let R=E[y],D;R==g?D=R.LeadingWhite:D=R.LeadingWhite+R.Source;let P;for(P=0;P<=D.length;P++)D.substr(P,1)==`
`?(L++,V=0):V++;if(R==g)break;y++}return`${L}:${V+1}`}function e(){let g=d();return`<${g.Type} \`${g.Source}\`> at: ${_(g)}`}function h(){let g=d();return g.Type=="Eof"||g.Type=="Keyword"&&qe.includes(g.Source)}function c(){return Xe.includes(d().Source)||!1}function s(){return rt.includes(d().Source)||!1}function p(g,L){let V=d();if(V.Type==g&&(L==null||V.Source==L))return m();{let y;for(y=-3;y<=3;y++)Ce(`Tokens[${y}] = \`${d(y).Source}\``);throw L?`${_(V)}: \`${L}\` expected.`:`${_(V)}: ${g} expected.`}}function C(g){let L=g.GetFirstToken,V=g.GetLastToken,y=g;return g.GetFirstToken=function(){let R=L(y);return M(R),R},g.GetLastToken=function(){let R=V(y);return M(R),R},g}let t,l;function r(g,L){let V=[l(g,L)],y=[];for(;d().Source==",";)y.push(m()),V.push(l(g,L));return[V,y]}function u(g,L){var y,R,D,P;let V=d();if(V.Source=="("){let I=m(),Z=l(g,L),oe=p("Symbol",")"),ne;return ne=C({Type:"ParenExpr",Expression:Z,Token_OpenParen:I,Token_CloseParen:oe,GetFirstToken:()=>ne.Token_OpenParen,GetLastToken:()=>ne.Token_CloseParen}),ne}else if(V.Type=="Ident"){let I;return I=C({Type:"VariableExpr",Token:m(),GetFirstToken:()=>I.Token,GetLastToken:()=>I.Token}),g[I.Token.Source]!=null&&((R=(y=g[I.Token.Source])==null?void 0:y.Tokens)==null?void 0:R.push)!=null?(g[I.Token.Source].Tokens.push(I.Token),g[I.Token.Source].UseCountIncrease()):L[I.Token.Source]!=null&&((P=(D=L[I.Token.Source])==null?void 0:D.Tokens)==null?void 0:P.push)!=null&&(L[I.Token.Source].Tokens.push(I.Token),L[I.Token.Source].UseCountIncrease()),I}else throw Ce(e()),`${_(V)}: Unexpected symbol. ${V.Type} ${V.Source}`}function B(g,L){let V=p("Symbol","{"),y=[],R=[];for(;d().Source!="}";){if(d().Source=="["){let I=m(),Z=l(g,L),oe=p("Symbol","]"),ne=p("Symbol","="),pe=l(g,L);Z.Token&&Z.Token.Source,y.push({EntryType:"Index",Index:Z,Value:pe,Token_OpenBracket:I,Token_CloseBracket:oe,Token_Equals:ne})}else if(d().Type=="Ident"&&d(1).Source=="="){let I=m(),Z=m(),oe=l(g,L);y.push({EntryType:"Field",Field:I,Value:oe,Token_Equals:Z})}else{let I=l(g,L);y.push({EntryType:"Value",Value:I})}if(d().Source==","||d().Source==";")R.push(m());else break}let D=p("Symbol","}"),P;return P=C({Type:"TableLiteral",EntryList:y,Token_SeperatorList:R,Token_OpenBrace:V,Token_CloseBrace:D,GetFirstToken:()=>P.Token_OpenBrace,GetLastToken:()=>P.Token_CloseBrace}),P}function me(g,L){let V=[],y=[];if(d().Type=="Ident"){let R=m();if(L&&d().Source=="<"&&d(2).Source==">"){let D=d(1).Source;R.Attribute={LeadingWhite:d().LeadingWhite,Source:`<${D}>`},m(),m(),m()}V.push(R)}else if(d().Source=="..."&&g)return[V,y,m()];for(;d().Source==",";){if(y.push(m()),d().Source=="..."&&g)return[V,y,m()];{let R=p("Ident");if(L&&d().Source=="<"&&d(2).Source==">"){let D=d(1).Source;R.Attribute={LeadingWhite:d().LeadingWhite,Source:`<${D}>`},m(),m(),m()}V.push(R)}}return[V,y]}function Te(g,L,V){let y=t(L,V),R=d();if(R.Type=="Keyword"&&R.Source==g)return m(),[y,R];throw Ce(R.Type,R.Source),`${_(R)}: ${g} expected.`}function Pe(g,L,V,y){let R=m(),D,P;if(!g){D=[],P=[];let Qe=p("Ident");for(D.push(Qe);d().Source==".";)P.push(m()),D.push(p("Ident"));d().Source==":"&&(P.push(m()),D.push(p("Ident")))}let I=p("Symbol","("),[Z,oe,ne]=me(!0),pe=p("Symbol",")"),[De,he]=Te("end",L,V),Ie;return Ie=C({Type:g==!0?"FunctionLiteral":"FunctionStat",NameChain:D,ArgList:Z,Body:De,Token_Function:R,Token_NameChainSeperator:P,Token_OpenParen:I,Token_Varg:ne,Token_ArgCommaList:oe,Token_CloseParen:pe,Token_End:he,GetFirstToken:()=>Ie.Token_Function,GetLastToken:()=>Ie.Token_End}),Ie}function Ge(g,L){let V=d();if(V.Source=="("){let y=m(),R=[],D=[];for(;d().Source!=")"&&(R.push(l(g,L)),d().Source==",");)D.push(m());let P=p("Symbol",")"),I;return I=C({CallType:"ArgCall",ArgList:R,Token_CommaList:D,Token_OpenParen:y,Token_CloseParen:P,GetFirstToken:()=>I.Token_OpenParen,GetLastToken:()=>I.Token_CloseParen}),I}else if(V.Source=="{"){let y;return y=C({CallType:"TableCall",TableExpr:l(g,L),GetFirstToken:()=>y.TableExpr.GetFirstToken(),GetLastToken:()=>y.TableExpr.GetLastToken()}),y}else if(V.Type=="String"){let y;return y=C({CallType:"StringCall",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else throw"Function arguments expected."}function _e(g,L){let V=u(g,L);for(M(V,"nil prefixexpr");;){let y=d();if(y.Source=="."){let R=m(),D=p("Ident"),P;P=C({Type:"FieldExpr",Base:V,Field:D,Token_Dot:R,GetFirstToken:()=>P.Base.GetFirstToken(),GetLastToken:()=>P.Field}),V=P}else if(y.Source==":"){let R=m(),D=p("Ident"),P=Ge(g,L),I;I=C({Type:"MethodExpr",Base:V,Method:D,FunctionArguments:P,Token_Colon:R,GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.FunctionArguments.GetLastToken()}),V=I}else if(y.Source=="["){let R=m(),D=l(g,L),P=p("Symbol","]"),I;I=C({Type:"IndexExpr",Base:V,Index:D,Token_OpenBracket:R,Token_CloseBracket:P,GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.Token_CloseBracket}),V=I}else if(y.Source=="{"||y.Source=="("||y.Type=="String"){let R;R=C({Type:"CallExpr",Base:V,FunctionArguments:Ge(g,L),GetFirstToken:()=>R.Base.GetFirstToken(),GetLastToken:()=>R.FunctionArguments.GetLastToken()}),V=R}else if(Oe.includes(y.Source)){let R=m(),D=l(g,L),P;P=C({Type:"CompoundStat",Base:V,Token_Compound:R,Rhs:D,Lhs:V,GetFirstToken:()=>P.Base.GetFirstToken(),GetLastToken:()=>P.Rhs.GetLastToken()}),V=P}else return V}}function j(g,L){let V=d();if(V.Type=="Number"){let y;return y=C({Type:"NumberLiteral",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else if(V.Type=="String"){let y;return y=C({Type:"StringLiteral",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else if(V.Type=="Hash"){let y;return y=C({Type:"HashLiteral",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else if(V.Source=="nil"){let y;return y=C({Type:"NilLiteral",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else if(V.Source=="true"||V.Source=="false"){let y;return y=C({Type:"BooleanLiteral",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else if(V.Source=="..."){let y;return y=C({Type:"VargLiteral",Token:m(),GetFirstToken:()=>y.Token,GetLastToken:()=>y.Token}),y}else return V.Source=="{"?B(g,L):V.Source=="function"?Pe(!0,g,L):_e(g,L)}function ie(g,L,V){let y;if(c()){let R=m(),D=ie(Ye,L,V),P;P=C({Type:"UnopExpr",Token_Op:R,Rhs:D,GetFirstToken:()=>P.Token_Op,GetLastToken:()=>P.Rhs.GetLastToken()}),y=P}else y=j(L,V),M(y,"nil sipleexpr");for(;s()&&ae[d().Source]!=null&&ae[d().Source][0]>g;){let R=m(),D=ie(ae[R.Source][1],L,V);M(D,"RhsNeeded");let P;P=C({Type:"BinopExpr",Lhs:y,Rhs:D,Token_Op:R,GetFirstToken:()=>P.Lhs.GetFirstToken(),GetLastToken:()=>P.Rhs.GetLastToken()}),y=P}return y}l=(g,L)=>ie(0,g,L);function ve(g,L){let V=_e(g,L);if(V.Type=="MethodExpr"||V.Type=="CallExpr"){let y;return y=C({Type:"CallExprStat",Expression:V,GetFirstToken:()=>y.Expression.GetFirstToken(),GetLastToken:()=>y.Expression.GetLastToken()}),y}else{if(V.Type=="CompoundStat")return V;{let y=[V],R=[];for(;d().Source==",";){R.push(m());let oe=_e(g,L);if(oe.Type=="MethodExpr"||oe.Type=="CallExpr")throw"Bad left hand side of asignment";y.push(oe)}let D=p("Symbol","="),P=[l(g,L)],I=[];for(;d().Source==",";)I.push(m()),P.push(l(g,L));let Z;return Z=C({Type:"AssignmentStat",Rhs:P,Lhs:y,Token_Equals:D,Token_LhsSeperatorList:R,Token_RhsSeperatorList:I,GetFirstToken:()=>Z.Lhs[0].GetFirstToken(),GetLastToken:()=>Z.Rhs[Z.Rhs.length-1].GetLastToken()}),Z}}}function vt(g,L){let V=m(),y=l(g,L),R=p("Keyword","then"),D=t(g,L),P=[];for(;d().Source=="elseif"||d().Source=="else";){let oe=m(),ne,pe;oe.Source=="elseif"&&(ne=l(g,L),pe=p("Keyword","then"));let De=t(g,L);if(P.push({Condition:ne,Body:De,ClauseType:oe.Source,Token:oe,Token_Then:pe}),oe.Source=="else")break}let I=p("Keyword","end"),Z;return Z=C({Type:"IfStat",Condition:y,Body:D,ElseClauseList:P,Token_If:V,Token_Then:R,Token_End:I,GetFirstToken:()=>Z.Token_If,GetLastToken:()=>Z.Token_End}),Z}function Ze(g,L){let V=m(),[y,R]=Te("end",g,L),D;return D=C({Type:"DoStat",Body:y,Token_Do:V,Token_End:R,GetFirstToken:()=>D.Token_Do,GetLastToken:()=>D.Token_End}),D}function Ke(g,L){let V=m(),y=l(g,L),R=p("Keyword","do"),[D,P]=Te("end",g,L),I;return I=C({Type:"WhileStat",Condition:y,Body:D,Token_While:V,Token_Do:R,Token_End:P,GetFirstToken:()=>I.Token_While,GetLastToken:()=>I.Token_End}),I}function He(g,L){let V=m(),[y,R]=me();if(d().Source=="="){let D=m(),[P,I]=r(g,L);if(P.length<2||P.length>3)throw"Expected 2 or 3 values for range bounds";let Z=p("Keyword","do"),[oe,ne]=Te("end",g,L),pe;return pe=C({Type:"NumericForStat",VarList:y,RangeList:P,Body:oe,Token_For:V,Token_VarCommaList:R,Token_Equals:D,Token_RangeCommaList:I,Token_Do:Z,Token_End:ne,GetFirstToken:()=>pe.Token_For,GetLastToken:()=>pe.Token_End}),pe}else if(d().Source=="in"){let D=m(),[P,I]=r(g,L),Z=p("Keyword","do"),[oe,ne]=Te("end",g,L),pe;return pe=C({Type:"GenericForStat",VarList:y,GeneratorList:P,Body:oe,Token_For:V,Token_VarCommaList:R,Token_In:D,Token_GeneratorCommaList:I,Token_Do:Z,Token_End:ne,GetFirstToken:()=>pe.Token_For,GetLastToken:()=>pe.Token_End}),pe}}function yt(g,L){let V=m(),[y,R]=Te("until",g),D=l(g,L),P;return P=C({Type:"RepeatStat",Body:y,Condition:D,Token_Repeat:V,Token_Until:R,GetFirstToken:()=>P.Token_Repeat,GetLastToken:()=>P.Condition.GetLastToken()}),P}function Tt(g,L){let V=m();if(d().Source=="function"){let y=Pe(!1,g,L);if(y.NameChain.length>1)throw _(y.Token_NameChainSeperator[0])+": `(` expected.";let R;return R=C({Type:"LocalFunctionStat",FunctionStat:y,Token_Local:V,GetFirstToken:()=>R.Token_Local,GetLastToken:()=>R.FunctionStat.GetLastToken()}),R}else if(d().Type=="Ident"){let[y,R]=me(!1,!0),D=[],P=[],I;if(d().Source=="="){I=m();let[oe,ne]=r(g,L);D=oe,P=ne}let Z;return Z=C({Type:"LocalVarStat",VarList:y,ExprList:D,Token_Local:V,Token_Equals:I,Token_VarCommaList:R,Token_ExprCommaList:P,GetFirstToken:()=>Z.Token_Local,GetLastToken:function(){return Z.ExprList.length>0?Z.ExprList[Z.ExprList.length-1].GetLastToken():Z.VarList[Z.VarList.length-1]}}),Z}else throw"`function` or ident expected"}function bt(g,L){let V=m(),y,R;h()||d().Source==";"?(y=[],R=[]):[y,R]=r(g,L);let D;return D={Type:"ReturnStat",ExprList:y,Token_Return:V,Token_CommaList:R,GetFirstToken:()=>D.Token_Return,GetLastToken:function(){return D.ExprList.length>0?D.ExprList[D.ExprList.length-1].GetLastToken():D.Token_Return}},D}function ut(g,L){let V=m(),y;return y={Type:"BreakStat",Token_Break:V,GetFirstToken:()=>y.Token_Break,GetLastToken:()=>y.Token_Break},y}function wt(g,L){let V=m(),y;return y={Type:"ContinueStat",Token_Continue:V,GetFirstToken:()=>y.Token_Continue,GetLastToken:()=>y.Token_Continue},y}function nt(){let g=m(),L;d().Type=="Keyword"?L=p("Keyword"):L=p("Ident");let V;return V={Type:"GotoStat",Token_Goto:g,Token_Label:L,GetFirstToken:()=>V.Token_Goto,GetLastToken:()=>V.Token_Label},V}function F(){let g=m(),L;d().Type=="Keyword"?L=p("Keyword"):L=p("Ident");let V=p("Symbol","::"),y;return y={Type:"LabelStat",Token_ColonsLeft:g,Token_Label:L,Token_ColonsRight:V,GetFirstToken:()=>y.Token_ColonsLeft,GetLastToken:()=>y.Token_ColonsRight},y}function w(g,L){let V=d();return V.Source=="if"?[!1,vt(g,L)]:V.Source=="while"?[!1,Ke(g,L)]:V.Source=="do"?[!1,Ze(g,L)]:V.Source=="for"?[!1,He(g,L)]:V.Source=="repeat"?[!1,yt(g,L)]:V.Source=="function"?[!1,Pe(!1,g,L)]:V.Source=="local"?[!1,Tt(g,L)]:V.Source=="return"?[!0,bt(g,L)]:V.Source=="break"?[!0,ut()]:V.Source=="continue"?[!0,wt()]:V.Source=="goto"?[!1,nt()]:V.Source=="::"?[!1,F()]:[!1,ve(g,L)]}return t=function(g,L){let V=[],y=[],R={},D={};if(L!=null)for(let[oe,ne]of Object.entries(L))D[oe]=ne;if(g!=null)for(let[oe,ne]of Object.entries(g))D[oe]=ne;let P,I=0;for(;!h();){P&&P==d()&&Ce(`INFINITE LOOP POSSIBLE ON STATEMENT ${P.Source} :`,P),P=d();let[oe,ne]=w(R,D);if(ne)switch(V.push(ne),ne.Type){case"LocalVarStat":ne.VarList.forEach(he=>{he.UseCount=0,he.Number=I++,R[he.Source]=he;let Ie=[];function Qe(){he.UseCount++,Ie.forEach(we=>{we.UseCount=he.UseCount})}he.Tokens={},he.Tokens.push=we=>{we.UseCountIncrease=Qe,we.UseCount=he.UseCount,we.Tokens=he.Tokens,Ie.push(we)},he.Tokens.get=()=>Ie,he.UseCountIncrease=Qe});break;case"LocalFunctionStat":let De=ne.FunctionStat.NameChain;if(De.length===1){let Qe=function(){he.UseCount++,Ie.forEach(we=>{we.UseCount=he.UseCount})},he=De[0];he.UseCount=0,he.Number=I++,R[he.Source]=he;let Ie=[];he.Tokens={},he.Tokens.push=we=>{we.UseCountIncrease=Qe,we.UseCount=he.UseCount,we.Tokens=he.Tokens,Ie.push(we)},he.Tokens.get=()=>Ie,he.UseCountIncrease=Qe}break}let pe=d();pe.Type=="Symbol"&&pe.Source==";"&&(y[V.length-1]=m())}let Z;return Z={Type:"StatList",StatementList:V,SemicolonList:y,GetFirstToken:function(){var oe;if(Z.StatementList.length!=0)return(oe=Z.StatementList[0])==null?void 0:oe.GetFirstToken()},GetLastToken:function(){if(Z.StatementList.length!=0)return Z.SemicolonList[Z.StatementList.length-1]?Z.SemicolonList[Z.StatementList.length-1]:Z.StatementList[Z.StatementList.length-1].GetLastToken()}},Z},t([],[])}function tt(te,E){let f={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},m={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[d,_]of Object.entries(E))if(!m[d]&&!f[d])throw`Invalid visitor target: \`${d}\``;function e(p){if(p!=null){let C=E[p.Type];if(typeof C=="function")return C(p);if(C&&C.Pre)return C.Pre(p)}}function h(p){let C=E[p.Type];if(C&&typeof C=="object"&&C.Post)return C.Post(p)}let c,s;c=function(p){if(!e(p)){if(p.Type=="BinopExpr")c(p.Lhs),c(p.Rhs);else if(p.Type=="UnopExpr")c(p.Rhs);else if(!(p.Type=="NumberLiteral"||p.Type=="StringLiteral"||p.Type=="NilLiteral"||p.Type=="BooleanLiteral"||p.Type=="VargLiteral"||p.Type=="HashLiteral")){if(p.Type=="FieldExpr")c(p.Base);else if(p.Type=="IndexExpr")c(p.Base),c(p.Index);else if(p.Type=="MethodExpr"||p.Type=="CallExpr")c(p.Base),p.FunctionArguments.CallType=="ArgCall"?p.FunctionArguments.ArgList.forEach((C,t)=>{c(C)}):p.FunctionArguments.CallType=="TableCall"&&c(p.FunctionArguments.TableExpr);else if(p.Type=="FunctionLiteral")s(p.Body);else if(p.Type!="VariableExpr")if(p.Type=="ParenExpr")c(p.Expression);else if(p.Type=="TableLiteral")p.EntryList.forEach((C,t)=>{if(C.EntryType=="Field")c(C.Value);else if(C.EntryType=="Index")c(C.Index),c(C.Value);else if(C.EntryType=="Value")c(C.Value);else throw"unreachable"});else if(p.Type=="CompoundStat")c(p.Lhs),c(p.Rhs);else throw`unreachable, type: ${p.Type}: ${p}`}h(p)}},s=function(p){if(!e(p)){if(p.Type=="StatList")p.StatementList.forEach((C,t)=>{if(C!=null){if(C===null||C.Type===null)return;C.Remove=()=>{p.StatementList[t]=null},s(C)}});else if(p.Type!="BreakStat"){if(p.Type!="ContinueStat"){if(p.Type!="GotoStat"){if(p.Type!="LabelStat")if(p.Type=="ReturnStat")p.ExprList.forEach((C,t)=>{c(C)});else if(p.Type=="LocalVarStat")p.Token_Equals&&p.ExprList.forEach((C,t)=>{c(C)});else if(p.Type=="LocalFunctionStat")s(p.FunctionStat.Body);else if(p.Type=="FunctionStat")s(p.Body);else if(p.Type=="RepeatStat")s(p.Body),c(p.Condition);else if(p.Type=="GenericForStat")p.GeneratorList.forEach((C,t)=>{c(C)}),s(p.Body);else if(p.Type=="NumericForStat")p.RangeList.forEach((C,t)=>{c(C)}),s(p.Body);else if(p.Type=="WhileStat")c(p.Condition),s(p.Body);else if(p.Type=="DoStat")s(p.Body);else if(p.Type=="IfStat")c(p.Condition),s(p.Body),p.ElseClauseList.forEach(C=>{C.Condition!=null&&c(C.Condition),s(C.Body)});else if(p.Type=="CallExprStat")c(p.Expression);else if(p.Type=="CompoundStat")c(p.Lhs),c(p.Rhs);else if(p.Type=="AssignmentStat")p.Lhs.forEach(C=>{c(C)}),p.Rhs.forEach(C=>{c(C)});else throw"unreachable"}}}h(p)}},m[te.Type]?s(te):c(te)}function gt(te){let E=[],f,m=0;function d(){return m++,m}function _(){f={ParentScope:f,ChildScopeList:[],VariableList:[],BeginLocation:d(),Depth:null,GetVar:null},f.ParentScope?(f.Depth=f.ParentScope.Depth+1,f.ParentScope.ChildScopeList.push(f)):f.Depth=1;let l=f;f.GetVar=function(r){for(const u of l.VariableList)if(u.Name==r)return u;if(l.ParentScope)return l.ParentScope.GetVar(r);for(const u of E)if(u.Name==r)return u}}function e(){let l=f;return l.EndLocation=d(),l.VariableList.forEach(r=>{r.ScopeEndLocation=l.EndLocation}),f=l.ParentScope,l}_();function h(l,r,u){M(u,"MIssing localInfo"),M(l,"Missing local var name");let B={Type:"Local",Name:l,RenameList:[r],AssignedTo:!1,Info:u,Scope:f,BeginLocation:d(),EndLocation:d(),ReferenceLocationList:[d()]};return B.Rename=function(me){B.Name=me,B.RenameList.forEach(Te=>{Te(me)})},f.VariableList.push(B),B}function c(l){for(const u of E)if(u.Name==l)return u;let r={Type:"Global",Name:l,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:d(),EndLocation:d(),ReferenceLocationList:[]};return r.Rename=function(u){r.Name=u,r.RenameList.forEach(B=>{B(u)})},E.push(r),r}function s(l,r){M(l,"Missing var name");let u=c(l);return u.RenameList.push(r),u}function p(l,r){let u;for(u=l.VariableList.length-1;u>=0;u--)if(l.VariableList[u].Name==r)return l.VariableList[u];if(l.ParentScope){let B=p(l.ParentScope,r);if(B)return B}}function C(l,r){M(l,"Missing var name");let u=p(f,l);u?u.RenameList.push(r):u=s(l,r);let B=d();return u.EndLocation=B,u.ReferenceLocationList.push(u.EndLocation),u}let t={};return t.FunctionLiteral={Pre:function(l){_(),l.ArgList.forEach((r,u)=>{let B=h(r.Source,function(me,Te){Te||(r.Source=me)},{Type:"Argument",Index:u});r.var=B})},Post:function(l){e()}},t.VariableExpr=function(l){l.Variable=C(l.Token.Source,function(r){l.Token.Source=r})},t.StatList={Pre:function(l){_()},Post:function(l){l.SkipPop||e()}},t.LocalVarStat={Post:function(l){l.VarList.forEach((r,u)=>{h(r.Source,function(B){l.VarList[u].Source=B},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(l){h(l.FunctionStat.NameChain[0].Source,function(r){l.FunctionStat.NameChain[0].Source=r},{Type:"LocalFunction"}),_(),l.FunctionStat.ArgList.forEach((r,u)=>{h(r.Source,function(B){r.Source=B},{Type:"Argument",Index:u})})},Post:function(){e()}},t.FunctionStat={Pre:function(l){let r=l.NameChain,u;r.length==1?p(f,r[0].Source)?u=C(r[0].Source,function(B){r[0].Source=B}):u=s(r[0].Source,function(B){r[0].Source=B}):u=C(r[0].Source,function(B){r[0].Source=B}),u.AssignedTo=!0,_(),l.ArgList.forEach((B,me)=>{h(B.Source,function(Te){B.Source=Te},{Type:"Argument",Index:me})})},Post:function(){e()}},t.GenericForStat={Pre:function(l){return l.GeneratorList.forEach(r=>{tt(r,t)}),_(),l.VarList.forEach((r,u)=>{h(r.Source,function(B){r.Source=B},{Type:"ForRange",Index:u})}),tt(l.Body,t),e(),!0}},t.NumericForStat={Pre:function(l){return l.RangeList.forEach(r=>{tt(r,t)}),_(),l.VarList.forEach((r,u)=>{h(r.Source,function(B){r.Source=B},{Type:"ForRange",Index:u})}),tt(l.Body,t),e(),!0}},t.RepeatStat={Pre:function(l){l.Body.SkipPop=!0},Post:function(l){e()}},t.AssignmentStat={Post:function(l){l.Lhs.forEach(r=>{r.Variable!=null&&(r.Variable.AssignedTo=!0)})}},tt(te,t),[E,e()]}function _t(te){let E,f,m="",d=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function _(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;m=`${m}${e.LeadingWhite}${e.Source}`}return f=function(e){if(e.Type=="BinopExpr")f(e.Lhs),_(e.Token_Op),f(e.Rhs);else if(e.Type=="UnopExpr")_(e.Token_Op),f(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")_(e.Token);else if(e.Type=="FieldExpr")f(e.Base),_(e.Token_Dot),_(e.Field);else if(e.Type=="IndexExpr")f(e.Base),_(e.Token_OpenBracket),f(e.Index),_(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")f(e.Base),e.Type=="MethodExpr"&&(_(e.Token_Colon),_(e.Method)),e.FunctionArguments.CallType=="StringCall"?_(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(_(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,c)=>{f(h);let s=e.FunctionArguments.Token_CommaList[c];s!=null&&_(s)}),_(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&f(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")_(e.Token_Function),_(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{_(h);let s=e.Token_ArgCommaList[c];s!=null&&_(s)}),e.Token_Varg!=null&&_(e.Token_Varg),_(e.Token_CloseParen),E(e.Body),_(e.Token_End);else if(e.Type=="VariableExpr")_(e.Token);else if(e.Type=="ParenExpr")_(e.Token_OpenParen),f(e.Expression),_(e.Token_CloseParen);else if(e.Type=="TableLiteral")_(e.Token_OpenBrace),e.EntryList.forEach((h,c)=>{if(h.EntryType=="Field")_(h.Field),_(h.Token_Equals),f(h.Value);else if(h.EntryType=="Index")_(h.Token_OpenBracket),f(h.Index),_(h.Token_CloseBracket),_(h.Token_Equals),f(h.Value);else if(h.EntryType=="Value")f(h.Value);else throw"unreachable";let s=e.Token_SeperatorList[c];s!=null&&_(s)}),_(e.Token_CloseBrace);else if(e.Type=="CompoundStat")E(e);else throw`unreachable, type: ${e.Type}: ${e}`},E=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let h=d(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",m+=`${h}do `}e.Type=="StatList"?e.StatementList.forEach((h,c)=>{h===null||h.Type===null||(h.Remove=()=>{e.StatementList[c]=null},E(h),e.SemicolonList[c]&&_(e.SemicolonList[c]))}):e.Type=="BreakStat"?_(e.Token_Break):e.Type=="ContinueStat"?_(e.Token_Continue):e.Type=="GotoStat"?(_(e.Token_Goto),_(e.Token_Label)):e.Type=="LabelStat"?(_(e.Token_ColonsLeft),_(e.Token_Label),_(e.Token_ColonsRight)):e.Type=="ReturnStat"?(_(e.Token_Return),e.ExprList.forEach((h,c)=>{f(h),e.Token_CommaList[c]&&_(e.Token_CommaList[c])})):e.Type=="LocalVarStat"?(_(e.Token_Local),e.VarList.forEach((h,c)=>{_(h),h.Attribute!=null&&_(h.Attribute);let s=e.Token_VarCommaList[c];s!=null&&_(s)}),e.Token_Equals!=null&&(_(e.Token_Equals),e.ExprList.forEach((h,c)=>{f(h);let s=e.Token_ExprCommaList[c];s!=null&&_(s)}))):e.Type=="LocalFunctionStat"?(_(e.Token_Local),_(e.FunctionStat.Token_Function),_(e.FunctionStat.NameChain[0]),_(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,c)=>{_(h);let s=e.FunctionStat.Token_ArgCommaList[c];s!=null&&_(s)}),e.FunctionStat.Token_Varg&&_(e.FunctionStat.Token_Varg),_(e.FunctionStat.Token_CloseParen),E(e.FunctionStat.Body),_(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(_(e.Token_Function),e.NameChain.forEach((h,c)=>{_(h);let s=e.Token_NameChainSeperator[c];s!=null&&_(s)}),_(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{_(h);let s=e.Token_ArgCommaList[c];s!=null&&_(s)}),e.Token_Varg&&_(e.Token_Varg),_(e.Token_CloseParen),E(e.Body),_(e.Token_End)):e.Type=="RepeatStat"?(_(e.Token_Repeat),E(e.Body),_(e.Token_Until),f(e.Condition)):e.Type=="GenericForStat"?(_(e.Token_For),e.VarList.forEach((h,c)=>{_(h);let s=e.Token_VarCommaList[c];s!=null&&_(s)}),_(e.Token_In),e.GeneratorList.forEach((h,c)=>{f(h);let s=e.Token_GeneratorCommaList[c];s!=null&&_(s)}),_(e.Token_Do),E(e.Body),_(e.Token_End)):e.Type=="NumericForStat"?(_(e.Token_For),e.VarList.forEach((h,c)=>{_(h);let s=e.Token_VarCommaList[c];s!=null&&_(s)}),_(e.Token_Equals),e.RangeList.forEach((h,c)=>{f(h);let s=e.Token_RangeCommaList[c];s!=null&&_(s)}),_(e.Token_Do),E(e.Body),_(e.Token_End)):e.Type=="WhileStat"?(_(e.Token_While),f(e.Condition),_(e.Token_Do),E(e.Body),_(e.Token_End)):e.Type=="DoStat"?(_(e.Token_Do),E(e.Body),_(e.Token_End)):e.Type=="IfStat"?(_(e.Token_If),f(e.Condition),_(e.Token_Then),E(e.Body),e.ElseClauseList.forEach(h=>{_(h.Token),h.Condition!=null&&(f(h.Condition),_(h.Token_Then)),E(h.Body)}),_(e.Token_End)):e.Type=="CallExprStat"?f(e.Expression):e.Type=="CompoundStat"?(f(e.Lhs),_(e.Token_Compound),f(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((h,c)=>{f(h);let s=e.Token_LhsSeperatorList[c];s!=null&&_(s)}),_(e.Token_Equals),e.Rhs.forEach((h,c)=>{f(h);let s=e.Token_RhsSeperatorList[c];s!=null&&_(s)})):M(!1,"unreachable"),e.WrapInDo&&(m+=" end ")}},E(te),m}function K(te){let E,f,m=0;function d(t){if(t===void 0)return;let l=`
${"	".repeat(m)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-l.length,l.length)!=l){let r="",u;for(u=t.LeadingWhite.length;u>=0;u--){let B=t.LeadingWhite.substr(u,1);if(!(B==""||B.match(/\s/g))){r=t.LeadingWhite.substr(0,u+1);break}}t.LeadingWhite=`${r}${l}`}}function _(){m++}function e(){m--,M(m>=0,"Undented too far")}function h(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function c(t){t.LeadingWhite=t.LeadingWhite.trim()}function s(t){c(t),ye.includes(h(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function p(t){s(t.GetFirstToken())}function C(t,l,r){_(),E(l),e(),d(r)}f=function(t){if(t.Type=="BinopExpr")f(t.Lhs),f(t.Rhs),p(t.Rhs),s(t.Token_Op);else if(t.Type=="UnopExpr")c(t.Token_Op),f(t.Rhs),t.Token_Op.Source[0]&&s(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")c(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+T(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")f(t.Base);else if(t.Type=="IndexExpr")f(t.Base),f(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")f(t.Base),c(t.FunctionArguments.GetFirstToken()),c(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,r)=>{f(l),r>0&&p(l);let u=t.FunctionArguments.Token_CommaList[r];u!=null&&c(u)}):t.FunctionArguments.CallType=="TableCall"&&f(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((l,r)=>{r>0&&s(l),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg!=null&&s(t.Token_Varg),C(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")c(t.Token_OpenParen),c(t.Token_CloseParen),f(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){_();let l=100;t.EntryList.forEach((r,u)=>{r.EntryType=="Field"?(t.EntryList.length>l?mt(r.Value):d(r.Field),s(r.Token_Equals),f(r.Value),p(r.Value)):r.EntryType=="Index"?(t.EntryList.length>l?c(r.Token_OpenBracket):d(r.Token_OpenBracket),f(r.Index),s(r.Token_Equals),f(r.Value),p(r.Value)):r.EntryType=="Value"?(f(r.Value),t.EntryList.length>l?mt(r.Value):d(r.Value.GetFirstToken())):M(!1,"unreachable");let B=t.Token_SeperatorList[u];B!=null&&(t.EntryList.length>l?B.LeadingWhite="":c(B))}),e(),t.EntryList.length>l?t.Token_CloseBrace.LeadingWhite="":d(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")E(t);else throw Ce(t),`unreachable, type: ${t.Type}:`+t},E=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,r)=>{l===null||l.Type===null||l.Type==="StatList"&&l.StatementList.length===0||(l.Remove=()=>{l.StatementList[r]=null},E(l),d(l.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,r)=>{f(l),p(l),t.Token_CommaList[r]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((l,r)=>{s(l),l.Attribute&&(l.Attribute.LeadingWhite=" "),t.Token_VarCommaList[r]}),t.Token_Equals){c(t.Token_Equals),s(t.Token_Equals);let l=[],r=[];t.ExprList.forEach((u,B)=>{u!=null&&(B<t.VarList.length||u.Type=="CallExpr"||u.Type=="ParenExpr"||u.Type=="VargLiteral"||u.Type=="BinopExpr"||u.Type=="UnopExpr")&&(l.push(u),r.push(t.Token_ExprCommaList[B]))}),t.ExprList=l,t.CommaList=r,t.ExprList.forEach((u,B)=>{u!=null&&(f(u),p(u),t.Token_ExprCommaList[B]!=null&&t.ExprList.length-1==B&&(t.Token_ExprCommaList[B]=null))})}}else if(t.Type=="LocalFunctionStat")s(t.FunctionStat.Token_Function),s(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((l,r)=>{r>0?s(l):c(l);let u=t.FunctionStat.Token_ArgCommaList[r];u&&c(u)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(c(t.FunctionStat.Token_Varg),s(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&c(t.FunctionStat.Token_Varg),c(t.FunctionStat.Token_OpenParen),c(t.FunctionStat.Token_CloseParen),C(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((l,r)=>{r==0&&s(l),t.Token_NameChainSeperator[r]}),t.ArgList.forEach((l,r)=>{r>0&&s(l),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg&&s(t.Token_Varg),C(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")C(t.Token_Repeat,t.Body,t.Token_Until),f(t.Condition),p(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((l,r)=>{s(l),t.Token_VarCommaList[r]}),s(t.Token_In),t.GeneratorList.forEach((l,r)=>{f(l),p(l),t.Token_GeneratorCommaList[r]}),s(t.Token_Do),C(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((l,r)=>{s(l),t.Token_VarCommaList[r]}),s(t.Token_Equals),t.RangeList.forEach((l,r)=>{f(l),p(l),t.Token_RangeCommaList[r]}),s(t.Token_Do),C(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")f(t.Condition),p(t.Condition),s(t.Token_Do),C(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")C(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){f(t.Condition),p(t.Condition),s(t.Token_Then);let l=t.Token_Then,r=t.Body;t.ElseClauseList.forEach(u=>{C(l,r,u.Token),l=u.Token,u.Condition!=null&&(f(u.Condition),p(u.Condition),s(u.Token_Then),l=u.Token_Then),r=u.Body}),C(l,r,t.Token_End)}else t.Type=="CallExprStat"?f(t.Expression):t.Type=="CompoundStat"?(f(t.Lhs),f(t.Rhs),p(t.Lhs),p(t.Rhs),s(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((l,r)=>{f(l),r>0&&p(l),t.Token_LhsSeperatorList[r]}),s(t.Token_Equals),t.Rhs.forEach((l,r)=>{f(l),p(l),t.Token_RhsSeperatorList[r]})):M(!1,"Unreachable")}}}},E(te)}function mt(te){let E,f;function m(e){e&&(e.LeadingWhite="")}function d(e,h,c=!1){m(h);let s=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),p=(typeof h.Source=="string"?h.Source:h.Source.toString()).substr(0,1);s=="-"&&p=="-"||ke.includes(s)&&ke.includes(p)||c&&s==")"&&p=="("?h.LeadingWhite=c?";":" ":h.LeadingWhite=""}function _(e,h,c){E(h),m(c);let s=h.GetFirstToken(),p=h.GetLastToken();s!=null?(d(e,s),d(p,c)):d(e,c)}f=function(e){if(e.Type==="BinopExpr")f(e.Lhs),f(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(m(e.Token_Op),d(e.Lhs.GetLastToken(),e.Token_Op)),d(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")m(e.Token_Op),f(e.Rhs),d(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")m(e.Token);else if(e.Type=="FieldExpr")f(e.Base),m(e.Token_Dot),m(e.Field);else if(e.Type=="IndexExpr")f(e.Base),m(e.Token_OpenBracket),f(e.Index),m(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")f(e.Base),e.Type=="MethodExpr"&&(m(e.Token_Colon),m(e.Method)),e.FunctionArguments.CallType=="StringCall"?m(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(m(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,c)=>{f(h);let s=e.FunctionArguments.Token_CommaList[c];s!=null&&m(s)}),m(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&f(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")m(e.Token_Function),m(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{m(h);let s=e.Token_ArgCommaList[c];s!=null&&m(s)}),e.Token_Varg!=null&&m(e.Token_Varg),m(e.Token_CloseParen),_(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")m(e.Token);else if(e.Type=="ParenExpr")m(e.Token_OpenParen),f(e.Expression),m(e.Token_CloseParen);else if(e.Type=="TableLiteral")m(e.Token_OpenBrace),e.EntryList.forEach((h,c)=>{h.EntryType=="Field"?(m(h.Field),m(h.Token_Equals),f(h.Value)):h.EntryType=="Index"?(m(h.Token_OpenBracket),f(h.Index),m(h.Token_CloseBracket),m(h.Token_Equals),f(h.Value)):h.EntryType=="Value"?f(h.Value):M(!1,"unreachable");let s=e.Token_SeperatorList[c];s!=null&&m(s)}),e.Token_SeperatorList[e.EntryList.length-1]=null,m(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},E=function(e){if(e.Type=="StatList"){let h;for(h=0;h<=e.StatementList.length;h++){let c=e.StatementList[h];if(c==null)continue;E(c),m(c.GetFirstToken());let s=e.StatementList[h-1];if(s!=null){let p={")":["(","["],"]":["(","["]};if(e.SemicolonList[h-1]){let C=s.GetLastToken().Source,t=c.GetFirstToken().Source;(p[C]===null||p[C]===void 0||!p[C].includes(t))&&(e.SemicolonList[h-1]=null)}e.SemicolonList[h-1]||d(s.GetLastToken(),c.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&m(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")m(e.Token_Break);else if(e.Type=="ContinueStat")m(e.Token_Continue);else if(e.Type=="GotoStat")m(e.Token_Goto),d(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")m(e.Token_ColonsLeft),m(e.Token_Label),m(e.Token_ColonsRight);else if(e.Type=="ReturnStat")m(e.Token_Return),e.ExprList.forEach((h,c)=>{f(h),e.Token_CommaList[c]!=null&&m(e.Token_CommaList[c])}),e.ExprList.length>0&&d(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){m(e.Token_Local);let h=!1;e.VarList.forEach((c,s)=>{s==0?d(e.Token_Local,c):m(c),c.Attribute&&(m(c.Attribute),s+1==e.VarList.length&&(h=!0));let p=e.Token_VarCommaList[s];p!=null&&m(p)}),e.Token_Equals!=null&&(h||m(e.Token_Equals),e.ExprList.forEach((c,s)=>{f(c);let p=e.Token_ExprCommaList[s];p!=null&&m(p)}))}else if(e.Type=="LocalFunctionStat")m(e.Token_Local),d(e.Token_Local,e.FunctionStat.Token_Function),d(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),d(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,c)=>{m(h);let s=e.FunctionStat.Token_ArgCommaList[c];s!=null&&m(s)}),e.FunctionStat.Token_Varg&&m(e.FunctionStat.Token_Varg),m(e.FunctionStat.Token_CloseParen),_(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")m(e.Token_Function),e.NameChain.forEach((h,c)=>{c==0?d(e.Token_Function,h):m(h);let s=e.Token_NameChainSeperator[c];s!=null&&m(s)}),m(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{m(h);let s=e.Token_ArgCommaList[c];s!=null&&m(s)}),e.Token_Varg&&m(e.Token_Varg),m(e.Token_CloseParen),_(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")m(e.Token_Repeat),_(e.Token_Repeat,e.Body,e.Token_Until),f(e.Condition),d(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")m(e.Token_For),e.VarList.forEach((h,c)=>{c==0?d(e.Token_For,h):m(h);let s=e.Token_VarCommaList[c];s!=null&&m(s)}),d(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((h,c)=>{f(h),c==0&&d(e.Token_In,h.GetFirstToken());let s=e.Token_GeneratorCommaList[c];s!=null&&m(s)}),d(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")m(e.Token_For),e.VarList.forEach((h,c)=>{c==0?d(e.Token_For,h):m(h);let s=e.Token_VarCommaList[c];s!=null&&m(s)}),d(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((h,c)=>{f(h),c==0&&d(e.Token_Equals,h.GetFirstToken());let s=e.Token_RangeCommaList[c];s!=null&&m(s)}),d(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")m(e.Token_While),f(e.Condition),m(e.Token_Do),d(e.Token_While,e.Condition.GetFirstToken()),d(e.Condition.GetLastToken(),e.Token_Do),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")m(e.Token_Do),m(e.Token_End),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){m(e.Token_If),f(e.Condition),d(e.Token_If,e.Condition.GetFirstToken()),d(e.Condition.GetLastToken(),e.Token_Then);let h=e.Token_Then,c=e.Body;e.ElseClauseList.forEach((s,p)=>{_(h,c,s.Token),h=s.Token,s.Condition!=null&&(f(s.Condition),d(s.Token,s.Condition.GetFirstToken()),d(s.Condition.GetLastToken(),s.Token_Then),h=s.Token_Then),E(s.Body),c=s.Body}),_(h,c,e.Token_End)}else if(e.Type=="CallExprStat")f(e.Expression);else if(e.Type=="CompoundStat")f(e.Lhs),m(e.Token_Compound),f(e.Rhs),d(e.Lhs.GetLastToken(),e.Token_Compound),d(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((h,c)=>{f(h);let s=e.Token_LhsSeperatorList[c];s!=null&&m(s)}),m(e.Token_Equals),e.Rhs.forEach((h,c)=>{f(h);let s=e.Token_RhsSeperatorList[c];s!=null&&m(s)});else return f(e)},E(te)}function We(te){let E,f,m={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function d(t,l,r=null){let u;return u={Type:t,Token:{Type:r??"Number",LeadingWhite:"",Source:l},GetFirstToken:()=>u.Token,GetLastToken:()=>u.Token},u}function _(t,l,r){let u;return u={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:l,Rhs:r,GetFirstToken:()=>u.Lhs.GetFirstToken(),GetLastToken:()=>u.Rhs.GetLastToken()},u}function e(t,l){let r;return r={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:l,GetFirstToken:()=>r.Token_Op,GetLastToken:()=>r.Rhs.GetLastToken()},r}function h(t,l){if(l!=null)for(var[r,u]of Object.entries(l))t[r]=u}function c(t){if(t==null||t.substr==null)return;let l=t.substr(0,1),r;if((l=='"'||l=="'")&&(r=t.substr(1,t.length-2)),l=="["){let me=0,Te=1;for(;t.substr(Te,1)=="=";)me++,Te++;r=t.substr(2+me,t.length-4-me-2)}if(r==null)return"";let u="",B;for(B=0;B<=r.length;B++){let me=r.substr(B,1);me=="'"||me=='"'?u+=`\\${me}`:u+=me}return u}function s(t){if(typeof t=="object"&&t.Type=="ParenExpr")return h(t,t.Expression)}function p(t,l,r){let u=l,B=r;if(l&&l.Type=="ParenExpr"&&(u=l.Expression),r&&r.Type=="ParenExpr"&&(B=r.Expression),u==null||B==null||u.Type==null||B.Type==null||u.Type=="VariableExpr"||u.Type=="CallExpr"||u.Type=="BinopExpr"||B.Type=="CallExpr"||B.Type=="BinopExpr"||B.Type=="VariableExpr")return;let me=u.Token||u.Expression!=null&&u.Expression.Token||null,Te=B.Token||B.Expression!=null&&B.Expression.Token||null,Pe=me!=null?me.Source:null,Ge=Te!=null?Te.Source:null,_e,j;if(u.Type=="BooleanLiteral"&&(_e=Pe=="true"),B.Type=="BooleanLiteral"&&(j=Ge=="true"),!(u.Type=="NumberLiteral"&&(_e=z(Pe),_e==null))&&!(B.Type=="NumberLiteral"&&(j=z(Ge),j==null))&&((u.Type=="StringLiteral"||u.Type=="HashLiteral")&&(_e=Pe.toString()),(B.Type=="StringLiteral"||B.Type=="HashLiteral")&&(j=Ge.toString()),_e!=null&&j!=null)){if(t=="==")return _e==j;if(t=="~=")return _e!=j;if(t=="and")return _e&&j;if(t=="or")return _e||j;if(t==".."&&u.Type=="StringLiteral"&&B.Type=="StringLiteral")return`"${c(Pe)+c(Ge)}"`;if(u.Type=="StringLiteral"&&(_e=z(c(_e))),B.Type=="StringLiteral"&&(j=z(c(j))),_e==null||j==null)return;let ie;if(t=="+"&&(ie=_e+j),t=="-"&&(ie=_e-j),t=="*"&&(ie=_e*j),t=="/"&&(ie=_e/j),t=="^"&&(ie=_e**j),t=="%"&&(ie=_e%j),t==">"&&(ie=_e>j),t=="<"&&(ie=_e<j),t==">="&&(ie=_e>=j),t=="<="&&(ie=_e<=j),ie==!1||ie==!0||isFinite(ie)&&ie>-(10**6)&&ie<10**6)return ie}}function C(t,l){let r=l.Token||l.Expression||l.EntryList||l;if(r==null||r.Source==null&&l.Type!="TableLiteral"||l.Type=="VariableExpr"||l.Type=="CallExpr"||l.Type=="BinopExpr")return;let u=r.Source,B;if(l.Type=="TableLiteral"&&r!=null){let me=[],Te=0,Pe=!1,Ge=!1,_e=0;if(r.forEach((j,ie)=>{if(Pe)me.push(j);else if(j.EntryType=="Value"||j.EntryType=="Index")if((j.Index==null||j.Index.Type=="NumberLiteral")&&j.Value){if((j.Index!=null&&j.Index.Token!=null&&j.Index.Token.Source!==null?j.Index.Token.Source:_e+1).toString()!==(++_e).toString())return Pe=!0,Ge=!0,me.push(j);j.Value.Type!="CallExpr"?Te++:(Pe=!0,me.push(j))}else me.push(j)}),Ge)return;if(t=="#")return l.EntryList=me,l.EntryList.length<=0?d("NumberLiteral",Te!==null?Te:l.EntryList.length):Te<=0?e("#",l):_("+",d("NumberLiteral",Te),e("#",l))}if(l.Type=="BooleanLiteral"&&(B=u=="true"),!(l.Type=="NumberLiteral"&&(B=z(u),B===null))){if(l.Type=="StringLiteral"&&(B=u.substr(1,u.length-2)),t=="not"&&l.Type!==null)return l.Type=="NilLiteral"||l.Type=="BooleanLiteral"&&B===!1;if(B!=null){if(t=="#")return B.length;if(t=="-")return-B}}}f=function(t){if(t.Type=="BinopExpr"){if(f(t.Lhs),f(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let l=t.Token_Op;if(l!=null&&l.Source!=null){let r=p(l.Source,t.Lhs,t.Rhs);if(r!=null){if(typeof r=="boolean"){let u=d("BooleanLiteral",r.toString(),"Keyword");h(t,u);return}else if(typeof r=="number"){if(isFinite(r)==!0){let u=d("NumberLiteral",r.toString(),"Number");h(t,u);return}}else if(typeof r=="string"){let u=d("StringLiteral",r,"String");h(t,u);return}else if(typeof r=="object"){h(t,r);return}return}}if(t.Lhs.Type=="ParenExpr"){let u=t.Lhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let u=t.Rhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(f(t.Rhs),t.Rhs!=null&&m[t.Rhs.Type]==!0){let l=t.Token_Op;if(l!=null&&l.Source!=null){let r=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,u=C(l.Source,r);if(u!=null){if(typeof u=="boolean"){let B=d("BooleanLiteral",u.toString(),"Keyword");h(t,B);return}else if(typeof u=="number"){if(isFinite(u)==!0){let B=d("NumberLiteral",u,"Number");h(t,B);return}}else if(typeof u=="string"){let B=d("StringLiteral",u,"String");h(t,B);return}else if(typeof u=="object"){h(t,u);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let l=t.Token;if(l!=null){if(l.Type=="Number"){let r=l.Source.toString().split("e");if(r.length===2){let u=z(r[0]),B=z(r[1]);isFinite(u)&&isFinite(B)&&u**B<999999999&&!l.Source.includes("+")&&l.Source.includes(".")&&!l.Source.includes("-")&&(l.Source=(u**B).toString())}}l.Type=="String"&&(l.Source=l.Source.replace(/\\\d+/gi,r=>{let u=z(r.substr(1,r.length-1));return u&&isFinite(u)&&(u>=97&&u<=122||u>=65&&u<=90||u>=33&&u<=47||u>=58&&u<=64||u>=91&&u<=96||u>=123&&u<=126)&&u!==34&&u!==39&&u!==92?String.fromCharCode(u):r}))}}else if(t.Type=="FieldExpr")f(t.Base);else if(t.Type=="IndexExpr")f(t.Base),f(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(f(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,r)=>{f(l)}):t.FunctionArguments.CallType=="TableCall"&&f(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let l=t.Base.Expression;t.FunctionArguments.ArgList.forEach((r,u)=>{let B=t.FunctionArguments.ArgList[u];if(B!==void 0&&(B.Type=="NumberLiteral"||B.Type=="StringLiteral"||B.Type=="NilLiteral"||B.Type=="BooleanLiteral"||B.Type=="HashLiteral")){let me=l.ArgList[u];me&&me.var.RenameList.forEach(Te=>{Te(B.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")E(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let l=t.Expression;l!=null&&l.Type=="ParenExpr"&&(t.Expression=l.Expression),f(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&s(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((l,r)=>{l.EntryType=="Field"?f(l.Value):l.EntryType=="Index"?(f(l.Index),f(l.Value)):l.EntryType=="Value"?f(l.Value):M(!1,"unreachable")})},E=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,r)=>{l===null||l.Type===null||(l.Remove=()=>{t.StatementList[r]=null},E(l))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,r)=>{f(l)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((l,r)=>{f(l)});else if(t.Type=="LocalFunctionStat")E(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")E(t.Body);else if(t.Type=="RepeatStat")E(t.Body),f(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((l,r)=>{f(l)}),E(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((j,ie)=>{f(j)}),E(t.Body);let l=t.RangeList[0],r=t.RangeList[1],u=t.RangeList[2];if(l==null||r==null)return t.Remove();if(s(l),s(r),s(u),l.Type!="NumberLiteral"||r.Type!="NumberLiteral"||u!=null&&u.Type!="NumberLiteral"||u==null)return;let B=z(l.Token.Source),me=z(r.Token.Source),Te=u!=null&&z(u.Token.Source)||1,Pe=Te>0&&B<=me||Te<0&&B>=me,Ge=(me-B+Te)/Te;if(!(Pe&&Ge>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){f(t.Condition),E(t.Body);let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(E(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let l=t.Body.StatementList[0];l.Type!=="ContinueStat"&&l.Type!=="BreakStat"&&l.Type!=="ReturnStat"&&h(t,l)}}else if(t.Type=="IfStat"){f(t.Condition),E(t.Body),t.ElseClauseList.forEach((r,u)=>{r.Condition!=null&&f(r.Condition),E(r.Body)});let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?f(t.Expression):t.Type=="CompoundStat"?(f(t.Lhs),f(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((l,r)=>{f(l)}),t.Rhs.forEach((l,r)=>{f(l)}))}},E(te)}let fe=[],Fe;for(Fe=97;Fe<=122;Fe++)fe.push(String.fromCharCode(Fe));for(Fe=65;Fe<=90;Fe++)fe.push(String.fromCharCode(Fe));for(Fe=48;Fe<=57;Fe++)fe.push(String.fromCharCode(Fe));fe.push("_");let $e=[];for(Fe=97;Fe<=122;Fe++)$e.push(String.fromCharCode(Fe));for(Fe=65;Fe<=90;Fe++)$e.push(String.fromCharCode(Fe));function it(te){let E="",f=te%$e.length;for(te=(te-f)/$e.length,E=`${E}${$e[f]}`;te>0;){let m=te%fe.length;te=(te-m)/fe.length,E=`${E}${fe[m]}`}return E}function k(te,E,f){let m=[];for(var[d,_]of Object.entries(ot))m[d]=!0;let e=[];te.forEach(C=>{C.AssignedTo&&f?e.push(C):m[C.Name]=!0});function h(C){C.VariableList.forEach(t=>{e.push(t)}),C.ChildScopeList.forEach(t=>{h(t)})}h(E),e.forEach(C=>{C.UsedNameArray=[]}),e.sort((C,t)=>C-t);let c=0,s=[];function p(C){let t=s[C];if(t==null){for(t=it(c),c++;m[t];)t=it(c),c++;s[C]=t}return t}e.forEach((C,t)=>{C.Renamed=!0;let l=0;for(;C.UsedNameArray[l];)l++;C.Rename(p(l)),C.Scope?e.forEach(r=>{r.Renamed||(!r.Scope||r.Scope.Depth<C.Scope.Depth?r.ReferenceLocationList.some(u=>u>=C.BeginLocation&&u<=C.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1):r.Scope.Depth>C.Scope.Depth?C.ReferenceLocationList.some(u=>u>=r.BeginLocation&&u<=r.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1):C.BeginLocation<r.EndLocation&&C.EndLocation>r.BeginLocation&&(r.UsedNameArray[l]=!0))}):e.forEach(r=>{if(!r.Renamed)if(r.Type=="Global")r.UsedNameArray[l]=!0;else if(r.Type=="Local")C.ReferenceLocationList.some(u=>u>=r.BeginLocation&&u<=r.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1);else throw"Unreachable"})})}function $(te,E,f){let m=[];te.forEach(c=>{(!c.AssignedTo||!f)&&(m[c.Name]=!0)});let d=1,_=1;function e(c,s){c.Name=s,c.RenameList.forEach(p=>{p(s)})}if(f){let c={};te.forEach(s=>{s.AssignedTo&&!s.ChangedName&&(c[s.Name]=c[s.Name]||`G_${_}_`,s.ChangedName=!0,e(s,c[s.Name]),_++)})}function h(c){c.VariableList.forEach(s=>{let p=`L_${d}_`;s.Info.Type=="Argument"?p=`${p}arg${s.Info.Index}`:s.Info.Type=="LocalFunction"?p=`${p}func`:s.Info.Type=="ForRange"&&(p=`${p}forvar${s.Info.Index}`),e(s,p),d++}),c.ChildScopeList.forEach(s=>{h(s)})}h(E)}let Y={};Y.Minify=function(te,E){let f=ce(te),[m,d]=gt(f);return E.RenameVariables==!0&&k(m,d,E.RenameGlobals),E.SolveMath==!0&&We(f),mt(f),_t(f)},Y.Beautify=function(te,E){let f=ce(te),[m,d]=gt(f);return E.RenameVariables&&$(m,d,E.RenameGlobals),E.SolveMath==!0&&We(f),K(f),_t(f)};try{st!=null&&st.exports!=null&&(st.exports.Beautify=Y.Beautify,st.exports.Minify=Y.Minify)}catch{}})($t);var Sn=$t.exports;const Kt=Sn;Ut.Beautify=Kt.Beautify;Ut.Minify=Kt.Minify;Ut.Uglify=Kt.Uglify;const Zt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},en={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},tn={master:`return {
  desc="更轻松的游戏方式，更少受到来自世界的威胁。\\
饥饿、寒冷、过热和黑暗将不会杀死冒险家。\\
降低冒险家受到的伤害。永远可以在绚丽之门复活。",
  hideminimap=false,
  id="RELAXED",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="轻松",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="rare",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="nonlethal",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="none",
    hound_mounds="default",
    houndmound="default",
    hounds="rare",
    hunger="nonlethal",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="always",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="rare",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="nonlethal",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="never",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="relaxed",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="更轻松的游戏方式，更少受到来自世界的威胁。\\
饥饿、寒冷、过热和黑暗将不会杀死冒险家。\\
降低冒险家受到的伤害。永远可以在绚丽之门复活。",
  settings_id="RELAXED",
  settings_name="轻松",
  substitutes={  },
  version=4,
  worldgen_desc="更轻松的游戏方式，更少受到来自世界的威胁。\\
饥饿、寒冷、过热和黑暗将不会杀死冒险家。\\
降低冒险家受到的伤害。永远可以在绚丽之门复活。",
  worldgen_id="RELAXED",
  worldgen_name="轻松" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="rare",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="nonlethal",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="none",
    hunger="nonlethal",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="always",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="rare",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="nonlethal",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},nn={master:`return {
  desc="外面就是荒野，充满了危险！\\
随机进入世界的一个地方。\\
死亡之后：选一名新冒险家试一下、再试一下。",
  hideminimap=false,
  id="WILDERNESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="荒野",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="none",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="scatter",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="wilderness",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="外面就是荒野，充满了危险！\\
随机进入世界的一个地方。\\
死亡之后：选一名新冒险家试一下、再试一下。",
  settings_id="WILDERNESS",
  settings_name="荒野",
  substitutes={  },
  version=4,
  worldgen_desc="外面就是荒野，充满了危险！\\
随机进入世界的一个地方。\\
死亡之后：选一名新冒险家试一下、再试一下。",
  worldgen_id="WILDERNESS",
  worldgen_name="荒野" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="none",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="scatter",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},an={master:`return {
  desc="在标准《饥荒》体验的基础上添加黑暗基调。",
  hideminimap=false,
  id="LIGHTS_OUT",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="暗无天日",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="onlynight",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="darkness",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="lightsout",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="在标准《饥荒》体验的基础上添加黑暗基调。",
  settings_id="LIGHTS_OUT",
  settings_name="暗无天日",
  substitutes={  },
  version=4,
  worldgen_desc="在标准《饥荒》体验的基础上添加黑暗基调。",
  worldgen_id="LIGHTS_OUT",
  worldgen_name="暗无天日" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="onlynight",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Ln={master:`return {
  background_node_range={ 0, 1 },
  desc="你敢去熔炉里证明你自己的实力吗？",
  hideminimap=false,
  id="LAVAARENA",
  location="lavaarena",
  max_playlist_position=999,
  min_playlist_position=0,
  name="熔炉",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    autumn="default",
    basicresource_regrowth="none",
    beefaloheat="default",
    boons="never",
    brightmarecreatures="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    dropeverythingondespawn="default",
    extrastartingitems="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    keep_disconnected_tiles=true,
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    poi="never",
    portalresurection="none",
    protected="never",
    resettime="default",
    roads="never",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spring="default",
    start_location="lavaarena",
    summer="default",
    task_set="lavaarena_taskset",
    temperaturedamage="default",
    touchstone="never",
    traps="never",
    winter="default",
    winters_feast="default",
    world_size="small",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "lavaarena_portal" },
  settings_desc="你敢去熔炉里证明你自己的实力吗？",
  settings_id="LAVAARENA",
  settings_name="熔炉",
  substitutes={  },
  version=2,
  worldgen_desc="你敢去熔炉里证明你自己的实力吗？",
  worldgen_id="LAVAARENA",
  worldgen_name="熔炉" 
}`},Vn={master:`return {
  background_node_range={ 0, 1 },
  desc="你能经受暴食的挑战吗？",
  hideminimap=false,
  id="QUAGMIRE",
  location="quagmire",
  max_playlist_position=999,
  min_playlist_position=0,
  name="暴食",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    autumn="default",
    basicresource_regrowth="none",
    beefaloheat="default",
    boons="never",
    branching="random",
    brightmarecreatures="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    disease_delay="none",
    dropeverythingondespawn="default",
    extrastartingitems="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    keep_disconnected_tiles=false,
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    loop_percent=0,
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    petrification="none",
    poi="never",
    portalresurection="none",
    prefabswaps_start="classic",
    protected="never",
    resettime="default",
    roads="never",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spring="default",
    start_location="quagmire_startlocation",
    summer="default",
    task_set="quagmire_taskset",
    temperaturedamage="default",
    touchstone="never",
    traps="never",
    wildfires="never",
    winter="default",
    winters_feast="default",
    world_size="small",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "quagmire_portal" },
  settings_desc="你能经受暴食的挑战吗？",
  settings_id="QUAGMIRE",
  settings_name="暴食",
  substitutes={  },
  version=2,
  worldgen_desc="你能经受暴食的挑战吗？",
  worldgen_id="QUAGMIRE",
  worldgen_name="暴食" 
}`},Cn=["󰀆","󰀑","󰀇","󰀃","󰀊","󰀕","󰀭","󰀅","󰀍","󰀘","󰀮","󰀩","󰀠","󰀈","󰀛","󰀋","󰀏","󰀫","󰀝","󰀄","󰀐","󰀓","󰀁","󰀨","󰀣","󰀤","󰀔","󰀂","󰀧","󰀒","󰀦","󰀙","󰀞","󰀡","󰀯","󰀟","󰀗","󰀥","󰀚","󰀪","󰀌","󰀜","󰀬","󰀎","󰀖","󰀉","󰀀","󰀢"],En={class:"page-div"},Fn={class:"card-header"},Mn={style:{display:"flex","align-items":"center"}},xn={key:0},An={style:{display:"flex","align-items":"center"}},Bn={style:{display:"flex","align-items":"center"}},Rn={style:{display:"flex","align-items":"center"}},Gn={style:{display:"flex","align-items":"center"}},In={style:{display:"flex","align-items":"center"}},Pn={style:{display:"flex","align-items":"center"}},Un={style:{display:"flex","align-items":"center"}},Dn={style:{display:"flex","align-items":"center"}},zn={style:{display:"flex","align-items":"center"}},Nn={class:"el-form-item-msg"},On={class:"card-header"},qn={style:{display:"flex","flex-wrap":"wrap"}},Wn={style:{width:"99%"}},$n={style:{width:"100%"}},Kn={style:{"font-weight":"bolder"}},jn={class:"item-container"},Hn={style:{"font-weight":"bolder"}},Qn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Yn={style:{"font-weight":"bolder"}},Zn={class:"item-container"},ea={style:{"font-weight":"bolder"}},ta={class:"item-container"},na={style:{"font-weight":"bolder"}},aa={class:"item-container"},la={style:{"font-weight":"bolder"}},oa={class:"item-container"},ra={style:{"font-weight":"bolder"}},ia={class:"item-container"},ua={style:{"font-weight":"bolder"}},sa={class:"item-container"},da={style:{"font-weight":"bolder"}},fa={class:"item-container"},ca={style:{"font-weight":"bolder"}},ma={class:"item-container"},pa={style:{"font-weight":"bolder"}},ga={class:"item-container"},_a={style:{"font-weight":"bolder"}},ha={class:"item-container"},ya={style:{"font-weight":"bolder"}},Ta={class:"item-container"},ba={style:{"font-weight":"bolder"}},ka={class:"item-container"},va={style:{"font-weight":"bolder"}},wa={class:"item-container"},Sa={style:{"font-weight":"bolder"}},La={class:"item-container"},Va={style:{"font-weight":"bolder"}},Ca={class:"item-container"},Ea={style:{"font-weight":"bolder"}},Fa={class:"item-container"},Ma={style:{"font-weight":"bolder"}},xa={class:"item-container"},Aa={style:{"font-weight":"bolder"}},Ba={class:"item-container"},Ra={style:{"font-weight":"bolder"}},Ga={class:"item-container"},Ia={style:{"font-weight":"bolder"}},Pa={class:"item-container"},Ua={class:"tip"},Da={style:{display:"flex","align-items":"center"}},za={style:{display:"flex","justify-content":"flex-end"}},Na={class:"tip_warning"},Oa={style:{margin:"10px"}},qa={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},Wa={style:{display:"flex","align-items":"center"}},$a={key:0,style:{width:"100%"}},Ka={class:"emoji-container mt-4 mb-6"},ja=["onClick"],Ha={__name:"room",setup(st){const{t:T}=dn();fn(async()=>{Ce.value=vn(14),z.value=window.innerHeight,window.addEventListener("resize",()=>{z.value=window.innerHeight}),await ot(),await vt(),await rt(),await Fe(),C()});const Ce=Le(""),M=Le(!1),z=Le(0),{isMobile:ye}=cn(),de=mn(),Ee=pn(),dt=Wt(()=>de.isDark),ke=Wt(()=>de.language),ft=Ee.userInfo,ze=Wt(()=>{const w=(Oe.value||[]).findIndex(g=>g.clusterName===de.selectedDstCluster);return w!==-1?w:0}),ct=gn();_n();const lt=hn(),je=yn("refresh"),Je=(F,w)=>{let g=null;return(...L)=>{g&&clearTimeout(g),g=setTimeout(()=>F(...L),w)}},Oe=Le([]),ot=()=>{ht.clusters.all.get().then(F=>{Oe.value=F.data})},qe=()=>{ht.clusters.get().then(F=>{de.dstClusters=F.data,de.selectedDstCluster===null&&de.dstClusters!==null&&(de.selectedDstCluster=de.dstClusters[0].clusterName)})},Xe=Le(0),rt=()=>{Tn.userInfo.get().then(F=>{Xe.value=F.data.maxWorldsPerCluster})},Ye=()=>{setTimeout(()=>{ct.meta.isKeepAlive&&lt.removeKeepAliveName(ct.name),je(!1),kt(()=>{ct.meta.isKeepAlive&&lt.addKeepAliveName(ct.name),je(!0)})},0)},ae=Le(0),ge=Le(!1),ce=F=>{ae.value>F&&(ae.value=F)},tt=()=>{ae.value--},gt=async()=>{if(ae.value===0){if(K.value.gameMode==="custom"&&K.value.customGameMode===""){et(ke.value==="zh"?"请输入自定义模式":"Please input custom game mode");return}_t.value.validate(async F=>{F&&(fe.value||(e.value=1,h.value="World1",c.value=[{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+ze.value*10,shardMasterPort:10888+ze.value*10,steamMasterPort:27018+ze.value*10,steamAuthenticationPort:8768+ze.value*10,shardMasterIp:"127.0.0.1",clusterKey:Ce.value,encodeUserPath:!0,saved:!1}]),ae.value++)})}if(ae.value===1){if(ft.role!=="admin"&&c.value.length>Xe.value){let w="";ke.value==="zh"?w=`超过最大可创建世界数量，当前最大可创建世界数为${Xe.value}`:w=`Exceeds the maximum number of worlds that can be created. The current maximum is ${Xe.value}`,et(w);return}const F=["serverPort","shardMasterPort","steamMasterPort","steamAuthenticationPort"];for(let w of c.value)for(const g of ve.value)if(g.clusterName!==de.selectedDstCluster){for(let L of F)if(g.worldPort!==null&&g.worldPort.includes(w[L])){et(`[${T(`setting.roomWorldForm.${L}`)}]:${w[L]} ${ke.value==="zh"?"端口冲突，请检查并修改":"Port Conflicted, please check and modify"}`,3e3);return}}for(let w in p)p!=null&&p.key&&await p[w].validate();for(let w of c.value){if(w.levelData===""){et(ke.value==="zh"?"请输入世界配置":"Please input world configure");return}if(w.shardMasterPort!==c.value[0].shardMasterPort){et(ke.value==="zh"?"主节点端口必须一致":"Master Port must be same");return}try{It.parse(w.levelData)}catch{et(T("setting.luaError"));return}}ae.value++;return}if(ae.value===2)if(We.value)try{It.parse(We.value.mod),ae.value++}catch{et(T("setting.luaError"))}else ae.value++},_t=Le(),K=Le({clusterName:de.selectedDstCluster,name:"",description:"",gameMode:"",customGameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,consoleEnabled:!0,pauseEmptyDisabled:!1,password:"",token:""}),mt={name:[{required:!0,message:T("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:T("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:T("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:T("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:T("setting.roomBaseFormRules.token"),trigger:"blur"}]},We=Le({mod:""}),fe=Le(!1),Fe=()=>{const F={clusterName:de.selectedDstCluster};ht.cluster.get(F).then(w=>{if(K.value=w.data.clusterSetting,w.data.worlds){c.value=w.data.worlds;let g=1,L=999999;for(let V of c.value){let y=parseInt(V.name.replace("World",""));y>g&&(g=y),y<L&&(L=y),V.saved=!0,Ce.value=V.clusterKey}e.value=g,h.value="World"+L.toString(),fe.value=!0}else fe.value=!1;We.value.mod=w.data.mod})},$e=async F=>{switch(F){case"save":it();break;case"saveAndRestart":k();break;case"generateNewWorld":$();break}},it=()=>{K.value.gameMode!=="custom"&&(K.value.customGameMode="");const F={clusterSetting:K.value,worlds:c.value,mod:We.value.mod,sysSetting:{}};M.value=!0,ht.cluster.save.post(F).then(w=>{Rt(w.message),M.value=!1,qe()}).finally(()=>{M.value=!1,kt(()=>{Ye()})})},k=()=>{K.value.gameMode!=="custom"&&(K.value.customGameMode="");const F={clusterSetting:K.value,worlds:c.value,mod:We.value.mod,sysSetting:{}};M.value=!0,ht.cluster.saveRestart.post(F).then(w=>{Rt(w.message),M.value=!1,qe()}).finally(()=>{M.value=!1,kt(()=>{Ye()})})},$=()=>{K.value.gameMode!=="custom"&&(K.value.customGameMode="");const F={clusterSetting:K.value,worlds:c.value,mod:We.value.mod,sysSetting:{}};M.value=!0,ht.cluster.saveRegenerate.post(F).then(w=>{Rt(w.message),M.value=!1,qe()}).finally(()=>{M.value=!1,kt(()=>{Ye()})})},Y=Le({}),te=F=>{if(F==="")return;const w=It.parse(F),g=E(w);Y.value=f(g)};function E(F){const g=F.body[0].arguments[0];for(const L of g.fields)if(L.key.type==="Identifier"&&L.key.name==="overrides")return L.value;return null}function f(F){const w={};for(const g of F.fields){const L=g.key.name;w[L]=g.value.raw.replace(/"/g,"")}return w}const m=F=>{let w=Ut.Beautify(F,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return w=w.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),w=w.replace(/ = /g,"="),w=w.replace(/\t/g,"  "),w=w.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),w=w.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),w=w.replace(/(.+)},\n/g,`$1
  },
`),w=w.replace(/^ +?\n/gm,""),w},d=Je(F=>{const w=F.name,g=F.value;for(let L of c.value)if(L.name===h.value){const V=It.parse(L.levelData),y=E(V);for(let R of y.fields)R.key.name===w&&(R.value.raw=`"${g}"`);L.levelData=_(V);break}},100),_=(F,w=0)=>{const g="    ".repeat(w);switch(F.type){case"Chunk":return F.body.map(L=>_(L,w)).join(`
`);case"LocalStatement":return`${g}local ${F.variables.map(_).join(", ")} = ${F.init.map(_).join(", ")}`;case"FunctionDeclaration":return`${g}function ${_(F.identifier)}(${F.parameters.map(_).join(", ")}) 
${_(F.body,w+1)}
${g}end`;case"ReturnStatement":return`${g}return ${F.arguments.map(_).join(", ")}`;case"BinaryExpression":return`${_(F.left)} ${F.operator} ${_(F.right)}`;case"CallStatement":return`${g}${_(F.expression)}`;case"Identifier":return F.name;case"StringLiteral":return`${F.raw}`;case"NumericLiteral":return F.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${g}{ ${F.fields.map(L=>_(L,w+1)).join(`,
`+g)} }`;case"Field":return F.key?`${_(F.key)} = ${_(F.value)}`:_(F.value);case"AssignmentStatement":return`${g}${F.variables.map(_).join(", ")} = ${F.init.map(_).join(", ")}`;case"CallExpression":return`${_(F.base)}(${F.arguments.map(_).join(", ")})`;case"TableKeyString":return`${_(F.key)} = ${_(F.value)}`;case"BooleanLiteral":return F.raw;case"TableKey":return`[${_(F.key)}] = ${_(F.value)}`;case"TableValue":return _(F.value);default:throw new Error(`Unsupported node type: ${F.type}`)}},e=Le(1),h=Le("World1"),c=Le([{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+ze.value*10,shardMasterPort:10888+ze.value*10,steamMasterPort:27018+ze.value*10,steamAuthenticationPort:8768+ze.value*10,shardMasterIp:"127.0.0.1",clusterKey:Ce.value,encodeUserPath:!0}]),s={id:[{required:!0,message:T("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:T("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:T("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:T("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:T("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:T("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:T("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},p={},C=()=>{for(let F of c.value){const w=c.value.length;e.value=w,p[`World${w}`]=Le()}},t=(F,w)=>{if(w==="add"){e.value++;const g=`World${e.value}`;p[g]=Le(),c.value.push({id:e.value+100,name:g,isMaster:!1,levelData:"",serverPort:11e3+e.value+ze.value*10,shardMasterPort:10888+ze.value*10,steamMasterPort:27017+e.value+ze.value*10,steamAuthenticationPort:8767+e.value+ze.value*10,shardMasterIp:"127.0.0.1",clusterKey:Ce.value,encodeUserPath:!0}),h.value=g}else if(w==="remove"){if(c.value.length===1){et(ke.value==="zh"?"每个房间至少含有一个世界":"Every room must include at least one world");return}const g=c.value;let L=h.value;g.forEach((V,y)=>{if(V.name===F){const R=g[y+1]||g[y-1];R&&(L=R.name)}}),h.value=L,c.value=g.filter(V=>V.name!==F),delete p[F]}l.value="Code"},l=Le("Code"),r=F=>{for(let w of c.value)w.name===h.value&&(F.clusterType==="endless"&&(F.worldType==="ground"&&(w.levelData=Zt.master),F.worldType==="cave"&&(w.levelData=Zt.caves)),F.clusterType==="survival"&&(F.worldType==="ground"&&(w.levelData=en.master),F.worldType==="cave"&&(w.levelData=en.caves)),F.clusterType==="relaxed"&&(F.worldType==="ground"&&(w.levelData=tn.master),F.worldType==="cave"&&(w.levelData=tn.caves)),F.clusterType==="wilderness"&&(F.worldType==="ground"&&(w.levelData=nn.master),F.worldType==="cave"&&(w.levelData=nn.caves)),F.clusterType==="lightsOut"&&(F.worldType==="ground"&&(w.levelData=an.master),F.worldType==="cave"&&(w.levelData=an.caves)),F.clusterType==="lavaarena"&&F.worldType==="ground"&&(w.levelData=Ln.master),F.clusterType==="quagmire"&&F.worldType==="ground"&&(w.levelData=Vn.master))},u=Le(""),B=async F=>{if(F==="Visualization")try{for(let w of c.value)if(w.name===h.value){u.value=me(w.levelData),await te(w.levelData);break}}catch{et(ke.value==="zh"?"可视化配置加载失败":"Visualization load failed")}F==="Code"&&await kt(()=>{for(let w of c.value)if(w.name===h.value){w.levelData=m(w.levelData);break}})},me=F=>{const w=/location\s*=\s*"([^"]*)"/,g=F.match(w);return g?g[1]:""},Te=()=>{l.value="Code"},Pe=Le(!1),Ge=Le(""),_e=Le([]),j=()=>{_e.value=[{ID:void 0,name:"",maxPlayers:void 0}],Ge.value="",Pe.value=!0},ie=()=>{let F="",w="";for(let g of _e.value){if(!g.ID){et(ke.value==="zh"?"世界ID未填写":"World ID is required");return}if(!g.name){et(ke.value==="zh"?"世界名未填写":"World name is required");return}if(!g.maxPlayers){et(ke.value==="zh"?"世界最大玩家数未填写":"World max players is required");return}F=F+`["${g.ID}"]="${g.name}",`,w=w+`["${g.ID}"]="${g.maxPlayers}",`}Ge.value=`
  ["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${w}},
      say_dest=true,
      world_name={${F}},
      world_prompt=true
    },
    enabled=true
  }`,Ge.value="```lua ::open\n"+Ge.value},ve=Le([]),vt=()=>{ht.clustersWorldPort.get().then(F=>{ve.value=F.data})},Ze=Le(!1),Ke=Le("name"),He=Le("copy"),yt=Le(),Tt=Le(),bt=F=>{Ke.value=F,Ze.value=!0},ut=Le(0),wt=F=>{var w,g;if(He.value==="insert")if(Ke.value==="name"){const L=(w=yt.value)==null?void 0:w.input;if(!L)return;const V=K.value.name,y=L.selectionStart||ut.value,R=L.selectionEnd||ut.value;K.value.name=V.substring(0,y)+F+V.substring(R);const D=y+F.length;ut.value=D,setTimeout(()=>{L.setSelectionRange(D,D),L.focus()},0)}else{const L=(g=Tt.value)==null?void 0:g.input;if(!L)return;const V=K.value.description,y=L.selectionStart||ut.value,R=L.selectionEnd||ut.value;K.value.description=V.substring(0,y)+F+V.substring(R);const D=y+F.length;ut.value=D,setTimeout(()=>{L.setSelectionRange(D,D),L.focus()},0)}else nt(F).then(()=>{let L;ke.value==="zh"?L="复制成功":L="Copy Success",Ze.value=!1,Rt(L)}).catch(()=>{ke.value})};function nt(F,w,g){return new Promise((L,V)=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(F).then(()=>{L(F)}).catch(y=>{V(y)});else try{const y=document.createElement("textarea");y.value=F,y.style.position="fixed",y.style.opacity="0",document.body.appendChild(y),y.select();const R=document.execCommand("copy");if(document.body.removeChild(y),R)L(F);else throw new Error("复制失败，execCommand返回false")}catch(y){V(y)}})}return bn(()=>de.selectedDstCluster,F=>{F&&kt(()=>{Ye()})},{immediate:!1}),(F,w)=>{const g=Ae("el-step"),L=Ae("el-steps"),V=Ae("el-card"),y=Ae("el-col"),R=Ae("el-row"),D=Ae("QuestionFilled"),P=Ae("el-icon"),I=Ae("el-tooltip"),Z=Ae("el-button"),oe=Ae("el-input"),ne=Ae("el-form-item"),pe=Ae("el-radio"),De=Ae("el-radio-group"),he=Ae("el-slider"),Ie=Ae("el-switch"),Qe=Ae("el-link"),we=Ae("el-form"),St=Ae("el-scrollbar"),Ne=Ae("el-dropdown-item"),Mt=Ae("el-dropdown-menu"),Lt=Ae("el-dropdown"),Vt=Ae("el-tab-pane"),xe=Ae("el-divider"),xt=Ae("el-tabs"),Dt=Ae("el-result"),At=Ae("el-dialog");return G(),le("div",En,[b(R,{gutter:10},{default:S(()=>[b(y,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:S(()=>[b(V,{shadow:"never"},{default:S(()=>[b(L,{active:ae.value,"align-center":"","finish-status":"success"},{default:S(()=>[b(g,{title:a(ye)?a(T)("setting.roomSettingMobile"):a(T)("setting.roomSetting"),onClick:w[0]||(w[0]=q=>ce(0))},null,8,["title"]),b(g,{title:a(ye)?a(T)("setting.worldSettingMobile"):a(T)("setting.worldSetting"),onClick:w[1]||(w[1]=q=>ce(1))},null,8,["title"]),b(g,{title:a(ye)?a(T)("setting.modSettingMobile"):a(T)("setting.modSetting"),onClick:w[2]||(w[2]=q=>ce(3))},null,8,["title"]),b(g,{title:a(ye)?a(T)("setting.finishSettingMobile"):a(T)("setting.finishSetting"),onClick:w[3]||(w[3]=q=>ce(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),b(R,{gutter:10,style:{"margin-top":"5px"}},{default:S(()=>[b(y,{lg:24,md:24,sm:24,span:24,xs:24},{default:S(()=>[ae.value===0?(G(),re(V,{key:0,shadow:"never"},{header:S(()=>[N("div",Fn,[N("span",null,U(a(T)("setting.roomSetting")),1)])]),default:S(()=>[b(St,{height:z.value-438},{default:S(()=>[b(we,{ref_key:"clusterSettingFormRef",ref:_t,"label-position":a(ye)?"top":"left","label-width":a(ye)?"70":"auto","hide-required-asterisk":"",model:K.value,rules:mt,size:a(ye)?"small":"large",style:{"margin-right":"16px"}},{default:S(()=>[b(ne,{prop:"name",style:at(a(ye)?"padding-top: 0px":"padding-top: 25px")},{label:S(()=>[N("div",Mn,[N("span",null,U(a(T)("setting.baseForm.room")),1),b(I,{content:a(T)("setting.tip.stepOne.name"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(oe,{modelValue:K.value.name,"onUpdate:modelValue":w[5]||(w[5]=q=>K.value.name=q)},{append:S(()=>[b(I,{content:a(T)("setting.iconTip"),effect:"light",placement:"top"},{default:S(()=>[b(Z,{icon:"sc-icon-EmotionLine",onClick:w[4]||(w[4]=q=>bt("name"))})]),_:1},8,["content"])]),_:1},8,["modelValue"])]),_:1},8,["style"]),a(ye)?Ve("",!0):(G(),le("div",xn)),b(ne,{prop:"description",style:at(a(ye)?"padding-top: 0px":"padding-top: 25px")},{label:S(()=>[N("div",An,[N("span",null,U(a(T)("setting.baseForm.description")),1),b(I,{content:a(T)("setting.tip.stepOne.description"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(oe,{modelValue:K.value.description,"onUpdate:modelValue":w[7]||(w[7]=q=>K.value.description=q)},{append:S(()=>[b(I,{content:a(T)("setting.iconTip"),effect:"light",placement:"top"},{default:S(()=>[b(Z,{icon:"sc-icon-EmotionLine",onClick:w[6]||(w[6]=q=>bt("description"))})]),_:1},8,["content"])]),_:1},8,["modelValue"])]),_:1},8,["style"]),b(ne,{prop:"gameMode",style:at([a(ye)?"padding-top: 0px":"padding-top: 25px",{display:"flex","align-items":"center"}])},{label:S(()=>[N("div",Bn,[N("span",null,U(a(T)("setting.baseForm.gameMode.name")),1),b(I,{content:a(T)("setting.tip.stepOne.gameMode"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(De,{modelValue:K.value.gameMode,"onUpdate:modelValue":w[8]||(w[8]=q=>K.value.gameMode=q),style:{"margin-right":"20px"}},{default:S(()=>[b(pe,{label:a(T)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.relaxed"),value:"relaxed"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.wilderness"),value:"wilderness"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.lightsOut"),value:"lightsOut"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"]),b(pe,{label:a(T)("setting.baseForm.gameMode.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"]),K.value.gameMode==="custom"?(G(),re(oe,{key:0,modelValue:K.value.customGameMode,"onUpdate:modelValue":w[9]||(w[9]=q=>K.value.customGameMode=q),placeholder:a(T)("setting.baseForm.gameMode.customInputPlaceholder"),style:{flex:"0 0 auto",width:"25%"}},null,8,["modelValue","placeholder"])):Ve("",!0)]),_:1},8,["style"]),b(ne,{prop:"playerNum",style:at(a(ye)?"padding-top: 0px":"padding-top: 25px")},{label:S(()=>[N("div",Rn,[N("span",null,U(a(T)("setting.baseForm.playerNum")),1),b(I,{content:a(T)("setting.tip.stepOne.playerNum"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(he,{modelValue:K.value.playerNum,"onUpdate:modelValue":w[10]||(w[10]=q=>K.value.playerNum=q),max:64,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["style"]),b(ne,{prop:"backDays",style:at(a(ye)?"padding-top: 0px":"padding-top: 25px")},{label:S(()=>[N("div",Gn,[N("span",null,U(a(T)("setting.baseForm.backDays")),1),b(I,{content:a(T)("setting.tip.stepOne.backDays"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(he,{modelValue:K.value.backDays,"onUpdate:modelValue":w[11]||(w[11]=q=>K.value.backDays=q),max:64,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["style"]),b(R,null,{default:S(()=>[b(y,{lg:8,md:8,sm:24,span:8,xs:24},{default:S(()=>[b(ne,{prop:"vote",style:at(a(ye)?"padding-top: 0px":"padding-top: 29px")},{label:S(()=>[N("div",In,[N("span",null,U(a(T)("setting.baseForm.vote")),1),b(I,{content:a(T)("setting.tip.stepOne.vote"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(Ie,{modelValue:K.value.vote,"onUpdate:modelValue":w[12]||(w[12]=q=>K.value.vote=q)},null,8,["modelValue"])]),_:1},8,["style"])]),_:1}),b(y,{lg:8,md:8,sm:24,span:8,xs:24},{default:S(()=>[b(ne,{prop:"vote",style:at(a(ye)?"padding-top: 0px":"padding-top: 29px")},{label:S(()=>[N("div",Pn,[N("span",null,U(a(T)("setting.baseForm.pauseEmptyDisabled")),1),b(I,{content:a(T)("setting.tip.stepOne.pauseEmptyDisabled"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(Ie,{modelValue:K.value.pauseEmptyDisabled,"onUpdate:modelValue":w[13]||(w[13]=q=>K.value.pauseEmptyDisabled=q),"active-value":!1,"inactive-value":!0},null,8,["modelValue"])]),_:1},8,["style"])]),_:1}),b(y,{lg:8,md:8,sm:24,span:8,xs:24},{default:S(()=>[b(ne,{prop:"pvp",style:at(a(ye)?"padding-top: 0px":"padding-top: 25px")},{label:S(()=>[N("div",Un,[N("span",null,U(a(T)("setting.baseForm.pvp")),1),b(I,{content:a(T)("setting.tip.stepOne.pvp"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(Ie,{modelValue:K.value.pvp,"onUpdate:modelValue":w[14]||(w[14]=q=>K.value.pvp=q)},null,8,["modelValue"])]),_:1},8,["style"])]),_:1})]),_:1}),b(ne,{style:at(a(ye)?"padding-top: 0px":"padding-top: 30px")},{label:S(()=>[N("div",Dn,[N("span",null,U(a(T)("setting.baseForm.password")),1),b(I,{content:a(T)("setting.tip.stepOne.password"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(oe,{modelValue:K.value.password,"onUpdate:modelValue":w[15]||(w[15]=q=>K.value.password=q),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["style"]),b(ne,{prop:"token",style:at(a(ye)?"padding-top: 0px":"padding-top: 30px")},{label:S(()=>[N("div",zn,[N("span",null,U(a(T)("setting.baseForm.token")),1),b(I,{content:a(T)("setting.tip.stepOne.token"),effect:"light",placement:"top"},{default:S(()=>[b(P,{size:"14",style:{"margin-left":"2px"}},{default:S(()=>[b(D)]),_:1})]),_:1},8,["content"])])]),default:S(()=>[b(oe,{modelValue:K.value.token,"onUpdate:modelValue":w[16]||(w[16]=q=>K.value.token=q),"show-password":""},null,8,["modelValue"]),N("div",Nn,[b(Qe,{underline:"never",href:"https://accounts.klei.com",target:"_blank"},{default:S(()=>[ue(U(a(T)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):Ve("",!0),ae.value===1?(G(),re(V,{key:1,shadow:"never"},{header:S(()=>[N("div",On,[N("span",null,U(a(T)("setting.worldSetting")),1),N("div",null,[b(Lt,{trigger:"click",onCommand:r},{dropdown:S(()=>[b(Mt,null,{default:S(()=>[K.value.gameMode==="endless"?(G(),re(Ne,{key:0,command:{clusterType:"endless",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.endless"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="endless"?(G(),re(Ne,{key:1,command:{clusterType:"endless",worldType:"cave"}},{default:S(()=>[ue(U(a(T)("setting.endless"))+"-"+U(a(T)("setting.caveSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="survival"?(G(),re(Ne,{key:2,command:{clusterType:"survival",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.survival"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="survival"?(G(),re(Ne,{key:3,command:{clusterType:"survival",worldType:"cave"}},{default:S(()=>[ue(U(a(T)("setting.survival"))+"-"+U(a(T)("setting.caveSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="relaxed"?(G(),re(Ne,{key:4,command:{clusterType:"relaxed",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.relaxed"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="relaxed"?(G(),re(Ne,{key:5,command:{clusterType:"relaxed",worldType:"cave"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.relaxed"))+"-"+U(a(T)("setting.caveSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="wilderness"?(G(),re(Ne,{key:6,command:{clusterType:"wilderness",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.wilderness"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="wilderness"?(G(),re(Ne,{key:7,command:{clusterType:"wilderness",worldType:"cave"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.wilderness"))+"-"+U(a(T)("setting.caveSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="lightsOut"?(G(),re(Ne,{key:8,command:{clusterType:"lightsOut",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.lightsOut"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="lightsOut"?(G(),re(Ne,{key:9,command:{clusterType:"lightsOut",worldType:"cave"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.lightsOut"))+"-"+U(a(T)("setting.caveSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="lavaarena"?(G(),re(Ne,{key:10,command:{clusterType:"lavaarena",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.lavaarena"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0),K.value.gameMode==="quagmire"?(G(),re(Ne,{key:11,command:{clusterType:"quagmire",worldType:"ground"}},{default:S(()=>[ue(U(a(T)("setting.baseForm.gameMode.quagmire"))+"-"+U(a(T)("setting.groundSettingMobile")),1)]),_:1})):Ve("",!0)]),_:1})]),default:S(()=>[b(Z,{disabled:l.value!=="Code"||K.value.gameMode!=="endless"&&K.value.gameMode!=="survival"&&K.value.gameMode!=="relaxed"&&K.value.gameMode!=="wilderness"&&K.value.gameMode!=="lightsOut"&&K.value.gameMode!=="quagmire"&&K.value.gameMode!=="lavaarena",type:"success"},{default:S(()=>[ue(U(a(T)("setting.oneClick"))+" ",1),b(P,{class:"el-icon--right"},{default:S(()=>[b(a(Xt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:S(()=>[b(St,{height:z.value-450},{default:S(()=>[b(xt,{modelValue:h.value,"onUpdate:modelValue":w[18]||(w[18]=q=>h.value=q),editable:"",type:"card",onEdit:t,onTabChange:Te,style:{"margin-right":"16px"}},{default:S(()=>[(G(!0),le(Me,null,Be(c.value,q=>(G(),re(Vt,{key:q.name,label:ke.value==="zh"?"世界":"World",name:q.name},{default:S(()=>[b(R,null,{default:S(()=>[b(we,{ref_for:!0,ref:i=>p[q.name]=i,"label-position":a(ye)||ke.value==="en"?"top":"left",model:q,rules:s,size:a(ye)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:S(()=>[N("div",qn,[b(ne,{label:a(T)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.isMasterTip"),effect:"light",placement:"top"},{default:S(()=>[b(Ie,{modelValue:q.isMaster,"onUpdate:modelValue":i=>q.isMaster=i,"active-text":ke.value==="zh"?"是":"Y","inactive-text":ke.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:S(()=>[b(Ie,{modelValue:q.encodeUserPath,"onUpdate:modelValue":i=>q.encodeUserPath=i,"active-text":ke.value==="zh"?"是":"Y","inactive-text":ke.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.idTip"),effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.id,"onUpdate:modelValue":i=>q.id=i,modelModifiers:{number:!0},disabled:q.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.serverPortTip"),effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.serverPort,"onUpdate:modelValue":i=>q.serverPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.noEdit")+"，cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.shardMasterPort,"onUpdate:modelValue":i=>q.shardMasterPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.noEdit")+"，server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.steamMasterPort,"onUpdate:modelValue":i=>q.steamMasterPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.noEdit")+"，server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.steamAuthenticationPort,"onUpdate:modelValue":i=>q.steamAuthenticationPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.shardMasterIp,"onUpdate:modelValue":i=>q.shardMasterIp=i,disabled:q.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),b(ne,{label:a(T)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:S(()=>[b(I,{"show-after":100,content:a(T)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:S(()=>[b(oe,{modelValue:q.clusterKey,"onUpdate:modelValue":i=>q.clusterKey=i,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),N("div",Wn,[b(xt,{modelValue:l.value,"onUpdate:modelValue":w[17]||(w[17]=i=>l.value=i),onTabChange:B},{default:S(()=>[b(Vt,{label:ke.value==="zh"?"配置文件":"Code",name:"Code"},{default:S(()=>[N("div",$n,[b(we,{model:q},{default:S(()=>[b(ne,null,{default:S(()=>[b(Yt,{modelValue:q.levelData,"onUpdate:modelValue":i=>q.levelData=i,height:z.value*.5,theme:dt.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(K.value.gameMode==="endless"||K.value.gameMode==="survival")&&q.levelData!==""?(G(),re(Vt,{key:0,label:a(T)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:S(()=>[u.value==="forest"&&Object.keys(Y.value).length!==0?(G(),le(Me,{key:0},[b(xe,{"content-position":"center"},{default:S(()=>[N("span",Kn,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),N("div",jn,[(G(!0),le(Me,null,Be(a(pt).global,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Hn,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),N("div",Qn,[(G(!0),le(Me,null,Be(a(pt).events,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Jn,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),N("div",Xn,[(G(!0),le(Me,null,Be(a(pt).survivors,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Yn,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),N("div",Zn,[(G(!0),le(Me,null,Be(a(pt).world,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",ea,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),N("div",ta,[(G(!0),le(Me,null,Be(a(pt).resourceRegrowth,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",na,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),N("div",aa,[(G(!0),le(Me,null,Be(a(pt).unnaturalPortalResource,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",la,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),N("div",oa,[(G(!0),le(Me,null,Be(a(pt).creatures,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",ra,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),N("div",ia,[(G(!0),le(Me,null,Be(a(pt).hostileCreatures,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",ua,U(a(T)("setting.groundVisualizationRule")),1),ue(" - "+U(a(T)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),N("div",sa,[(G(!0),le(Me,null,Be(a(pt).giants,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",da,U(a(T)("setting.groundVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),N("div",fa,[(G(!0),le(Me,null,Be(a(Ct).global,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",ca,U(a(T)("setting.groundVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),N("div",ma,[(G(!0),le(Me,null,Be(a(Ct).world,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",pa,U(a(T)("setting.groundVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),N("div",ga,[(G(!0),le(Me,null,Be(a(Ct).resources,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",_a,U(a(T)("setting.groundVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),N("div",ha,[(G(!0),le(Me,null,Be(a(Ct).creaturesAndSpawners,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",ya,U(a(T)("setting.groundVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),N("div",Ta,[(G(!0),le(Me,null,Be(a(Ct).hostileCreaturesAndSpawners,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):Ve("",!0),u.value==="cave"&&Object.keys(Y.value).length!==0?(G(),le(Me,{key:1},[b(xe,{"content-position":"center"},{default:S(()=>[N("span",ba,U(a(T)("setting.cavesVisualizationRule")),1),ue(" - "+U(a(T)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),N("div",ka,[(G(!0),le(Me,null,Be(a(Et).world,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",va,U(a(T)("setting.cavesVisualizationRule")),1),ue(" - "+U(a(T)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),N("div",wa,[(G(!0),le(Me,null,Be(a(Et).resourceRegrowth,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Sa,U(a(T)("setting.cavesVisualizationRule")),1),ue(" - "+U(a(T)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),N("div",La,[(G(!0),le(Me,null,Be(a(Et).creatures,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Va,U(a(T)("setting.cavesVisualizationRule")),1),ue(" - "+U(a(T)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),N("div",Ca,[(G(!0),le(Me,null,Be(a(Et).hostileCreatures,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Ea,U(a(T)("setting.cavesVisualizationRule")),1),ue(" - "+U(a(T)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),N("div",Fa,[(G(!0),le(Me,null,Be(a(Et).giants,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Ma,U(a(T)("setting.cavesVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),N("div",xa,[(G(!0),le(Me,null,Be(a(Gt).world,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(Ft)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(Ft)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(Ft)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(Ft)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(Ft)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Aa,U(a(T)("setting.cavesVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),N("div",Ba,[(G(!0),le(Me,null,Be(a(Gt).resources,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Ra,U(a(T)("setting.cavesVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),N("div",Ga,[(G(!0),le(Me,null,Be(a(Gt).creaturesAndSpawners,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),b(xe,{"content-position":"center"},{default:S(()=>[N("span",Ia,U(a(T)("setting.cavesVisualizationGeneration")),1),ue(" - "+U(a(T)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),N("div",Pa,[(G(!0),le(Me,null,Be(a(Gt).hostileCreaturesAndSpawners,(i,se)=>{var O,Q,X,J,H;return G(),le("div",null,[(G(),re(Re,{key:se,modelValue:Y.value[i],"onUpdate:modelValue":ee=>Y.value[i]=ee,configs:((O=a(A)[i])==null?void 0:O.configs)||["undefined"],customConfigsValue:((Q=a(A)[i])==null?void 0:Q.customConfigsValue)||{},defaultModelValue:((X=a(A)[i])==null?void 0:X.modelValue)||"undefined",i18n:((J=a(A)[i])==null?void 0:J.i18n)||{zh:"平台未识别",en:"undefined"},image:((H=a(A)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):Ve("",!0)]),_:2},1032,["label"])):Ve("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):Ve("",!0),ae.value===2?(G(),re(V,{key:2,shadow:"never"},{default:S(()=>[N("div",Ua,[N("div",Da,[N("span",null,U(a(T)("setting.multiWorldTip")),1),b(Z,{size:"small",style:{"margin-left":"10px"},type:"primary",onClick:j},{default:S(()=>[ue(U(ke.value==="zh"?"多层世界":"Multi-world"),1)]),_:1})])]),b(we,{model:We.value},{default:S(()=>[b(ne,null,{default:S(()=>[b(Yt,{modelValue:We.value.mod,"onUpdate:modelValue":w[19]||(w[19]=q=>We.value.mod=q),height:z.value-481,theme:dt.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):Ve("",!0),ae.value===3?(G(),re(V,{key:3,shadow:"never"},{default:S(()=>[N("div",{style:at({height:`${z.value-381}px`}),class:"fcc"},[b(Dt,{"sub-title":a(T)("setting.finish.description"),title:a(T)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):Ve("",!0)]),_:1})]),_:1}),b(R,{gutter:10},{default:S(()=>[b(y,{lg:24,md:24,sm:24,span:24,xs:24},{default:S(()=>[b(V,{shadow:"never"},{default:S(()=>[N("div",za,[ae.value>0?(G(),re(Z,{key:0,onClick:tt},{default:S(()=>[ue(U(a(T)("setting.button.prev")),1)]),_:1})):Ve("",!0),ae.value<3?(G(),re(Z,{key:1,type:"primary",loading:ge.value,onClick:gt},{default:S(()=>[ue(U(a(T)("setting.button.next")),1)]),_:1},8,["loading"])):Ve("",!0),ae.value===3?(G(),re(Lt,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:$e},{dropdown:S(()=>[b(Mt,null,{default:S(()=>[b(Ne,{command:"save"},{default:S(()=>[ue(U(a(T)("setting.button.save")),1)]),_:1}),b(Ne,{command:"saveAndRestart"},{default:S(()=>[ue(U(a(T)("setting.button.saveAndRestart")),1)]),_:1}),b(Ne,{command:"generateNewWorld"},{default:S(()=>[ue(U(a(T)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:S(()=>[b(Z,{loading:M.value,type:"warning"},{default:S(()=>[ue(U(a(T)("setting.button.actions"))+" ",1),b(P,{class:"el-icon--right"},{default:S(()=>[b(a(Xt))]),_:1})]),_:1},8,["loading"])]),_:1})):Ve("",!0)])]),_:1})]),_:1})]),_:1}),b(At,{modelValue:Pe.value,"onUpdate:modelValue":w[21]||(w[21]=q=>Pe.value=q),width:"65%"},{header:S(()=>[ue(U(a(T)("setting.multiWorldDialog.title")),1)]),default:S(()=>[N("div",Na,U(a(T)("setting.multiWorldDialog.tip")),1),N("div",Oa,[b(we,{model:_e.value,"label-position":"top"},{default:S(()=>[(G(!0),le(Me,null,Be(_e.value,q=>(G(),re(ne,null,{default:S(()=>[b(oe,{modelValue:q.ID,"onUpdate:modelValue":i=>q.ID=i,placeholder:a(T)("setting.multiWorldDialog.placeholder0"),type:"number",style:{width:"20%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),b(oe,{modelValue:q.name,"onUpdate:modelValue":i=>q.name=i,placeholder:a(T)("setting.multiWorldDialog.placeholder1"),style:{"margin-left":"2%",width:"48%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),b(oe,{modelValue:q.maxPlayers,"onUpdate:modelValue":i=>q.maxPlayers=i,placeholder:a(T)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"2%",width:"28%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),N("div",qa,[b(Z,{type:"success",onClick:w[20]||(w[20]=q=>_e.value.push({ID:void 0,name:"",maxPlayers:void 0}))},{default:S(()=>[ue(U(ke.value==="zh"?"新增一条":"New Line"),1)]),_:1}),b(Z,{type:"primary",onClick:ie},{default:S(()=>[ue(U(ke.value==="zh"?"生成配置":"Generate"),1)]),_:1})])]),_:1},8,["model"]),Ge.value?(G(),re(xe,{key:0})):Ve("",!0),Ge.value?(G(),re(a(kn),{key:1,ref:"threeCodeOneRef",modelValue:Ge.value,theme:dt.value?"dark":"light",previewTheme:"github"},null,8,["modelValue","theme"])):Ve("",!0)])]),_:1},8,["modelValue"]),b(At,{modelValue:Ze.value,"onUpdate:modelValue":w[25]||(w[25]=q=>Ze.value=q),width:"65%"},{header:S(()=>[N("div",Wa,[b(Ie,{modelValue:He.value,"onUpdate:modelValue":w[22]||(w[22]=q=>He.value=q),"active-value":"insert","inactive-value":"copy","active-text":ke.value==="zh"?"插入模式":"Insert Mode","inactive-text":ke.value==="zh"?"复制模式":"Copy Mode"},null,8,["modelValue","active-text","inactive-text"])])]),footer:S(()=>[ke.value==="zh"?(G(),re(Qe,{key:0,href:"https://www.bilibili.com/opus/814456568458248259",target:"_blank",type:"info",underline:"never"},{default:S(()=>w[26]||(w[26]=[ue(" 感谢B站长鸽门徒提供的饥荒表情字体 ")])),_:1})):(G(),re(Qe,{key:1,href:"https://www.bilibili.com/opus/814456568458248259",target:"_blank",type:"info",underline:"never"},{default:S(()=>w[27]||(w[27]=[ue(" Thanks to Bilibili user 长鸽门徒 for providing the DST emoji font. ")])),_:1}))]),default:S(()=>[He.value==="insert"?(G(),le("div",$a,[Ke.value==="name"?(G(),re(oe,{key:0,ref_key:"emojiInputNameRef",ref:yt,modelValue:K.value.name,"onUpdate:modelValue":w[23]||(w[23]=q=>K.value.name=q),style:{width:"100%"}},null,8,["modelValue"])):Ve("",!0),Ke.value==="description"?(G(),re(oe,{key:1,ref_key:"emojiInputDescriptionRef",ref:Tt,modelValue:K.value.description,"onUpdate:modelValue":w[24]||(w[24]=q=>K.value.description=q),style:{width:"100%"}},null,8,["modelValue"])):Ve("",!0)])):Ve("",!0),N("div",Ka,[(G(!0),le(Me,null,Be(a(Cn),q=>(G(),le("div",{class:"emoji-item",onClick:i=>wt(q)},U(q),9,ja))),256))])]),_:1},8,["modelValue"])])}}},el=sn(Ha,[["__scopeId","data-v-f748c9ac"]]);export{el as default};
