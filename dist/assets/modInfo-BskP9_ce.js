import{ab as x,ac as V,ad as K,ae as S,a as R,u as G,c as z,r as A,K as a,f as C,i as J,k as l,l as s,m as c,q as _,t as m,j as d,z as Q,A as X,n as Y,v as Z,F as tt,a2 as et,B as ot}from"./index-cUySfSAZ.js";function nt(e,n,t,o){return n.walk(i=>{if(x(i)){const f=i.tag,p=e[f];if(typeof p=="function")return p(i,t,o)}return i})}function D(e,n=nt){const t=o=>{t.options=Object.assign(t.options||{},o);function i(f,p){return n(e,f,p,t.options||{})}return i.options=t.options,i};return t.extend=function(i){const f=i(e,t.options);return D(f,n)},t}const lt=(e,n)=>e[0]===n,st=e=>{const n=e||{};return Object.keys(n).reduce((t,o)=>{const i=n[o];if(typeof i=="string"){if(o==="color")return t.concat(`color:${i};`);if(o==="size")return t.concat(`font-size:${i};`)}return t},[]).join(" ")},it=e=>e&&Array.isArray(e)?e.reduce((n,t)=>{const o=n[n.length-1];if(K(t)&&lt(String(t),"*")){const i=String(t).slice(1);return n.push(S.create("li",{},[i])),n}return x(t)&&S.isOf(t,"*")?(n.push(S.create("li",{},[])),n):x(o)&&o&&x(o)&&Array.isArray(o.content)?(o.content=o.content.concat(t),n):(n.push(t),n)},[]):e,at=(e,n)=>V(e.attrs)?V(e.attrs):n(e.content||[]),u=(e,n,t)=>S.create(e,n,t),F=e=>({style:e}),w=(e,n)=>t=>u(e,F(n),t.content),rt=function(){return{b:w("span","font-weight: bold;"),i:w("span","font-style: italic;"),u:w("span","text-decoration: underline;"),s:w("span","text-decoration: line-through;"),url:(t,{render:o})=>u("a",{href:at(t,o)},t.content),img:(t,{render:o})=>u("img",{src:o(t.content)},null),quote:t=>u("blockquote",{},[u("p",{},t.content)]),code:t=>u("pre",{},t.content),style:t=>u("span",F(st(t.attrs)),t.content),list:t=>{const o=V(t.attrs);return u(o?"ol":"ul",o?{type:o}:{},it(t.content))},color:t=>u("span",F(`color: ${V(t.attrs)};`),t.content)}}(),ct=D(rt),y=e=>({attrs:{style:e}}),dt=e=>({b:(...t)=>({...e.b==null?void 0:e.b.call(e,...t),...y({fontWeight:"bold"})}),i:(...t)=>({...e.i==null?void 0:e.i.call(e,...t),...y({fontStyle:"italic"})}),u:(...t)=>({...e.u==null?void 0:e.u.call(e,...t),...y({textDecoration:"underline"})}),s:(...t)=>({...e.s==null?void 0:e.s.call(e,...t),...y({textDecoration:"line-through"})})}),ut=ct.extend(e=>({...e,...dt(e)})),pt={style:{display:"flex","align-items":"center",margin:"5px",width:"280px"}},_t={style:{width:"200px"}},mt={class:"fcc"},ft={style:{margin:"5px 0"},class:"fcc"},gt={class:"fcc"},ht={style:{"min-height":"50vh","margin-top":"20px"}},vt={class:"fcc"},bt={class:"fcc"},wt={class:"fcc"},yt={style:{"margin-top":"20px"}},St={__name:"modInfo",props:{mod:{type:Object,default:{}}},setup(e){const{isMobile:n}=R(),{t}=G(),o=e,i=z(()=>parseFloat((o.mod.vote_data.score*5).toFixed(2))),f=z(()=>o.mod.name.length>20?o.mod.name.slice(0,20)+"...":o.mod.name),p=A(!1),U=A(!1),j=()=>{const B={id:o.mod.id,file_url:o.mod.file_url};et.mod.download.post(B).then(r=>{ot(r.message)})};return(B,r)=>{const T=a("el-image"),v=a("el-tag"),q=a("el-tooltip"),N=a("el-rate"),k=a("el-button"),I=a("el-card"),O=a("PictureFilled"),b=a("el-icon"),g=a("el-descriptions-item"),$=a("sc-icon-ThumbUpFill"),E=a("sc-icon-ThumbDownFill"),M=a("sc-icon-StarFill"),P=a("el-descriptions"),L=a("BBobBBCode"),W=a("el-scrollbar"),H=a("el-dialog");return C(),J(tt,null,[l(I,{shadow:"never"},{default:s(()=>[c("div",pt,[l(T,{src:o.mod.preview_url,fit:"fill",style:{width:"80px",height:"80px"}},null,8,["src"]),c("div",_t,[c("div",mt,[l(q,{effect:"light","show-after":500,content:o.mod.name,placement:"top"},{default:s(()=>[l(v,{size:"small"},{default:s(()=>[_(m(f.value),1)]),_:1})]),_:1},8,["content"])]),c("div",ft,[l(N,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=h=>i.value=h),max:5,disabled:"","allow-half":"","show-score":""},null,8,["modelValue"])]),c("div",gt,[l(k,{type:"primary",size:"small",onClick:r[1]||(r[1]=h=>p.value=!0)},{default:s(()=>[_(m(d(t)("setting.mod.download.detail")),1)]),_:1}),l(k,{type:"success",size:"small",loading:U.value,onClick:j},{default:s(()=>[_(m(d(t)("setting.mod.download.download")),1)]),_:1},8,["loading"])])])])]),_:1}),l(H,{modelValue:p.value,"onUpdate:modelValue":r[3]||(r[3]=h=>p.value=h),title:o.mod.name,width:"80vw"},{default:s(()=>[c("div",ht,[l(P,{column:2,border:"",direction:d(n)?"vertical":"horizontal"},{default:s(()=>[l(g,{rowspan:d(n)?1:2,width:140,align:"center"},{label:s(()=>[l(b,null,{default:s(()=>[l(O)]),_:1})]),default:s(()=>[l(T,{style:Q(d(n)?"width: 60px; height: 60px":"width: 120px; height: 120px"),src:o.mod.preview_url},null,8,["style","src"])]),_:1},8,["rowspan"]),l(g,{label:"ID",align:"center"},{default:s(()=>[l(v,{type:"info"},{default:s(()=>[_(m(o.mod.id),1)]),_:1})]),_:1}),l(g,{label:d(t)("setting.mod.download.size"),align:"center"},{default:s(()=>[l(v,{type:"info"},{default:s(()=>[_(m(d(X)(o.mod.size)),1)]),_:1})]),_:1},8,["label"]),l(g,{align:"center"},{label:s(()=>[c("div",vt,[l(b,null,{default:s(()=>[l($)]),_:1})])]),default:s(()=>[l(v,{type:"info"},{default:s(()=>[_(m(o.mod.vote_data.votes_up),1)]),_:1})]),_:1}),d(n)?(C(),Y(g,{key:0})):Z("",!0),l(g,{align:"center"},{label:s(()=>[c("div",bt,[l(b,null,{default:s(()=>[l(E)]),_:1})])]),default:s(()=>[l(v,{type:"info"},{default:s(()=>[_(m(o.mod.vote_data.votes_down),1)]),_:1})]),_:1}),l(g,null,{label:s(()=>[c("div",wt,[l(b,null,{default:s(()=>[l(M)]),_:1})])]),default:s(()=>[l(N,{modelValue:i.value,"onUpdate:modelValue":r[2]||(r[2]=h=>i.value=h),max:5,disabled:"","allow-half":"","show-score":"","score-template":"({value}/5)"},null,8,["modelValue"])]),_:1})]),_:1},8,["direction"]),c("div",yt,[l(W,{"max-height":"30vh"},{default:s(()=>[l(L,{container:"div",plugins:[d(ut)()]},{default:s(()=>[_(m(o.mod.file_description),1)]),_:1},8,["plugins"])]),_:1})])])]),_:1},8,["modelValue","title"])],64)}}};export{St as default};
