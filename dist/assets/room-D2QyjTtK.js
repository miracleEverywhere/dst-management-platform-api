import{aj as It,ak as an,_ as on,u as rn,o as un,r as Ie,a as sn,g as dn,b as fn,c as Pt,G as cn,H as pn,d as mn,I as gn,a2 as kt,R as hn,w as Tn,J as bt,K as Be,f as U,i as te,k as L,l as B,j as a,p as ye,m as Z,t as J,z as rt,v as nt,n as fe,al as qt,F as Ee,y as Me,D as it,B as xt}from"./index-Be39cykK.js";import{s as Kt}from"./index-Bp-5f3p-.js";import{g as Tt,_ as Re,o as M,a as St,c as vt,b as Et,d as Lt}from"./levelDataSetting-C-xajpz8.js";import{M as yn}from"./preview-DeemSJLD.js";var Ft={exports:{}};Ft.exports;(function(ft,S){(function(ke,C,I){var Se=S&&!S.nodeType&&S,be=ft&&!ft.nodeType&&ft,ve=Se&&be&&typeof It=="object"&&It,Ae=be&&be.exports===Se&&Se;ve&&(ve.global===ve||ve.window===ve||ve.self===ve)&&(ke=ve),I(Se&&be?Ae?be.exports:Se:ke[C]={})})(It,"luaparse",function(ke){ke.version="0.3.1";var C,I,Se,be,ve,Ae=ke.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function yt(n,o){return o=o||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(o|192|n>>6,o|128|n&63):n<65536?String.fromCharCode(o|224|n>>12,o|128|n>>6&63,o|128|n&63):n<1114112?String.fromCharCode(o|240|n>>18,o|128|n>>12&63,o|128|n>>6&63,o|128|n&63):null}function Pe(n,o){for(var y=n.toString(16);y.length<o;)y="0"+y;return y}function ct(n){return function(o){var y=n.exec(o);if(!y)return o;ue(null,de.invalidCodeUnit,Pe(y[0].charCodeAt(0),4).toUpperCase())}}var _t={"pseudo-latin1":{fixup:ct(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return yt(n)}},"x-user-defined":{fixup:ct(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return yt(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},ut=1,Qe=2,et=4,He=8,lt=16,je=32,pt=64,tt=128,we=256;ke.tokenTypes={EOF:ut,StringLiteral:Qe,Keyword:et,Identifier:He,NumericLiteral:lt,Punctuator:je,BooleanLiteral:pt,NilLiteral:tt,VarargLiteral:we};var de=ke.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},re=ke.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,o){return{type:"IfClause",condition:n,body:o}},elseifClause:function(n,o){return{type:"ElseifClause",condition:n,body:o}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,o){return{type:"WhileStatement",condition:n,body:o}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,o){return{type:"RepeatStatement",condition:n,body:o}},localStatement:function(n,o){return{type:"LocalStatement",variables:n,init:o}},assignmentStatement:function(n,o){return{type:"AssignmentStatement",variables:n,init:o}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,o,y,F){return{type:"FunctionDeclaration",identifier:n,isLocal:y,parameters:o,body:F}},forNumericStatement:function(n,o,y,F,z){return{type:"ForNumericStatement",variable:n,start:o,end:y,step:F,body:z}},forGenericStatement:function(n,o,y){return{type:"ForGenericStatement",variables:n,iterators:o,body:y}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,o,y){return n=n===Qe?"StringLiteral":n===lt?"NumericLiteral":n===pt?"BooleanLiteral":n===tt?"NilLiteral":"VarargLiteral",{type:n,value:o,raw:y}},tableKey:function(n,o){return{type:"TableKey",key:n,value:o}},tableKeyString:function(n,o){return{type:"TableKeyString",key:n,value:o}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,o,y){var F=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:F,operator:n,left:o,right:y}},unaryExpression:function(n,o){return{type:"UnaryExpression",operator:n,argument:o}},memberExpression:function(n,o,y){return{type:"MemberExpression",indexer:o,identifier:y,base:n}},indexExpression:function(n,o){return{type:"IndexExpression",base:n,index:o}},callExpression:function(n,o){return{type:"CallExpression",base:n,arguments:o}},tableCallExpression:function(n,o){return{type:"TableCallExpression",base:n,arguments:o}},stringCallExpression:function(n,o){return{type:"StringCallExpression",base:n,argument:o}},comment:function(n,o){return{type:"Comment",value:n,raw:o}}};function se(n){if(N){var o=x.pop();o.complete(),o.bless(n)}return I.onCreateNode&&I.onCreateNode(n),n}var ot=Array.prototype.slice,mt=function(n,o){for(var y=0,F=n.length;y<F;++y)if(n[y]===o)return y;return-1};Array.prototype.indexOf&&(mt=function(n,o){return n.indexOf(o)});function he(n,o,y){for(var F=0,z=n.length;F<z;++F)if(n[F][o]===y)return F;return-1}function gt(n){var o=ot.call(arguments,1);return n=n.replace(/%(\d)/g,function(y,F){return""+o[F-1]||""}),n}var qe=function(n){for(var o=ot.call(arguments,1),y,F,z=0,_e=o.length;z<_e;++z){y=o[z];for(F in y)Object.prototype.hasOwnProperty.call(y,F)&&(n[F]=y[F])}return n};Object.assign&&(qe=Object.assign),ke.SyntaxError=SyntaxError;function ht(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function ue(n){var o=gt.apply(null,ot.call(arguments,1)),y,F;throw n===null||typeof n.line>"u"?(F=h-f+1,y=ht(new SyntaxError(gt("[%1:%2] %3",d,F,o))),y.index=h,y.line=d,y.column=F):(F=n.range[0]-n.lineStart,y=ht(new SyntaxError(gt("[%1:%2] %3",n.line,F,o))),y.line=n.line,y.index=n.range[0],y.column=F),y}function Ce(n){var o=C.slice(n.range[0],n.range[1]);return o||n.value}function Je(n,o){ue(o,de.expectedToken,n,Ce(o))}function st(n){var o=Ce(X);if(typeof n.type<"u"){var y;switch(n.type){case Qe:y="string";break;case et:y="keyword";break;case He:y="identifier";break;case lt:y="number";break;case je:y="symbol";break;case pt:y="boolean";break;case tt:return ue(n,de.unexpected,"symbol","nil",o);case ut:return ue(n,de.unexpectedEOF)}return ue(n,de.unexpected,y,Ce(n),o)}return ue(n,de.unexpected,"symbol",n,o)}var h,w,Ne,X,b,c,d,f;ke.lex=T;function T(){for(p();C.charCodeAt(h)===45&&C.charCodeAt(h+1)===45;)xe(),p();if(h>=Se)return{type:ut,value:"<eof>",line:d,lineStart:f,range:[h,h]};var n=C.charCodeAt(h),o=C.charCodeAt(h+1);if(c=h,Ue(n))return g();switch(n){case 39:case 34:return k();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l();case 46:return Y(o)?l():o===46?C.charCodeAt(h+2)===46?m():u(".."):u(".");case 61:return u(o===61?"==":"=");case 62:return be.bitwiseOperators&&o===62?u(">>"):u(o===61?">=":">");case 60:return be.bitwiseOperators&&o===60?u("<<"):u(o===61?"<=":"<");case 126:if(o===61)return u("~=");if(!be.bitwiseOperators)break;return u("~");case 58:return be.labels&&o===58?u("::"):u(":");case 91:return o===91||o===61?t():u("[");case 47:return be.integerDivision&&o===47?u("//"):u("/");case 38:case 124:if(!be.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return u(C.charAt(h))}return st(C.charAt(h))}function e(){var n=C.charCodeAt(h),o=C.charCodeAt(h+1);return v(n)?(n===10&&o===13&&++h,n===13&&o===10&&++h,++d,f=++h,!0):!1}function p(){for(;h<Se;){var n=C.charCodeAt(h);if(R(n))++h;else if(!e())break}}function g(){for(var n,o;De(C.charCodeAt(++h)););return n=ve.fixup(C.slice(c,h)),Ye(n)?o=et:n==="true"||n==="false"?(o=pt,n=n==="true"):n==="nil"?(o=tt,n=null):o=He,{type:o,value:n,line:d,lineStart:f,range:[c,h]}}function u(n){return h+=n.length,{type:je,value:n,line:d,lineStart:f,range:[c,h]}}function m(){return h+=3,{type:we,value:"...",line:d,lineStart:f,range:[c,h]}}function k(){for(var n=C.charCodeAt(h++),o=d,y=f,F=h,z=ve.discardStrings?null:"",_e;_e=C.charCodeAt(h++),n!==_e;)if((h>Se||v(_e))&&(z+=C.slice(F,h-1),ue(null,de.unfinishedString,C.slice(c,h-1))),_e===92){if(!ve.discardStrings){var Ve=C.slice(F,h-1);z+=ve.fixup(Ve)}var $e=Ge();ve.discardStrings||(z+=$e),F=h}return ve.discardStrings||(z+=ve.encodeByte(null),z+=ve.fixup(C.slice(F,h-1))),{type:Qe,value:z,line:o,lineStart:y,lastLine:d,lastLineStart:f,range:[c,h]}}function t(){var n=d,o=f,y=Te(!1);return y===!1&&ue(w,de.expected,"[",Ce(w)),{type:Qe,value:ve.discardStrings?null:ve.fixup(y),line:n,lineStart:o,lastLine:d,lastLineStart:f,range:[c,h]}}function l(){var n=C.charAt(h),o=C.charAt(h+1),y=n==="0"&&"xX".indexOf(o||null)>=0?G():ie(),F=i(),z=s();return z&&(F||y.hasFractionPart)&&ue(null,de.malformedNumber,C.slice(c,h)),{type:lt,value:y.value,line:d,lineStart:f,range:[c,h]}}function i(){if(be.imaginaryNumbers)return"iI".indexOf(C.charAt(h)||null)>=0?(++h,!0):!1}function s(){if(be.integerSuffixes){if("uU".indexOf(C.charAt(h)||null)>=0)if(++h,"lL".indexOf(C.charAt(h)||null)>=0){if(++h,"lL".indexOf(C.charAt(h)||null)>=0)return++h,"ULL";ue(null,de.malformedNumber,C.slice(c,h))}else ue(null,de.malformedNumber,C.slice(c,h));else if("lL".indexOf(C.charAt(h)||null)>=0){if(++h,"lL".indexOf(C.charAt(h)||null)>=0)return++h,"LL";ue(null,de.malformedNumber,C.slice(c,h))}}}function G(){var n=0,o=1,y=1,F,z,_e,Ve;for(Ve=h+=2,ce(C.charCodeAt(h))||ue(null,de.malformedNumber,C.slice(c,h));ce(C.charCodeAt(h));)++h;F=parseInt(C.slice(Ve,h),16);var $e=!1;if(C.charAt(h)==="."){for($e=!0,z=++h;ce(C.charCodeAt(h));)++h;n=C.slice(z,h),n=z===h?0:parseInt(n,16)/Math.pow(16,h-z)}var Ct=!1;if("pP".indexOf(C.charAt(h)||null)>=0){for(Ct=!0,++h,"+-".indexOf(C.charAt(h)||null)>=0&&(y=C.charAt(h++)==="+"?1:-1),_e=h,Y(C.charCodeAt(h))||ue(null,de.malformedNumber,C.slice(c,h));Y(C.charCodeAt(h));)++h;o=C.slice(_e,h),o=Math.pow(2,o*y)}return{value:(F+n)*o,hasFractionPart:$e||Ct}}function ie(){for(;Y(C.charCodeAt(h));)++h;var n=!1;if(C.charAt(h)===".")for(n=!0,++h;Y(C.charCodeAt(h));)++h;var o=!1;if("eE".indexOf(C.charAt(h)||null)>=0)for(o=!0,++h,"+-".indexOf(C.charAt(h)||null)>=0&&++h,Y(C.charCodeAt(h))||ue(null,de.malformedNumber,C.slice(c,h));Y(C.charCodeAt(h));)++h;return{value:parseFloat(C.slice(c,h)),hasFractionPart:n||o}}function ge(){var n=h++;for(C.charAt(h++)!=="{"&&ue(null,de.braceExpected,"{","\\"+C.slice(n,h)),ce(C.charCodeAt(h))||ue(null,de.hexadecimalDigitExpected,"\\"+C.slice(n,h));C.charCodeAt(h)===48;)++h;for(var o=h;ce(C.charCodeAt(h));)++h,h-o>6&&ue(null,de.tooLargeCodepoint,"\\"+C.slice(n,h));var y=C.charAt(h++);y!=="}"&&(y==='"'||y==="'"?ue(null,de.braceExpected,"}","\\"+C.slice(n,h--)):ue(null,de.hexadecimalDigitExpected,"\\"+C.slice(n,h)));var F=parseInt(C.slice(o,h-1)||"0",16),z="\\"+C.slice(n,h);return F>1114111&&ue(null,de.tooLargeCodepoint,z),ve.encodeUTF8(F,z)}function Ge(){var n=h;switch(C.charAt(h)){case"a":return++h,"\x07";case"n":return++h,`
`;case"r":return++h,"\r";case"t":return++h,"	";case"v":return++h,"\v";case"b":return++h,"\b";case"f":return++h,"\f";case"\r":case`
`:return e(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Y(C.charCodeAt(h))&&h-n<3;)++h;var o=C.slice(n,h),y=parseInt(o,10);return y>255&&ue(null,de.decimalEscapeTooLarge,"\\"+y),ve.encodeByte(y,"\\"+o);case"z":if(be.skipWhitespaceEscape)return++h,p(),"";break;case"x":if(be.hexEscapes){if(ce(C.charCodeAt(h+1))&&ce(C.charCodeAt(h+2)))return h+=3,ve.encodeByte(parseInt(C.slice(n+1,h),16),"\\"+C.slice(n,h));ue(null,de.hexadecimalDigitExpected,"\\"+C.slice(n,h+2))}break;case"u":if(be.unicodeEscapes)return ge();break;case"\\":case'"':case"'":return C.charAt(h++)}return be.strictEscapes&&ue(null,de.invalidEscape,"\\"+C.slice(n,h+1)),C.charAt(h++)}function xe(){c=h,h+=2;var n=C.charAt(h),o="",y=!1,F=h,z=f,_e=d;if(n==="["&&(o=Te(!0),o===!1?o=n:y=!0),!y){for(;h<Se&&!v(C.charCodeAt(h));)++h;I.comments&&(o=C.slice(F,h))}if(I.comments){var Ve=re.comment(o,C.slice(c,h));I.locations&&(Ve.loc={start:{line:_e,column:c-z},end:{line:d,column:h-f}}),I.ranges&&(Ve.range=[c,h]),I.onCreateNode&&I.onCreateNode(Ve),b.push(Ve)}}function Te(n){var o=0,y="",F=!1,z,_e,Ve=d;for(++h;C.charAt(h+o)==="=";)++o;if(C.charAt(h+o)!=="[")return!1;for(h+=o+1,v(C.charCodeAt(h))&&e(),_e=h;h<Se;){for(;v(C.charCodeAt(h));)e();if(z=C.charAt(h++),z==="]"){F=!0;for(var $e=0;$e<o;++$e)C.charAt(h+$e)!=="="&&(F=!1);C.charAt(h+o)!=="]"&&(F=!1)}if(F)return y+=C.slice(_e,h-1),h+=o+1,y}ue(null,n?de.unfinishedLongComment:de.unfinishedLongString,Ve,"<eof>")}function $(){Ne=w,w=X,X=T()}function ne(n){return n===w.value?($(),!0):!1}function Le(n){n===w.value?$():ue(w,de.expected,n,Ce(w))}function R(n){return n===9||n===32||n===11||n===12}function v(n){return n===10||n===13}function Y(n){return n>=48&&n<=57}function ce(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function Ue(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||be.extendedIdentifiers&&n>=128)}function De(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||be.extendedIdentifiers&&n>=128)}function Ye(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:be.labels&&!be.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function Oe(n){return je===n.type?"#-~".indexOf(n.value)>=0:et===n.type?n.value==="not":!1}function Fe(n){if(ut===n.type)return!0;if(et!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var Xe,dt,at;function V(){var n=Xe[dt++].slice();Xe.push(n),I.onCreateScope&&I.onCreateScope()}function A(){Xe.pop(),--dt,I.onDestroyScope&&I.onDestroyScope()}function E(n){I.onLocalDeclaration&&I.onLocalDeclaration(n),mt(Xe[dt],n)===-1&&Xe[dt].push(n)}function _(n){E(n.name),P(n,!0)}function P(n,o){!o&&he(at,"name",n.name)===-1&&at.push(n),n.isLocal=o}function D(n){return mt(Xe[dt],n)!==-1}var x=[],N;function ee(){return new oe(w)}function oe(n){I.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),I.ranges&&(this.range=[n.range[0],0])}oe.prototype.complete=function(){I.locations&&(this.loc.end.line=Ne.lastLine||Ne.line,this.loc.end.column=Ne.range[1]-(Ne.lastLineStart||Ne.lineStart)),I.ranges&&(this.range[1]=Ne.range[1])},oe.prototype.bless=function(n){if(this.loc){var o=this.loc;n.loc={start:{line:o.start.line,column:o.start.column},end:{line:o.end.line,column:o.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function pe(){N&&x.push(ee())}function Q(n){N&&x.push(n)}function ze(){this.scopes=[],this.pendingGotos=[]}ze.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},ze.prototype.pushScope=function(n){var o={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(o)},ze.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var o=this.pendingGotos[n];o.maxDepth>=this.scopes.length&&--o.maxDepth<=0&&ue(o.token,de.labelNotVisible,o.target)}this.scopes.pop()},ze.prototype.addGoto=function(n,o){for(var y=[],F=0;F<this.scopes.length;++F){var z=this.scopes[F];if(y.push(z.locals.length),Object.prototype.hasOwnProperty.call(z.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:o,localCounts:y})},ze.prototype.addLabel=function(n,o){var y=this.currentScope();if(Object.prototype.hasOwnProperty.call(y.labels,n))ue(o,de.labelAlreadyDefined,n,y.labels[n].line);else{for(var F=[],z=0;z<this.pendingGotos.length;++z){var _e=this.pendingGotos[z];if(_e.maxDepth>=this.scopes.length&&_e.target===n){_e.localCounts[this.scopes.length-1]<y.locals.length&&y.deferredGotos.push(_e);continue}F.push(_e)}this.pendingGotos=F}y.labels[n]={localCount:y.locals.length,line:o.line}},ze.prototype.addLocal=function(n,o){this.currentScope().locals.push({name:n,token:o})},ze.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},ze.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),o=n.deferredGotos,y=0;y<o.length;++y){var F=o[y];ue(F.token,de.gotoJumpInLocalScope,F.target,n.locals[F.localCounts[this.scopes.length-1]].name)}};function me(){this.level=0,this.loopLevels=[]}me.prototype.isInLoop=function(){return!!this.loopLevels.length},me.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},me.prototype.popScope=function(){var n=this.loopLevels,o=n.length;o&&n[o-1]===this.level&&n.pop(),--this.level},me.prototype.addGoto=me.prototype.addLabel=function(){throw new Error("This should never happen")},me.prototype.addLocal=me.prototype.raiseDeferredErrors=function(){};function Ke(){return be.labels?new ze:new me}function W(){$(),pe(),I.scope&&V();var n=Ke();n.allowVararg=!0,n.pushScope();var o=r(n);return n.popScope(),I.scope&&A(),ut!==w.type&&st(w),N&&!o.length&&(Ne=w),se(re.chunk(o))}function r(n){for(var o=[],y;!Fe(w);){if(w.value==="return"||!be.relaxedBreak&&w.value==="break"){o.push(le(n));break}y=le(n),ne(";"),y&&o.push(y)}return o}function le(n){if(pe(),je===w.type&&ne("::"))return q(n);if(be.emptyStatement&&ne(";")){N&&x.pop();return}if(n.raiseDeferredErrors(),et===w.type)switch(w.value){case"local":return $(),Xt(n);case"if":return $(),Yt(n);case"return":return $(),Jt(n);case"function":$();var o=en();return Bt(o);case"while":return $(),H(n);case"for":return $(),Zt(n);case"repeat":return $(),ae(n);case"break":return $(),n.isInLoop()||ue(w,de.noLoopToBreak,w.value),K();case"do":return $(),j(n);case"goto":return $(),O(n)}return be.contextualGoto&&w.type===He&&w.value==="goto"&&X.type===He&&X.value!=="goto"?($(),O(n)):(N&&x.pop(),Qt(n))}function q(n){var o=w,y=Ze();return I.scope&&(E("::"+o.value+"::"),P(y,!0)),Le("::"),n.addLabel(o.value,o),se(re.labelStatement(y))}function K(){return se(re.breakStatement())}function O(n){var o=w.value,y=Ne,F=Ze();return n.addGoto(o,y),se(re.gotoStatement(F))}function j(n){I.scope&&V(),n.pushScope();var o=r(n);return n.popScope(),I.scope&&A(),Le("end"),se(re.doStatement(o))}function H(n){var o=We(n);Le("do"),I.scope&&V(),n.pushScope(!0);var y=r(n);return n.popScope(),I.scope&&A(),Le("end"),se(re.whileStatement(o,y))}function ae(n){I.scope&&V(),n.pushScope(!0);var o=r(n);Le("until"),n.raiseDeferredErrors();var y=We(n);return n.popScope(),I.scope&&A(),se(re.repeatStatement(y,o))}function Jt(n){var o=[];if(w.value!=="end"){var y=Vt(n);for(y!=null&&o.push(y);ne(",");)y=We(n),o.push(y);ne(";")}return se(re.returnStatement(o))}function Yt(n){var o=[],y,F,z;for(N&&(z=x[x.length-1],x.push(z)),y=We(n),Le("then"),I.scope&&V(),n.pushScope(),F=r(n),n.popScope(),I.scope&&A(),o.push(se(re.ifClause(y,F))),N&&(z=ee());ne("elseif");)Q(z),y=We(n),Le("then"),I.scope&&V(),n.pushScope(),F=r(n),n.popScope(),I.scope&&A(),o.push(se(re.elseifClause(y,F))),N&&(z=ee());return ne("else")&&(N&&(z=new oe(Ne),x.push(z)),I.scope&&V(),n.pushScope(),F=r(n),n.popScope(),I.scope&&A(),o.push(se(re.elseClause(F)))),Le("end"),se(re.ifStatement(o))}function Zt(n){var o=Ze(),y;if(I.scope&&(V(),_(o)),ne("=")){var F=We(n);Le(",");var z=We(n),_e=ne(",")?We(n):null;return Le("do"),n.pushScope(!0),y=r(n),n.popScope(),Le("end"),I.scope&&A(),se(re.forNumericStatement(o,F,z,_e,y))}else{for(var Ve=[o];ne(",");)o=Ze(),I.scope&&_(o),Ve.push(o);Le("in");var $e=[];do{var Ct=We(n);$e.push(Ct)}while(ne(","));return Le("do"),n.pushScope(!0),y=r(n),n.popScope(),Le("end"),I.scope&&A(),se(re.forGenericStatement(Ve,$e,y))}}function Xt(n){var o,y=Ne;if(He===w.type){var F=[],z=[];do o=Ze(),F.push(o),n.addLocal(o.name,y);while(ne(","));if(ne("="))do{var _e=We(n);z.push(_e)}while(ne(","));if(I.scope)for(var Ve=0,$e=F.length;Ve<$e;++Ve)_(F[Ve]);return se(re.localStatement(F,z))}if(ne("function"))return o=Ze(),n.addLocal(o.name,y),I.scope&&(_(o),V()),Bt(o,!0);Je("<name>",w)}function Qt(n){var o,y,F,z,_e,Ve=[];N&&(y=ee());do{if(N&&(o=ee()),He===w.type)_e=w.value,z=Ze(),I.scope&&P(z,D(_e)),F=!0;else if(w.value==="(")$(),z=We(n),Le(")"),F=!1;else return st(w);e:for(;;){switch(Qe===w.type?'"':w.value){case".":case"[":F=!0;break;case":":case"(":case"{":case'"':F=null;break;default:break e}z=zt(z,o,n)}if(Ve.push(z),w.value!==",")break;if(!F)return st(w);$()}while(!0);if(Ve.length===1&&F===null)return Q(o),se(re.callStatement(Ve[0]));if(!F)return st(w);Le("=");var $e=[];do $e.push(We(n));while(ne(","));return Q(y),se(re.assignmentStatement(Ve,$e))}function Ze(){pe();var n=w.value;return He!==w.type&&Je("<name>",w),$(),se(re.identifier(n))}function Bt(n,o){var y=Ke();y.pushScope();var F=[];if(Le("("),!ne(")"))for(;;){if(He===w.type){var z=Ze();if(I.scope&&_(z),F.push(z),ne(","))continue}else we===w.type?(y.allowVararg=!0,F.push(Rt(y))):Je("<name> or '...'",w);Le(")");break}var _e=r(y);return y.popScope(),Le("end"),I.scope&&A(),o=o||!1,se(re.functionStatement(n,F,o,_e))}function en(){var n,o,y;for(N&&(y=ee()),n=Ze(),I.scope&&(P(n,D(n.name)),V());ne(".");)Q(y),o=Ze(),n=se(re.memberExpression(n,".",o));return ne(":")&&(Q(y),o=Ze(),n=se(re.memberExpression(n,":",o)),I.scope&&E("self")),n}function Dt(n){for(var o=[],y,F;;){if(pe(),je===w.type&&ne("["))y=We(n),Le("]"),Le("="),F=We(n),o.push(se(re.tableKey(y,F)));else if(He===w.type)X.value==="="?(y=Ze(),$(),F=We(n),o.push(se(re.tableKeyString(y,F)))):(F=We(n),o.push(se(re.tableValue(F))));else{if((F=Vt(n))==null){x.pop();break}o.push(se(re.tableValue(F)))}if(",;".indexOf(w.value)>=0){$();continue}break}return Le("}"),se(re.tableConstructorExpression(o))}function Vt(n){var o=Mt(0,n);return o}function We(n){var o=Vt(n);if(o==null)Je("<expression>",w);else return o}function tn(n){var o=n.charCodeAt(0),y=n.length;if(y===1)switch(o){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(y===2)switch(o){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(o===97&&n==="and")return 2;return 0}function Mt(n,o){var y=w.value,F,z;if(N&&(z=ee()),Oe(w)){pe(),$();var _e=Mt(10,o);_e==null&&Je("<expression>",w),F=se(re.unaryExpression(y,_e))}if(F==null&&(F=Rt(o),F==null&&(F=nn(o))),F==null)return null;for(var Ve;y=w.value,Ve=je===w.type||et===w.type?tn(y):0,!(Ve===0||Ve<=n);){(y==="^"||y==="..")&&--Ve,$();var $e=Mt(Ve,o);$e==null&&Je("<expression>",w),N&&x.push(z),F=se(re.binaryExpression(y,F,$e))}return F}function zt(n,o,y){var F,z;if(je===w.type)switch(w.value){case"[":return Q(o),$(),F=We(y),Le("]"),se(re.indexExpression(n,F));case".":return Q(o),$(),z=Ze(),se(re.memberExpression(n,".",z));case":":return Q(o),$(),z=Ze(),n=se(re.memberExpression(n,":",z)),Q(o),Gt(n,y);case"(":case"{":return Q(o),Gt(n,y)}else if(Qe===w.type)return Q(o),Gt(n,y);return null}function nn(n){var o,y,F;if(N&&(F=ee()),He===w.type)y=w.value,o=Ze(),I.scope&&P(o,D(y));else if(ne("("))o=We(n),Le(")");else return null;for(;;){var z=zt(o,F,n);if(z===null)break;o=z}return o}function Gt(n,o){if(je===w.type)switch(w.value){case"(":be.emptyStatement||w.line!==Ne.line&&ue(null,de.ambiguousSyntax,w.value),$();var y=[],F=Vt(o);for(F!=null&&y.push(F);ne(",");)F=We(o),y.push(F);return Le(")"),se(re.callExpression(n,y));case"{":pe(),$();var z=Dt(o);return se(re.tableCallExpression(n,z))}else if(Qe===w.type)return se(re.stringCallExpression(n,Rt(o)));Je("function arguments",w)}function Rt(n){var o=Qe|lt|pt|tt|we,y=w.value,F=w.type,z;if(N&&(z=ee()),F===we&&!n.allowVararg&&ue(w,de.cannotUseVararg,w.value),F&o){Q(z);var _e=C.slice(w.range[0],w.range[1]);return $(),se(re.literal(F,y,_e))}else{if(et===F&&y==="function")return Q(z),$(),I.scope&&V(),Bt(null);if(ne("{"))return Q(z),Dt(n)}}ke.parse=ln;var Wt={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function ln(n,o){if(typeof o>"u"&&typeof n=="object"&&(o=n,n=void 0),o||(o={}),C=n||"",I=qe({},Ae,o),h=0,d=1,f=0,Se=C.length,Xe=[[]],dt=0,at=[],x=[],!Object.prototype.hasOwnProperty.call(Wt,I.luaVersion))throw new Error(gt("Lua version '%1' not supported",I.luaVersion));if(be=qe({},Wt[I.luaVersion]),I.extendedIdentifiers!==void 0&&(be.extendedIdentifiers=!!I.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(_t,I.encodingMode))throw new Error(gt("Encoding mode '%1' not supported",I.encodingMode));return ve=_t[I.encodingMode],I.comments&&(b=[]),I.wait?ke:Ot()}ke.write=$t;function $t(n){return C+=String(n),Se=C.length,ke}ke.end=Ot;function Ot(n){typeof n<"u"&&$t(n),C&&C.substr(0,2)==="#!"&&(C=C.replace(/^.*/,function(y){return y.replace(/./g," ")})),Se=C.length,N=I.locations||I.ranges,X=T();var o=W();if(I.comments&&(o.comments=b),I.scope&&(o.globals=at),x.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return o}})})(Ft,Ft.exports);var _n=Ft.exports;const wt=an(_n);var At={},Ut={exports:{}};Ut.exports;(function(ft){function S(X){for(var b=0,c=X.length;c--;)b+=X.charCodeAt(c),b+=b<<10,b^=b>>6;return b+=b<<3,b^=b>>11,b+=b<<15,b}const ke=console.log,C=function(X,b){if(!X)throw b};function I(X,b){if(!X)return 0;var c=X.toString().split(".");return c.length>1?parseInt(c[0],b)+parseInt(c[1],b)/Math.pow(b,c[1].length):parseInt(c[0],b)}let Se=[" ",`
`,"	","\r"],be={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const ve=new Proxy(be,{get(X,b){return I(b)}});let Ae=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Pe=["0","1","2","3","4","5","6","7","8","9"],ct=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],_t=["0","1"],ut=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Qe=["~","=",">","<"],et=["+","-","*","/","^","..","%","//"],He=["+=","-=","*=","/=","^=","..=","%=","//="],lt=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],je=["else","elseif","until","end"],pt=["-","not","#","~"],tt=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],we=11,de={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function re(X){let b=0,c=X.length,d=[];function f(t){return t=t||0,b<=c?X.substr(b+t,1):""}function T(){if(b<=c){let t=X.substr(b,1);return b++,t}else return""}function e(t){let l=0,i=1,s=1;for(;l<=b;)X.substr(l,1)==`
`?(i++,s=1):s++;let G;for(G=0;G<d.length;G++){let ie=d[G];ke(`${ie.Type}<${ie.Source}>`)}throw`file<${i}:${s}>: ${t}`}function p(t){for(;;){let l=T();if(l=="")e("Unfinished long string.");else if(l=="]"){let i=!0,s;for(s=1;s<=t;s++)if(f()=="=")b++;else{i=!1;break}if(i&&T()=="]")return}}}function g(){let t=b;for(;f()=="=";)b++;if(f()=="[")return b++,b-t-1;b=t}let u=0,m=0;function k(t){let l=X.substr(m,b-m),i=null;t=="Number"&&(l.substr(0,2).toLowerCase()=="0x"?(i="hex",parseInt(l,16)<999999999999&&(l=parseInt(l,16))):l.substr(0,2).toLowerCase()=="0b"&&(i="bin",parseInt(l.substr(2),2)<999999999999&&(l=parseInt(l.substr(2),2))));let s={Type:t,LeadingWhite:X.substr(u,m-u),Source:l};return i!==null&&(s.NType=i),d.push(s),u=b,m=b,s}for(;;){for(u=b;;){let l=f();if(l=="")break;if(l=="-")if(f(1)=="-")if(b+=2,f()=="["){b++;let i=g();if(i!=null)p(i),u=b;else for(;;){let s=T();if(s==""||s==`
`)break}}else for(;;){let i=T();if(i==""||i==`
`)break}else break;else if(Se.includes(l))b++;else break}X.substr(u,b-u),m=b;let t=T();if(t==""){k("Eof");break}else if(t=="'"||t=='"'){for(;;){let l=T();if(l=="\\"){let i=T();if(ve[i]==null)throw`Invalid Escape Sequence \`${i}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}k("String")}else if(t=="`"){for(;;){let l=T();if(l=="\\"){let i=T();if(ve[i]==null)throw`Invalid Escape Sequence \`${i}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}k("Hash")}else if(Ae.includes(t)){for(;yt.includes(f());)b++;lt.includes(X.substr(m,b-m))?k("Keyword"):k("Ident")}else if(Pe.includes(t)||t=="."&&Pe.includes(f())){if(t=="0"&&f().toLowerCase()=="x")for(b++;ct.includes(f())||f()==="_";)b++;else if(t=="0"&&f().toLowerCase()=="b")for(b++;_t.includes(f())||f()==="_";)b++;else{for(;Pe.includes(f())||f()==="_";)b++;if(f()==".")for(b++;Pe.includes(f());)b++;if(f()=="e"||f()=="E")for(b++,(f()=="-"||f()=="+")&&b++;Pe.includes(f());)b++}k("Number")}else if(t=="["){let l=g();l!=null?(p(l),k("String")):k("Symbol")}else if(t==".")f()=="."&&(T(),(f()=="."||f()=="=")&&T()),k("Symbol");else if(t+f()=="//")T(),f()=="="&&T(),k("Symbol");else if(t+f()=="::")T(),k("Symbol");else if(tt.includes(t+f()))T(),k("Symbol");else if(Qe.includes(t))f()=="="&&b++,k("Symbol");else if(et.includes(t)&&f()=="=")T(),k("Symbol");else if(ut.includes(t))k("Symbol");else throw`Bad symbol \`${t}\` in source. ${b}`}return d}function se(X){let b=re(X),c=0;function d(){let V=b[c];return c<b.length&&c++,V}function f(V){return V=c+(V||0),b[V]||b[b.length-1]}function T(V){let A=1,E=0,_=0;for(;;){let P=b[_],D;P==V?D=P.LeadingWhite:D=P.LeadingWhite+P.Source;let x;for(x=0;x<=D.length;x++)D.substr(x,1)==`
`?(A++,E=0):E++;if(P==V)break;_++}return`${A}:${E+1}`}function e(){let V=f();return`<${V.Type} \`${V.Source}\`> at: ${T(V)}`}function p(){let V=f();return V.Type=="Eof"||V.Type=="Keyword"&&je.includes(V.Source)}function g(){return pt.includes(f().Source)||!1}function u(){return tt.includes(f().Source)||!1}function m(V,A){let E=f();if(E.Type==V&&(A==null||E.Source==A))return d();{let _;for(_=-3;_<=3;_++)ke(`Tokens[${_}] = \`${f(_).Source}\``);throw A?`${T(E)}: \`${A}\` expected.`:`${T(E)}: ${V} expected.`}}function k(V){let A=V.GetFirstToken,E=V.GetLastToken,_=V;return V.GetFirstToken=function(){let P=A(_);return C(P),P},V.GetLastToken=function(){let P=E(_);return C(P),P},V}let t,l;function i(V,A){let E=[l(V,A)],_=[];for(;f().Source==",";)_.push(d()),E.push(l(V,A));return[E,_]}function s(V,A){var _,P,D,x;let E=f();if(E.Source=="("){let N=d(),ee=l(V,A),oe=m("Symbol",")"),pe;return pe=k({Type:"ParenExpr",Expression:ee,Token_OpenParen:N,Token_CloseParen:oe,GetFirstToken:()=>pe.Token_OpenParen,GetLastToken:()=>pe.Token_CloseParen}),pe}else if(E.Type=="Ident"){let N;return N=k({Type:"VariableExpr",Token:d(),GetFirstToken:()=>N.Token,GetLastToken:()=>N.Token}),V[N.Token.Source]!=null&&((P=(_=V[N.Token.Source])==null?void 0:_.Tokens)==null?void 0:P.push)!=null?(V[N.Token.Source].Tokens.push(N.Token),V[N.Token.Source].UseCountIncrease()):A[N.Token.Source]!=null&&((x=(D=A[N.Token.Source])==null?void 0:D.Tokens)==null?void 0:x.push)!=null&&(A[N.Token.Source].Tokens.push(N.Token),A[N.Token.Source].UseCountIncrease()),N}else throw ke(e()),`${T(E)}: Unexpected symbol. ${E.Type} ${E.Source}`}function G(V,A){let E=m("Symbol","{"),_=[],P=[];for(;f().Source!="}";){if(f().Source=="["){let N=d(),ee=l(V,A),oe=m("Symbol","]"),pe=m("Symbol","="),Q=l(V,A);ee.Token&&ee.Token.Source,_.push({EntryType:"Index",Index:ee,Value:Q,Token_OpenBracket:N,Token_CloseBracket:oe,Token_Equals:pe})}else if(f().Type=="Ident"&&f(1).Source=="="){let N=d(),ee=d(),oe=l(V,A);_.push({EntryType:"Field",Field:N,Value:oe,Token_Equals:ee})}else{let N=l(V,A);_.push({EntryType:"Value",Value:N})}if(f().Source==","||f().Source==";")P.push(d());else break}let D=m("Symbol","}"),x;return x=k({Type:"TableLiteral",EntryList:_,Token_SeperatorList:P,Token_OpenBrace:E,Token_CloseBrace:D,GetFirstToken:()=>x.Token_OpenBrace,GetLastToken:()=>x.Token_CloseBrace}),x}function ie(V,A){let E=[],_=[];if(f().Type=="Ident"){let P=d();if(A&&f().Source=="<"&&f(2).Source==">"){let D=f(1).Source;P.Attribute={LeadingWhite:f().LeadingWhite,Source:`<${D}>`},d(),d(),d()}E.push(P)}else if(f().Source=="..."&&V)return[E,_,d()];for(;f().Source==",";){if(_.push(d()),f().Source=="..."&&V)return[E,_,d()];{let P=m("Ident");if(A&&f().Source=="<"&&f(2).Source==">"){let D=f(1).Source;P.Attribute={LeadingWhite:f().LeadingWhite,Source:`<${D}>`},d(),d(),d()}E.push(P)}}return[E,_]}function ge(V,A,E){let _=t(A,E),P=f();if(P.Type=="Keyword"&&P.Source==V)return d(),[_,P];throw ke(P.Type,P.Source),`${T(P)}: ${V} expected.`}function Ge(V,A,E,_){let P=d(),D,x;if(!V){D=[],x=[];let W=m("Ident");for(D.push(W);f().Source==".";)x.push(d()),D.push(m("Ident"));f().Source==":"&&(x.push(d()),D.push(m("Ident")))}let N=m("Symbol","("),[ee,oe,pe]=ie(!0),Q=m("Symbol",")"),[ze,me]=ge("end",A,E),Ke;return Ke=k({Type:V==!0?"FunctionLiteral":"FunctionStat",NameChain:D,ArgList:ee,Body:ze,Token_Function:P,Token_NameChainSeperator:x,Token_OpenParen:N,Token_Varg:pe,Token_ArgCommaList:oe,Token_CloseParen:Q,Token_End:me,GetFirstToken:()=>Ke.Token_Function,GetLastToken:()=>Ke.Token_End}),Ke}function xe(V,A){let E=f();if(E.Source=="("){let _=d(),P=[],D=[];for(;f().Source!=")"&&(P.push(l(V,A)),f().Source==",");)D.push(d());let x=m("Symbol",")"),N;return N=k({CallType:"ArgCall",ArgList:P,Token_CommaList:D,Token_OpenParen:_,Token_CloseParen:x,GetFirstToken:()=>N.Token_OpenParen,GetLastToken:()=>N.Token_CloseParen}),N}else if(E.Source=="{"){let _;return _=k({CallType:"TableCall",TableExpr:l(V,A),GetFirstToken:()=>_.TableExpr.GetFirstToken(),GetLastToken:()=>_.TableExpr.GetLastToken()}),_}else if(E.Type=="String"){let _;return _=k({CallType:"StringCall",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else throw"Function arguments expected."}function Te(V,A){let E=s(V,A);for(C(E,"nil prefixexpr");;){let _=f();if(_.Source=="."){let P=d(),D=m("Ident"),x;x=k({Type:"FieldExpr",Base:E,Field:D,Token_Dot:P,GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.Field}),E=x}else if(_.Source==":"){let P=d(),D=m("Ident"),x=xe(V,A),N;N=k({Type:"MethodExpr",Base:E,Method:D,FunctionArguments:x,Token_Colon:P,GetFirstToken:()=>N.Base.GetFirstToken(),GetLastToken:()=>N.FunctionArguments.GetLastToken()}),E=N}else if(_.Source=="["){let P=d(),D=l(V,A),x=m("Symbol","]"),N;N=k({Type:"IndexExpr",Base:E,Index:D,Token_OpenBracket:P,Token_CloseBracket:x,GetFirstToken:()=>N.Base.GetFirstToken(),GetLastToken:()=>N.Token_CloseBracket}),E=N}else if(_.Source=="{"||_.Source=="("||_.Type=="String"){let P;P=k({Type:"CallExpr",Base:E,FunctionArguments:xe(V,A),GetFirstToken:()=>P.Base.GetFirstToken(),GetLastToken:()=>P.FunctionArguments.GetLastToken()}),E=P}else if(He.includes(_.Source)){let P=d(),D=l(V,A),x;x=k({Type:"CompoundStat",Base:E,Token_Compound:P,Rhs:D,Lhs:E,GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.Rhs.GetLastToken()}),E=x}else return E}}function $(V,A){let E=f();if(E.Type=="Number"){let _;return _=k({Type:"NumberLiteral",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Type=="String"){let _;return _=k({Type:"StringLiteral",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Type=="Hash"){let _;return _=k({Type:"HashLiteral",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Source=="nil"){let _;return _=k({Type:"NilLiteral",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Source=="true"||E.Source=="false"){let _;return _=k({Type:"BooleanLiteral",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Source=="..."){let _;return _=k({Type:"VargLiteral",Token:d(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else return E.Source=="{"?G(V,A):E.Source=="function"?Ge(!0,V,A):Te(V,A)}function ne(V,A,E){let _;if(g()){let P=d(),D=ne(we,A,E),x;x=k({Type:"UnopExpr",Token_Op:P,Rhs:D,GetFirstToken:()=>x.Token_Op,GetLastToken:()=>x.Rhs.GetLastToken()}),_=x}else _=$(A,E),C(_,"nil sipleexpr");for(;u()&&de[f().Source]!=null&&de[f().Source][0]>V;){let P=d(),D=ne(de[P.Source][1],A,E);C(D,"RhsNeeded");let x;x=k({Type:"BinopExpr",Lhs:_,Rhs:D,Token_Op:P,GetFirstToken:()=>x.Lhs.GetFirstToken(),GetLastToken:()=>x.Rhs.GetLastToken()}),_=x}return _}l=(V,A)=>ne(0,V,A);function Le(V,A){let E=Te(V,A);if(E.Type=="MethodExpr"||E.Type=="CallExpr"){let _;return _=k({Type:"CallExprStat",Expression:E,GetFirstToken:()=>_.Expression.GetFirstToken(),GetLastToken:()=>_.Expression.GetLastToken()}),_}else{if(E.Type=="CompoundStat")return E;{let _=[E],P=[];for(;f().Source==",";){P.push(d());let oe=Te(V,A);if(oe.Type=="MethodExpr"||oe.Type=="CallExpr")throw"Bad left hand side of asignment";_.push(oe)}let D=m("Symbol","="),x=[l(V,A)],N=[];for(;f().Source==",";)N.push(d()),x.push(l(V,A));let ee;return ee=k({Type:"AssignmentStat",Rhs:x,Lhs:_,Token_Equals:D,Token_LhsSeperatorList:P,Token_RhsSeperatorList:N,GetFirstToken:()=>ee.Lhs[0].GetFirstToken(),GetLastToken:()=>ee.Rhs[ee.Rhs.length-1].GetLastToken()}),ee}}}function R(V,A){let E=d(),_=l(V,A),P=m("Keyword","then"),D=t(V,A),x=[];for(;f().Source=="elseif"||f().Source=="else";){let oe=d(),pe,Q;oe.Source=="elseif"&&(pe=l(V,A),Q=m("Keyword","then"));let ze=t(V,A);if(x.push({Condition:pe,Body:ze,ClauseType:oe.Source,Token:oe,Token_Then:Q}),oe.Source=="else")break}let N=m("Keyword","end"),ee;return ee=k({Type:"IfStat",Condition:_,Body:D,ElseClauseList:x,Token_If:E,Token_Then:P,Token_End:N,GetFirstToken:()=>ee.Token_If,GetLastToken:()=>ee.Token_End}),ee}function v(V,A){let E=d(),[_,P]=ge("end",V,A),D;return D=k({Type:"DoStat",Body:_,Token_Do:E,Token_End:P,GetFirstToken:()=>D.Token_Do,GetLastToken:()=>D.Token_End}),D}function Y(V,A){let E=d(),_=l(V,A),P=m("Keyword","do"),[D,x]=ge("end",V,A),N;return N=k({Type:"WhileStat",Condition:_,Body:D,Token_While:E,Token_Do:P,Token_End:x,GetFirstToken:()=>N.Token_While,GetLastToken:()=>N.Token_End}),N}function ce(V,A){let E=d(),[_,P]=ie();if(f().Source=="="){let D=d(),[x,N]=i(V,A);if(x.length<2||x.length>3)throw"Expected 2 or 3 values for range bounds";let ee=m("Keyword","do"),[oe,pe]=ge("end",V,A),Q;return Q=k({Type:"NumericForStat",VarList:_,RangeList:x,Body:oe,Token_For:E,Token_VarCommaList:P,Token_Equals:D,Token_RangeCommaList:N,Token_Do:ee,Token_End:pe,GetFirstToken:()=>Q.Token_For,GetLastToken:()=>Q.Token_End}),Q}else if(f().Source=="in"){let D=d(),[x,N]=i(V,A),ee=m("Keyword","do"),[oe,pe]=ge("end",V,A),Q;return Q=k({Type:"GenericForStat",VarList:_,GeneratorList:x,Body:oe,Token_For:E,Token_VarCommaList:P,Token_In:D,Token_GeneratorCommaList:N,Token_Do:ee,Token_End:pe,GetFirstToken:()=>Q.Token_For,GetLastToken:()=>Q.Token_End}),Q}}function Ue(V,A){let E=d(),[_,P]=ge("until",V),D=l(V,A),x;return x=k({Type:"RepeatStat",Body:_,Condition:D,Token_Repeat:E,Token_Until:P,GetFirstToken:()=>x.Token_Repeat,GetLastToken:()=>x.Condition.GetLastToken()}),x}function De(V,A){let E=d();if(f().Source=="function"){let _=Ge(!1,V,A);if(_.NameChain.length>1)throw T(_.Token_NameChainSeperator[0])+": `(` expected.";let P;return P=k({Type:"LocalFunctionStat",FunctionStat:_,Token_Local:E,GetFirstToken:()=>P.Token_Local,GetLastToken:()=>P.FunctionStat.GetLastToken()}),P}else if(f().Type=="Ident"){let[_,P]=ie(!1,!0),D=[],x=[],N;if(f().Source=="="){N=d();let[oe,pe]=i(V,A);D=oe,x=pe}let ee;return ee=k({Type:"LocalVarStat",VarList:_,ExprList:D,Token_Local:E,Token_Equals:N,Token_VarCommaList:P,Token_ExprCommaList:x,GetFirstToken:()=>ee.Token_Local,GetLastToken:function(){return ee.ExprList.length>0?ee.ExprList[ee.ExprList.length-1].GetLastToken():ee.VarList[ee.VarList.length-1]}}),ee}else throw"`function` or ident expected"}function Ye(V,A){let E=d(),_,P;p()||f().Source==";"?(_=[],P=[]):[_,P]=i(V,A);let D;return D={Type:"ReturnStat",ExprList:_,Token_Return:E,Token_CommaList:P,GetFirstToken:()=>D.Token_Return,GetLastToken:function(){return D.ExprList.length>0?D.ExprList[D.ExprList.length-1].GetLastToken():D.Token_Return}},D}function Oe(V,A){let E=d(),_;return _={Type:"BreakStat",Token_Break:E,GetFirstToken:()=>_.Token_Break,GetLastToken:()=>_.Token_Break},_}function Fe(V,A){let E=d(),_;return _={Type:"ContinueStat",Token_Continue:E,GetFirstToken:()=>_.Token_Continue,GetLastToken:()=>_.Token_Continue},_}function Xe(){let V=d(),A;f().Type=="Keyword"?A=m("Keyword"):A=m("Ident");let E;return E={Type:"GotoStat",Token_Goto:V,Token_Label:A,GetFirstToken:()=>E.Token_Goto,GetLastToken:()=>E.Token_Label},E}function dt(){let V=d(),A;f().Type=="Keyword"?A=m("Keyword"):A=m("Ident");let E=m("Symbol","::"),_;return _={Type:"LabelStat",Token_ColonsLeft:V,Token_Label:A,Token_ColonsRight:E,GetFirstToken:()=>_.Token_ColonsLeft,GetLastToken:()=>_.Token_ColonsRight},_}function at(V,A){let E=f();return E.Source=="if"?[!1,R(V,A)]:E.Source=="while"?[!1,Y(V,A)]:E.Source=="do"?[!1,v(V,A)]:E.Source=="for"?[!1,ce(V,A)]:E.Source=="repeat"?[!1,Ue(V,A)]:E.Source=="function"?[!1,Ge(!1,V,A)]:E.Source=="local"?[!1,De(V,A)]:E.Source=="return"?[!0,Ye(V,A)]:E.Source=="break"?[!0,Oe()]:E.Source=="continue"?[!0,Fe()]:E.Source=="goto"?[!1,Xe()]:E.Source=="::"?[!1,dt()]:[!1,Le(V,A)]}return t=function(V,A){let E=[],_=[],P={},D={};if(A!=null)for(let[oe,pe]of Object.entries(A))D[oe]=pe;if(V!=null)for(let[oe,pe]of Object.entries(V))D[oe]=pe;let x,N=0;for(;!p();){x&&x==f()&&ke(`INFINITE LOOP POSSIBLE ON STATEMENT ${x.Source} :`,x),x=f();let[oe,pe]=at(P,D);if(pe)switch(E.push(pe),pe.Type){case"LocalVarStat":pe.VarList.forEach(me=>{me.UseCount=0,me.Number=N++,P[me.Source]=me;let Ke=[];function W(){me.UseCount++,Ke.forEach(r=>{r.UseCount=me.UseCount})}me.Tokens={},me.Tokens.push=r=>{r.UseCountIncrease=W,r.UseCount=me.UseCount,r.Tokens=me.Tokens,Ke.push(r)},me.Tokens.get=()=>Ke,me.UseCountIncrease=W});break;case"LocalFunctionStat":let ze=pe.FunctionStat.NameChain;if(ze.length===1){let W=function(){me.UseCount++,Ke.forEach(r=>{r.UseCount=me.UseCount})},me=ze[0];me.UseCount=0,me.Number=N++,P[me.Source]=me;let Ke=[];me.Tokens={},me.Tokens.push=r=>{r.UseCountIncrease=W,r.UseCount=me.UseCount,r.Tokens=me.Tokens,Ke.push(r)},me.Tokens.get=()=>Ke,me.UseCountIncrease=W}break}let Q=f();Q.Type=="Symbol"&&Q.Source==";"&&(_[E.length-1]=d())}let ee;return ee={Type:"StatList",StatementList:E,SemicolonList:_,GetFirstToken:function(){var oe;if(ee.StatementList.length!=0)return(oe=ee.StatementList[0])==null?void 0:oe.GetFirstToken()},GetLastToken:function(){if(ee.StatementList.length!=0)return ee.SemicolonList[ee.StatementList.length-1]?ee.SemicolonList[ee.StatementList.length-1]:ee.StatementList[ee.StatementList.length-1].GetLastToken()}},ee},t([],[])}function ot(X,b){let c={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},d={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[f,T]of Object.entries(b))if(!d[f]&&!c[f])throw`Invalid visitor target: \`${f}\``;function e(m){if(m!=null){let k=b[m.Type];if(typeof k=="function")return k(m);if(k&&k.Pre)return k.Pre(m)}}function p(m){let k=b[m.Type];if(k&&typeof k=="object"&&k.Post)return k.Post(m)}let g,u;g=function(m){if(!e(m)){if(m.Type=="BinopExpr")g(m.Lhs),g(m.Rhs);else if(m.Type=="UnopExpr")g(m.Rhs);else if(!(m.Type=="NumberLiteral"||m.Type=="StringLiteral"||m.Type=="NilLiteral"||m.Type=="BooleanLiteral"||m.Type=="VargLiteral"||m.Type=="HashLiteral")){if(m.Type=="FieldExpr")g(m.Base);else if(m.Type=="IndexExpr")g(m.Base),g(m.Index);else if(m.Type=="MethodExpr"||m.Type=="CallExpr")g(m.Base),m.FunctionArguments.CallType=="ArgCall"?m.FunctionArguments.ArgList.forEach((k,t)=>{g(k)}):m.FunctionArguments.CallType=="TableCall"&&g(m.FunctionArguments.TableExpr);else if(m.Type=="FunctionLiteral")u(m.Body);else if(m.Type!="VariableExpr")if(m.Type=="ParenExpr")g(m.Expression);else if(m.Type=="TableLiteral")m.EntryList.forEach((k,t)=>{if(k.EntryType=="Field")g(k.Value);else if(k.EntryType=="Index")g(k.Index),g(k.Value);else if(k.EntryType=="Value")g(k.Value);else throw"unreachable"});else if(m.Type=="CompoundStat")g(m.Lhs),g(m.Rhs);else throw`unreachable, type: ${m.Type}: ${m}`}p(m)}},u=function(m){if(!e(m)){if(m.Type=="StatList")m.StatementList.forEach((k,t)=>{if(k!=null){if(k===null||k.Type===null)return;k.Remove=()=>{m.StatementList[t]=null},u(k)}});else if(m.Type!="BreakStat"){if(m.Type!="ContinueStat"){if(m.Type!="GotoStat"){if(m.Type!="LabelStat")if(m.Type=="ReturnStat")m.ExprList.forEach((k,t)=>{g(k)});else if(m.Type=="LocalVarStat")m.Token_Equals&&m.ExprList.forEach((k,t)=>{g(k)});else if(m.Type=="LocalFunctionStat")u(m.FunctionStat.Body);else if(m.Type=="FunctionStat")u(m.Body);else if(m.Type=="RepeatStat")u(m.Body),g(m.Condition);else if(m.Type=="GenericForStat")m.GeneratorList.forEach((k,t)=>{g(k)}),u(m.Body);else if(m.Type=="NumericForStat")m.RangeList.forEach((k,t)=>{g(k)}),u(m.Body);else if(m.Type=="WhileStat")g(m.Condition),u(m.Body);else if(m.Type=="DoStat")u(m.Body);else if(m.Type=="IfStat")g(m.Condition),u(m.Body),m.ElseClauseList.forEach(k=>{k.Condition!=null&&g(k.Condition),u(k.Body)});else if(m.Type=="CallExprStat")g(m.Expression);else if(m.Type=="CompoundStat")g(m.Lhs),g(m.Rhs);else if(m.Type=="AssignmentStat")m.Lhs.forEach(k=>{g(k)}),m.Rhs.forEach(k=>{g(k)});else throw"unreachable"}}}p(m)}},d[X.Type]?u(X):g(X)}function mt(X){let b=[],c,d=0;function f(){return d++,d}function T(){c={ParentScope:c,ChildScopeList:[],VariableList:[],BeginLocation:f(),Depth:null,GetVar:null},c.ParentScope?(c.Depth=c.ParentScope.Depth+1,c.ParentScope.ChildScopeList.push(c)):c.Depth=1;let l=c;c.GetVar=function(i){for(const s of l.VariableList)if(s.Name==i)return s;if(l.ParentScope)return l.ParentScope.GetVar(i);for(const s of b)if(s.Name==i)return s}}function e(){let l=c;return l.EndLocation=f(),l.VariableList.forEach(i=>{i.ScopeEndLocation=l.EndLocation}),c=l.ParentScope,l}T();function p(l,i,s){C(s,"MIssing localInfo"),C(l,"Missing local var name");let G={Type:"Local",Name:l,RenameList:[i],AssignedTo:!1,Info:s,Scope:c,BeginLocation:f(),EndLocation:f(),ReferenceLocationList:[f()]};return G.Rename=function(ie){G.Name=ie,G.RenameList.forEach(ge=>{ge(ie)})},c.VariableList.push(G),G}function g(l){for(const s of b)if(s.Name==l)return s;let i={Type:"Global",Name:l,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:f(),EndLocation:f(),ReferenceLocationList:[]};return i.Rename=function(s){i.Name=s,i.RenameList.forEach(G=>{G(s)})},b.push(i),i}function u(l,i){C(l,"Missing var name");let s=g(l);return s.RenameList.push(i),s}function m(l,i){let s;for(s=l.VariableList.length-1;s>=0;s--)if(l.VariableList[s].Name==i)return l.VariableList[s];if(l.ParentScope){let G=m(l.ParentScope,i);if(G)return G}}function k(l,i){C(l,"Missing var name");let s=m(c,l);s?s.RenameList.push(i):s=u(l,i);let G=f();return s.EndLocation=G,s.ReferenceLocationList.push(s.EndLocation),s}let t={};return t.FunctionLiteral={Pre:function(l){T(),l.ArgList.forEach((i,s)=>{let G=p(i.Source,function(ie,ge){ge||(i.Source=ie)},{Type:"Argument",Index:s});i.var=G})},Post:function(l){e()}},t.VariableExpr=function(l){l.Variable=k(l.Token.Source,function(i){l.Token.Source=i})},t.StatList={Pre:function(l){T()},Post:function(l){l.SkipPop||e()}},t.LocalVarStat={Post:function(l){l.VarList.forEach((i,s)=>{p(i.Source,function(G){l.VarList[s].Source=G},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(l){p(l.FunctionStat.NameChain[0].Source,function(i){l.FunctionStat.NameChain[0].Source=i},{Type:"LocalFunction"}),T(),l.FunctionStat.ArgList.forEach((i,s)=>{p(i.Source,function(G){i.Source=G},{Type:"Argument",Index:s})})},Post:function(){e()}},t.FunctionStat={Pre:function(l){let i=l.NameChain,s;i.length==1?m(c,i[0].Source)?s=k(i[0].Source,function(G){i[0].Source=G}):s=u(i[0].Source,function(G){i[0].Source=G}):s=k(i[0].Source,function(G){i[0].Source=G}),s.AssignedTo=!0,T(),l.ArgList.forEach((G,ie)=>{p(G.Source,function(ge){G.Source=ge},{Type:"Argument",Index:ie})})},Post:function(){e()}},t.GenericForStat={Pre:function(l){return l.GeneratorList.forEach(i=>{ot(i,t)}),T(),l.VarList.forEach((i,s)=>{p(i.Source,function(G){i.Source=G},{Type:"ForRange",Index:s})}),ot(l.Body,t),e(),!0}},t.NumericForStat={Pre:function(l){return l.RangeList.forEach(i=>{ot(i,t)}),T(),l.VarList.forEach((i,s)=>{p(i.Source,function(G){i.Source=G},{Type:"ForRange",Index:s})}),ot(l.Body,t),e(),!0}},t.RepeatStat={Pre:function(l){l.Body.SkipPop=!0},Post:function(l){e()}},t.AssignmentStat={Post:function(l){l.Lhs.forEach(i=>{i.Variable!=null&&(i.Variable.AssignedTo=!0)})}},ot(X,t),[b,e()]}function he(X){let b,c,d="",f=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function T(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;d=`${d}${e.LeadingWhite}${e.Source}`}return c=function(e){if(e.Type=="BinopExpr")c(e.Lhs),T(e.Token_Op),c(e.Rhs);else if(e.Type=="UnopExpr")T(e.Token_Op),c(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")T(e.Token);else if(e.Type=="FieldExpr")c(e.Base),T(e.Token_Dot),T(e.Field);else if(e.Type=="IndexExpr")c(e.Base),T(e.Token_OpenBracket),c(e.Index),T(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")c(e.Base),e.Type=="MethodExpr"&&(T(e.Token_Colon),T(e.Method)),e.FunctionArguments.CallType=="StringCall"?T(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(T(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((p,g)=>{c(p);let u=e.FunctionArguments.Token_CommaList[g];u!=null&&T(u)}),T(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&c(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")T(e.Token_Function),T(e.Token_OpenParen),e.ArgList.forEach((p,g)=>{T(p);let u=e.Token_ArgCommaList[g];u!=null&&T(u)}),e.Token_Varg!=null&&T(e.Token_Varg),T(e.Token_CloseParen),b(e.Body),T(e.Token_End);else if(e.Type=="VariableExpr")T(e.Token);else if(e.Type=="ParenExpr")T(e.Token_OpenParen),c(e.Expression),T(e.Token_CloseParen);else if(e.Type=="TableLiteral")T(e.Token_OpenBrace),e.EntryList.forEach((p,g)=>{if(p.EntryType=="Field")T(p.Field),T(p.Token_Equals),c(p.Value);else if(p.EntryType=="Index")T(p.Token_OpenBracket),c(p.Index),T(p.Token_CloseBracket),T(p.Token_Equals),c(p.Value);else if(p.EntryType=="Value")c(p.Value);else throw"unreachable";let u=e.Token_SeperatorList[g];u!=null&&T(u)}),T(e.Token_CloseBrace);else if(e.Type=="CompoundStat")b(e);else throw`unreachable, type: ${e.Type}: ${e}`},b=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let p=f(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",d+=`${p}do `}e.Type=="StatList"?e.StatementList.forEach((p,g)=>{p===null||p.Type===null||(p.Remove=()=>{e.StatementList[g]=null},b(p),e.SemicolonList[g]&&T(e.SemicolonList[g]))}):e.Type=="BreakStat"?T(e.Token_Break):e.Type=="ContinueStat"?T(e.Token_Continue):e.Type=="GotoStat"?(T(e.Token_Goto),T(e.Token_Label)):e.Type=="LabelStat"?(T(e.Token_ColonsLeft),T(e.Token_Label),T(e.Token_ColonsRight)):e.Type=="ReturnStat"?(T(e.Token_Return),e.ExprList.forEach((p,g)=>{c(p),e.Token_CommaList[g]&&T(e.Token_CommaList[g])})):e.Type=="LocalVarStat"?(T(e.Token_Local),e.VarList.forEach((p,g)=>{T(p),p.Attribute!=null&&T(p.Attribute);let u=e.Token_VarCommaList[g];u!=null&&T(u)}),e.Token_Equals!=null&&(T(e.Token_Equals),e.ExprList.forEach((p,g)=>{c(p);let u=e.Token_ExprCommaList[g];u!=null&&T(u)}))):e.Type=="LocalFunctionStat"?(T(e.Token_Local),T(e.FunctionStat.Token_Function),T(e.FunctionStat.NameChain[0]),T(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((p,g)=>{T(p);let u=e.FunctionStat.Token_ArgCommaList[g];u!=null&&T(u)}),e.FunctionStat.Token_Varg&&T(e.FunctionStat.Token_Varg),T(e.FunctionStat.Token_CloseParen),b(e.FunctionStat.Body),T(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(T(e.Token_Function),e.NameChain.forEach((p,g)=>{T(p);let u=e.Token_NameChainSeperator[g];u!=null&&T(u)}),T(e.Token_OpenParen),e.ArgList.forEach((p,g)=>{T(p);let u=e.Token_ArgCommaList[g];u!=null&&T(u)}),e.Token_Varg&&T(e.Token_Varg),T(e.Token_CloseParen),b(e.Body),T(e.Token_End)):e.Type=="RepeatStat"?(T(e.Token_Repeat),b(e.Body),T(e.Token_Until),c(e.Condition)):e.Type=="GenericForStat"?(T(e.Token_For),e.VarList.forEach((p,g)=>{T(p);let u=e.Token_VarCommaList[g];u!=null&&T(u)}),T(e.Token_In),e.GeneratorList.forEach((p,g)=>{c(p);let u=e.Token_GeneratorCommaList[g];u!=null&&T(u)}),T(e.Token_Do),b(e.Body),T(e.Token_End)):e.Type=="NumericForStat"?(T(e.Token_For),e.VarList.forEach((p,g)=>{T(p);let u=e.Token_VarCommaList[g];u!=null&&T(u)}),T(e.Token_Equals),e.RangeList.forEach((p,g)=>{c(p);let u=e.Token_RangeCommaList[g];u!=null&&T(u)}),T(e.Token_Do),b(e.Body),T(e.Token_End)):e.Type=="WhileStat"?(T(e.Token_While),c(e.Condition),T(e.Token_Do),b(e.Body),T(e.Token_End)):e.Type=="DoStat"?(T(e.Token_Do),b(e.Body),T(e.Token_End)):e.Type=="IfStat"?(T(e.Token_If),c(e.Condition),T(e.Token_Then),b(e.Body),e.ElseClauseList.forEach(p=>{T(p.Token),p.Condition!=null&&(c(p.Condition),T(p.Token_Then)),b(p.Body)}),T(e.Token_End)):e.Type=="CallExprStat"?c(e.Expression):e.Type=="CompoundStat"?(c(e.Lhs),T(e.Token_Compound),c(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((p,g)=>{c(p);let u=e.Token_LhsSeperatorList[g];u!=null&&T(u)}),T(e.Token_Equals),e.Rhs.forEach((p,g)=>{c(p);let u=e.Token_RhsSeperatorList[g];u!=null&&T(u)})):C(!1,"unreachable"),e.WrapInDo&&(d+=" end ")}},b(X),d}function gt(X){let b,c,d=0;function f(t){if(t===void 0)return;let l=`
${"	".repeat(d)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-l.length,l.length)!=l){let i="",s;for(s=t.LeadingWhite.length;s>=0;s--){let G=t.LeadingWhite.substr(s,1);if(!(G==""||G.match(/\s/g))){i=t.LeadingWhite.substr(0,s+1);break}}t.LeadingWhite=`${i}${l}`}}function T(){d++}function e(){d--,C(d>=0,"Undented too far")}function p(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function g(t){t.LeadingWhite=t.LeadingWhite.trim()}function u(t){g(t),Se.includes(p(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function m(t){u(t.GetFirstToken())}function k(t,l,i){T(),b(l),e(),f(i)}c=function(t){if(t.Type=="BinopExpr")c(t.Lhs),c(t.Rhs),m(t.Rhs),u(t.Token_Op);else if(t.Type=="UnopExpr")g(t.Token_Op),c(t.Rhs),t.Token_Op.Source[0]&&u(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")g(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+S(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")c(t.Base);else if(t.Type=="IndexExpr")c(t.Base),c(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")c(t.Base),g(t.FunctionArguments.GetFirstToken()),g(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,i)=>{c(l),i>0&&m(l);let s=t.FunctionArguments.Token_CommaList[i];s!=null&&g(s)}):t.FunctionArguments.CallType=="TableCall"&&c(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((l,i)=>{i>0&&u(l),t.Token_ArgCommaList[i]}),t.ArgList.length>0&&t.Token_Varg!=null&&u(t.Token_Varg),k(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")g(t.Token_OpenParen),g(t.Token_CloseParen),c(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){T();let l=100;t.EntryList.forEach((i,s)=>{i.EntryType=="Field"?(t.EntryList.length>l?qe(i.Value):f(i.Field),u(i.Token_Equals),c(i.Value),m(i.Value)):i.EntryType=="Index"?(t.EntryList.length>l?g(i.Token_OpenBracket):f(i.Token_OpenBracket),c(i.Index),u(i.Token_Equals),c(i.Value),m(i.Value)):i.EntryType=="Value"?(c(i.Value),t.EntryList.length>l?qe(i.Value):f(i.Value.GetFirstToken())):C(!1,"unreachable");let G=t.Token_SeperatorList[s];G!=null&&(t.EntryList.length>l?G.LeadingWhite="":g(G))}),e(),t.EntryList.length>l?t.Token_CloseBrace.LeadingWhite="":f(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")b(t);else throw ke(t),`unreachable, type: ${t.Type}:`+t},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,i)=>{l===null||l.Type===null||l.Type==="StatList"&&l.StatementList.length===0||(l.Remove=()=>{l.StatementList[i]=null},b(l),f(l.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,i)=>{c(l),m(l),t.Token_CommaList[i]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((l,i)=>{u(l),l.Attribute&&(l.Attribute.LeadingWhite=" "),t.Token_VarCommaList[i]}),t.Token_Equals){g(t.Token_Equals),u(t.Token_Equals);let l=[],i=[];t.ExprList.forEach((s,G)=>{s!=null&&(G<t.VarList.length||s.Type=="CallExpr"||s.Type=="ParenExpr"||s.Type=="VargLiteral"||s.Type=="BinopExpr"||s.Type=="UnopExpr")&&(l.push(s),i.push(t.Token_ExprCommaList[G]))}),t.ExprList=l,t.CommaList=i,t.ExprList.forEach((s,G)=>{s!=null&&(c(s),m(s),t.Token_ExprCommaList[G]!=null&&t.ExprList.length-1==G&&(t.Token_ExprCommaList[G]=null))})}}else if(t.Type=="LocalFunctionStat")u(t.FunctionStat.Token_Function),u(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((l,i)=>{i>0?u(l):g(l);let s=t.FunctionStat.Token_ArgCommaList[i];s&&g(s)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(g(t.FunctionStat.Token_Varg),u(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&g(t.FunctionStat.Token_Varg),g(t.FunctionStat.Token_OpenParen),g(t.FunctionStat.Token_CloseParen),k(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((l,i)=>{i==0&&u(l),t.Token_NameChainSeperator[i]}),t.ArgList.forEach((l,i)=>{i>0&&u(l),t.Token_ArgCommaList[i]}),t.ArgList.length>0&&t.Token_Varg&&u(t.Token_Varg),k(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")k(t.Token_Repeat,t.Body,t.Token_Until),c(t.Condition),m(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((l,i)=>{u(l),t.Token_VarCommaList[i]}),u(t.Token_In),t.GeneratorList.forEach((l,i)=>{c(l),m(l),t.Token_GeneratorCommaList[i]}),u(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((l,i)=>{u(l),t.Token_VarCommaList[i]}),u(t.Token_Equals),t.RangeList.forEach((l,i)=>{c(l),m(l),t.Token_RangeCommaList[i]}),u(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")c(t.Condition),m(t.Condition),u(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){c(t.Condition),m(t.Condition),u(t.Token_Then);let l=t.Token_Then,i=t.Body;t.ElseClauseList.forEach(s=>{k(l,i,s.Token),l=s.Token,s.Condition!=null&&(c(s.Condition),m(s.Condition),u(s.Token_Then),l=s.Token_Then),i=s.Body}),k(l,i,t.Token_End)}else t.Type=="CallExprStat"?c(t.Expression):t.Type=="CompoundStat"?(c(t.Lhs),c(t.Rhs),m(t.Lhs),m(t.Rhs),u(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((l,i)=>{c(l),i>0&&m(l),t.Token_LhsSeperatorList[i]}),u(t.Token_Equals),t.Rhs.forEach((l,i)=>{c(l),m(l),t.Token_RhsSeperatorList[i]})):C(!1,"Unreachable")}}}},b(X)}function qe(X){let b,c;function d(e){e&&(e.LeadingWhite="")}function f(e,p,g=!1){d(p);let u=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),m=(typeof p.Source=="string"?p.Source:p.Source.toString()).substr(0,1);u=="-"&&m=="-"||yt.includes(u)&&yt.includes(m)||g&&u==")"&&m=="("?p.LeadingWhite=g?";":" ":p.LeadingWhite=""}function T(e,p,g){b(p),d(g);let u=p.GetFirstToken(),m=p.GetLastToken();u!=null?(f(e,u),f(m,g)):f(e,g)}c=function(e){if(e.Type==="BinopExpr")c(e.Lhs),c(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(d(e.Token_Op),f(e.Lhs.GetLastToken(),e.Token_Op)),f(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")d(e.Token_Op),c(e.Rhs),f(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")d(e.Token);else if(e.Type=="FieldExpr")c(e.Base),d(e.Token_Dot),d(e.Field);else if(e.Type=="IndexExpr")c(e.Base),d(e.Token_OpenBracket),c(e.Index),d(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")c(e.Base),e.Type=="MethodExpr"&&(d(e.Token_Colon),d(e.Method)),e.FunctionArguments.CallType=="StringCall"?d(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(d(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((p,g)=>{c(p);let u=e.FunctionArguments.Token_CommaList[g];u!=null&&d(u)}),d(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&c(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")d(e.Token_Function),d(e.Token_OpenParen),e.ArgList.forEach((p,g)=>{d(p);let u=e.Token_ArgCommaList[g];u!=null&&d(u)}),e.Token_Varg!=null&&d(e.Token_Varg),d(e.Token_CloseParen),T(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")d(e.Token);else if(e.Type=="ParenExpr")d(e.Token_OpenParen),c(e.Expression),d(e.Token_CloseParen);else if(e.Type=="TableLiteral")d(e.Token_OpenBrace),e.EntryList.forEach((p,g)=>{p.EntryType=="Field"?(d(p.Field),d(p.Token_Equals),c(p.Value)):p.EntryType=="Index"?(d(p.Token_OpenBracket),c(p.Index),d(p.Token_CloseBracket),d(p.Token_Equals),c(p.Value)):p.EntryType=="Value"?c(p.Value):C(!1,"unreachable");let u=e.Token_SeperatorList[g];u!=null&&d(u)}),e.Token_SeperatorList[e.EntryList.length-1]=null,d(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},b=function(e){if(e.Type=="StatList"){let p;for(p=0;p<=e.StatementList.length;p++){let g=e.StatementList[p];if(g==null)continue;b(g),d(g.GetFirstToken());let u=e.StatementList[p-1];if(u!=null){let m={")":["(","["],"]":["(","["]};if(e.SemicolonList[p-1]){let k=u.GetLastToken().Source,t=g.GetFirstToken().Source;(m[k]===null||m[k]===void 0||!m[k].includes(t))&&(e.SemicolonList[p-1]=null)}e.SemicolonList[p-1]||f(u.GetLastToken(),g.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&d(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")d(e.Token_Break);else if(e.Type=="ContinueStat")d(e.Token_Continue);else if(e.Type=="GotoStat")d(e.Token_Goto),f(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")d(e.Token_ColonsLeft),d(e.Token_Label),d(e.Token_ColonsRight);else if(e.Type=="ReturnStat")d(e.Token_Return),e.ExprList.forEach((p,g)=>{c(p),e.Token_CommaList[g]!=null&&d(e.Token_CommaList[g])}),e.ExprList.length>0&&f(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){d(e.Token_Local);let p=!1;e.VarList.forEach((g,u)=>{u==0?f(e.Token_Local,g):d(g),g.Attribute&&(d(g.Attribute),u+1==e.VarList.length&&(p=!0));let m=e.Token_VarCommaList[u];m!=null&&d(m)}),e.Token_Equals!=null&&(p||d(e.Token_Equals),e.ExprList.forEach((g,u)=>{c(g);let m=e.Token_ExprCommaList[u];m!=null&&d(m)}))}else if(e.Type=="LocalFunctionStat")d(e.Token_Local),f(e.Token_Local,e.FunctionStat.Token_Function),f(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),f(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((p,g)=>{d(p);let u=e.FunctionStat.Token_ArgCommaList[g];u!=null&&d(u)}),e.FunctionStat.Token_Varg&&d(e.FunctionStat.Token_Varg),d(e.FunctionStat.Token_CloseParen),T(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")d(e.Token_Function),e.NameChain.forEach((p,g)=>{g==0?f(e.Token_Function,p):d(p);let u=e.Token_NameChainSeperator[g];u!=null&&d(u)}),d(e.Token_OpenParen),e.ArgList.forEach((p,g)=>{d(p);let u=e.Token_ArgCommaList[g];u!=null&&d(u)}),e.Token_Varg&&d(e.Token_Varg),d(e.Token_CloseParen),T(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")d(e.Token_Repeat),T(e.Token_Repeat,e.Body,e.Token_Until),c(e.Condition),f(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")d(e.Token_For),e.VarList.forEach((p,g)=>{g==0?f(e.Token_For,p):d(p);let u=e.Token_VarCommaList[g];u!=null&&d(u)}),f(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((p,g)=>{c(p),g==0&&f(e.Token_In,p.GetFirstToken());let u=e.Token_GeneratorCommaList[g];u!=null&&d(u)}),f(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")d(e.Token_For),e.VarList.forEach((p,g)=>{g==0?f(e.Token_For,p):d(p);let u=e.Token_VarCommaList[g];u!=null&&d(u)}),f(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((p,g)=>{c(p),g==0&&f(e.Token_Equals,p.GetFirstToken());let u=e.Token_RangeCommaList[g];u!=null&&d(u)}),f(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")d(e.Token_While),c(e.Condition),d(e.Token_Do),f(e.Token_While,e.Condition.GetFirstToken()),f(e.Condition.GetLastToken(),e.Token_Do),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")d(e.Token_Do),d(e.Token_End),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){d(e.Token_If),c(e.Condition),f(e.Token_If,e.Condition.GetFirstToken()),f(e.Condition.GetLastToken(),e.Token_Then);let p=e.Token_Then,g=e.Body;e.ElseClauseList.forEach((u,m)=>{T(p,g,u.Token),p=u.Token,u.Condition!=null&&(c(u.Condition),f(u.Token,u.Condition.GetFirstToken()),f(u.Condition.GetLastToken(),u.Token_Then),p=u.Token_Then),b(u.Body),g=u.Body}),T(p,g,e.Token_End)}else if(e.Type=="CallExprStat")c(e.Expression);else if(e.Type=="CompoundStat")c(e.Lhs),d(e.Token_Compound),c(e.Rhs),f(e.Lhs.GetLastToken(),e.Token_Compound),f(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((p,g)=>{c(p);let u=e.Token_LhsSeperatorList[g];u!=null&&d(u)}),d(e.Token_Equals),e.Rhs.forEach((p,g)=>{c(p);let u=e.Token_RhsSeperatorList[g];u!=null&&d(u)});else return c(e)},b(X)}function ht(X){let b,c,d={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function f(t,l,i=null){let s;return s={Type:t,Token:{Type:i??"Number",LeadingWhite:"",Source:l},GetFirstToken:()=>s.Token,GetLastToken:()=>s.Token},s}function T(t,l,i){let s;return s={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:l,Rhs:i,GetFirstToken:()=>s.Lhs.GetFirstToken(),GetLastToken:()=>s.Rhs.GetLastToken()},s}function e(t,l){let i;return i={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:l,GetFirstToken:()=>i.Token_Op,GetLastToken:()=>i.Rhs.GetLastToken()},i}function p(t,l){if(l!=null)for(var[i,s]of Object.entries(l))t[i]=s}function g(t){if(t==null||t.substr==null)return;let l=t.substr(0,1),i;if((l=='"'||l=="'")&&(i=t.substr(1,t.length-2)),l=="["){let ie=0,ge=1;for(;t.substr(ge,1)=="=";)ie++,ge++;i=t.substr(2+ie,t.length-4-ie-2)}if(i==null)return"";let s="",G;for(G=0;G<=i.length;G++){let ie=i.substr(G,1);ie=="'"||ie=='"'?s+=`\\${ie}`:s+=ie}return s}function u(t){if(typeof t=="object"&&t.Type=="ParenExpr")return p(t,t.Expression)}function m(t,l,i){let s=l,G=i;if(l&&l.Type=="ParenExpr"&&(s=l.Expression),i&&i.Type=="ParenExpr"&&(G=i.Expression),s==null||G==null||s.Type==null||G.Type==null||s.Type=="VariableExpr"||s.Type=="CallExpr"||s.Type=="BinopExpr"||G.Type=="CallExpr"||G.Type=="BinopExpr"||G.Type=="VariableExpr")return;let ie=s.Token||s.Expression!=null&&s.Expression.Token||null,ge=G.Token||G.Expression!=null&&G.Expression.Token||null,Ge=ie!=null?ie.Source:null,xe=ge!=null?ge.Source:null,Te,$;if(s.Type=="BooleanLiteral"&&(Te=Ge=="true"),G.Type=="BooleanLiteral"&&($=xe=="true"),!(s.Type=="NumberLiteral"&&(Te=I(Ge),Te==null))&&!(G.Type=="NumberLiteral"&&($=I(xe),$==null))&&((s.Type=="StringLiteral"||s.Type=="HashLiteral")&&(Te=Ge.toString()),(G.Type=="StringLiteral"||G.Type=="HashLiteral")&&($=xe.toString()),Te!=null&&$!=null)){if(t=="==")return Te==$;if(t=="~=")return Te!=$;if(t=="and")return Te&&$;if(t=="or")return Te||$;if(t==".."&&s.Type=="StringLiteral"&&G.Type=="StringLiteral")return`"${g(Ge)+g(xe)}"`;if(s.Type=="StringLiteral"&&(Te=I(g(Te))),G.Type=="StringLiteral"&&($=I(g($))),Te==null||$==null)return;let ne;if(t=="+"&&(ne=Te+$),t=="-"&&(ne=Te-$),t=="*"&&(ne=Te*$),t=="/"&&(ne=Te/$),t=="^"&&(ne=Te**$),t=="%"&&(ne=Te%$),t==">"&&(ne=Te>$),t=="<"&&(ne=Te<$),t==">="&&(ne=Te>=$),t=="<="&&(ne=Te<=$),ne==!1||ne==!0||isFinite(ne)&&ne>-(10**6)&&ne<10**6)return ne}}function k(t,l){let i=l.Token||l.Expression||l.EntryList||l;if(i==null||i.Source==null&&l.Type!="TableLiteral"||l.Type=="VariableExpr"||l.Type=="CallExpr"||l.Type=="BinopExpr")return;let s=i.Source,G;if(l.Type=="TableLiteral"&&i!=null){let ie=[],ge=0,Ge=!1,xe=!1,Te=0;if(i.forEach(($,ne)=>{if(Ge)ie.push($);else if($.EntryType=="Value"||$.EntryType=="Index")if(($.Index==null||$.Index.Type=="NumberLiteral")&&$.Value){if(($.Index!=null&&$.Index.Token!=null&&$.Index.Token.Source!==null?$.Index.Token.Source:Te+1).toString()!==(++Te).toString())return Ge=!0,xe=!0,ie.push($);$.Value.Type!="CallExpr"?ge++:(Ge=!0,ie.push($))}else ie.push($)}),xe)return;if(t=="#")return l.EntryList=ie,l.EntryList.length<=0?f("NumberLiteral",ge!==null?ge:l.EntryList.length):ge<=0?e("#",l):T("+",f("NumberLiteral",ge),e("#",l))}if(l.Type=="BooleanLiteral"&&(G=s=="true"),!(l.Type=="NumberLiteral"&&(G=I(s),G===null))){if(l.Type=="StringLiteral"&&(G=s.substr(1,s.length-2)),t=="not"&&l.Type!==null)return l.Type=="NilLiteral"||l.Type=="BooleanLiteral"&&G===!1;if(G!=null){if(t=="#")return G.length;if(t=="-")return-G}}}c=function(t){if(t.Type=="BinopExpr"){if(c(t.Lhs),c(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let l=t.Token_Op;if(l!=null&&l.Source!=null){let i=m(l.Source,t.Lhs,t.Rhs);if(i!=null){if(typeof i=="boolean"){let s=f("BooleanLiteral",i.toString(),"Keyword");p(t,s);return}else if(typeof i=="number"){if(isFinite(i)==!0){let s=f("NumberLiteral",i.toString(),"Number");p(t,s);return}}else if(typeof i=="string"){let s=f("StringLiteral",i,"String");p(t,s);return}else if(typeof i=="object"){p(t,i);return}return}}if(t.Lhs.Type=="ParenExpr"){let s=t.Lhs.Expression;s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let s=t.Rhs.Expression;s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(c(t.Rhs),t.Rhs!=null&&d[t.Rhs.Type]==!0){let l=t.Token_Op;if(l!=null&&l.Source!=null){let i=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,s=k(l.Source,i);if(s!=null){if(typeof s=="boolean"){let G=f("BooleanLiteral",s.toString(),"Keyword");p(t,G);return}else if(typeof s=="number"){if(isFinite(s)==!0){let G=f("NumberLiteral",s,"Number");p(t,G);return}}else if(typeof s=="string"){let G=f("StringLiteral",s,"String");p(t,G);return}else if(typeof s=="object"){p(t,s);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let l=t.Token;if(l!=null){if(l.Type=="Number"){let i=l.Source.toString().split("e");if(i.length===2){let s=I(i[0]),G=I(i[1]);isFinite(s)&&isFinite(G)&&s**G<999999999&&!l.Source.includes("+")&&l.Source.includes(".")&&!l.Source.includes("-")&&(l.Source=(s**G).toString())}}l.Type=="String"&&(l.Source=l.Source.replace(/\\\d+/gi,i=>{let s=I(i.substr(1,i.length-1));return s&&isFinite(s)&&(s>=97&&s<=122||s>=65&&s<=90||s>=33&&s<=47||s>=58&&s<=64||s>=91&&s<=96||s>=123&&s<=126)&&s!==34&&s!==39&&s!==92?String.fromCharCode(s):i}))}}else if(t.Type=="FieldExpr")c(t.Base);else if(t.Type=="IndexExpr")c(t.Base),c(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(c(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,i)=>{c(l)}):t.FunctionArguments.CallType=="TableCall"&&c(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let l=t.Base.Expression;t.FunctionArguments.ArgList.forEach((i,s)=>{let G=t.FunctionArguments.ArgList[s];if(G!==void 0&&(G.Type=="NumberLiteral"||G.Type=="StringLiteral"||G.Type=="NilLiteral"||G.Type=="BooleanLiteral"||G.Type=="HashLiteral")){let ie=l.ArgList[s];ie&&ie.var.RenameList.forEach(ge=>{ge(G.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")b(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let l=t.Expression;l!=null&&l.Type=="ParenExpr"&&(t.Expression=l.Expression),c(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&u(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((l,i)=>{l.EntryType=="Field"?c(l.Value):l.EntryType=="Index"?(c(l.Index),c(l.Value)):l.EntryType=="Value"?c(l.Value):C(!1,"unreachable")})},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,i)=>{l===null||l.Type===null||(l.Remove=()=>{t.StatementList[i]=null},b(l))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,i)=>{c(l)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((l,i)=>{c(l)});else if(t.Type=="LocalFunctionStat")b(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")b(t.Body);else if(t.Type=="RepeatStat")b(t.Body),c(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((l,i)=>{c(l)}),b(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach(($,ne)=>{c($)}),b(t.Body);let l=t.RangeList[0],i=t.RangeList[1],s=t.RangeList[2];if(l==null||i==null)return t.Remove();if(u(l),u(i),u(s),l.Type!="NumberLiteral"||i.Type!="NumberLiteral"||s!=null&&s.Type!="NumberLiteral"||s==null)return;let G=I(l.Token.Source),ie=I(i.Token.Source),ge=s!=null&&I(s.Token.Source)||1,Ge=ge>0&&G<=ie||ge<0&&G>=ie,xe=(ie-G+ge)/ge;if(!(Ge&&xe>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){c(t.Condition),b(t.Body);let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(b(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let l=t.Body.StatementList[0];l.Type!=="ContinueStat"&&l.Type!=="BreakStat"&&l.Type!=="ReturnStat"&&p(t,l)}}else if(t.Type=="IfStat"){c(t.Condition),b(t.Body),t.ElseClauseList.forEach((i,s)=>{i.Condition!=null&&c(i.Condition),b(i.Body)});let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?c(t.Expression):t.Type=="CompoundStat"?(c(t.Lhs),c(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((l,i)=>{c(l)}),t.Rhs.forEach((l,i)=>{c(l)}))}},b(X)}let ue=[],Ce;for(Ce=97;Ce<=122;Ce++)ue.push(String.fromCharCode(Ce));for(Ce=65;Ce<=90;Ce++)ue.push(String.fromCharCode(Ce));for(Ce=48;Ce<=57;Ce++)ue.push(String.fromCharCode(Ce));ue.push("_");let Je=[];for(Ce=97;Ce<=122;Ce++)Je.push(String.fromCharCode(Ce));for(Ce=65;Ce<=90;Ce++)Je.push(String.fromCharCode(Ce));function st(X){let b="",c=X%Je.length;for(X=(X-c)/Je.length,b=`${b}${Je[c]}`;X>0;){let d=X%ue.length;X=(X-d)/ue.length,b=`${b}${ue[d]}`}return b}function h(X,b,c){let d=[];for(var[f,T]of Object.entries(lt))d[f]=!0;let e=[];X.forEach(k=>{k.AssignedTo&&c?e.push(k):d[k.Name]=!0});function p(k){k.VariableList.forEach(t=>{e.push(t)}),k.ChildScopeList.forEach(t=>{p(t)})}p(b),e.forEach(k=>{k.UsedNameArray=[]}),e.sort((k,t)=>k-t);let g=0,u=[];function m(k){let t=u[k];if(t==null){for(t=st(g),g++;d[t];)t=st(g),g++;u[k]=t}return t}e.forEach((k,t)=>{k.Renamed=!0;let l=0;for(;k.UsedNameArray[l];)l++;k.Rename(m(l)),k.Scope?e.forEach(i=>{i.Renamed||(!i.Scope||i.Scope.Depth<k.Scope.Depth?i.ReferenceLocationList.some(s=>s>=k.BeginLocation&&s<=k.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1):i.Scope.Depth>k.Scope.Depth?k.ReferenceLocationList.some(s=>s>=i.BeginLocation&&s<=i.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1):k.BeginLocation<i.EndLocation&&k.EndLocation>i.BeginLocation&&(i.UsedNameArray[l]=!0))}):e.forEach(i=>{if(!i.Renamed)if(i.Type=="Global")i.UsedNameArray[l]=!0;else if(i.Type=="Local")k.ReferenceLocationList.some(s=>s>=i.BeginLocation&&s<=i.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1);else throw"Unreachable"})})}function w(X,b,c){let d=[];X.forEach(g=>{(!g.AssignedTo||!c)&&(d[g.Name]=!0)});let f=1,T=1;function e(g,u){g.Name=u,g.RenameList.forEach(m=>{m(u)})}if(c){let g={};X.forEach(u=>{u.AssignedTo&&!u.ChangedName&&(g[u.Name]=g[u.Name]||`G_${T}_`,u.ChangedName=!0,e(u,g[u.Name]),T++)})}function p(g){g.VariableList.forEach(u=>{let m=`L_${f}_`;u.Info.Type=="Argument"?m=`${m}arg${u.Info.Index}`:u.Info.Type=="LocalFunction"?m=`${m}func`:u.Info.Type=="ForRange"&&(m=`${m}forvar${u.Info.Index}`),e(u,m),f++}),g.ChildScopeList.forEach(u=>{p(u)})}p(b)}let Ne={};Ne.Minify=function(X,b){let c=se(X),[d,f]=mt(c);return b.RenameVariables==!0&&h(d,f,b.RenameGlobals),b.SolveMath==!0&&ht(c),qe(c),he(c)},Ne.Beautify=function(X,b){let c=se(X),[d,f]=mt(c);return b.RenameVariables&&w(d,f,b.RenameGlobals),b.SolveMath==!0&&ht(c),gt(c),he(c)};try{ft!=null&&ft.exports!=null&&(ft.exports.Beautify=Ne.Beautify,ft.exports.Minify=Ne.Minify)}catch{}})(Ut);var kn=Ut.exports;const Nt=kn;At.Beautify=Nt.Beautify;At.Minify=Nt.Minify;At.Uglify=Nt.Uglify;const jt={master:`return {
  desc="\\
",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="\\
",
  settings_id="ENDLESS",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc="\\
",
  worldgen_id="ENDLESS",
  worldgen_name="" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc=" ",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc=" ",
  settings_id="DST_CAVE",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc=" ",
  worldgen_id="DST_CAVE",
  worldgen_name="" 
}`},Ht={master:`return {
  desc="",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc="",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc=" ",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc=" ",
  settings_id="DST_CAVE",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc=" ",
  worldgen_id="DST_CAVE",
  worldgen_name="" 
}`},bn={class:"page-div"},Sn={class:"card-header"},vn={key:0},Ln={class:"el-form-item-msg"},Vn={class:"card-header"},Cn={style:{display:"flex","flex-wrap":"wrap"}},En={style:{width:"99%"}},wn={style:{width:"100%"}},Fn={style:{"font-weight":"bolder"}},An={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Mn={class:"item-container"},Gn={style:{"font-weight":"bolder"}},Rn={class:"item-container"},In={style:{"font-weight":"bolder"}},Pn={class:"item-container"},xn={style:{"font-weight":"bolder"}},Un={class:"item-container"},Nn={style:{"font-weight":"bolder"}},Dn={class:"item-container"},zn={style:{"font-weight":"bolder"}},Wn={class:"item-container"},$n={style:{"font-weight":"bolder"}},On={class:"item-container"},qn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},Zn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},el={class:"item-container"},tl={style:{"font-weight":"bolder"}},nl={class:"item-container"},ll={style:{"font-weight":"bolder"}},al={class:"item-container"},ol={style:{"font-weight":"bolder"}},rl={class:"item-container"},il={style:{"font-weight":"bolder"}},ul={class:"item-container"},sl={style:{"font-weight":"bolder"}},dl={class:"item-container"},fl={style:{"font-weight":"bolder"}},cl={class:"item-container"},pl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},hl={class:"item-container"},Tl={style:{"font-weight":"bolder"}},yl={class:"item-container"},_l={style:{"font-weight":"bolder"}},kl={class:"item-container"},bl={class:"tip"},Sl={style:{display:"flex","align-items":"center"}},vl={style:{display:"flex","justify-content":"flex-end"}},Ll={class:"tip_warning"},Vl={style:{margin:"10px"}},Cl={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},El={__name:"room",setup(ft){const{t:S}=rn();un(async()=>{C.value=window.innerHeight,window.addEventListener("resize",()=>{C.value=window.innerHeight}),await He(),await Le(),await pt(),await ue(),m()});const ke=Ie(!1),C=Ie(0),{isMobile:I}=sn(),Se=dn(),be=fn(),ve=Pt(()=>Se.isDark),Ae=Pt(()=>Se.language),yt=be.userInfo,Pe=Pt(()=>{const v=(et.value||[]).findIndex(Y=>Y.clusterName===Se.selectedDstCluster);return v!==-1?v:0}),ct=cn();pn();const _t=mn(),ut=gn("refresh"),Qe=(R,v)=>{let Y=null;return(...ce)=>{Y&&clearTimeout(Y),Y=setTimeout(()=>R(...ce),v)}},et=Ie([]),He=()=>{kt.clusters.all.get().then(R=>{et.value=R.data})},lt=()=>{kt.clusters.get().then(R=>{Se.dstClusters=R.data,Se.selectedDstCluster===null&&Se.dstClusters!==null&&(Se.selectedDstCluster=Se.dstClusters[0].clusterName)})},je=Ie(0),pt=()=>{hn.userInfo.get().then(R=>{je.value=R.data.maxWorldsPerCluster})},tt=()=>{setTimeout(()=>{ct.meta.isKeepAlive&&_t.removeKeepAliveName(ct.name),ut(!1),bt(()=>{ct.meta.isKeepAlive&&_t.addKeepAliveName(ct.name),ut(!0)})},0)},we=Ie(0),de=Ie(!1),re=R=>{we.value>R&&(we.value=R)},se=()=>{we.value--},ot=async()=>{if(we.value===0&&mt.value.validate(async R=>{R&&(ht.value||(T.value=1,e.value="World1",p.value=[{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Pe.value*10,shardMasterPort:10888+Pe.value*10,steamMasterPort:27018+Pe.value*10,steamAuthenticationPort:8768+Pe.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0,saved:!1}]),we.value++)}),we.value===1){if(yt.role!=="admin"&&p.value.length>je.value){let v="";Ae.value==="zh"?v=`${je.value}`:v=`Exceeds the maximum number of worlds that can be created. The current maximum is ${je.value}`,it(v);return}const R=["serverPort","shardMasterPort","steamMasterPort","steamAuthenticationPort"];for(let v of p.value)for(const Y of ne.value)if(Y.clusterName!==Se.selectedDstCluster){for(let ce of R)if(Y.worldPort!==null&&Y.worldPort.includes(v[ce])){it(`[${S(`setting.roomWorldForm.${ce}`)}]:${v[ce]} ${Ae.value==="zh"?"":"Port Conflicted, please check and modify"}`,3e3);return}}for(let v in u)u!=null&&u.key&&await u[v].validate();for(let v of p.value){if(v.levelData===""){it(Ae.value==="zh"?"":"Please input world configure");return}if(v.shardMasterPort!==p.value[0].shardMasterPort){it(Ae.value==="zh"?"":"Master Port must be same");return}try{wt.parse(v.levelData)}catch{it(S("setting.luaError"));return}}we.value++;return}if(we.value===2)if(qe.value)try{wt.parse(qe.value.mod),we.value++}catch{it(S("setting.luaError"))}else we.value++},mt=Ie(),he=Ie({clusterName:Se.selectedDstCluster,name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,consoleEnabled:!0,pauseEmptyDisabled:!1,password:"",token:""}),gt={name:[{required:!0,message:S("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:S("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:S("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:S("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:S("setting.roomBaseFormRules.token"),trigger:"blur"}]},qe=Ie({mod:""}),ht=Ie(!1),ue=()=>{const R={clusterName:Se.selectedDstCluster};kt.cluster.get(R).then(v=>{if(he.value=v.data.clusterSetting,v.data.worlds){p.value=v.data.worlds;let Y=1,ce=999999;for(let Ue of p.value){let De=parseInt(Ue.name.replace("World",""));De>Y&&(Y=De),De<ce&&(ce=De),Ue.saved=!0}T.value=Y,e.value="World"+ce.toString(),ht.value=!0}else ht.value=!1;qe.value.mod=v.data.mod})},Ce=async R=>{switch(R){case"save":Je();break;case"saveAndRestart":st();break;case"generateNewWorld":h();break}},Je=()=>{const R={clusterSetting:he.value,worlds:p.value,mod:qe.value.mod,sysSetting:{}};ke.value=!0,kt.cluster.save.post(R).then(v=>{xt(v.message),ke.value=!1,lt()}).finally(()=>{ke.value=!1,bt(()=>{tt()})})},st=()=>{const R={clusterSetting:he.value,worlds:p.value,mod:qe.value.mod,sysSetting:{}};ke.value=!0,kt.cluster.saveRestart.post(R).then(v=>{xt(v.message),ke.value=!1,lt()}).finally(()=>{ke.value=!1,bt(()=>{tt()})})},h=()=>{const R={clusterSetting:he.value,worlds:p.value,mod:qe.value.mod,sysSetting:{}};ke.value=!0,kt.cluster.saveRegenerate.post(R).then(v=>{xt(v.message),ke.value=!1,lt()}).finally(()=>{ke.value=!1,bt(()=>{tt()})})},w=Ie({}),Ne=R=>{if(R==="")return;const v=wt.parse(R),Y=X(v);w.value=b(Y)};function X(R){const Y=R.body[0].arguments[0];for(const ce of Y.fields)if(ce.key.type==="Identifier"&&ce.key.name==="overrides")return ce.value;return null}function b(R){const v={};for(const Y of R.fields){const ce=Y.key.name;v[ce]=Y.value.raw.replace(/"/g,"")}return v}const c=R=>{let v=At.Beautify(R,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return v=v.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),v=v.replace(/ = /g,"="),v=v.replace(/\t/g,"  "),v=v.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),v=v.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),v=v.replace(/(.+)},\n/g,`$1
  },
`),v=v.replace(/^ +?\n/gm,""),v},d=Qe(R=>{const v=R.name,Y=R.value;for(let ce of p.value)if(ce.name===e.value){const Ue=wt.parse(ce.levelData),De=X(Ue);for(let Ye of De.fields)Ye.key.name===v&&(Ye.value.raw=`"${Y}"`);ce.levelData=f(Ue);break}},100),f=(R,v=0)=>{const Y="    ".repeat(v);switch(R.type){case"Chunk":return R.body.map(ce=>f(ce,v)).join(`
`);case"LocalStatement":return`${Y}local ${R.variables.map(f).join(", ")} = ${R.init.map(f).join(", ")}`;case"FunctionDeclaration":return`${Y}function ${f(R.identifier)}(${R.parameters.map(f).join(", ")}) 
${f(R.body,v+1)}
${Y}end`;case"ReturnStatement":return`${Y}return ${R.arguments.map(f).join(", ")}`;case"BinaryExpression":return`${f(R.left)} ${R.operator} ${f(R.right)}`;case"CallStatement":return`${Y}${f(R.expression)}`;case"Identifier":return R.name;case"StringLiteral":return`${R.raw}`;case"NumericLiteral":return R.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${Y}{ ${R.fields.map(ce=>f(ce,v+1)).join(`,
`+Y)} }`;case"Field":return R.key?`${f(R.key)} = ${f(R.value)}`:f(R.value);case"AssignmentStatement":return`${Y}${R.variables.map(f).join(", ")} = ${R.init.map(f).join(", ")}`;case"CallExpression":return`${f(R.base)}(${R.arguments.map(f).join(", ")})`;case"TableKeyString":return`${f(R.key)} = ${f(R.value)}`;case"BooleanLiteral":return R.raw;case"TableKey":return`[${f(R.key)}] = ${f(R.value)}`;case"TableValue":return f(R.value);default:throw new Error(`Unsupported node type: ${R.type}`)}},T=Ie(1),e=Ie("World1"),p=Ie([{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Pe.value*10,shardMasterPort:10888+Pe.value*10,steamMasterPort:27018+Pe.value*10,steamAuthenticationPort:8768+Pe.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}]),g={id:[{required:!0,message:S("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:S("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:S("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:S("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:S("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:S("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:S("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},u={},m=()=>{for(let R of p.value){const v=p.value.length;T.value=v,u[`World${v}`]=Ie()}},k=(R,v)=>{if(v==="add"){T.value++;const Y=`World${T.value}`;u[Y]=Ie(),p.value.push({id:T.value+100,name:Y,isMaster:!1,levelData:"",serverPort:11e3+T.value+Pe.value*10,shardMasterPort:10888+Pe.value*10,steamMasterPort:27017+T.value+Pe.value*10,steamAuthenticationPort:8767+T.value+Pe.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}),e.value=Y}else if(v==="remove"){if(p.value.length===1){it(Ae.value==="zh"?"":"Every room must include at least one world");return}const Y=p.value;let ce=e.value;Y.forEach((Ue,De)=>{if(Ue.name===R){const Ye=Y[De+1]||Y[De-1];Ye&&(ce=Ye.name)}}),e.value=ce,p.value=Y.filter(Ue=>Ue.name!==R),delete u[R]}t.value="Code"},t=Ie("Code"),l=R=>{for(let v of p.value)v.name===e.value&&(R.clusterType==="endless"&&(R.worldType==="ground"&&(v.levelData=jt.master),R.worldType==="cave"&&(v.levelData=jt.caves)),R.clusterType==="survival"&&(R.worldType==="ground"&&(v.levelData=Ht.master),R.worldType==="cave"&&(v.levelData=Ht.caves)))},i=Ie(""),s=async R=>{if(R==="Visualization")try{for(let v of p.value)if(v.name===e.value){i.value=G(v.levelData),await Ne(v.levelData);break}}catch{it(Ae.value==="zh"?"":"Visualization load failed")}R==="Code"&&await bt(()=>{for(let v of p.value)if(v.name===e.value){v.levelData=c(v.levelData);break}})},G=R=>{const v=/location\s*=\s*"([^"]*)"/,Y=R.match(v);return Y?Y[1]:""},ie=()=>{t.value="Code"},ge=Ie(!1),Ge=Ie(""),xe=Ie([]),Te=()=>{xe.value=[{ID:void 0,name:"",maxPlayers:void 0}],Ge.value="",ge.value=!0},$=()=>{let R="",v="";for(let Y of xe.value){if(!Y.ID){it(Ae.value==="zh"?"ID":"World ID is required");return}if(!Y.name){it(Ae.value==="zh"?"":"World name is required");return}if(!Y.maxPlayers){it(Ae.value==="zh"?"":"World max players is required");return}R=R+`["${Y.ID}"]="${Y.name}",`,v=v+`["${Y.ID}"]="${Y.maxPlayers}",`}Ge.value=`
  ["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${v}},
      say_dest=true,
      world_name={${R}},
      world_prompt=true
    },
    enabled=true
  }`,Ge.value="```lua ::open\n"+Ge.value},ne=Ie([]),Le=()=>{kt.clustersWorldPort.get().then(R=>{ne.value=R.data})};return Tn(()=>Se.selectedDstCluster,R=>{R&&bt(()=>{tt()})},{immediate:!1}),(R,v)=>{const Y=Be("el-step"),ce=Be("el-steps"),Ue=Be("el-card"),De=Be("el-col"),Ye=Be("el-row"),Oe=Be("el-input"),Fe=Be("el-form-item"),Xe=Be("el-radio"),dt=Be("el-radio-group"),at=Be("el-switch"),V=Be("el-slider"),A=Be("el-link"),E=Be("el-form"),_=Be("el-scrollbar"),P=Be("el-icon"),D=Be("el-button"),x=Be("el-dropdown-item"),N=Be("el-dropdown-menu"),ee=Be("el-dropdown"),oe=Be("el-tooltip"),pe=Be("el-tab-pane"),Q=Be("el-divider"),ze=Be("el-tabs"),me=Be("el-result"),Ke=Be("el-dialog");return U(),te("div",bn,[L(Ye,{gutter:10},{default:B(()=>[L(De,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:B(()=>[L(Ue,{shadow:"never"},{default:B(()=>[L(ce,{active:we.value,"align-center":"","finish-status":"success"},{default:B(()=>[L(Y,{title:a(I)?a(S)("setting.roomSettingMobile"):a(S)("setting.roomSetting"),onClick:v[0]||(v[0]=W=>re(0))},null,8,["title"]),L(Y,{title:a(I)?a(S)("setting.worldSettingMobile"):a(S)("setting.worldSetting"),onClick:v[1]||(v[1]=W=>re(1))},null,8,["title"]),L(Y,{title:a(I)?a(S)("setting.modSettingMobile"):a(S)("setting.modSetting"),onClick:v[2]||(v[2]=W=>re(3))},null,8,["title"]),L(Y,{title:a(I)?a(S)("setting.finishSettingMobile"):a(S)("setting.finishSetting"),onClick:v[3]||(v[3]=W=>re(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),L(Ye,{gutter:10,style:{"margin-top":"5px"}},{default:B(()=>[L(De,{lg:24,md:24,sm:24,span:24,xs:24},{default:B(()=>[we.value===0?(U(),ye(Ue,{key:0,shadow:"never"},{header:B(()=>[Z("div",Sn,[Z("span",null,J(a(S)("setting.roomSetting")),1)])]),default:B(()=>[L(_,{height:C.value-438},{default:B(()=>[L(E,{ref_key:"clusterSettingFormRef",ref:mt,"label-position":a(I)?"top":"left","label-width":a(I)?"70":"auto",model:he.value,rules:gt,size:a(I)?"small":"large",style:{"margin-right":"16px"}},{default:B(()=>[L(Fe,{label:a(S)("setting.baseForm.room"),prop:"name",style:rt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:B(()=>[L(Oe,{modelValue:he.value.name,"onUpdate:modelValue":v[4]||(v[4]=W=>he.value.name=W)},null,8,["modelValue"])]),_:1},8,["label","style"]),a(I)?nt("",!0):(U(),te("div",vn)),L(Fe,{label:a(S)("setting.baseForm.description"),prop:"description",style:rt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:B(()=>[L(Oe,{modelValue:he.value.description,"onUpdate:modelValue":v[5]||(v[5]=W=>he.value.description=W)},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Fe,{label:a(S)("setting.baseForm.gameMode.name"),prop:"gameMode",style:rt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:B(()=>[L(dt,{modelValue:he.value.gameMode,"onUpdate:modelValue":v[6]||(v[6]=W=>he.value.gameMode=W)},{default:B(()=>[L(Xe,{label:a(S)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),L(Xe,{label:a(S)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),L(Xe,{label:a(S)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),L(Xe,{label:a(S)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","style"]),L(Fe,{label:a(S)("setting.baseForm.pvp"),prop:"pvp",style:rt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:B(()=>[L(at,{modelValue:he.value.pvp,"onUpdate:modelValue":v[7]||(v[7]=W=>he.value.pvp=W)},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Fe,{label:a(S)("setting.baseForm.playerNum"),prop:"playerNum",style:rt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:B(()=>[L(V,{modelValue:he.value.playerNum,"onUpdate:modelValue":v[8]||(v[8]=W=>he.value.playerNum=W),max:64,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Fe,{label:a(S)("setting.baseForm.backDays"),prop:"backDays",style:rt(a(I)?"padding-top: 0px":"padding-top: 25px")},{default:B(()=>[L(V,{modelValue:he.value.backDays,"onUpdate:modelValue":v[9]||(v[9]=W=>he.value.backDays=W),max:64,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Ye,null,{default:B(()=>[L(De,{lg:12,md:12,sm:24,span:12,xs:24},{default:B(()=>[L(Fe,{label:a(S)("setting.baseForm.vote"),prop:"vote",style:rt(a(I)?"padding-top: 0px":"padding-top: 29px")},{default:B(()=>[L(at,{modelValue:he.value.vote,"onUpdate:modelValue":v[10]||(v[10]=W=>he.value.vote=W)},null,8,["modelValue"])]),_:1},8,["label","style"])]),_:1}),L(De,{lg:12,md:12,sm:24,span:12,xs:24},{default:B(()=>[L(Fe,{label:a(S)("setting.baseForm.pauseEmptyDisabled"),prop:"vote",style:rt(a(I)?"padding-top: 0px":"padding-top: 29px")},{default:B(()=>[L(at,{modelValue:he.value.pauseEmptyDisabled,"onUpdate:modelValue":v[11]||(v[11]=W=>he.value.pauseEmptyDisabled=W),"active-value":!1,"inactive-value":!0},null,8,["modelValue"])]),_:1},8,["label","style"])]),_:1})]),_:1}),L(Fe,{label:a(S)("setting.baseForm.password"),style:rt(a(I)?"padding-top: 0px":"padding-top: 30px")},{default:B(()=>[L(Oe,{modelValue:he.value.password,"onUpdate:modelValue":v[12]||(v[12]=W=>he.value.password=W),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Fe,{label:a(S)("setting.baseForm.token"),prop:"token",style:rt(a(I)?"padding-top: 0px":"padding-top: 30px")},{default:B(()=>[L(Oe,{modelValue:he.value.token,"onUpdate:modelValue":v[13]||(v[13]=W=>he.value.token=W),"show-password":""},null,8,["modelValue"]),Z("div",Ln,[L(A,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:B(()=>[fe(J(a(S)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label","style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):nt("",!0),we.value===1?(U(),ye(Ue,{key:1,shadow:"never"},{header:B(()=>[Z("div",Vn,[Z("span",null,J(a(S)("setting.worldSetting")),1),Z("div",null,[L(ee,{trigger:"click",onCommand:l},{dropdown:B(()=>[L(N,null,{default:B(()=>[L(x,{command:{clusterType:"endless",worldType:"ground"},disabled:he.value.gameMode!=="endless"},{default:B(()=>[fe(J(a(S)("setting.endless"))+"-"+J(a(S)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),L(x,{command:{clusterType:"endless",worldType:"cave"},disabled:he.value.gameMode!=="endless"},{default:B(()=>[fe(J(a(S)("setting.endless"))+"-"+J(a(S)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"]),L(x,{command:{clusterType:"survival",worldType:"ground"},disabled:he.value.gameMode!=="survival"},{default:B(()=>[fe(J(a(S)("setting.survival"))+"-"+J(a(S)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),L(x,{command:{clusterType:"survival",worldType:"cave"},disabled:he.value.gameMode!=="survival"},{default:B(()=>[fe(J(a(S)("setting.survival"))+"-"+J(a(S)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"])]),_:1})]),default:B(()=>[L(D,{disabled:t.value!=="Code",type:"success"},{default:B(()=>[fe(J(a(S)("setting.oneClick"))+" ",1),L(P,{class:"el-icon--right"},{default:B(()=>[L(a(qt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:B(()=>[L(_,{height:C.value-450},{default:B(()=>[L(ze,{modelValue:e.value,"onUpdate:modelValue":v[15]||(v[15]=W=>e.value=W),editable:"",type:"card",onEdit:k,onTabChange:ie,style:{"margin-right":"16px"}},{default:B(()=>[(U(!0),te(Ee,null,Me(p.value,W=>(U(),ye(pe,{key:W.name,label:Ae.value==="zh"?"":"World",name:W.name},{default:B(()=>[L(Ye,null,{default:B(()=>[L(E,{ref_for:!0,ref:r=>u[W.name]=r,"label-position":a(I)||Ae.value==="en"?"top":"left",model:W,rules:g,size:a(I)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:B(()=>[Z("div",Cn,[L(Fe,{label:a(S)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.isMasterTip"),effect:"light",placement:"top"},{default:B(()=>[L(at,{modelValue:W.isMaster,"onUpdate:modelValue":r=>W.isMaster=r,"active-text":Ae.value==="zh"?"":"Y","inactive-text":Ae.value==="zh"?"":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:B(()=>[L(at,{modelValue:W.encodeUserPath,"onUpdate:modelValue":r=>W.encodeUserPath=r,"active-text":Ae.value==="zh"?"":"Y","inactive-text":Ae.value==="zh"?"":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.idTip"),effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.id,"onUpdate:modelValue":r=>W.id=r,modelModifiers:{number:!0},disabled:W.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.serverPortTip"),effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.serverPort,"onUpdate:modelValue":r=>W.serverPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.noEdit")+"cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.shardMasterPort,"onUpdate:modelValue":r=>W.shardMasterPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.noEdit")+"server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.steamMasterPort,"onUpdate:modelValue":r=>W.steamMasterPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.noEdit")+"server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.steamAuthenticationPort,"onUpdate:modelValue":r=>W.steamAuthenticationPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.shardMasterIp,"onUpdate:modelValue":r=>W.shardMasterIp=r,disabled:W.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Fe,{label:a(S)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:B(()=>[L(oe,{"show-after":100,content:a(S)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:B(()=>[L(Oe,{modelValue:W.clusterKey,"onUpdate:modelValue":r=>W.clusterKey=r,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),Z("div",En,[L(ze,{modelValue:t.value,"onUpdate:modelValue":v[14]||(v[14]=r=>t.value=r),onTabChange:s},{default:B(()=>[L(pe,{label:Ae.value==="zh"?"":"Code",name:"Code"},{default:B(()=>[Z("div",wn,[L(E,{model:W},{default:B(()=>[L(Fe,null,{default:B(()=>[L(Kt,{modelValue:W.levelData,"onUpdate:modelValue":r=>W.levelData=r,height:C.value*.5,theme:ve.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(he.value.gameMode==="endless"||he.value.gameMode==="survival")&&W.levelData!==""?(U(),ye(pe,{key:0,label:a(S)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:B(()=>[i.value==="forest"&&Object.keys(w.value).length!==0?(U(),te(Ee,{key:0},[L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Fn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),Z("div",An,[(U(!0),te(Ee,null,Me(a(Tt).global,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Bn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),Z("div",Mn,[(U(!0),te(Ee,null,Me(a(Tt).events,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Gn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),Z("div",Rn,[(U(!0),te(Ee,null,Me(a(Tt).survivors,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",In,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),Z("div",Pn,[(U(!0),te(Ee,null,Me(a(Tt).world,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",xn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),Z("div",Un,[(U(!0),te(Ee,null,Me(a(Tt).resourceRegrowth,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Nn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),Z("div",Dn,[(U(!0),te(Ee,null,Me(a(Tt).unnaturalPortalResource,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",zn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),Z("div",Wn,[(U(!0),te(Ee,null,Me(a(Tt).creatures,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",$n,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),Z("div",On,[(U(!0),te(Ee,null,Me(a(Tt).hostileCreatures,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",qn,J(a(S)("setting.groundVisualizationRule")),1),fe(" - "+J(a(S)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),Z("div",Kn,[(U(!0),te(Ee,null,Me(a(Tt).giants,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",jn,J(a(S)("setting.groundVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),Z("div",Hn,[(U(!0),te(Ee,null,Me(a(St).global,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Jn,J(a(S)("setting.groundVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),Z("div",Yn,[(U(!0),te(Ee,null,Me(a(St).world,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Zn,J(a(S)("setting.groundVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),Z("div",Xn,[(U(!0),te(Ee,null,Me(a(St).resources,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Qn,J(a(S)("setting.groundVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),Z("div",el,[(U(!0),te(Ee,null,Me(a(St).creaturesAndSpawners,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",tl,J(a(S)("setting.groundVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),Z("div",nl,[(U(!0),te(Ee,null,Me(a(St).hostileCreaturesAndSpawners,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):nt("",!0),i.value==="cave"&&Object.keys(w.value).length!==0?(U(),te(Ee,{key:1},[L(Q,{"content-position":"center"},{default:B(()=>[Z("span",ll,J(a(S)("setting.cavesVisualizationRule")),1),fe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),Z("div",al,[(U(!0),te(Ee,null,Me(a(vt).world,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",ol,J(a(S)("setting.cavesVisualizationRule")),1),fe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),Z("div",rl,[(U(!0),te(Ee,null,Me(a(vt).resourceRegrowth,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",il,J(a(S)("setting.cavesVisualizationRule")),1),fe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),Z("div",ul,[(U(!0),te(Ee,null,Me(a(vt).creatures,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",sl,J(a(S)("setting.cavesVisualizationRule")),1),fe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),Z("div",dl,[(U(!0),te(Ee,null,Me(a(vt).hostileCreatures,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",fl,J(a(S)("setting.cavesVisualizationRule")),1),fe(" - "+J(a(S)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),Z("div",cl,[(U(!0),te(Ee,null,Me(a(vt).giants,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",pl,J(a(S)("setting.cavesVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),Z("div",ml,[(U(!0),te(Ee,null,Me(a(Et).world,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(Lt)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(Lt)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(Lt)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(Lt)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(Lt)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",gl,J(a(S)("setting.cavesVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),Z("div",hl,[(U(!0),te(Ee,null,Me(a(Et).resources,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",Tl,J(a(S)("setting.cavesVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),Z("div",yl,[(U(!0),te(Ee,null,Me(a(Et).creaturesAndSpawners,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(Q,{"content-position":"center"},{default:B(()=>[Z("span",_l,J(a(S)("setting.cavesVisualizationGeneration")),1),fe(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),Z("div",kl,[(U(!0),te(Ee,null,Me(a(Et).hostileCreaturesAndSpawners,(r,le)=>{var q,K,O,j,H;return U(),te("div",null,[(U(),ye(Re,{key:le,modelValue:w.value[r],"onUpdate:modelValue":ae=>w.value[r]=ae,configs:((q=a(M)[r])==null?void 0:q.configs)||["undefined"],customConfigsValue:((K=a(M)[r])==null?void 0:K.customConfigsValue)||{},defaultModelValue:((O=a(M)[r])==null?void 0:O.modelValue)||"undefined",i18n:((j=a(M)[r])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(M)[r])==null?void 0:H.image)||"undefined.png",name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):nt("",!0)]),_:2},1032,["label"])):nt("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):nt("",!0),we.value===2?(U(),ye(Ue,{key:2,shadow:"never"},{default:B(()=>[Z("div",bl,[Z("div",Sl,[Z("span",null,J(a(S)("setting.multiWorldTip")),1),L(D,{size:"small",style:{"margin-left":"10px"},type:"primary",onClick:Te},{default:B(()=>[fe(J(Ae.value==="zh"?"":"Multi-world"),1)]),_:1})])]),L(E,{model:qe.value},{default:B(()=>[L(Fe,null,{default:B(()=>[L(Kt,{modelValue:qe.value.mod,"onUpdate:modelValue":v[16]||(v[16]=W=>qe.value.mod=W),height:C.value-481,theme:ve.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):nt("",!0),we.value===3?(U(),ye(Ue,{key:3,shadow:"never"},{default:B(()=>[Z("div",{style:rt({height:`${C.value-381}px`}),class:"fcc"},[L(me,{"sub-title":a(S)("setting.finish.description"),title:a(S)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):nt("",!0)]),_:1})]),_:1}),L(Ye,{gutter:10},{default:B(()=>[L(De,{lg:24,md:24,sm:24,span:24,xs:24},{default:B(()=>[L(Ue,{shadow:"never"},{default:B(()=>[Z("div",vl,[we.value>0?(U(),ye(D,{key:0,onClick:se},{default:B(()=>[fe(J(a(S)("setting.button.prev")),1)]),_:1})):nt("",!0),we.value<3?(U(),ye(D,{key:1,type:"primary",loading:de.value,onClick:ot},{default:B(()=>[fe(J(a(S)("setting.button.next")),1)]),_:1},8,["loading"])):nt("",!0),we.value===3?(U(),ye(ee,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:Ce},{dropdown:B(()=>[L(N,null,{default:B(()=>[L(x,{command:"save"},{default:B(()=>[fe(J(a(S)("setting.button.save")),1)]),_:1}),L(x,{command:"saveAndRestart"},{default:B(()=>[fe(J(a(S)("setting.button.saveAndRestart")),1)]),_:1}),L(x,{command:"generateNewWorld"},{default:B(()=>[fe(J(a(S)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:B(()=>[L(D,{loading:ke.value,type:"warning"},{default:B(()=>[fe(J(a(S)("setting.button.actions"))+" ",1),L(P,{class:"el-icon--right"},{default:B(()=>[L(a(qt))]),_:1})]),_:1},8,["loading"])]),_:1})):nt("",!0)])]),_:1})]),_:1})]),_:1}),L(Ke,{modelValue:ge.value,"onUpdate:modelValue":v[18]||(v[18]=W=>ge.value=W),width:"65%"},{header:B(()=>[fe(J(a(S)("setting.multiWorldDialog.title")),1)]),default:B(()=>[Z("div",Ll,J(a(S)("setting.multiWorldDialog.tip")),1),Z("div",Vl,[L(E,{model:xe.value,"label-position":"top"},{default:B(()=>[(U(!0),te(Ee,null,Me(xe.value,W=>(U(),ye(Fe,null,{default:B(()=>[L(Oe,{modelValue:W.ID,"onUpdate:modelValue":r=>W.ID=r,placeholder:a(S)("setting.multiWorldDialog.placeholder0"),type:"number",style:{width:"20%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),L(Oe,{modelValue:W.name,"onUpdate:modelValue":r=>W.name=r,placeholder:a(S)("setting.multiWorldDialog.placeholder1"),style:{"margin-left":"2%",width:"48%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),L(Oe,{modelValue:W.maxPlayers,"onUpdate:modelValue":r=>W.maxPlayers=r,placeholder:a(S)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"2%",width:"28%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),Z("div",Cl,[L(D,{type:"success",onClick:v[17]||(v[17]=W=>xe.value.push({ID:void 0,name:"",maxPlayers:void 0}))},{default:B(()=>[fe(J(Ae.value==="zh"?"":"New Line"),1)]),_:1}),L(D,{type:"primary",onClick:$},{default:B(()=>[fe(J(Ae.value==="zh"?"":"Generate"),1)]),_:1})])]),_:1},8,["model"]),Ge.value?(U(),ye(Q,{key:0})):nt("",!0),Ge.value?(U(),ye(a(yn),{key:1,ref:"threeCodeOneRef",modelValue:Ge.value,theme:ve.value?"dark":"light",previewTheme:"github"},null,8,["modelValue","theme"])):nt("",!0)])]),_:1},8,["modelValue"])])}}},Ml=on(El,[["__scopeId","data-v-5bfb8af6"]]);export{Ml as default};
