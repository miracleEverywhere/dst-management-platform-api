import{a3 as wt,a4 as tn,_ as nn,u as ln,o as on,r as Ae,a as an,g as rn,c as un,A as ye,d as A,e as Z,f as B,w as I,j as f,l as le,p as ut,m as oe,t as z,i as K,n as Ne,F as Se,s as be,V as sn,z as ht,x as Vt}from"./index-Dcr4vpJk.js";import{s as Ft}from"./index-DzqfEGkj.js";import{s as Tt}from"./index-Dj_NDL5s.js";import{g as Ye,_ as Le,o as G,a as dt,c as ct,b as yt,d as _t}from"./levelDataSetting-AD1_6TEH.js";var kt={exports:{}};kt.exports;(function(We,V){(function(de,k,N){var ve=V&&!V.nodeType&&V,ie=We&&!We.nodeType&&We,me=ve&&ie&&typeof wt=="object"&&wt,pe=ie&&ie.exports===ve&&ve;me&&(me.global===me||me.window===me||me.self===me)&&(de=me),N(ve&&ie?pe?ie.exports:ve:de[k]={})})(wt,"luaparse",function(de){de.version="0.3.1";var k,N,ve,ie,me,pe=de.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function Oe(n,a){return a=a||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(a|192|n>>6,a|128|n&63):n<65536?String.fromCharCode(a|224|n>>12,a|128|n>>6&63,a|128|n&63):n<1114112?String.fromCharCode(a|240|n>>18,a|128|n>>12&63,a|128|n>>6&63,a|128|n&63):null}function Ke(n,a){for(var y=n.toString(16);y.length<a;)y="0"+y;return y}function at(n){return function(a){var y=n.exec(a);if(!y)return a;Y(null,J.invalidCodeUnit,Ke(y[0].charCodeAt(0),4).toUpperCase())}}var lt={"pseudo-latin1":{fixup:at(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return Oe(n)}},"x-user-defined":{fixup:at(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return Oe(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},X=1,Ue=2,Pe=4,Te=8,ze=16,De=32,Ee=64,qe=128,je=256;de.tokenTypes={EOF:X,StringLiteral:Ue,Keyword:Pe,Identifier:Te,NumericLiteral:ze,Punctuator:De,BooleanLiteral:Ee,NilLiteral:qe,VarargLiteral:je};var J=de.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},te=de.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,a){return{type:"IfClause",condition:n,body:a}},elseifClause:function(n,a){return{type:"ElseifClause",condition:n,body:a}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,a){return{type:"WhileStatement",condition:n,body:a}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,a){return{type:"RepeatStatement",condition:n,body:a}},localStatement:function(n,a){return{type:"LocalStatement",variables:n,init:a}},assignmentStatement:function(n,a){return{type:"AssignmentStatement",variables:n,init:a}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,a,y,v){return{type:"FunctionDeclaration",identifier:n,isLocal:y,parameters:a,body:v}},forNumericStatement:function(n,a,y,v,P){return{type:"ForNumericStatement",variable:n,start:a,end:y,step:v,body:P}},forGenericStatement:function(n,a,y){return{type:"ForGenericStatement",variables:n,iterators:a,body:y}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,a,y){return n=n===Ue?"StringLiteral":n===ze?"NumericLiteral":n===Ee?"BooleanLiteral":n===qe?"NilLiteral":"VarargLiteral",{type:n,value:a,raw:y}},tableKey:function(n,a){return{type:"TableKey",key:n,value:a}},tableKeyString:function(n,a){return{type:"TableKeyString",key:n,value:a}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,a,y){var v=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:v,operator:n,left:a,right:y}},unaryExpression:function(n,a){return{type:"UnaryExpression",operator:n,argument:a}},memberExpression:function(n,a,y){return{type:"MemberExpression",indexer:a,identifier:y,base:n}},indexExpression:function(n,a){return{type:"IndexExpression",base:n,index:a}},callExpression:function(n,a){return{type:"CallExpression",base:n,arguments:a}},tableCallExpression:function(n,a){return{type:"TableCallExpression",base:n,arguments:a}},stringCallExpression:function(n,a){return{type:"StringCallExpression",base:n,argument:a}},comment:function(n,a){return{type:"Comment",value:n,raw:a}}};function Q(n){if(U){var a=R.pop();a.complete(),a.bless(n)}return N.onCreateNode&&N.onCreateNode(n),n}var Me=Array.prototype.slice,et=function(n,a){for(var y=0,v=n.length;y<v;++y)if(n[y]===a)return y;return-1};Array.prototype.indexOf&&(et=function(n,a){return n.indexOf(a)});function it(n,a,y){for(var v=0,P=n.length;v<P;++v)if(n[v][a]===y)return v;return-1}function He(n){var a=Me.call(arguments,1);return n=n.replace(/%(\d)/g,function(y,v){return""+a[v-1]||""}),n}var Je=function(n){for(var a=Me.call(arguments,1),y,v,P=0,fe=a.length;P<fe;++P){y=a[P];for(v in y)Object.prototype.hasOwnProperty.call(y,v)&&(n[v]=y[v])}return n};Object.assign&&(Je=Object.assign),de.SyntaxError=SyntaxError;function tt(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function Y(n){var a=He.apply(null,Me.call(arguments,1)),y,v;throw n===null||typeof n.line>"u"?(v=T-c+1,y=tt(new SyntaxError(He("[%1:%2] %3",i,v,a))),y.index=T,y.line=i,y.column=v):(v=n.range[0]-n.lineStart,y=tt(new SyntaxError(He("[%1:%2] %3",n.line,v,a))),y.line=n.line,y.index=n.range[0],y.column=v),y}function D(n){var a=k.slice(n.range[0],n.range[1]);return a||n.value}function Fe(n,a){Y(a,J.expectedToken,n,D(a))}function $e(n){var a=D(x);if(typeof n.type<"u"){var y;switch(n.type){case Ue:y="string";break;case Pe:y="keyword";break;case Te:y="identifier";break;case ze:y="number";break;case De:y="symbol";break;case Ee:y="boolean";break;case qe:return Y(n,J.unexpected,"symbol","nil",a);case X:return Y(n,J.unexpectedEOF)}return Y(n,J.unexpected,y,D(n),a)}return Y(n,J.unexpected,"symbol",n,a)}var T,$,ce,x,_,o,i,c;de.lex=g;function g(){for(h();k.charCodeAt(T)===45&&k.charCodeAt(T+1)===45;)Ce(),h();if(T>=ve)return{type:X,value:"<eof>",line:i,lineStart:c,range:[T,T]};var n=k.charCodeAt(T),a=k.charCodeAt(T+1);if(o=T,ft(n))return p();switch(n){case 39:case 34:return S();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l();case 46:return Ie(a)?l():a===46?k.charCodeAt(T+2)===46?m():d(".."):d(".");case 61:return d(a===61?"==":"=");case 62:return ie.bitwiseOperators&&a===62?d(">>"):d(a===61?">=":">");case 60:return ie.bitwiseOperators&&a===60?d("<<"):d(a===61?"<=":"<");case 126:if(a===61)return d("~=");if(!ie.bitwiseOperators)break;return d("~");case 58:return ie.labels&&a===58?d("::"):d(":");case 91:return a===91||a===61?t():d("[");case 47:return ie.integerDivision&&a===47?d("//"):d("/");case 38:case 124:if(!ie.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return d(k.charAt(T))}return $e(k.charAt(T))}function e(){var n=k.charCodeAt(T),a=k.charCodeAt(T+1);return Ze(n)?(n===10&&a===13&&++T,n===13&&a===10&&++T,++i,c=++T,!0):!1}function h(){for(;T<ve;){var n=k.charCodeAt(T);if(st(n))++T;else if(!e())break}}function p(){for(var n,a;u(k.charCodeAt(++T)););return n=me.fixup(k.slice(o,T)),H(n)?a=Pe:n==="true"||n==="false"?(a=Ee,n=n==="true"):n==="nil"?(a=qe,n=null):a=Te,{type:a,value:n,line:i,lineStart:c,range:[o,T]}}function d(n){return T+=n.length,{type:De,value:n,line:i,lineStart:c,range:[o,T]}}function m(){return T+=3,{type:je,value:"...",line:i,lineStart:c,range:[o,T]}}function S(){for(var n=k.charCodeAt(T++),a=i,y=c,v=T,P=me.discardStrings?null:"",fe;fe=k.charCodeAt(T++),n!==fe;)if((T>ve||Ze(fe))&&(P+=k.slice(v,T-1),Y(null,J.unfinishedString,k.slice(o,T-1))),fe===92){if(!me.discardStrings){var he=k.slice(v,T-1);P+=me.fixup(he)}var Ve=_e();me.discardStrings||(P+=Ve),v=T}return me.discardStrings||(P+=me.encodeByte(null),P+=me.fixup(k.slice(v,T-1))),{type:Ue,value:P,line:a,lineStart:y,lastLine:i,lastLineStart:c,range:[o,T]}}function t(){var n=i,a=c,y=q(!1);return y===!1&&Y($,J.expected,"[",D($)),{type:Ue,value:me.discardStrings?null:me.fixup(y),line:n,lineStart:a,lastLine:i,lastLineStart:c,range:[o,T]}}function l(){var n=k.charAt(T),a=k.charAt(T+1),y=n==="0"&&"xX".indexOf(a||null)>=0?C():ee(),v=r(),P=s();return P&&(v||y.hasFractionPart)&&Y(null,J.malformedNumber,k.slice(o,T)),{type:ze,value:y.value,line:i,lineStart:c,range:[o,T]}}function r(){if(ie.imaginaryNumbers)return"iI".indexOf(k.charAt(T)||null)>=0?(++T,!0):!1}function s(){if(ie.integerSuffixes){if("uU".indexOf(k.charAt(T)||null)>=0)if(++T,"lL".indexOf(k.charAt(T)||null)>=0){if(++T,"lL".indexOf(k.charAt(T)||null)>=0)return++T,"ULL";Y(null,J.malformedNumber,k.slice(o,T))}else Y(null,J.malformedNumber,k.slice(o,T));else if("lL".indexOf(k.charAt(T)||null)>=0){if(++T,"lL".indexOf(k.charAt(T)||null)>=0)return++T,"LL";Y(null,J.malformedNumber,k.slice(o,T))}}}function C(){var n=0,a=1,y=1,v,P,fe,he;for(he=T+=2,xe(k.charCodeAt(T))||Y(null,J.malformedNumber,k.slice(o,T));xe(k.charCodeAt(T));)++T;v=parseInt(k.slice(he,T),16);var Ve=!1;if(k.charAt(T)==="."){for(Ve=!0,P=++T;xe(k.charCodeAt(T));)++T;n=k.slice(P,T),n=P===T?0:parseInt(n,16)/Math.pow(16,T-P)}var gt=!1;if("pP".indexOf(k.charAt(T)||null)>=0){for(gt=!0,++T,"+-".indexOf(k.charAt(T)||null)>=0&&(y=k.charAt(T++)==="+"?1:-1),fe=T,Ie(k.charCodeAt(T))||Y(null,J.malformedNumber,k.slice(o,T));Ie(k.charCodeAt(T));)++T;a=k.slice(fe,T),a=Math.pow(2,a*y)}return{value:(v+n)*a,hasFractionPart:Ve||gt}}function ee(){for(;Ie(k.charCodeAt(T));)++T;var n=!1;if(k.charAt(T)===".")for(n=!0,++T;Ie(k.charCodeAt(T));)++T;var a=!1;if("eE".indexOf(k.charAt(T)||null)>=0)for(a=!0,++T,"+-".indexOf(k.charAt(T)||null)>=0&&++T,Ie(k.charCodeAt(T))||Y(null,J.malformedNumber,k.slice(o,T));Ie(k.charCodeAt(T));)++T;return{value:parseFloat(k.slice(o,T)),hasFractionPart:n||a}}function ne(){var n=T++;for(k.charAt(T++)!=="{"&&Y(null,J.braceExpected,"{","\\"+k.slice(n,T)),xe(k.charCodeAt(T))||Y(null,J.hexadecimalDigitExpected,"\\"+k.slice(n,T));k.charCodeAt(T)===48;)++T;for(var a=T;xe(k.charCodeAt(T));)++T,T-a>6&&Y(null,J.tooLargeCodepoint,"\\"+k.slice(n,T));var y=k.charAt(T++);y!=="}"&&(y==='"'||y==="'"?Y(null,J.braceExpected,"}","\\"+k.slice(n,T--)):Y(null,J.hexadecimalDigitExpected,"\\"+k.slice(n,T)));var v=parseInt(k.slice(a,T-1)||"0",16),P="\\"+k.slice(n,T);return v>1114111&&Y(null,J.tooLargeCodepoint,P),me.encodeUTF8(v,P)}function _e(){var n=T;switch(k.charAt(T)){case"a":return++T,"\x07";case"n":return++T,`
`;case"r":return++T,"\r";case"t":return++T,"	";case"v":return++T,"\v";case"b":return++T,"\b";case"f":return++T,"\f";case"\r":case`
`:return e(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Ie(k.charCodeAt(T))&&T-n<3;)++T;var a=k.slice(n,T),y=parseInt(a,10);return y>255&&Y(null,J.decimalEscapeTooLarge,"\\"+y),me.encodeByte(y,"\\"+a);case"z":if(ie.skipWhitespaceEscape)return++T,h(),"";break;case"x":if(ie.hexEscapes){if(xe(k.charCodeAt(T+1))&&xe(k.charCodeAt(T+2)))return T+=3,me.encodeByte(parseInt(k.slice(n+1,T),16),"\\"+k.slice(n,T));Y(null,J.hexadecimalDigitExpected,"\\"+k.slice(n,T+2))}break;case"u":if(ie.unicodeEscapes)return ne();break;case"\\":case'"':case"'":return k.charAt(T++)}return ie.strictEscapes&&Y(null,J.invalidEscape,"\\"+k.slice(n,T+1)),k.charAt(T++)}function Ce(){o=T,T+=2;var n=k.charAt(T),a="",y=!1,v=T,P=c,fe=i;if(n==="["&&(a=q(!0),a===!1?a=n:y=!0),!y){for(;T<ve&&!Ze(k.charCodeAt(T));)++T;N.comments&&(a=k.slice(v,T))}if(N.comments){var he=te.comment(a,k.slice(o,T));N.locations&&(he.loc={start:{line:fe,column:o-P},end:{line:i,column:T-c}}),N.ranges&&(he.range=[o,T]),N.onCreateNode&&N.onCreateNode(he),_.push(he)}}function q(n){var a=0,y="",v=!1,P,fe,he=i;for(++T;k.charAt(T+a)==="=";)++a;if(k.charAt(T+a)!=="[")return!1;for(T+=a+1,Ze(k.charCodeAt(T))&&e(),fe=T;T<ve;){for(;Ze(k.charCodeAt(T));)e();if(P=k.charAt(T++),P==="]"){v=!0;for(var Ve=0;Ve<a;++Ve)k.charAt(T+Ve)!=="="&&(v=!1);k.charAt(T+a)!=="]"&&(v=!1)}if(v)return y+=k.slice(fe,T-1),T+=a+1,y}Y(null,n?J.unfinishedLongComment:J.unfinishedLongString,he,"<eof>")}function O(){ce=$,$=x,x=g()}function j(n){return n===$.value?(O(),!0):!1}function ge(n){n===$.value?O():Y($,J.expected,n,D($))}function st(n){return n===9||n===32||n===11||n===12}function Ze(n){return n===10||n===13}function Ie(n){return n>=48&&n<=57}function xe(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ft(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||ie.extendedIdentifiers&&n>=128)}function u(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||ie.extendedIdentifiers&&n>=128)}function H(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:ie.labels&&!ie.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function St(n){return De===n.type?"#-~".indexOf(n.value)>=0:Pe===n.type?n.value==="not":!1}function bt(n){if(X===n.type)return!0;if(Pe!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var Xe,nt,rt;function L(){var n=Xe[nt++].slice();Xe.push(n),N.onCreateScope&&N.onCreateScope()}function w(){Xe.pop(),--nt,N.onDestroyScope&&N.onDestroyScope()}function E(n){N.onLocalDeclaration&&N.onLocalDeclaration(n),et(Xe[nt],n)===-1&&Xe[nt].push(n)}function b(n){E(n.name),F(n,!0)}function F(n,a){!a&&it(rt,"name",n.name)===-1&&rt.push(n),n.isLocal=a}function M(n){return et(Xe[nt],n)!==-1}var R=[],U;function W(){return new re($)}function re(n){N.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),N.ranges&&(this.range=[n.range[0],0])}re.prototype.complete=function(){N.locations&&(this.loc.end.line=ce.lastLine||ce.line,this.loc.end.column=ce.range[1]-(ce.lastLineStart||ce.lineStart)),N.ranges&&(this.range[1]=ce.range[1])},re.prototype.bless=function(n){if(this.loc){var a=this.loc;n.loc={start:{line:a.start.line,column:a.start.column},end:{line:a.end.line,column:a.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function ue(){U&&R.push(W())}function se(n){U&&R.push(n)}function Be(){this.scopes=[],this.pendingGotos=[]}Be.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},Be.prototype.pushScope=function(n){var a={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(a)},Be.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var a=this.pendingGotos[n];a.maxDepth>=this.scopes.length&&--a.maxDepth<=0&&Y(a.token,J.labelNotVisible,a.target)}this.scopes.pop()},Be.prototype.addGoto=function(n,a){for(var y=[],v=0;v<this.scopes.length;++v){var P=this.scopes[v];if(y.push(P.locals.length),Object.prototype.hasOwnProperty.call(P.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:a,localCounts:y})},Be.prototype.addLabel=function(n,a){var y=this.currentScope();if(Object.prototype.hasOwnProperty.call(y.labels,n))Y(a,J.labelAlreadyDefined,n,y.labels[n].line);else{for(var v=[],P=0;P<this.pendingGotos.length;++P){var fe=this.pendingGotos[P];if(fe.maxDepth>=this.scopes.length&&fe.target===n){fe.localCounts[this.scopes.length-1]<y.locals.length&&y.deferredGotos.push(fe);continue}v.push(fe)}this.pendingGotos=v}y.labels[n]={localCount:y.locals.length,line:a.line}},Be.prototype.addLocal=function(n,a){this.currentScope().locals.push({name:n,token:a})},Be.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},Be.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),a=n.deferredGotos,y=0;y<a.length;++y){var v=a[y];Y(v.token,J.gotoJumpInLocalScope,v.target,n.locals[v.localCounts[this.scopes.length-1]].name)}};function ae(){this.level=0,this.loopLevels=[]}ae.prototype.isInLoop=function(){return!!this.loopLevels.length},ae.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},ae.prototype.popScope=function(){var n=this.loopLevels,a=n.length;a&&n[a-1]===this.level&&n.pop(),--this.level},ae.prototype.addGoto=ae.prototype.addLabel=function(){throw new Error("This should never happen")},ae.prototype.addLocal=ae.prototype.raiseDeferredErrors=function(){};function Ge(){return ie.labels?new Be:new ae}function Qe(){O(),ue(),N.scope&&L();var n=Ge();n.allowVararg=!0,n.pushScope();var a=ke(n);return n.popScope(),N.scope&&w(),X!==$.type&&$e($),U&&!a.length&&(ce=$),Q(te.chunk(a))}function ke(n){for(var a=[],y;!bt($);){if($.value==="return"||!ie.relaxedBreak&&$.value==="break"){a.push(Rt(n));break}y=Rt(n),j(";"),y&&a.push(y)}return a}function Rt(n){if(ue(),De===$.type&&j("::"))return Mt(n);if(ie.emptyStatement&&j(";")){U&&R.pop();return}if(n.raiseDeferredErrors(),Pe===$.type)switch($.value){case"local":return O(),Jt(n);case"if":return O(),jt(n);case"return":return O(),Kt(n);case"function":O();var a=Xt();return Lt(a);case"while":return O(),qt(n);case"for":return O(),Ht(n);case"repeat":return O(),Wt(n);case"break":return O(),n.isInLoop()||Y($,J.noLoopToBreak,$.value),xt();case"do":return O(),zt(n);case"goto":return O(),At(n)}return ie.contextualGoto&&$.type===Te&&$.value==="goto"&&x.type===Te&&x.value!=="goto"?(O(),At(n)):(U&&R.pop(),Zt(n))}function Mt(n){var a=$,y=Re();return N.scope&&(E("::"+a.value+"::"),F(y,!0)),ge("::"),n.addLabel(a.value,a),Q(te.labelStatement(y))}function xt(){return Q(te.breakStatement())}function At(n){var a=$.value,y=ce,v=Re();return n.addGoto(a,y),Q(te.gotoStatement(v))}function zt(n){N.scope&&L(),n.pushScope();var a=ke(n);return n.popScope(),N.scope&&w(),ge("end"),Q(te.doStatement(a))}function qt(n){var a=we(n);ge("do"),N.scope&&L(),n.pushScope(!0);var y=ke(n);return n.popScope(),N.scope&&w(),ge("end"),Q(te.whileStatement(a,y))}function Wt(n){N.scope&&L(),n.pushScope(!0);var a=ke(n);ge("until"),n.raiseDeferredErrors();var y=we(n);return n.popScope(),N.scope&&w(),Q(te.repeatStatement(y,a))}function Kt(n){var a=[];if($.value!=="end"){var y=pt(n);for(y!=null&&a.push(y);j(",");)y=we(n),a.push(y);j(";")}return Q(te.returnStatement(a))}function jt(n){var a=[],y,v,P;for(U&&(P=R[R.length-1],R.push(P)),y=we(n),ge("then"),N.scope&&L(),n.pushScope(),v=ke(n),n.popScope(),N.scope&&w(),a.push(Q(te.ifClause(y,v))),U&&(P=W());j("elseif");)se(P),y=we(n),ge("then"),N.scope&&L(),n.pushScope(),v=ke(n),n.popScope(),N.scope&&w(),a.push(Q(te.elseifClause(y,v))),U&&(P=W());return j("else")&&(U&&(P=new re(ce),R.push(P)),N.scope&&L(),n.pushScope(),v=ke(n),n.popScope(),N.scope&&w(),a.push(Q(te.elseClause(v)))),ge("end"),Q(te.ifStatement(a))}function Ht(n){var a=Re(),y;if(N.scope&&(L(),b(a)),j("=")){var v=we(n);ge(",");var P=we(n),fe=j(",")?we(n):null;return ge("do"),n.pushScope(!0),y=ke(n),n.popScope(),ge("end"),N.scope&&w(),Q(te.forNumericStatement(a,v,P,fe,y))}else{for(var he=[a];j(",");)a=Re(),N.scope&&b(a),he.push(a);ge("in");var Ve=[];do{var gt=we(n);Ve.push(gt)}while(j(","));return ge("do"),n.pushScope(!0),y=ke(n),n.popScope(),ge("end"),N.scope&&w(),Q(te.forGenericStatement(he,Ve,y))}}function Jt(n){var a,y=ce;if(Te===$.type){var v=[],P=[];do a=Re(),v.push(a),n.addLocal(a.name,y);while(j(","));if(j("="))do{var fe=we(n);P.push(fe)}while(j(","));if(N.scope)for(var he=0,Ve=v.length;he<Ve;++he)b(v[he]);return Q(te.localStatement(v,P))}if(j("function"))return a=Re(),n.addLocal(a.name,y),N.scope&&(b(a),L()),Lt(a,!0);Fe("<name>",$)}function Zt(n){var a,y,v,P,fe,he=[];U&&(y=W());do{if(U&&(a=W()),Te===$.type)fe=$.value,P=Re(),N.scope&&F(P,M(fe)),v=!0;else if($.value==="(")O(),P=we(n),ge(")"),v=!1;else return $e($);e:for(;;){switch(Ue===$.type?'"':$.value){case".":case"[":v=!0;break;case":":case"(":case"{":case'"':v=null;break;default:break e}P=Nt(P,a,n)}if(he.push(P),$.value!==",")break;if(!v)return $e($);O()}while(!0);if(he.length===1&&v===null)return se(a),Q(te.callStatement(he[0]));if(!v)return $e($);ge("=");var Ve=[];do Ve.push(we(n));while(j(","));return se(y),Q(te.assignmentStatement(he,Ve))}function Re(){ue();var n=$.value;return Te!==$.type&&Fe("<name>",$),O(),Q(te.identifier(n))}function Lt(n,a){var y=Ge();y.pushScope();var v=[];if(ge("("),!j(")"))for(;;){if(Te===$.type){var P=Re();if(N.scope&&b(P),v.push(P),j(","))continue}else je===$.type?(y.allowVararg=!0,v.push(Ct(y))):Fe("<name> or '...'",$);ge(")");break}var fe=ke(y);return y.popScope(),ge("end"),N.scope&&w(),a=a||!1,Q(te.functionStatement(n,v,a,fe))}function Xt(){var n,a,y;for(U&&(y=W()),n=Re(),N.scope&&(F(n,M(n.name)),L());j(".");)se(y),a=Re(),n=Q(te.memberExpression(n,".",a));return j(":")&&(se(y),a=Re(),n=Q(te.memberExpression(n,":",a)),N.scope&&E("self")),n}function It(n){for(var a=[],y,v;;){if(ue(),De===$.type&&j("["))y=we(n),ge("]"),ge("="),v=we(n),a.push(Q(te.tableKey(y,v)));else if(Te===$.type)x.value==="="?(y=Re(),O(),v=we(n),a.push(Q(te.tableKeyString(y,v)))):(v=we(n),a.push(Q(te.tableValue(v))));else{if((v=pt(n))==null){R.pop();break}a.push(Q(te.tableValue(v)))}if(",;".indexOf($.value)>=0){O();continue}break}return ge("}"),Q(te.tableConstructorExpression(a))}function pt(n){var a=vt(0,n);return a}function we(n){var a=pt(n);if(a==null)Fe("<expression>",$);else return a}function Qt(n){var a=n.charCodeAt(0),y=n.length;if(y===1)switch(a){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(y===2)switch(a){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(a===97&&n==="and")return 2;return 0}function vt(n,a){var y=$.value,v,P;if(U&&(P=W()),St($)){ue(),O();var fe=vt(10,a);fe==null&&Fe("<expression>",$),v=Q(te.unaryExpression(y,fe))}if(v==null&&(v=Ct(a),v==null&&(v=Yt(a))),v==null)return null;for(var he;y=$.value,he=De===$.type||Pe===$.type?Qt(y):0,!(he===0||he<=n);){(y==="^"||y==="..")&&--he,O();var Ve=vt(he,a);Ve==null&&Fe("<expression>",$),U&&R.push(P),v=Q(te.binaryExpression(y,v,Ve))}return v}function Nt(n,a,y){var v,P;if(De===$.type)switch($.value){case"[":return se(a),O(),v=we(y),ge("]"),Q(te.indexExpression(n,v));case".":return se(a),O(),P=Re(),Q(te.memberExpression(n,".",P));case":":return se(a),O(),P=Re(),n=Q(te.memberExpression(n,":",P)),se(a),Et(n,y);case"(":case"{":return se(a),Et(n,y)}else if(Ue===$.type)return se(a),Et(n,y);return null}function Yt(n){var a,y,v;if(U&&(v=W()),Te===$.type)y=$.value,a=Re(),N.scope&&F(a,M(y));else if(j("("))a=we(n),ge(")");else return null;for(;;){var P=Nt(a,v,n);if(P===null)break;a=P}return a}function Et(n,a){if(De===$.type)switch($.value){case"(":ie.emptyStatement||$.line!==ce.line&&Y(null,J.ambiguousSyntax,$.value),O();var y=[],v=pt(a);for(v!=null&&y.push(v);j(",");)v=we(a),y.push(v);return ge(")"),Q(te.callExpression(n,y));case"{":ue(),O();var P=It(a);return Q(te.tableCallExpression(n,P))}else if(Ue===$.type)return Q(te.stringCallExpression(n,Ct(a)));Fe("function arguments",$)}function Ct(n){var a=Ue|ze|Ee|qe|je,y=$.value,v=$.type,P;if(U&&(P=W()),v===je&&!n.allowVararg&&Y($,J.cannotUseVararg,$.value),v&a){se(P);var fe=k.slice($.range[0],$.range[1]);return O(),Q(te.literal(v,y,fe))}else{if(Pe===v&&y==="function")return se(P),O(),N.scope&&L(),Lt(null);if(j("{"))return se(P),It(n)}}de.parse=en;var Ut={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function en(n,a){if(typeof a>"u"&&typeof n=="object"&&(a=n,n=void 0),a||(a={}),k=n||"",N=Je({},pe,a),T=0,i=1,c=0,ve=k.length,Xe=[[]],nt=0,rt=[],R=[],!Object.prototype.hasOwnProperty.call(Ut,N.luaVersion))throw new Error(He("Lua version '%1' not supported",N.luaVersion));if(ie=Je({},Ut[N.luaVersion]),N.extendedIdentifiers!==void 0&&(ie.extendedIdentifiers=!!N.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(lt,N.encodingMode))throw new Error(He("Encoding mode '%1' not supported",N.encodingMode));return me=lt[N.encodingMode],N.comments&&(_=[]),N.wait?de:Dt()}de.write=Pt;function Pt(n){return k+=String(n),ve=k.length,de}de.end=Dt;function Dt(n){typeof n<"u"&&Pt(n),k&&k.substr(0,2)==="#!"&&(k=k.replace(/^.*/,function(y){return y.replace(/./g," ")})),ve=k.length,U=N.locations||N.ranges,x=g();var a=Qe();if(N.comments&&(a.comments=_),N.scope&&(a.globals=rt),R.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return a}})})(kt,kt.exports);var fn=kt.exports;const ot=tn(fn);var mt={},Bt={exports:{}};Bt.exports;(function(We){function V(x){for(var _=0,o=x.length;o--;)_+=x.charCodeAt(o),_+=_<<10,_^=_>>6;return _+=_<<3,_^=_>>11,_+=_<<15,_}const de=console.log,k=function(x,_){if(!x)throw _};function N(x,_){if(!x)return 0;var o=x.toString().split(".");return o.length>1?parseInt(o[0],_)+parseInt(o[1],_)/Math.pow(_,o[1].length):parseInt(o[0],_)}let ve=[" ",`
`,"	","\r"],ie={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const me=new Proxy(ie,{get(x,_){return N(_)}});let pe=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Oe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Ke=["0","1","2","3","4","5","6","7","8","9"],at=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],lt=["0","1"],X=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Ue=["~","=",">","<"],Pe=["+","-","*","/","^","..","%","//"],Te=["+=","-=","*=","/=","^=","..=","%=","//="],ze=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],De=["else","elseif","until","end"],Ee=["-","not","#","~"],qe=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],je=11,J={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function te(x){let _=0,o=x.length,i=[];function c(t){return t=t||0,_<=o?x.substr(_+t,1):""}function g(){if(_<=o){let t=x.substr(_,1);return _++,t}else return""}function e(t){let l=0,r=1,s=1;for(;l<=_;)x.substr(l,1)==`
`?(r++,s=1):s++;let C;for(C=0;C<i.length;C++){let ee=i[C];de(`${ee.Type}<${ee.Source}>`)}throw`file<${r}:${s}>: ${t}`}function h(t){for(;;){let l=g();if(l=="")e("Unfinished long string.");else if(l=="]"){let r=!0,s;for(s=1;s<=t;s++)if(c()=="=")_++;else{r=!1;break}if(r&&g()=="]")return}}}function p(){let t=_;for(;c()=="=";)_++;if(c()=="[")return _++,_-t-1;_=t}let d=0,m=0;function S(t){let l=x.substr(m,_-m),r=null;t=="Number"&&(l.substr(0,2).toLowerCase()=="0x"?(r="hex",parseInt(l,16)<999999999999&&(l=parseInt(l,16))):l.substr(0,2).toLowerCase()=="0b"&&(r="bin",parseInt(l.substr(2),2)<999999999999&&(l=parseInt(l.substr(2),2))));let s={Type:t,LeadingWhite:x.substr(d,m-d),Source:l};return r!==null&&(s.NType=r),i.push(s),d=_,m=_,s}for(;;){for(d=_;;){let l=c();if(l=="")break;if(l=="-")if(c(1)=="-")if(_+=2,c()=="["){_++;let r=p();if(r!=null)h(r),d=_;else for(;;){let s=g();if(s==""||s==`
`)break}}else for(;;){let r=g();if(r==""||r==`
`)break}else break;else if(ve.includes(l))_++;else break}x.substr(d,_-d),m=_;let t=g();if(t==""){S("Eof");break}else if(t=="'"||t=='"'){for(;;){let l=g();if(l=="\\"){let r=g();if(me[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}S("String")}else if(t=="`"){for(;;){let l=g();if(l=="\\"){let r=g();if(me[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}S("Hash")}else if(pe.includes(t)){for(;Oe.includes(c());)_++;ze.includes(x.substr(m,_-m))?S("Keyword"):S("Ident")}else if(Ke.includes(t)||t=="."&&Ke.includes(c())){if(t=="0"&&c().toLowerCase()=="x")for(_++;at.includes(c())||c()==="_";)_++;else if(t=="0"&&c().toLowerCase()=="b")for(_++;lt.includes(c())||c()==="_";)_++;else{for(;Ke.includes(c())||c()==="_";)_++;if(c()==".")for(_++;Ke.includes(c());)_++;if(c()=="e"||c()=="E")for(_++,(c()=="-"||c()=="+")&&_++;Ke.includes(c());)_++}S("Number")}else if(t=="["){let l=p();l!=null?(h(l),S("String")):S("Symbol")}else if(t==".")c()=="."&&(g(),(c()=="."||c()=="=")&&g()),S("Symbol");else if(t+c()=="//")g(),c()=="="&&g(),S("Symbol");else if(t+c()=="::")g(),S("Symbol");else if(qe.includes(t+c()))g(),S("Symbol");else if(Ue.includes(t))c()=="="&&_++,S("Symbol");else if(Pe.includes(t)&&c()=="=")g(),S("Symbol");else if(X.includes(t))S("Symbol");else throw`Bad symbol \`${t}\` in source. ${_}`}return i}function Q(x){let _=te(x),o=0;function i(){let L=_[o];return o<_.length&&o++,L}function c(L){return L=o+(L||0),_[L]||_[_.length-1]}function g(L){let w=1,E=0,b=0;for(;;){let F=_[b],M;F==L?M=F.LeadingWhite:M=F.LeadingWhite+F.Source;let R;for(R=0;R<=M.length;R++)M.substr(R,1)==`
`?(w++,E=0):E++;if(F==L)break;b++}return`${w}:${E+1}`}function e(){let L=c();return`<${L.Type} \`${L.Source}\`> at: ${g(L)}`}function h(){let L=c();return L.Type=="Eof"||L.Type=="Keyword"&&De.includes(L.Source)}function p(){return Ee.includes(c().Source)||!1}function d(){return qe.includes(c().Source)||!1}function m(L,w){let E=c();if(E.Type==L&&(w==null||E.Source==w))return i();{let b;for(b=-3;b<=3;b++)de(`Tokens[${b}] = \`${c(b).Source}\``);throw w?`${g(E)}: \`${w}\` expected.`:`${g(E)}: ${L} expected.`}}function S(L){let w=L.GetFirstToken,E=L.GetLastToken,b=L;return L.GetFirstToken=function(){let F=w(b);return k(F),F},L.GetLastToken=function(){let F=E(b);return k(F),F},L}let t,l;function r(L,w){let E=[l(L,w)],b=[];for(;c().Source==",";)b.push(i()),E.push(l(L,w));return[E,b]}function s(L,w){var b,F,M,R;let E=c();if(E.Source=="("){let U=i(),W=l(L,w),re=m("Symbol",")"),ue;return ue=S({Type:"ParenExpr",Expression:W,Token_OpenParen:U,Token_CloseParen:re,GetFirstToken:()=>ue.Token_OpenParen,GetLastToken:()=>ue.Token_CloseParen}),ue}else if(E.Type=="Ident"){let U;return U=S({Type:"VariableExpr",Token:i(),GetFirstToken:()=>U.Token,GetLastToken:()=>U.Token}),L[U.Token.Source]!=null&&((F=(b=L[U.Token.Source])==null?void 0:b.Tokens)==null?void 0:F.push)!=null?(L[U.Token.Source].Tokens.push(U.Token),L[U.Token.Source].UseCountIncrease()):w[U.Token.Source]!=null&&((R=(M=w[U.Token.Source])==null?void 0:M.Tokens)==null?void 0:R.push)!=null&&(w[U.Token.Source].Tokens.push(U.Token),w[U.Token.Source].UseCountIncrease()),U}else throw de(e()),`${g(E)}: Unexpected symbol. ${E.Type} ${E.Source}`}function C(L,w){let E=m("Symbol","{"),b=[],F=[];for(;c().Source!="}";){if(c().Source=="["){let U=i(),W=l(L,w),re=m("Symbol","]"),ue=m("Symbol","="),se=l(L,w);W.Token&&W.Token.Source,b.push({EntryType:"Index",Index:W,Value:se,Token_OpenBracket:U,Token_CloseBracket:re,Token_Equals:ue})}else if(c().Type=="Ident"&&c(1).Source=="="){let U=i(),W=i(),re=l(L,w);b.push({EntryType:"Field",Field:U,Value:re,Token_Equals:W})}else{let U=l(L,w);b.push({EntryType:"Value",Value:U})}if(c().Source==","||c().Source==";")F.push(i());else break}let M=m("Symbol","}"),R;return R=S({Type:"TableLiteral",EntryList:b,Token_SeperatorList:F,Token_OpenBrace:E,Token_CloseBrace:M,GetFirstToken:()=>R.Token_OpenBrace,GetLastToken:()=>R.Token_CloseBrace}),R}function ee(L,w){let E=[],b=[];if(c().Type=="Ident"){let F=i();if(w&&c().Source=="<"&&c(2).Source==">"){let M=c(1).Source;F.Attribute={LeadingWhite:c().LeadingWhite,Source:`<${M}>`},i(),i(),i()}E.push(F)}else if(c().Source=="..."&&L)return[E,b,i()];for(;c().Source==",";){if(b.push(i()),c().Source=="..."&&L)return[E,b,i()];{let F=m("Ident");if(w&&c().Source=="<"&&c(2).Source==">"){let M=c(1).Source;F.Attribute={LeadingWhite:c().LeadingWhite,Source:`<${M}>`},i(),i(),i()}E.push(F)}}return[E,b]}function ne(L,w,E){let b=t(w,E),F=c();if(F.Type=="Keyword"&&F.Source==L)return i(),[b,F];throw de(F.Type,F.Source),`${g(F)}: ${L} expected.`}function _e(L,w,E,b){let F=i(),M,R;if(!L){M=[],R=[];let Qe=m("Ident");for(M.push(Qe);c().Source==".";)R.push(i()),M.push(m("Ident"));c().Source==":"&&(R.push(i()),M.push(m("Ident")))}let U=m("Symbol","("),[W,re,ue]=ee(!0),se=m("Symbol",")"),[Be,ae]=ne("end",w,E),Ge;return Ge=S({Type:L==!0?"FunctionLiteral":"FunctionStat",NameChain:M,ArgList:W,Body:Be,Token_Function:F,Token_NameChainSeperator:R,Token_OpenParen:U,Token_Varg:ue,Token_ArgCommaList:re,Token_CloseParen:se,Token_End:ae,GetFirstToken:()=>Ge.Token_Function,GetLastToken:()=>Ge.Token_End}),Ge}function Ce(L,w){let E=c();if(E.Source=="("){let b=i(),F=[],M=[];for(;c().Source!=")"&&(F.push(l(L,w)),c().Source==",");)M.push(i());let R=m("Symbol",")"),U;return U=S({CallType:"ArgCall",ArgList:F,Token_CommaList:M,Token_OpenParen:b,Token_CloseParen:R,GetFirstToken:()=>U.Token_OpenParen,GetLastToken:()=>U.Token_CloseParen}),U}else if(E.Source=="{"){let b;return b=S({CallType:"TableCall",TableExpr:l(L,w),GetFirstToken:()=>b.TableExpr.GetFirstToken(),GetLastToken:()=>b.TableExpr.GetLastToken()}),b}else if(E.Type=="String"){let b;return b=S({CallType:"StringCall",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else throw"Function arguments expected."}function q(L,w){let E=s(L,w);for(k(E,"nil prefixexpr");;){let b=c();if(b.Source=="."){let F=i(),M=m("Ident"),R;R=S({Type:"FieldExpr",Base:E,Field:M,Token_Dot:F,GetFirstToken:()=>R.Base.GetFirstToken(),GetLastToken:()=>R.Field}),E=R}else if(b.Source==":"){let F=i(),M=m("Ident"),R=Ce(L,w),U;U=S({Type:"MethodExpr",Base:E,Method:M,FunctionArguments:R,Token_Colon:F,GetFirstToken:()=>U.Base.GetFirstToken(),GetLastToken:()=>U.FunctionArguments.GetLastToken()}),E=U}else if(b.Source=="["){let F=i(),M=l(L,w),R=m("Symbol","]"),U;U=S({Type:"IndexExpr",Base:E,Index:M,Token_OpenBracket:F,Token_CloseBracket:R,GetFirstToken:()=>U.Base.GetFirstToken(),GetLastToken:()=>U.Token_CloseBracket}),E=U}else if(b.Source=="{"||b.Source=="("||b.Type=="String"){let F;F=S({Type:"CallExpr",Base:E,FunctionArguments:Ce(L,w),GetFirstToken:()=>F.Base.GetFirstToken(),GetLastToken:()=>F.FunctionArguments.GetLastToken()}),E=F}else if(Te.includes(b.Source)){let F=i(),M=l(L,w),R;R=S({Type:"CompoundStat",Base:E,Token_Compound:F,Rhs:M,Lhs:E,GetFirstToken:()=>R.Base.GetFirstToken(),GetLastToken:()=>R.Rhs.GetLastToken()}),E=R}else return E}}function O(L,w){let E=c();if(E.Type=="Number"){let b;return b=S({Type:"NumberLiteral",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Type=="String"){let b;return b=S({Type:"StringLiteral",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Type=="Hash"){let b;return b=S({Type:"HashLiteral",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Source=="nil"){let b;return b=S({Type:"NilLiteral",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Source=="true"||E.Source=="false"){let b;return b=S({Type:"BooleanLiteral",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(E.Source=="..."){let b;return b=S({Type:"VargLiteral",Token:i(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else return E.Source=="{"?C(L,w):E.Source=="function"?_e(!0,L,w):q(L,w)}function j(L,w,E){let b;if(p()){let F=i(),M=j(je,w,E),R;R=S({Type:"UnopExpr",Token_Op:F,Rhs:M,GetFirstToken:()=>R.Token_Op,GetLastToken:()=>R.Rhs.GetLastToken()}),b=R}else b=O(w,E),k(b,"nil sipleexpr");for(;d()&&J[c().Source]!=null&&J[c().Source][0]>L;){let F=i(),M=j(J[F.Source][1],w,E);k(M,"RhsNeeded");let R;R=S({Type:"BinopExpr",Lhs:b,Rhs:M,Token_Op:F,GetFirstToken:()=>R.Lhs.GetFirstToken(),GetLastToken:()=>R.Rhs.GetLastToken()}),b=R}return b}l=(L,w)=>j(0,L,w);function ge(L,w){let E=q(L,w);if(E.Type=="MethodExpr"||E.Type=="CallExpr"){let b;return b=S({Type:"CallExprStat",Expression:E,GetFirstToken:()=>b.Expression.GetFirstToken(),GetLastToken:()=>b.Expression.GetLastToken()}),b}else{if(E.Type=="CompoundStat")return E;{let b=[E],F=[];for(;c().Source==",";){F.push(i());let re=q(L,w);if(re.Type=="MethodExpr"||re.Type=="CallExpr")throw"Bad left hand side of asignment";b.push(re)}let M=m("Symbol","="),R=[l(L,w)],U=[];for(;c().Source==",";)U.push(i()),R.push(l(L,w));let W;return W=S({Type:"AssignmentStat",Rhs:R,Lhs:b,Token_Equals:M,Token_LhsSeperatorList:F,Token_RhsSeperatorList:U,GetFirstToken:()=>W.Lhs[0].GetFirstToken(),GetLastToken:()=>W.Rhs[W.Rhs.length-1].GetLastToken()}),W}}}function st(L,w){let E=i(),b=l(L,w),F=m("Keyword","then"),M=t(L,w),R=[];for(;c().Source=="elseif"||c().Source=="else";){let re=i(),ue,se;re.Source=="elseif"&&(ue=l(L,w),se=m("Keyword","then"));let Be=t(L,w);if(R.push({Condition:ue,Body:Be,ClauseType:re.Source,Token:re,Token_Then:se}),re.Source=="else")break}let U=m("Keyword","end"),W;return W=S({Type:"IfStat",Condition:b,Body:M,ElseClauseList:R,Token_If:E,Token_Then:F,Token_End:U,GetFirstToken:()=>W.Token_If,GetLastToken:()=>W.Token_End}),W}function Ze(L,w){let E=i(),[b,F]=ne("end",L,w),M;return M=S({Type:"DoStat",Body:b,Token_Do:E,Token_End:F,GetFirstToken:()=>M.Token_Do,GetLastToken:()=>M.Token_End}),M}function Ie(L,w){let E=i(),b=l(L,w),F=m("Keyword","do"),[M,R]=ne("end",L,w),U;return U=S({Type:"WhileStat",Condition:b,Body:M,Token_While:E,Token_Do:F,Token_End:R,GetFirstToken:()=>U.Token_While,GetLastToken:()=>U.Token_End}),U}function xe(L,w){let E=i(),[b,F]=ee();if(c().Source=="="){let M=i(),[R,U]=r(L,w);if(R.length<2||R.length>3)throw"Expected 2 or 3 values for range bounds";let W=m("Keyword","do"),[re,ue]=ne("end",L,w),se;return se=S({Type:"NumericForStat",VarList:b,RangeList:R,Body:re,Token_For:E,Token_VarCommaList:F,Token_Equals:M,Token_RangeCommaList:U,Token_Do:W,Token_End:ue,GetFirstToken:()=>se.Token_For,GetLastToken:()=>se.Token_End}),se}else if(c().Source=="in"){let M=i(),[R,U]=r(L,w),W=m("Keyword","do"),[re,ue]=ne("end",L,w),se;return se=S({Type:"GenericForStat",VarList:b,GeneratorList:R,Body:re,Token_For:E,Token_VarCommaList:F,Token_In:M,Token_GeneratorCommaList:U,Token_Do:W,Token_End:ue,GetFirstToken:()=>se.Token_For,GetLastToken:()=>se.Token_End}),se}}function ft(L,w){let E=i(),[b,F]=ne("until",L),M=l(L,w),R;return R=S({Type:"RepeatStat",Body:b,Condition:M,Token_Repeat:E,Token_Until:F,GetFirstToken:()=>R.Token_Repeat,GetLastToken:()=>R.Condition.GetLastToken()}),R}function u(L,w){let E=i();if(c().Source=="function"){let b=_e(!1,L,w);if(b.NameChain.length>1)throw g(b.Token_NameChainSeperator[0])+": `(` expected.";let F;return F=S({Type:"LocalFunctionStat",FunctionStat:b,Token_Local:E,GetFirstToken:()=>F.Token_Local,GetLastToken:()=>F.FunctionStat.GetLastToken()}),F}else if(c().Type=="Ident"){let[b,F]=ee(!1,!0),M=[],R=[],U;if(c().Source=="="){U=i();let[re,ue]=r(L,w);M=re,R=ue}let W;return W=S({Type:"LocalVarStat",VarList:b,ExprList:M,Token_Local:E,Token_Equals:U,Token_VarCommaList:F,Token_ExprCommaList:R,GetFirstToken:()=>W.Token_Local,GetLastToken:function(){return W.ExprList.length>0?W.ExprList[W.ExprList.length-1].GetLastToken():W.VarList[W.VarList.length-1]}}),W}else throw"`function` or ident expected"}function H(L,w){let E=i(),b,F;h()||c().Source==";"?(b=[],F=[]):[b,F]=r(L,w);let M;return M={Type:"ReturnStat",ExprList:b,Token_Return:E,Token_CommaList:F,GetFirstToken:()=>M.Token_Return,GetLastToken:function(){return M.ExprList.length>0?M.ExprList[M.ExprList.length-1].GetLastToken():M.Token_Return}},M}function St(L,w){let E=i(),b;return b={Type:"BreakStat",Token_Break:E,GetFirstToken:()=>b.Token_Break,GetLastToken:()=>b.Token_Break},b}function bt(L,w){let E=i(),b;return b={Type:"ContinueStat",Token_Continue:E,GetFirstToken:()=>b.Token_Continue,GetLastToken:()=>b.Token_Continue},b}function Xe(){let L=i(),w;c().Type=="Keyword"?w=m("Keyword"):w=m("Ident");let E;return E={Type:"GotoStat",Token_Goto:L,Token_Label:w,GetFirstToken:()=>E.Token_Goto,GetLastToken:()=>E.Token_Label},E}function nt(){let L=i(),w;c().Type=="Keyword"?w=m("Keyword"):w=m("Ident");let E=m("Symbol","::"),b;return b={Type:"LabelStat",Token_ColonsLeft:L,Token_Label:w,Token_ColonsRight:E,GetFirstToken:()=>b.Token_ColonsLeft,GetLastToken:()=>b.Token_ColonsRight},b}function rt(L,w){let E=c();return E.Source=="if"?[!1,st(L,w)]:E.Source=="while"?[!1,Ie(L,w)]:E.Source=="do"?[!1,Ze(L,w)]:E.Source=="for"?[!1,xe(L,w)]:E.Source=="repeat"?[!1,ft(L,w)]:E.Source=="function"?[!1,_e(!1,L,w)]:E.Source=="local"?[!1,u(L,w)]:E.Source=="return"?[!0,H(L,w)]:E.Source=="break"?[!0,St()]:E.Source=="continue"?[!0,bt()]:E.Source=="goto"?[!1,Xe()]:E.Source=="::"?[!1,nt()]:[!1,ge(L,w)]}return t=function(L,w){let E=[],b=[],F={},M={};if(w!=null)for(let[re,ue]of Object.entries(w))M[re]=ue;if(L!=null)for(let[re,ue]of Object.entries(L))M[re]=ue;let R,U=0;for(;!h();){R&&R==c()&&de(`INFINITE LOOP POSSIBLE ON STATEMENT ${R.Source} :`,R),R=c();let[re,ue]=rt(F,M);if(ue)switch(E.push(ue),ue.Type){case"LocalVarStat":ue.VarList.forEach(ae=>{ae.UseCount=0,ae.Number=U++,F[ae.Source]=ae;let Ge=[];function Qe(){ae.UseCount++,Ge.forEach(ke=>{ke.UseCount=ae.UseCount})}ae.Tokens={},ae.Tokens.push=ke=>{ke.UseCountIncrease=Qe,ke.UseCount=ae.UseCount,ke.Tokens=ae.Tokens,Ge.push(ke)},ae.Tokens.get=()=>Ge,ae.UseCountIncrease=Qe});break;case"LocalFunctionStat":let Be=ue.FunctionStat.NameChain;if(Be.length===1){let Qe=function(){ae.UseCount++,Ge.forEach(ke=>{ke.UseCount=ae.UseCount})},ae=Be[0];ae.UseCount=0,ae.Number=U++,F[ae.Source]=ae;let Ge=[];ae.Tokens={},ae.Tokens.push=ke=>{ke.UseCountIncrease=Qe,ke.UseCount=ae.UseCount,ke.Tokens=ae.Tokens,Ge.push(ke)},ae.Tokens.get=()=>Ge,ae.UseCountIncrease=Qe}break}let se=c();se.Type=="Symbol"&&se.Source==";"&&(b[E.length-1]=i())}let W;return W={Type:"StatList",StatementList:E,SemicolonList:b,GetFirstToken:function(){var re;if(W.StatementList.length!=0)return(re=W.StatementList[0])==null?void 0:re.GetFirstToken()},GetLastToken:function(){if(W.StatementList.length!=0)return W.SemicolonList[W.StatementList.length-1]?W.SemicolonList[W.StatementList.length-1]:W.StatementList[W.StatementList.length-1].GetLastToken()}},W},t([],[])}function Me(x,_){let o={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},i={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[c,g]of Object.entries(_))if(!i[c]&&!o[c])throw`Invalid visitor target: \`${c}\``;function e(m){if(m!=null){let S=_[m.Type];if(typeof S=="function")return S(m);if(S&&S.Pre)return S.Pre(m)}}function h(m){let S=_[m.Type];if(S&&typeof S=="object"&&S.Post)return S.Post(m)}let p,d;p=function(m){if(!e(m)){if(m.Type=="BinopExpr")p(m.Lhs),p(m.Rhs);else if(m.Type=="UnopExpr")p(m.Rhs);else if(!(m.Type=="NumberLiteral"||m.Type=="StringLiteral"||m.Type=="NilLiteral"||m.Type=="BooleanLiteral"||m.Type=="VargLiteral"||m.Type=="HashLiteral")){if(m.Type=="FieldExpr")p(m.Base);else if(m.Type=="IndexExpr")p(m.Base),p(m.Index);else if(m.Type=="MethodExpr"||m.Type=="CallExpr")p(m.Base),m.FunctionArguments.CallType=="ArgCall"?m.FunctionArguments.ArgList.forEach((S,t)=>{p(S)}):m.FunctionArguments.CallType=="TableCall"&&p(m.FunctionArguments.TableExpr);else if(m.Type=="FunctionLiteral")d(m.Body);else if(m.Type!="VariableExpr")if(m.Type=="ParenExpr")p(m.Expression);else if(m.Type=="TableLiteral")m.EntryList.forEach((S,t)=>{if(S.EntryType=="Field")p(S.Value);else if(S.EntryType=="Index")p(S.Index),p(S.Value);else if(S.EntryType=="Value")p(S.Value);else throw"unreachable"});else if(m.Type=="CompoundStat")p(m.Lhs),p(m.Rhs);else throw`unreachable, type: ${m.Type}: ${m}`}h(m)}},d=function(m){if(!e(m)){if(m.Type=="StatList")m.StatementList.forEach((S,t)=>{if(S!=null){if(S===null||S.Type===null)return;S.Remove=()=>{m.StatementList[t]=null},d(S)}});else if(m.Type!="BreakStat"){if(m.Type!="ContinueStat"){if(m.Type!="GotoStat"){if(m.Type!="LabelStat")if(m.Type=="ReturnStat")m.ExprList.forEach((S,t)=>{p(S)});else if(m.Type=="LocalVarStat")m.Token_Equals&&m.ExprList.forEach((S,t)=>{p(S)});else if(m.Type=="LocalFunctionStat")d(m.FunctionStat.Body);else if(m.Type=="FunctionStat")d(m.Body);else if(m.Type=="RepeatStat")d(m.Body),p(m.Condition);else if(m.Type=="GenericForStat")m.GeneratorList.forEach((S,t)=>{p(S)}),d(m.Body);else if(m.Type=="NumericForStat")m.RangeList.forEach((S,t)=>{p(S)}),d(m.Body);else if(m.Type=="WhileStat")p(m.Condition),d(m.Body);else if(m.Type=="DoStat")d(m.Body);else if(m.Type=="IfStat")p(m.Condition),d(m.Body),m.ElseClauseList.forEach(S=>{S.Condition!=null&&p(S.Condition),d(S.Body)});else if(m.Type=="CallExprStat")p(m.Expression);else if(m.Type=="CompoundStat")p(m.Lhs),p(m.Rhs);else if(m.Type=="AssignmentStat")m.Lhs.forEach(S=>{p(S)}),m.Rhs.forEach(S=>{p(S)});else throw"unreachable"}}}h(m)}},i[x.Type]?d(x):p(x)}function et(x){let _=[],o,i=0;function c(){return i++,i}function g(){o={ParentScope:o,ChildScopeList:[],VariableList:[],BeginLocation:c(),Depth:null,GetVar:null},o.ParentScope?(o.Depth=o.ParentScope.Depth+1,o.ParentScope.ChildScopeList.push(o)):o.Depth=1;let l=o;o.GetVar=function(r){for(const s of l.VariableList)if(s.Name==r)return s;if(l.ParentScope)return l.ParentScope.GetVar(r);for(const s of _)if(s.Name==r)return s}}function e(){let l=o;return l.EndLocation=c(),l.VariableList.forEach(r=>{r.ScopeEndLocation=l.EndLocation}),o=l.ParentScope,l}g();function h(l,r,s){k(s,"MIssing localInfo"),k(l,"Missing local var name");let C={Type:"Local",Name:l,RenameList:[r],AssignedTo:!1,Info:s,Scope:o,BeginLocation:c(),EndLocation:c(),ReferenceLocationList:[c()]};return C.Rename=function(ee){C.Name=ee,C.RenameList.forEach(ne=>{ne(ee)})},o.VariableList.push(C),C}function p(l){for(const s of _)if(s.Name==l)return s;let r={Type:"Global",Name:l,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:c(),EndLocation:c(),ReferenceLocationList:[]};return r.Rename=function(s){r.Name=s,r.RenameList.forEach(C=>{C(s)})},_.push(r),r}function d(l,r){k(l,"Missing var name");let s=p(l);return s.RenameList.push(r),s}function m(l,r){let s;for(s=l.VariableList.length-1;s>=0;s--)if(l.VariableList[s].Name==r)return l.VariableList[s];if(l.ParentScope){let C=m(l.ParentScope,r);if(C)return C}}function S(l,r){k(l,"Missing var name");let s=m(o,l);s?s.RenameList.push(r):s=d(l,r);let C=c();return s.EndLocation=C,s.ReferenceLocationList.push(s.EndLocation),s}let t={};return t.FunctionLiteral={Pre:function(l){g(),l.ArgList.forEach((r,s)=>{let C=h(r.Source,function(ee,ne){ne||(r.Source=ee)},{Type:"Argument",Index:s});r.var=C})},Post:function(l){e()}},t.VariableExpr=function(l){l.Variable=S(l.Token.Source,function(r){l.Token.Source=r})},t.StatList={Pre:function(l){g()},Post:function(l){l.SkipPop||e()}},t.LocalVarStat={Post:function(l){l.VarList.forEach((r,s)=>{h(r.Source,function(C){l.VarList[s].Source=C},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(l){h(l.FunctionStat.NameChain[0].Source,function(r){l.FunctionStat.NameChain[0].Source=r},{Type:"LocalFunction"}),g(),l.FunctionStat.ArgList.forEach((r,s)=>{h(r.Source,function(C){r.Source=C},{Type:"Argument",Index:s})})},Post:function(){e()}},t.FunctionStat={Pre:function(l){let r=l.NameChain,s;r.length==1?m(o,r[0].Source)?s=S(r[0].Source,function(C){r[0].Source=C}):s=d(r[0].Source,function(C){r[0].Source=C}):s=S(r[0].Source,function(C){r[0].Source=C}),s.AssignedTo=!0,g(),l.ArgList.forEach((C,ee)=>{h(C.Source,function(ne){C.Source=ne},{Type:"Argument",Index:ee})})},Post:function(){e()}},t.GenericForStat={Pre:function(l){return l.GeneratorList.forEach(r=>{Me(r,t)}),g(),l.VarList.forEach((r,s)=>{h(r.Source,function(C){r.Source=C},{Type:"ForRange",Index:s})}),Me(l.Body,t),e(),!0}},t.NumericForStat={Pre:function(l){return l.RangeList.forEach(r=>{Me(r,t)}),g(),l.VarList.forEach((r,s)=>{h(r.Source,function(C){r.Source=C},{Type:"ForRange",Index:s})}),Me(l.Body,t),e(),!0}},t.RepeatStat={Pre:function(l){l.Body.SkipPop=!0},Post:function(l){e()}},t.AssignmentStat={Post:function(l){l.Lhs.forEach(r=>{r.Variable!=null&&(r.Variable.AssignedTo=!0)})}},Me(x,t),[_,e()]}function it(x){let _,o,i="",c=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function g(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;i=`${i}${e.LeadingWhite}${e.Source}`}return o=function(e){if(e.Type=="BinopExpr")o(e.Lhs),g(e.Token_Op),o(e.Rhs);else if(e.Type=="UnopExpr")g(e.Token_Op),o(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")g(e.Token);else if(e.Type=="FieldExpr")o(e.Base),g(e.Token_Dot),g(e.Field);else if(e.Type=="IndexExpr")o(e.Base),g(e.Token_OpenBracket),o(e.Index),g(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")o(e.Base),e.Type=="MethodExpr"&&(g(e.Token_Colon),g(e.Method)),e.FunctionArguments.CallType=="StringCall"?g(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(g(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,p)=>{o(h);let d=e.FunctionArguments.Token_CommaList[p];d!=null&&g(d)}),g(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&o(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")g(e.Token_Function),g(e.Token_OpenParen),e.ArgList.forEach((h,p)=>{g(h);let d=e.Token_ArgCommaList[p];d!=null&&g(d)}),e.Token_Varg!=null&&g(e.Token_Varg),g(e.Token_CloseParen),_(e.Body),g(e.Token_End);else if(e.Type=="VariableExpr")g(e.Token);else if(e.Type=="ParenExpr")g(e.Token_OpenParen),o(e.Expression),g(e.Token_CloseParen);else if(e.Type=="TableLiteral")g(e.Token_OpenBrace),e.EntryList.forEach((h,p)=>{if(h.EntryType=="Field")g(h.Field),g(h.Token_Equals),o(h.Value);else if(h.EntryType=="Index")g(h.Token_OpenBracket),o(h.Index),g(h.Token_CloseBracket),g(h.Token_Equals),o(h.Value);else if(h.EntryType=="Value")o(h.Value);else throw"unreachable";let d=e.Token_SeperatorList[p];d!=null&&g(d)}),g(e.Token_CloseBrace);else if(e.Type=="CompoundStat")_(e);else throw`unreachable, type: ${e.Type}: ${e}`},_=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let h=c(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",i+=`${h}do `}e.Type=="StatList"?e.StatementList.forEach((h,p)=>{h===null||h.Type===null||(h.Remove=()=>{e.StatementList[p]=null},_(h),e.SemicolonList[p]&&g(e.SemicolonList[p]))}):e.Type=="BreakStat"?g(e.Token_Break):e.Type=="ContinueStat"?g(e.Token_Continue):e.Type=="GotoStat"?(g(e.Token_Goto),g(e.Token_Label)):e.Type=="LabelStat"?(g(e.Token_ColonsLeft),g(e.Token_Label),g(e.Token_ColonsRight)):e.Type=="ReturnStat"?(g(e.Token_Return),e.ExprList.forEach((h,p)=>{o(h),e.Token_CommaList[p]&&g(e.Token_CommaList[p])})):e.Type=="LocalVarStat"?(g(e.Token_Local),e.VarList.forEach((h,p)=>{g(h),h.Attribute!=null&&g(h.Attribute);let d=e.Token_VarCommaList[p];d!=null&&g(d)}),e.Token_Equals!=null&&(g(e.Token_Equals),e.ExprList.forEach((h,p)=>{o(h);let d=e.Token_ExprCommaList[p];d!=null&&g(d)}))):e.Type=="LocalFunctionStat"?(g(e.Token_Local),g(e.FunctionStat.Token_Function),g(e.FunctionStat.NameChain[0]),g(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,p)=>{g(h);let d=e.FunctionStat.Token_ArgCommaList[p];d!=null&&g(d)}),e.FunctionStat.Token_Varg&&g(e.FunctionStat.Token_Varg),g(e.FunctionStat.Token_CloseParen),_(e.FunctionStat.Body),g(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(g(e.Token_Function),e.NameChain.forEach((h,p)=>{g(h);let d=e.Token_NameChainSeperator[p];d!=null&&g(d)}),g(e.Token_OpenParen),e.ArgList.forEach((h,p)=>{g(h);let d=e.Token_ArgCommaList[p];d!=null&&g(d)}),e.Token_Varg&&g(e.Token_Varg),g(e.Token_CloseParen),_(e.Body),g(e.Token_End)):e.Type=="RepeatStat"?(g(e.Token_Repeat),_(e.Body),g(e.Token_Until),o(e.Condition)):e.Type=="GenericForStat"?(g(e.Token_For),e.VarList.forEach((h,p)=>{g(h);let d=e.Token_VarCommaList[p];d!=null&&g(d)}),g(e.Token_In),e.GeneratorList.forEach((h,p)=>{o(h);let d=e.Token_GeneratorCommaList[p];d!=null&&g(d)}),g(e.Token_Do),_(e.Body),g(e.Token_End)):e.Type=="NumericForStat"?(g(e.Token_For),e.VarList.forEach((h,p)=>{g(h);let d=e.Token_VarCommaList[p];d!=null&&g(d)}),g(e.Token_Equals),e.RangeList.forEach((h,p)=>{o(h);let d=e.Token_RangeCommaList[p];d!=null&&g(d)}),g(e.Token_Do),_(e.Body),g(e.Token_End)):e.Type=="WhileStat"?(g(e.Token_While),o(e.Condition),g(e.Token_Do),_(e.Body),g(e.Token_End)):e.Type=="DoStat"?(g(e.Token_Do),_(e.Body),g(e.Token_End)):e.Type=="IfStat"?(g(e.Token_If),o(e.Condition),g(e.Token_Then),_(e.Body),e.ElseClauseList.forEach(h=>{g(h.Token),h.Condition!=null&&(o(h.Condition),g(h.Token_Then)),_(h.Body)}),g(e.Token_End)):e.Type=="CallExprStat"?o(e.Expression):e.Type=="CompoundStat"?(o(e.Lhs),g(e.Token_Compound),o(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((h,p)=>{o(h);let d=e.Token_LhsSeperatorList[p];d!=null&&g(d)}),g(e.Token_Equals),e.Rhs.forEach((h,p)=>{o(h);let d=e.Token_RhsSeperatorList[p];d!=null&&g(d)})):k(!1,"unreachable"),e.WrapInDo&&(i+=" end ")}},_(x),i}function He(x){let _,o,i=0;function c(t){if(t===void 0)return;let l=`
${"	".repeat(i)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-l.length,l.length)!=l){let r="",s;for(s=t.LeadingWhite.length;s>=0;s--){let C=t.LeadingWhite.substr(s,1);if(!(C==""||C.match(/\s/g))){r=t.LeadingWhite.substr(0,s+1);break}}t.LeadingWhite=`${r}${l}`}}function g(){i++}function e(){i--,k(i>=0,"Undented too far")}function h(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function p(t){t.LeadingWhite=t.LeadingWhite.trim()}function d(t){p(t),ve.includes(h(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function m(t){d(t.GetFirstToken())}function S(t,l,r){g(),_(l),e(),c(r)}o=function(t){if(t.Type=="BinopExpr")o(t.Lhs),o(t.Rhs),m(t.Rhs),d(t.Token_Op);else if(t.Type=="UnopExpr")p(t.Token_Op),o(t.Rhs),t.Token_Op.Source[0]&&d(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")p(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+V(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")o(t.Base);else if(t.Type=="IndexExpr")o(t.Base),o(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")o(t.Base),p(t.FunctionArguments.GetFirstToken()),p(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,r)=>{o(l),r>0&&m(l);let s=t.FunctionArguments.Token_CommaList[r];s!=null&&p(s)}):t.FunctionArguments.CallType=="TableCall"&&o(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((l,r)=>{r>0&&d(l),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg!=null&&d(t.Token_Varg),S(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")p(t.Token_OpenParen),p(t.Token_CloseParen),o(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){g();let l=100;t.EntryList.forEach((r,s)=>{r.EntryType=="Field"?(t.EntryList.length>l?Je(r.Value):c(r.Field),d(r.Token_Equals),o(r.Value),m(r.Value)):r.EntryType=="Index"?(t.EntryList.length>l?p(r.Token_OpenBracket):c(r.Token_OpenBracket),o(r.Index),d(r.Token_Equals),o(r.Value),m(r.Value)):r.EntryType=="Value"?(o(r.Value),t.EntryList.length>l?Je(r.Value):c(r.Value.GetFirstToken())):k(!1,"unreachable");let C=t.Token_SeperatorList[s];C!=null&&(t.EntryList.length>l?C.LeadingWhite="":p(C))}),e(),t.EntryList.length>l?t.Token_CloseBrace.LeadingWhite="":c(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")_(t);else throw de(t),`unreachable, type: ${t.Type}:`+t},_=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,r)=>{l===null||l.Type===null||l.Type==="StatList"&&l.StatementList.length===0||(l.Remove=()=>{l.StatementList[r]=null},_(l),c(l.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,r)=>{o(l),m(l),t.Token_CommaList[r]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((l,r)=>{d(l),l.Attribute&&(l.Attribute.LeadingWhite=" "),t.Token_VarCommaList[r]}),t.Token_Equals){p(t.Token_Equals),d(t.Token_Equals);let l=[],r=[];t.ExprList.forEach((s,C)=>{s!=null&&(C<t.VarList.length||s.Type=="CallExpr"||s.Type=="ParenExpr"||s.Type=="VargLiteral"||s.Type=="BinopExpr"||s.Type=="UnopExpr")&&(l.push(s),r.push(t.Token_ExprCommaList[C]))}),t.ExprList=l,t.CommaList=r,t.ExprList.forEach((s,C)=>{s!=null&&(o(s),m(s),t.Token_ExprCommaList[C]!=null&&t.ExprList.length-1==C&&(t.Token_ExprCommaList[C]=null))})}}else if(t.Type=="LocalFunctionStat")d(t.FunctionStat.Token_Function),d(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((l,r)=>{r>0?d(l):p(l);let s=t.FunctionStat.Token_ArgCommaList[r];s&&p(s)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(p(t.FunctionStat.Token_Varg),d(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&p(t.FunctionStat.Token_Varg),p(t.FunctionStat.Token_OpenParen),p(t.FunctionStat.Token_CloseParen),S(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((l,r)=>{r==0&&d(l),t.Token_NameChainSeperator[r]}),t.ArgList.forEach((l,r)=>{r>0&&d(l),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg&&d(t.Token_Varg),S(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")S(t.Token_Repeat,t.Body,t.Token_Until),o(t.Condition),m(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((l,r)=>{d(l),t.Token_VarCommaList[r]}),d(t.Token_In),t.GeneratorList.forEach((l,r)=>{o(l),m(l),t.Token_GeneratorCommaList[r]}),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((l,r)=>{d(l),t.Token_VarCommaList[r]}),d(t.Token_Equals),t.RangeList.forEach((l,r)=>{o(l),m(l),t.Token_RangeCommaList[r]}),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")o(t.Condition),m(t.Condition),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){o(t.Condition),m(t.Condition),d(t.Token_Then);let l=t.Token_Then,r=t.Body;t.ElseClauseList.forEach(s=>{S(l,r,s.Token),l=s.Token,s.Condition!=null&&(o(s.Condition),m(s.Condition),d(s.Token_Then),l=s.Token_Then),r=s.Body}),S(l,r,t.Token_End)}else t.Type=="CallExprStat"?o(t.Expression):t.Type=="CompoundStat"?(o(t.Lhs),o(t.Rhs),m(t.Lhs),m(t.Rhs),d(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((l,r)=>{o(l),r>0&&m(l),t.Token_LhsSeperatorList[r]}),d(t.Token_Equals),t.Rhs.forEach((l,r)=>{o(l),m(l),t.Token_RhsSeperatorList[r]})):k(!1,"Unreachable")}}}},_(x)}function Je(x){let _,o;function i(e){e&&(e.LeadingWhite="")}function c(e,h,p=!1){i(h);let d=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),m=(typeof h.Source=="string"?h.Source:h.Source.toString()).substr(0,1);d=="-"&&m=="-"||Oe.includes(d)&&Oe.includes(m)||p&&d==")"&&m=="("?h.LeadingWhite=p?";":" ":h.LeadingWhite=""}function g(e,h,p){_(h),i(p);let d=h.GetFirstToken(),m=h.GetLastToken();d!=null?(c(e,d),c(m,p)):c(e,p)}o=function(e){if(e.Type==="BinopExpr")o(e.Lhs),o(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(i(e.Token_Op),c(e.Lhs.GetLastToken(),e.Token_Op)),c(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")i(e.Token_Op),o(e.Rhs),c(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")i(e.Token);else if(e.Type=="FieldExpr")o(e.Base),i(e.Token_Dot),i(e.Field);else if(e.Type=="IndexExpr")o(e.Base),i(e.Token_OpenBracket),o(e.Index),i(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")o(e.Base),e.Type=="MethodExpr"&&(i(e.Token_Colon),i(e.Method)),e.FunctionArguments.CallType=="StringCall"?i(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(i(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,p)=>{o(h);let d=e.FunctionArguments.Token_CommaList[p];d!=null&&i(d)}),i(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&o(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")i(e.Token_Function),i(e.Token_OpenParen),e.ArgList.forEach((h,p)=>{i(h);let d=e.Token_ArgCommaList[p];d!=null&&i(d)}),e.Token_Varg!=null&&i(e.Token_Varg),i(e.Token_CloseParen),g(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")i(e.Token);else if(e.Type=="ParenExpr")i(e.Token_OpenParen),o(e.Expression),i(e.Token_CloseParen);else if(e.Type=="TableLiteral")i(e.Token_OpenBrace),e.EntryList.forEach((h,p)=>{h.EntryType=="Field"?(i(h.Field),i(h.Token_Equals),o(h.Value)):h.EntryType=="Index"?(i(h.Token_OpenBracket),o(h.Index),i(h.Token_CloseBracket),i(h.Token_Equals),o(h.Value)):h.EntryType=="Value"?o(h.Value):k(!1,"unreachable");let d=e.Token_SeperatorList[p];d!=null&&i(d)}),e.Token_SeperatorList[e.EntryList.length-1]=null,i(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},_=function(e){if(e.Type=="StatList"){let h;for(h=0;h<=e.StatementList.length;h++){let p=e.StatementList[h];if(p==null)continue;_(p),i(p.GetFirstToken());let d=e.StatementList[h-1];if(d!=null){let m={")":["(","["],"]":["(","["]};if(e.SemicolonList[h-1]){let S=d.GetLastToken().Source,t=p.GetFirstToken().Source;(m[S]===null||m[S]===void 0||!m[S].includes(t))&&(e.SemicolonList[h-1]=null)}e.SemicolonList[h-1]||c(d.GetLastToken(),p.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&i(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")i(e.Token_Break);else if(e.Type=="ContinueStat")i(e.Token_Continue);else if(e.Type=="GotoStat")i(e.Token_Goto),c(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")i(e.Token_ColonsLeft),i(e.Token_Label),i(e.Token_ColonsRight);else if(e.Type=="ReturnStat")i(e.Token_Return),e.ExprList.forEach((h,p)=>{o(h),e.Token_CommaList[p]!=null&&i(e.Token_CommaList[p])}),e.ExprList.length>0&&c(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){i(e.Token_Local);let h=!1;e.VarList.forEach((p,d)=>{d==0?c(e.Token_Local,p):i(p),p.Attribute&&(i(p.Attribute),d+1==e.VarList.length&&(h=!0));let m=e.Token_VarCommaList[d];m!=null&&i(m)}),e.Token_Equals!=null&&(h||i(e.Token_Equals),e.ExprList.forEach((p,d)=>{o(p);let m=e.Token_ExprCommaList[d];m!=null&&i(m)}))}else if(e.Type=="LocalFunctionStat")i(e.Token_Local),c(e.Token_Local,e.FunctionStat.Token_Function),c(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),c(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,p)=>{i(h);let d=e.FunctionStat.Token_ArgCommaList[p];d!=null&&i(d)}),e.FunctionStat.Token_Varg&&i(e.FunctionStat.Token_Varg),i(e.FunctionStat.Token_CloseParen),g(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")i(e.Token_Function),e.NameChain.forEach((h,p)=>{p==0?c(e.Token_Function,h):i(h);let d=e.Token_NameChainSeperator[p];d!=null&&i(d)}),i(e.Token_OpenParen),e.ArgList.forEach((h,p)=>{i(h);let d=e.Token_ArgCommaList[p];d!=null&&i(d)}),e.Token_Varg&&i(e.Token_Varg),i(e.Token_CloseParen),g(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")i(e.Token_Repeat),g(e.Token_Repeat,e.Body,e.Token_Until),o(e.Condition),c(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")i(e.Token_For),e.VarList.forEach((h,p)=>{p==0?c(e.Token_For,h):i(h);let d=e.Token_VarCommaList[p];d!=null&&i(d)}),c(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((h,p)=>{o(h),p==0&&c(e.Token_In,h.GetFirstToken());let d=e.Token_GeneratorCommaList[p];d!=null&&i(d)}),c(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")i(e.Token_For),e.VarList.forEach((h,p)=>{p==0?c(e.Token_For,h):i(h);let d=e.Token_VarCommaList[p];d!=null&&i(d)}),c(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((h,p)=>{o(h),p==0&&c(e.Token_Equals,h.GetFirstToken());let d=e.Token_RangeCommaList[p];d!=null&&i(d)}),c(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")i(e.Token_While),o(e.Condition),i(e.Token_Do),c(e.Token_While,e.Condition.GetFirstToken()),c(e.Condition.GetLastToken(),e.Token_Do),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")i(e.Token_Do),i(e.Token_End),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){i(e.Token_If),o(e.Condition),c(e.Token_If,e.Condition.GetFirstToken()),c(e.Condition.GetLastToken(),e.Token_Then);let h=e.Token_Then,p=e.Body;e.ElseClauseList.forEach((d,m)=>{g(h,p,d.Token),h=d.Token,d.Condition!=null&&(o(d.Condition),c(d.Token,d.Condition.GetFirstToken()),c(d.Condition.GetLastToken(),d.Token_Then),h=d.Token_Then),_(d.Body),p=d.Body}),g(h,p,e.Token_End)}else if(e.Type=="CallExprStat")o(e.Expression);else if(e.Type=="CompoundStat")o(e.Lhs),i(e.Token_Compound),o(e.Rhs),c(e.Lhs.GetLastToken(),e.Token_Compound),c(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((h,p)=>{o(h);let d=e.Token_LhsSeperatorList[p];d!=null&&i(d)}),i(e.Token_Equals),e.Rhs.forEach((h,p)=>{o(h);let d=e.Token_RhsSeperatorList[p];d!=null&&i(d)});else return o(e)},_(x)}function tt(x){let _,o,i={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function c(t,l,r=null){let s;return s={Type:t,Token:{Type:r??"Number",LeadingWhite:"",Source:l},GetFirstToken:()=>s.Token,GetLastToken:()=>s.Token},s}function g(t,l,r){let s;return s={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:l,Rhs:r,GetFirstToken:()=>s.Lhs.GetFirstToken(),GetLastToken:()=>s.Rhs.GetLastToken()},s}function e(t,l){let r;return r={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:l,GetFirstToken:()=>r.Token_Op,GetLastToken:()=>r.Rhs.GetLastToken()},r}function h(t,l){if(l!=null)for(var[r,s]of Object.entries(l))t[r]=s}function p(t){if(t==null||t.substr==null)return;let l=t.substr(0,1),r;if((l=='"'||l=="'")&&(r=t.substr(1,t.length-2)),l=="["){let ee=0,ne=1;for(;t.substr(ne,1)=="=";)ee++,ne++;r=t.substr(2+ee,t.length-4-ee-2)}if(r==null)return"";let s="",C;for(C=0;C<=r.length;C++){let ee=r.substr(C,1);ee=="'"||ee=='"'?s+=`\\${ee}`:s+=ee}return s}function d(t){if(typeof t=="object"&&t.Type=="ParenExpr")return h(t,t.Expression)}function m(t,l,r){let s=l,C=r;if(l&&l.Type=="ParenExpr"&&(s=l.Expression),r&&r.Type=="ParenExpr"&&(C=r.Expression),s==null||C==null||s.Type==null||C.Type==null||s.Type=="VariableExpr"||s.Type=="CallExpr"||s.Type=="BinopExpr"||C.Type=="CallExpr"||C.Type=="BinopExpr"||C.Type=="VariableExpr")return;let ee=s.Token||s.Expression!=null&&s.Expression.Token||null,ne=C.Token||C.Expression!=null&&C.Expression.Token||null,_e=ee!=null?ee.Source:null,Ce=ne!=null?ne.Source:null,q,O;if(s.Type=="BooleanLiteral"&&(q=_e=="true"),C.Type=="BooleanLiteral"&&(O=Ce=="true"),!(s.Type=="NumberLiteral"&&(q=N(_e),q==null))&&!(C.Type=="NumberLiteral"&&(O=N(Ce),O==null))&&((s.Type=="StringLiteral"||s.Type=="HashLiteral")&&(q=_e.toString()),(C.Type=="StringLiteral"||C.Type=="HashLiteral")&&(O=Ce.toString()),q!=null&&O!=null)){if(t=="==")return q==O;if(t=="~=")return q!=O;if(t=="and")return q&&O;if(t=="or")return q||O;if(t==".."&&s.Type=="StringLiteral"&&C.Type=="StringLiteral")return`"${p(_e)+p(Ce)}"`;if(s.Type=="StringLiteral"&&(q=N(p(q))),C.Type=="StringLiteral"&&(O=N(p(O))),q==null||O==null)return;let j;if(t=="+"&&(j=q+O),t=="-"&&(j=q-O),t=="*"&&(j=q*O),t=="/"&&(j=q/O),t=="^"&&(j=q**O),t=="%"&&(j=q%O),t==">"&&(j=q>O),t=="<"&&(j=q<O),t==">="&&(j=q>=O),t=="<="&&(j=q<=O),j==!1||j==!0||isFinite(j)&&j>-(10**6)&&j<10**6)return j}}function S(t,l){let r=l.Token||l.Expression||l.EntryList||l;if(r==null||r.Source==null&&l.Type!="TableLiteral"||l.Type=="VariableExpr"||l.Type=="CallExpr"||l.Type=="BinopExpr")return;let s=r.Source,C;if(l.Type=="TableLiteral"&&r!=null){let ee=[],ne=0,_e=!1,Ce=!1,q=0;if(r.forEach((O,j)=>{if(_e)ee.push(O);else if(O.EntryType=="Value"||O.EntryType=="Index")if((O.Index==null||O.Index.Type=="NumberLiteral")&&O.Value){if((O.Index!=null&&O.Index.Token!=null&&O.Index.Token.Source!==null?O.Index.Token.Source:q+1).toString()!==(++q).toString())return _e=!0,Ce=!0,ee.push(O);O.Value.Type!="CallExpr"?ne++:(_e=!0,ee.push(O))}else ee.push(O)}),Ce)return;if(t=="#")return l.EntryList=ee,l.EntryList.length<=0?c("NumberLiteral",ne!==null?ne:l.EntryList.length):ne<=0?e("#",l):g("+",c("NumberLiteral",ne),e("#",l))}if(l.Type=="BooleanLiteral"&&(C=s=="true"),!(l.Type=="NumberLiteral"&&(C=N(s),C===null))){if(l.Type=="StringLiteral"&&(C=s.substr(1,s.length-2)),t=="not"&&l.Type!==null)return l.Type=="NilLiteral"||l.Type=="BooleanLiteral"&&C===!1;if(C!=null){if(t=="#")return C.length;if(t=="-")return-C}}}o=function(t){if(t.Type=="BinopExpr"){if(o(t.Lhs),o(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let l=t.Token_Op;if(l!=null&&l.Source!=null){let r=m(l.Source,t.Lhs,t.Rhs);if(r!=null){if(typeof r=="boolean"){let s=c("BooleanLiteral",r.toString(),"Keyword");h(t,s);return}else if(typeof r=="number"){if(isFinite(r)==!0){let s=c("NumberLiteral",r.toString(),"Number");h(t,s);return}}else if(typeof r=="string"){let s=c("StringLiteral",r,"String");h(t,s);return}else if(typeof r=="object"){h(t,r);return}return}}if(t.Lhs.Type=="ParenExpr"){let s=t.Lhs.Expression;s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let s=t.Rhs.Expression;s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(o(t.Rhs),t.Rhs!=null&&i[t.Rhs.Type]==!0){let l=t.Token_Op;if(l!=null&&l.Source!=null){let r=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,s=S(l.Source,r);if(s!=null){if(typeof s=="boolean"){let C=c("BooleanLiteral",s.toString(),"Keyword");h(t,C);return}else if(typeof s=="number"){if(isFinite(s)==!0){let C=c("NumberLiteral",s,"Number");h(t,C);return}}else if(typeof s=="string"){let C=c("StringLiteral",s,"String");h(t,C);return}else if(typeof s=="object"){h(t,s);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let l=t.Token;if(l!=null){if(l.Type=="Number"){let r=l.Source.toString().split("e");if(r.length===2){let s=N(r[0]),C=N(r[1]);isFinite(s)&&isFinite(C)&&s**C<999999999&&!l.Source.includes("+")&&l.Source.includes(".")&&!l.Source.includes("-")&&(l.Source=(s**C).toString())}}l.Type=="String"&&(l.Source=l.Source.replace(/\\\d+/gi,r=>{let s=N(r.substr(1,r.length-1));return s&&isFinite(s)&&(s>=97&&s<=122||s>=65&&s<=90||s>=33&&s<=47||s>=58&&s<=64||s>=91&&s<=96||s>=123&&s<=126)&&s!==34&&s!==39&&s!==92?String.fromCharCode(s):r}))}}else if(t.Type=="FieldExpr")o(t.Base);else if(t.Type=="IndexExpr")o(t.Base),o(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(o(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,r)=>{o(l)}):t.FunctionArguments.CallType=="TableCall"&&o(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let l=t.Base.Expression;t.FunctionArguments.ArgList.forEach((r,s)=>{let C=t.FunctionArguments.ArgList[s];if(C!==void 0&&(C.Type=="NumberLiteral"||C.Type=="StringLiteral"||C.Type=="NilLiteral"||C.Type=="BooleanLiteral"||C.Type=="HashLiteral")){let ee=l.ArgList[s];ee&&ee.var.RenameList.forEach(ne=>{ne(C.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")_(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let l=t.Expression;l!=null&&l.Type=="ParenExpr"&&(t.Expression=l.Expression),o(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&d(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((l,r)=>{l.EntryType=="Field"?o(l.Value):l.EntryType=="Index"?(o(l.Index),o(l.Value)):l.EntryType=="Value"?o(l.Value):k(!1,"unreachable")})},_=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,r)=>{l===null||l.Type===null||(l.Remove=()=>{t.StatementList[r]=null},_(l))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,r)=>{o(l)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((l,r)=>{o(l)});else if(t.Type=="LocalFunctionStat")_(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")_(t.Body);else if(t.Type=="RepeatStat")_(t.Body),o(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((l,r)=>{o(l)}),_(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((O,j)=>{o(O)}),_(t.Body);let l=t.RangeList[0],r=t.RangeList[1],s=t.RangeList[2];if(l==null||r==null)return t.Remove();if(d(l),d(r),d(s),l.Type!="NumberLiteral"||r.Type!="NumberLiteral"||s!=null&&s.Type!="NumberLiteral"||s==null)return;let C=N(l.Token.Source),ee=N(r.Token.Source),ne=s!=null&&N(s.Token.Source)||1,_e=ne>0&&C<=ee||ne<0&&C>=ee,Ce=(ee-C+ne)/ne;if(!(_e&&Ce>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){o(t.Condition),_(t.Body);let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(_(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let l=t.Body.StatementList[0];l.Type!=="ContinueStat"&&l.Type!=="BreakStat"&&l.Type!=="ReturnStat"&&h(t,l)}}else if(t.Type=="IfStat"){o(t.Condition),_(t.Body),t.ElseClauseList.forEach((r,s)=>{r.Condition!=null&&o(r.Condition),_(r.Body)});let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?o(t.Expression):t.Type=="CompoundStat"?(o(t.Lhs),o(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((l,r)=>{o(l)}),t.Rhs.forEach((l,r)=>{o(l)}))}},_(x)}let Y=[],D;for(D=97;D<=122;D++)Y.push(String.fromCharCode(D));for(D=65;D<=90;D++)Y.push(String.fromCharCode(D));for(D=48;D<=57;D++)Y.push(String.fromCharCode(D));Y.push("_");let Fe=[];for(D=97;D<=122;D++)Fe.push(String.fromCharCode(D));for(D=65;D<=90;D++)Fe.push(String.fromCharCode(D));function $e(x){let _="",o=x%Fe.length;for(x=(x-o)/Fe.length,_=`${_}${Fe[o]}`;x>0;){let i=x%Y.length;x=(x-i)/Y.length,_=`${_}${Y[i]}`}return _}function T(x,_,o){let i=[];for(var[c,g]of Object.entries(ze))i[c]=!0;let e=[];x.forEach(S=>{S.AssignedTo&&o?e.push(S):i[S.Name]=!0});function h(S){S.VariableList.forEach(t=>{e.push(t)}),S.ChildScopeList.forEach(t=>{h(t)})}h(_),e.forEach(S=>{S.UsedNameArray=[]}),e.sort((S,t)=>S-t);let p=0,d=[];function m(S){let t=d[S];if(t==null){for(t=$e(p),p++;i[t];)t=$e(p),p++;d[S]=t}return t}e.forEach((S,t)=>{S.Renamed=!0;let l=0;for(;S.UsedNameArray[l];)l++;S.Rename(m(l)),S.Scope?e.forEach(r=>{r.Renamed||(!r.Scope||r.Scope.Depth<S.Scope.Depth?r.ReferenceLocationList.some(s=>s>=S.BeginLocation&&s<=S.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1):r.Scope.Depth>S.Scope.Depth?S.ReferenceLocationList.some(s=>s>=r.BeginLocation&&s<=r.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1):S.BeginLocation<r.EndLocation&&S.EndLocation>r.BeginLocation&&(r.UsedNameArray[l]=!0))}):e.forEach(r=>{if(!r.Renamed)if(r.Type=="Global")r.UsedNameArray[l]=!0;else if(r.Type=="Local")S.ReferenceLocationList.some(s=>s>=r.BeginLocation&&s<=r.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1);else throw"Unreachable"})})}function $(x,_,o){let i=[];x.forEach(p=>{(!p.AssignedTo||!o)&&(i[p.Name]=!0)});let c=1,g=1;function e(p,d){p.Name=d,p.RenameList.forEach(m=>{m(d)})}if(o){let p={};x.forEach(d=>{d.AssignedTo&&!d.ChangedName&&(p[d.Name]=p[d.Name]||`G_${g}_`,d.ChangedName=!0,e(d,p[d.Name]),g++)})}function h(p){p.VariableList.forEach(d=>{let m=`L_${c}_`;d.Info.Type=="Argument"?m=`${m}arg${d.Info.Index}`:d.Info.Type=="LocalFunction"?m=`${m}func`:d.Info.Type=="ForRange"&&(m=`${m}forvar${d.Info.Index}`),e(d,m),c++}),p.ChildScopeList.forEach(d=>{h(d)})}h(_)}let ce={};ce.Minify=function(x,_){let o=Q(x),[i,c]=et(o);return _.RenameVariables==!0&&T(i,c,_.RenameGlobals),_.SolveMath==!0&&tt(o),Je(o),it(o)},ce.Beautify=function(x,_){let o=Q(x),[i,c]=et(o);return _.RenameVariables&&$(i,c,_.RenameGlobals),_.SolveMath==!0&&tt(o),He(o),it(o)};try{We!=null&&We.exports!=null&&(We.exports.Beautify=ce.Beautify,We.exports.Minify=ce.Minify)}catch{}})(Bt);var dn=Bt.exports;const Gt=dn;mt.Beautify=Gt.Beautify;mt.Minify=Gt.Minify;mt.Uglify=Gt.Uglify;const $t={master:`return {
  desc="\\
",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="\\
",
  settings_id="ENDLESS",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc="\\
",
  worldgen_id="ENDLESS",
  worldgen_name="" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc=" ",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc=" ",
  settings_id="DST_CAVE",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc=" ",
  worldgen_id="DST_CAVE",
  worldgen_name="" 
}`},Ot={master:`return {
  desc="",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc="",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc=" ",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc=" ",
  settings_id="DST_CAVE",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc=" ",
  worldgen_id="DST_CAVE",
  worldgen_name="" 
}`},cn={class:"page-div"},mn={class:"el-form-item-msg"},pn={style:{"font-weight":"bolder"}},gn={class:"item-container"},hn={style:{"font-weight":"bolder"}},Tn={class:"item-container"},yn={style:{"font-weight":"bolder"}},_n={class:"item-container"},kn={style:{"font-weight":"bolder"}},Sn={class:"item-container"},bn={style:{"font-weight":"bolder"}},Ln={class:"item-container"},vn={style:{"font-weight":"bolder"}},En={class:"item-container"},Cn={style:{"font-weight":"bolder"}},wn={class:"item-container"},Vn={style:{"font-weight":"bolder"}},Fn={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Gn={class:"item-container"},Rn={style:{"font-weight":"bolder"}},An={class:"item-container"},In={style:{"font-weight":"bolder"}},Nn={class:"item-container"},Un={style:{"font-weight":"bolder"}},Pn={class:"item-container"},Dn={style:{"font-weight":"bolder"}},$n={class:"item-container"},On={style:{"font-weight":"bolder"}},Mn={class:"item-container"},xn={style:{"margin-top":"10px"}},zn={style:{"font-weight":"bolder"}},qn={class:"item-container"},Wn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Zn={class:"item-container"},Xn={style:{"font-weight":"bolder"}},Qn={class:"item-container"},Yn={style:{"font-weight":"bolder"}},el={class:"item-container"},tl={style:{"font-weight":"bolder"}},nl={class:"item-container"},ll={style:{"font-weight":"bolder"}},ol={class:"item-container"},al={style:{"font-weight":"bolder"}},il={class:"item-container"},rl={style:{display:"flex","justify-content":"flex-end"}},ul=sn({name:"settingsRoom"}),sl=Object.assign(ul,{setup(We){const{t:V}=ln();on(()=>{Me()});const de=Ae(!1),{isMobile:k}=an(),N=rn(),ve=un(()=>N.isDark),ie=Ae(),me=Ae(),pe=Ae(0),Oe=o=>{pe.value>o&&(o===1&&Fe(),o===2&&$e(),pe.value=o)},Ke=()=>{pe.value===2&&Fe(),pe.value===3&&$e(),pe.value--},at=()=>{if(pe.value===0)lt.value.validate(o=>{if(o){if(X.value.masterPort===X.value.cavesPort){ht(V("setting.roomBaseFormRules.samePort"));return}Fe(),pe.value++}});else if(pe.value===1)Pe.value.validate(o=>{if(o)try{ot.parse(Te.value.groundSetting),$e(),pe.value++}catch{ht(V("setting.luaError"))}});else if(pe.value===2)if(Ee.value)try{ot.parse(Ee.value.caveSetting),pe.value++}catch{ht(V("setting.luaError"))}else pe.value++;else if(pe.value===3)if(J.value)try{ot.parse(J.value.modSetting),pe.value++}catch{ht(V("setting.luaError"))}else pe.value++},lt=Ae(),X=Ae({name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!0,password:"",token:"",masterPort:0,cavesPort:0}),Ue={name:[{required:!0,message:V("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:V("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:V("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],token:[{required:!0,message:V("setting.roomBaseFormRules.token"),trigger:"blur"}]},Pe=Ae(),Te=Ae({groundSetting:""}),ze={groundSetting:[{required:!0,message:V("setting.roomGroundFormRules.groundSetting"),trigger:"blur"}]},De=Ae(),Ee=Ae({caveSetting:""}),qe={caveSetting:[{required:!0,message:V("setting.roomCaveFormRules.caveSetting"),trigger:"blur"}]},je=Ae(),J=Ae({modSetting:""}),te={modSetting:[{required:!0,message:V("setting.roomModFormRules.modSetting"),trigger:"blur"}]},Q=(o,i)=>{o==="master"&&(i==="endless"&&(Te.value.groundSetting=$t.master),i==="survival"&&(Te.value.groundSetting=Ot.master),Fe()),o==="caves"&&(i==="endless"&&(Ee.value.caveSetting=$t.caves),i==="survival"&&(Ee.value.caveSetting=Ot.caves),$e())},Me=()=>{Tt.room.get().then(o=>{X.value=o.data.base,Te.value.groundSetting=o.data.ground,Ee.value.caveSetting=o.data.cave,J.value.modSetting=o.data.mod})},et=o=>{switch(o){case"save":it();break;case"saveAndRestart":He();break;case"generateNewWorld":Je();break}},it=()=>{const o={base:X.value,ground:Te.value.groundSetting,cave:Ee.value.caveSetting,mod:J.value.modSetting};de.value=!0,Tt.save.post(o).then(i=>{Vt(i.message),de.value=!1}).finally(()=>{de.value=!1})},He=()=>{const o={base:X.value,ground:Te.value.groundSetting,cave:Ee.value.caveSetting,mod:J.value.modSetting};de.value=!0,Tt.saveAndRestart.post(o).then(i=>{Vt(i.message),de.value=!1}).finally(()=>{de.value=!1})},Je=()=>{const o={base:X.value,ground:Te.value.groundSetting,cave:Ee.value.caveSetting,mod:J.value.modSetting};de.value=!0,Tt.saveAndGenerate.post(o).then(i=>{de.value=!1,Vt(i.message)}).finally(()=>{de.value=!1})},tt=Ae("Code"),Y=Ae("Code"),D=Ae({}),Fe=()=>{const o=ot.parse(Te.value.groundSetting),i=T(o);D.value=$(i)},$e=()=>{const o=ot.parse(Ee.value.caveSetting),i=T(o);D.value=$(i)};function T(o){const c=o.body[0].arguments[0];for(const g of c.fields)if(g.key.type==="Identifier"&&g.key.name==="overrides")return g.value;return null}function $(o){const i={};for(const c of o.fields){const g=c.key.name;i[g]=c.value.raw.replace(/"/g,"")}return i}const ce=o=>{const i=o.name,c=o.value,g=ot.parse(Te.value.groundSetting),e=T(g);for(let p of e.fields)p.key.name===i&&(p.value.raw=`"${c}"`);const h=_(g);Te.value.groundSetting=mt.Beautify(h,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),ie.value&&ie.value.refresh()},x=o=>{const i=o.name,c=o.value,g=ot.parse(Ee.value.caveSetting),e=T(g);for(let p of e.fields)p.key.name===i&&(p.value.raw=`"${c}"`);const h=_(g);Ee.value.caveSetting=mt.Beautify(h,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),me.value&&me.value.refresh()},_=(o,i=0)=>{const c="    ".repeat(i);switch(o.type){case"Chunk":return o.body.map(g=>_(g,i)).join(`
`);case"LocalStatement":return`${c}local ${o.variables.map(_).join(", ")} = ${o.init.map(_).join(", ")}`;case"FunctionDeclaration":return`${c}function ${_(o.identifier)}(${o.parameters.map(_).join(", ")}) 
${_(o.body,i+1)}
${c}end`;case"ReturnStatement":return`${c}return ${o.arguments.map(_).join(", ")}`;case"BinaryExpression":return`${_(o.left)} ${o.operator} ${_(o.right)}`;case"CallStatement":return`${c}${_(o.expression)}`;case"Identifier":return o.name;case"StringLiteral":return`${o.raw}`;case"NumericLiteral":return o.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${c}{ ${o.fields.map(g=>_(g,i+1)).join(`,
`+c)} }`;case"Field":return o.key?`${_(o.key)} = ${_(o.value)}`:_(o.value);case"AssignmentStatement":return`${c}${o.variables.map(_).join(", ")} = ${o.init.map(_).join(", ")}`;case"CallExpression":return`${_(o.base)}(${o.arguments.map(_).join(", ")})`;case"TableKeyString":return`${_(o.key)} = ${_(o.value)}`;case"BooleanLiteral":return o.raw;case"TableValue":return _(o.value);default:throw new Error(`Unsupported node type: ${o.type}`)}};return(o,i)=>{const c=ye("el-step"),g=ye("el-steps"),e=ye("el-card"),h=ye("el-col"),p=ye("el-row"),d=ye("el-input"),m=ye("el-form-item"),S=ye("el-tooltip"),t=ye("el-input-number"),l=ye("el-radio"),r=ye("el-radio-group"),s=ye("el-switch"),C=ye("el-slider"),ee=ye("el-link"),ne=ye("el-form"),_e=ye("el-button"),Ce=ye("el-tab-pane"),q=ye("el-divider"),O=ye("el-tabs"),j=ye("el-alert"),ge=ye("el-result"),st=ye("arrow-down"),Ze=ye("el-icon"),Ie=ye("el-dropdown-item"),xe=ye("el-dropdown-menu"),ft=ye("el-dropdown");return A(),Z("div",cn,[B(p,{gutter:10},{default:I(()=>[B(h,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:I(()=>[B(e,{shadow:"never"},{default:I(()=>[B(g,{active:pe.value,"align-center":"","finish-status":"success"},{default:I(()=>[B(c,{title:f(k)?o.$t("setting.roomSettingMobile"):o.$t("setting.roomSetting"),onClick:i[0]||(i[0]=u=>Oe(0))},null,8,["title"]),B(c,{title:f(k)?o.$t("setting.groundSettingMobile"):o.$t("setting.groundSetting"),onClick:i[1]||(i[1]=u=>Oe(1))},null,8,["title"]),B(c,{title:f(k)?o.$t("setting.caveSettingMobile"):o.$t("setting.caveSetting"),onClick:i[2]||(i[2]=u=>Oe(2))},null,8,["title"]),B(c,{title:f(k)?o.$t("setting.modSettingMobile"):o.$t("setting.modSetting"),onClick:i[3]||(i[3]=u=>Oe(3))},null,8,["title"]),B(c,{title:f(k)?o.$t("setting.finishSettingMobile"):o.$t("setting.finishSetting"),onClick:i[4]||(i[4]=u=>Oe(4))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),B(p,{gutter:10,style:{"margin-top":"5px"}},{default:I(()=>[B(h,{lg:24,md:24,sm:24,span:24,xs:24},{default:I(()=>[pe.value===0?(A(),le(e,{key:0,style:ut(f(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:I(()=>[B(ne,{ref_key:"roomBaseFormRef",ref:lt,"label-position":f(k)?"top":"left","label-width":f(k)?"70":"auto",model:X.value,rules:Ue,size:f(k)?"small":"large"},{default:I(()=>[B(m,{label:f(V)("setting.baseForm.room"),prop:"name"},{default:I(()=>[B(d,{modelValue:X.value.name,"onUpdate:modelValue":i[5]||(i[5]=u=>X.value.name=u)},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.description"),prop:"description"},{default:I(()=>[B(d,{modelValue:X.value.description,"onUpdate:modelValue":i[6]||(i[6]=u=>X.value.description=u)},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{prop:"masterPort"},{label:I(()=>[B(S,{content:f(V)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:I(()=>[oe(z(f(V)("setting.baseForm.masterPort")),1)]),_:1},8,["content"])]),default:I(()=>[B(t,{modelValue:X.value.masterPort,"onUpdate:modelValue":i[7]||(i[7]=u=>X.value.masterPort=u),max:65535,min:1,size:f(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),B(m,{prop:"cavesPort"},{label:I(()=>[B(S,{content:f(V)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:I(()=>[oe(z(f(V)("setting.baseForm.cavesPort")),1)]),_:1},8,["content"])]),default:I(()=>[B(t,{modelValue:X.value.cavesPort,"onUpdate:modelValue":i[8]||(i[8]=u=>X.value.cavesPort=u),max:65535,min:1,size:f(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),B(m,{label:f(V)("setting.baseForm.gameMode.name"),prop:"gameMode"},{default:I(()=>[B(r,{modelValue:X.value.gameMode,"onUpdate:modelValue":i[9]||(i[9]=u=>X.value.gameMode=u)},{default:I(()=>[B(l,{label:o.$t("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),B(l,{label:o.$t("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),B(l,{label:o.$t("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),B(l,{label:o.$t("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.pvp"),prop:"pvp"},{default:I(()=>[B(s,{modelValue:X.value.pvp,"onUpdate:modelValue":i[10]||(i[10]=u=>X.value.pvp=u)},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.playerNum"),prop:"playerNum"},{default:I(()=>[B(C,{modelValue:X.value.playerNum,"onUpdate:modelValue":i[11]||(i[11]=u=>X.value.playerNum=u),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.backDays"),prop:"backDays"},{default:I(()=>[B(C,{modelValue:X.value.backDays,"onUpdate:modelValue":i[12]||(i[12]=u=>X.value.backDays=u),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.vote"),prop:"vote"},{default:I(()=>[B(s,{modelValue:X.value.vote,"onUpdate:modelValue":i[13]||(i[13]=u=>X.value.vote=u)},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.password")},{default:I(()=>[B(d,{modelValue:X.value.password,"onUpdate:modelValue":i[14]||(i[14]=u=>X.value.password=u)},null,8,["modelValue"])]),_:1},8,["label"]),B(m,{label:f(V)("setting.baseForm.token"),prop:"token"},{default:I(()=>[B(d,{modelValue:X.value.token,"onUpdate:modelValue":i[15]||(i[15]=u=>X.value.token=u),"show-password":""},null,8,["modelValue"]),K("div",mn,[B(ee,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:I(()=>[oe(z(f(V)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["style"])):Ne("",!0),pe.value===1?(A(),le(e,{key:1,style:ut(f(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:I(()=>[B(O,{modelValue:tt.value,"onUpdate:modelValue":i[19]||(i[19]=u=>tt.value=u)},{default:I(()=>[B(Ce,{label:f(V)("setting.tabCode"),name:"Code"},{default:I(()=>[X.value.gameMode==="endless"?(A(),le(_e,{key:0,type:"primary",onClick:i[16]||(i[16]=u=>Q("master","endless"))},{default:I(()=>[oe(z(f(V)("setting.luaImportButton.endless")),1)]),_:1})):Ne("",!0),X.value.gameMode==="survival"?(A(),le(_e,{key:1,type:"primary",onClick:i[17]||(i[17]=u=>Q("master","survival"))},{default:I(()=>[oe(z(f(V)("setting.luaImportButton.survival")),1)]),_:1})):Ne("",!0),B(ne,{ref_key:"roomGroundFormRef",ref:Pe,"label-width":f(k)?"70":"100",model:Te.value,rules:ze,size:f(k)?"small":"large",style:{"margin-top":"10px"}},{default:I(()=>[B(m,{"label-position":"top",prop:"groundSetting"},{default:I(()=>[B(Ft,{ref_key:"editorGroundSettingRef",ref:ie,modelValue:Te.value.groundSetting,"onUpdate:modelValue":i[18]||(i[18]=u=>Te.value.groundSetting=u),height:f(k)?320:500,theme:ve.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),X.value.gameMode==="endless"||X.value.gameMode==="survival"?(A(),le(Ce,{key:0,label:f(V)("setting.tabVisualization"),name:"Visualization"},{default:I(()=>[B(q,{"content-position":"center"},{default:I(()=>[K("span",pn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),K("div",gn,[(A(!0),Z(Se,null,be(f(Ye).global,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",hn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),K("div",Tn,[(A(!0),Z(Se,null,be(f(Ye).events,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",yn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),K("div",_n,[(A(!0),Z(Se,null,be(f(Ye).survivors,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",kn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),K("div",Sn,[(A(!0),Z(Se,null,be(f(Ye).world,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",bn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),K("div",Ln,[(A(!0),Z(Se,null,be(f(Ye).resourceRegrowth,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",vn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),K("div",En,[(A(!0),Z(Se,null,be(f(Ye).unnaturalPortalResource,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Cn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),K("div",wn,[(A(!0),Z(Se,null,be(f(Ye).creatures,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Vn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),K("div",Fn,[(A(!0),Z(Se,null,be(f(Ye).hostileCreatures,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Bn,z(f(V)("setting.groundVisualizationRule")),1),oe(" - "+z(f(V)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),K("div",Gn,[(A(!0),Z(Se,null,be(f(Ye).giants,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Rn,z(f(V)("setting.groundVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),K("div",An,[(A(!0),Z(Se,null,be(f(dt).global,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",In,z(f(V)("setting.groundVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),K("div",Nn,[(A(!0),Z(Se,null,be(f(dt).world,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Un,z(f(V)("setting.groundVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),K("div",Pn,[(A(!0),Z(Se,null,be(f(dt).resources,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Dn,z(f(V)("setting.groundVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),K("div",$n,[(A(!0),Z(Se,null,be(f(dt).creaturesAndSpawners,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",On,z(f(V)("setting.groundVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),K("div",Mn,[(A(!0),Z(Se,null,be(f(dt).hostileCreaturesAndSpawners,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ce},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1},8,["label"])):Ne("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Ne("",!0),pe.value===2?(A(),le(e,{key:2,style:ut(f(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:I(()=>[B(O,{modelValue:Y.value,"onUpdate:modelValue":i[23]||(i[23]=u=>Y.value=u)},{default:I(()=>[B(Ce,{label:f(V)("setting.tabCode"),name:"Code"},{default:I(()=>[B(j,{closable:!1,effect:ve.value?"light":"dark",type:"success"},{default:I(()=>[oe(z(f(V)("setting.cavesTip")),1)]),_:1},8,["effect"]),K("div",xn,[X.value.gameMode==="endless"?(A(),le(_e,{key:0,type:"primary",onClick:i[20]||(i[20]=u=>Q("caves","endless"))},{default:I(()=>[oe(z(f(V)("setting.luaImportButton.endless")),1)]),_:1})):Ne("",!0),X.value.gameMode==="survival"?(A(),le(_e,{key:1,type:"primary",onClick:i[21]||(i[21]=u=>Q("caves","survival"))},{default:I(()=>[oe(z(f(V)("setting.luaImportButton.survival")),1)]),_:1})):Ne("",!0)]),B(ne,{ref_key:"roomCaveFormRef",ref:De,"label-width":f(k)?"70":"100",model:Ee.value,rules:qe,size:f(k)?"small":"large",style:{"margin-top":"10px"}},{default:I(()=>[B(m,{"label-position":"top",prop:"caveSetting"},{default:I(()=>[B(Ft,{ref_key:"editorCavesSettingRef",ref:me,modelValue:Ee.value.caveSetting,"onUpdate:modelValue":i[22]||(i[22]=u=>Ee.value.caveSetting=u),height:f(k)?320:500,theme:ve.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),X.value.gameMode==="endless"||X.value.gameMode==="survival"?(A(),le(Ce,{key:0,label:f(V)("setting.tabVisualization"),name:"Visualization"},{default:I(()=>[B(q,{"content-position":"center"},{default:I(()=>[K("span",zn,z(f(V)("setting.cavesVisualizationRule")),1),oe(" - "+z(f(V)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),K("div",qn,[(A(!0),Z(Se,null,be(f(ct).world,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Wn,z(f(V)("setting.cavesVisualizationRule")),1),oe(" - "+z(f(V)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),K("div",Kn,[(A(!0),Z(Se,null,be(f(ct).resourceRegrowth,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",jn,z(f(V)("setting.cavesVisualizationRule")),1),oe(" - "+z(f(V)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),K("div",Hn,[(A(!0),Z(Se,null,be(f(ct).creatures,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Jn,z(f(V)("setting.cavesVisualizationRule")),1),oe(" - "+z(f(V)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),K("div",Zn,[(A(!0),Z(Se,null,be(f(ct).hostileCreatures,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Xn,z(f(V)("setting.cavesVisualizationRule")),1),oe(" - "+z(f(V)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),K("div",Qn,[(A(!0),Z(Se,null,be(f(ct).giants,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",Yn,z(f(V)("setting.cavesVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),K("div",el,[(A(!0),Z(Se,null,be(f(yt).world,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(_t)[u].configs,customConfigsValue:f(_t)[u].customConfigsValue,i18n:f(_t)[u].i18n,image:f(_t)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",tl,z(f(V)("setting.cavesVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),K("div",nl,[(A(!0),Z(Se,null,be(f(yt).resources,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",ll,z(f(V)("setting.cavesVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),K("div",ol,[(A(!0),Z(Se,null,be(f(yt).creaturesAndSpawners,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),B(q,{"content-position":"center"},{default:I(()=>[K("span",al,z(f(V)("setting.cavesVisualizationGeneration")),1),oe(" - "+z(f(V)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),K("div",il,[(A(!0),Z(Se,null,be(f(yt).hostileCreaturesAndSpawners,u=>(A(),Z("div",null,[(A(),le(Le,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:f(G)[u].configs,customConfigsValue:f(G)[u].customConfigsValue,i18n:f(G)[u].i18n,image:f(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:x},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1},8,["label"])):Ne("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Ne("",!0),pe.value===3?(A(),le(e,{key:3,style:ut(f(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:I(()=>[B(ne,{ref_key:"roomModFormRef",ref:je,"label-width":f(k)?"70":"100",model:J.value,rules:te,size:f(k)?"small":"large"},{default:I(()=>[B(m,{"label-position":"top",prop:"modSetting"},{default:I(()=>[B(Ft,{ref:"editor",modelValue:J.value.modSetting,"onUpdate:modelValue":i[24]||(i[24]=u=>J.value.modSetting=u),height:f(k)?320:500,theme:ve.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["style"])):Ne("",!0),pe.value===4?(A(),le(e,{key:4,style:ut(f(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:I(()=>[K("div",{style:ut(f(k)?"min-height: 360px":"min-height: 560px"),class:"fcc"},[B(ge,{"sub-title":o.$t("setting.finish.description"),title:o.$t("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1},8,["style"])):Ne("",!0)]),_:1})]),_:1}),B(p,{gutter:10},{default:I(()=>[B(h,{lg:24,md:24,sm:24,span:24,xs:24},{default:I(()=>[B(e,{shadow:"never"},{default:I(()=>[K("div",rl,[pe.value>0?(A(),le(_e,{key:0,onClick:Ke},{default:I(()=>[oe(z(f(V)("setting.button.prev")),1)]),_:1})):Ne("",!0),pe.value<4?(A(),le(_e,{key:1,type:"primary",onClick:at},{default:I(()=>[oe(z(f(V)("setting.button.next")),1)]),_:1})):Ne("",!0),pe.value===4?(A(),le(ft,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:et},{dropdown:I(()=>[B(xe,null,{default:I(()=>[B(Ie,{command:"save"},{default:I(()=>[oe(z(f(V)("setting.button.save")),1)]),_:1}),B(Ie,{command:"saveAndRestart"},{default:I(()=>[oe(z(f(V)("setting.button.saveAndRestart")),1)]),_:1}),B(Ie,{command:"generateNewWorld"},{default:I(()=>[oe(z(f(V)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:I(()=>[B(_e,{loading:de.value,type:"warning"},{default:I(()=>[oe(z(f(V)("setting.button.actions"))+" ",1),B(Ze,{class:"el-icon--right"},{default:I(()=>[B(st)]),_:1})]),_:1},8,["loading"])]),_:1})):Ne("",!0)])]),_:1})]),_:1})]),_:1})])}}}),pl=nn(sl,[["__scopeId","data-v-a12a4c9d"]]);export{pl as default};
