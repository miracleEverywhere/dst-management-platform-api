import{ab as Ft,ac as an,_ as on,u as rn,o as un,r as we,a as sn,g as dn,b as fn,c as At,G as cn,H as pn,d as mn,I as gn,a2 as pt,R as hn,w as Tn,J as mt,K as Se,f as U,i as Z,k as E,l as G,j as a,n as ue,m as K,t as z,z as Xe,v as He,q as re,ad as Dt,F as _e,y as Le,D as tt,B as Bt}from"./index-DH5-y-Tx.js";import{s as $t}from"./index-CfyRaEnI.js";import{g as ut,_ as Ce,o as B,a as ht,c as Tt,b as bt,d as yt}from"./levelDataSetting-C3Zt8InH.js";import{M as yn}from"./preview-4hztcKgM.js";var Lt={exports:{}};Lt.exports;(function(nt,v){(function(de,w,P){var ge=v&&!v.nodeType&&v,fe=nt&&!nt.nodeType&&nt,me=ge&&fe&&typeof Ft=="object"&&Ft,ve=fe&&fe.exports===ge&&ge;me&&(me.global===me||me.window===me||me.self===me)&&(de=me),P(ge&&fe?ve?fe.exports:ge:de[w]={})})(Ft,"luaparse",function(de){de.version="0.3.1";var w,P,ge,fe,me,ve=de.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function st(n,o){return o=o||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(o|192|n>>6,o|128|n&63):n<65536?String.fromCharCode(o|224|n>>12,o|128|n>>6&63,o|128|n&63):n<1114112?String.fromCharCode(o|240|n>>18,o|128|n>>12&63,o|128|n>>6&63,o|128|n&63):null}function Fe(n,o){for(var _=n.toString(16);_.length<o;)_="0"+_;return _}function lt(n){return function(o){var _=n.exec(o);if(!_)return o;te(null,oe.invalidCodeUnit,Fe(_[0].charCodeAt(0),4).toUpperCase())}}var ct={"pseudo-latin1":{fixup:lt(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return st(n)}},"x-user-defined":{fixup:lt(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return st(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},Qe=1,qe=2,Ke=4,Ne=8,Je=16,xe=32,at=64,je=128,ke=256;de.tokenTypes={EOF:Qe,StringLiteral:qe,Keyword:Ke,Identifier:Ne,NumericLiteral:Je,Punctuator:xe,BooleanLiteral:at,NilLiteral:je,VarargLiteral:ke};var oe=de.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},ee=de.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,o){return{type:"IfClause",condition:n,body:o}},elseifClause:function(n,o){return{type:"ElseifClause",condition:n,body:o}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,o){return{type:"WhileStatement",condition:n,body:o}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,o){return{type:"RepeatStatement",condition:n,body:o}},localStatement:function(n,o){return{type:"LocalStatement",variables:n,init:o}},assignmentStatement:function(n,o){return{type:"AssignmentStatement",variables:n,init:o}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,o,_,A){return{type:"FunctionDeclaration",identifier:n,isLocal:_,parameters:o,body:A}},forNumericStatement:function(n,o,_,A,$){return{type:"ForNumericStatement",variable:n,start:o,end:_,step:A,body:$}},forGenericStatement:function(n,o,_){return{type:"ForGenericStatement",variables:n,iterators:o,body:_}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,o,_){return n=n===qe?"StringLiteral":n===Je?"NumericLiteral":n===at?"BooleanLiteral":n===je?"NilLiteral":"VarargLiteral",{type:n,value:o,raw:_}},tableKey:function(n,o){return{type:"TableKey",key:n,value:o}},tableKeyString:function(n,o){return{type:"TableKeyString",key:n,value:o}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,o,_){var A=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:A,operator:n,left:o,right:_}},unaryExpression:function(n,o){return{type:"UnaryExpression",operator:n,argument:o}},memberExpression:function(n,o,_){return{type:"MemberExpression",indexer:o,identifier:_,base:n}},indexExpression:function(n,o){return{type:"IndexExpression",base:n,index:o}},callExpression:function(n,o){return{type:"CallExpression",base:n,arguments:o}},tableCallExpression:function(n,o){return{type:"TableCallExpression",base:n,arguments:o}},stringCallExpression:function(n,o){return{type:"StringCallExpression",base:n,argument:o}},comment:function(n,o){return{type:"Comment",value:n,raw:o}}};function le(n){if(I){var o=N.pop();o.complete(),o.bless(n)}return P.onCreateNode&&P.onCreateNode(n),n}var Ye=Array.prototype.slice,ot=function(n,o){for(var _=0,A=n.length;_<A;++_)if(n[_]===o)return _;return-1};Array.prototype.indexOf&&(ot=function(n,o){return n.indexOf(o)});function ie(n,o,_){for(var A=0,$=n.length;A<$;++A)if(n[A][o]===_)return A;return-1}function rt(n){var o=Ye.call(arguments,1);return n=n.replace(/%(\d)/g,function(_,A){return""+o[A-1]||""}),n}var Re=function(n){for(var o=Ye.call(arguments,1),_,A,$=0,se=o.length;$<se;++$){_=o[$];for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&(n[A]=_[A])}return n};Object.assign&&(Re=Object.assign),de.SyntaxError=SyntaxError;function it(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function te(n){var o=rt.apply(null,Ye.call(arguments,1)),_,A;throw n===null||typeof n.line>"u"?(A=T-s+1,_=it(new SyntaxError(rt("[%1:%2] %3",d,A,o))),_.index=T,_.line=d,_.column=A):(A=n.range[0]-n.lineStart,_=it(new SyntaxError(rt("[%1:%2] %3",n.line,A,o))),_.line=n.line,_.index=n.range[0],_.column=A),_}function Te(n){var o=w.slice(n.range[0],n.range[1]);return o||n.value}function De(n,o){te(o,oe.expectedToken,n,Te(o))}function et(n){var o=Te($e);if(typeof n.type<"u"){var _;switch(n.type){case qe:_="string";break;case Ke:_="keyword";break;case Ne:_="identifier";break;case Je:_="number";break;case xe:_="symbol";break;case at:_="boolean";break;case je:return te(n,oe.unexpected,"symbol","nil",o);case Qe:return te(n,oe.unexpectedEOF)}return te(n,oe.unexpected,_,Te(n),o)}return te(n,oe.unexpected,"symbol",n,o)}var T,F,Ie,$e,J,b,d,s;de.lex=g;function g(){for(e();w.charCodeAt(T)===45&&w.charCodeAt(T+1)===45;)Ee(),e();if(T>=ge)return{type:Qe,value:"<eof>",line:d,lineStart:s,range:[T,T]};var n=w.charCodeAt(T),o=w.charCodeAt(T+1);if(b=T,ze(n))return y();switch(n){case 39:case 34:return p();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t();case 46:return ye(o)?t():o===46?w.charCodeAt(T+2)===46?c():f(".."):f(".");case 61:return f(o===61?"==":"=");case 62:return fe.bitwiseOperators&&o===62?f(">>"):f(o===61?">=":">");case 60:return fe.bitwiseOperators&&o===60?f("<<"):f(o===61?"<=":"<");case 126:if(o===61)return f("~=");if(!fe.bitwiseOperators)break;return f("~");case 58:return fe.labels&&o===58?f("::"):f(":");case 91:return o===91||o===61?L():f("[");case 47:return fe.integerDivision&&o===47?f("//"):f("/");case 38:case 124:if(!fe.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return f(w.charAt(T))}return et(w.charAt(T))}function m(){var n=w.charCodeAt(T),o=w.charCodeAt(T+1);return ce(n)?(n===10&&o===13&&++T,n===13&&o===10&&++T,++d,s=++T,!0):!1}function e(){for(;T<ge;){var n=w.charCodeAt(T);if(Y(n))++T;else if(!m())break}}function y(){for(var n,o;Ge(w.charCodeAt(++T)););return n=me.fixup(w.slice(b,T)),be(n)?o=Ke:n==="true"||n==="false"?(o=at,n=n==="true"):n==="nil"?(o=je,n=null):o=Ne,{type:o,value:n,line:d,lineStart:s,range:[b,T]}}function f(n){return T+=n.length,{type:xe,value:n,line:d,lineStart:s,range:[b,T]}}function c(){return T+=3,{type:ke,value:"...",line:d,lineStart:s,range:[b,T]}}function p(){for(var n=w.charCodeAt(T++),o=d,_=s,A=T,$=me.discardStrings?null:"",se;se=w.charCodeAt(T++),n!==se;)if((T>ge||ce(se))&&($+=w.slice(A,T-1),te(null,oe.unfinishedString,w.slice(b,T-1))),se===92){if(!me.discardStrings){var he=w.slice(A,T-1);$+=me.fixup(he)}var Me=ne();me.discardStrings||($+=Me),A=T}return me.discardStrings||($+=me.encodeByte(null),$+=me.fixup(w.slice(A,T-1))),{type:qe,value:$,line:o,lineStart:_,lastLine:d,lastLineStart:s,range:[b,T]}}function L(){var n=d,o=s,_=Pe(!1);return _===!1&&te(F,oe.expected,"[",Te(F)),{type:qe,value:me.discardStrings?null:me.fixup(_),line:n,lineStart:o,lastLine:d,lastLineStart:s,range:[b,T]}}function t(){var n=w.charAt(T),o=w.charAt(T+1),_=n==="0"&&"xX".indexOf(o||null)>=0?u():M(),A=l(),$=i();return $&&(A||_.hasFractionPart)&&te(null,oe.malformedNumber,w.slice(b,T)),{type:Je,value:_.value,line:d,lineStart:s,range:[b,T]}}function l(){if(fe.imaginaryNumbers)return"iI".indexOf(w.charAt(T)||null)>=0?(++T,!0):!1}function i(){if(fe.integerSuffixes){if("uU".indexOf(w.charAt(T)||null)>=0)if(++T,"lL".indexOf(w.charAt(T)||null)>=0){if(++T,"lL".indexOf(w.charAt(T)||null)>=0)return++T,"ULL";te(null,oe.malformedNumber,w.slice(b,T))}else te(null,oe.malformedNumber,w.slice(b,T));else if("lL".indexOf(w.charAt(T)||null)>=0){if(++T,"lL".indexOf(w.charAt(T)||null)>=0)return++T,"LL";te(null,oe.malformedNumber,w.slice(b,T))}}}function u(){var n=0,o=1,_=1,A,$,se,he;for(he=T+=2,Ve(w.charCodeAt(T))||te(null,oe.malformedNumber,w.slice(b,T));Ve(w.charCodeAt(T));)++T;A=parseInt(w.slice(he,T),16);var Me=!1;if(w.charAt(T)==="."){for(Me=!0,$=++T;Ve(w.charCodeAt(T));)++T;n=w.slice($,T),n=$===T?0:parseInt(n,16)/Math.pow(16,T-$)}var kt=!1;if("pP".indexOf(w.charAt(T)||null)>=0){for(kt=!0,++T,"+-".indexOf(w.charAt(T)||null)>=0&&(_=w.charAt(T++)==="+"?1:-1),se=T,ye(w.charCodeAt(T))||te(null,oe.malformedNumber,w.slice(b,T));ye(w.charCodeAt(T));)++T;o=w.slice(se,T),o=Math.pow(2,o*_)}return{value:(A+n)*o,hasFractionPart:Me||kt}}function M(){for(;ye(w.charCodeAt(T));)++T;var n=!1;if(w.charAt(T)===".")for(n=!0,++T;ye(w.charCodeAt(T));)++T;var o=!1;if("eE".indexOf(w.charAt(T)||null)>=0)for(o=!0,++T,"+-".indexOf(w.charAt(T)||null)>=0&&++T,ye(w.charCodeAt(T))||te(null,oe.malformedNumber,w.slice(b,T));ye(w.charCodeAt(T));)++T;return{value:parseFloat(w.slice(b,T)),hasFractionPart:n||o}}function X(){var n=T++;for(w.charAt(T++)!=="{"&&te(null,oe.braceExpected,"{","\\"+w.slice(n,T)),Ve(w.charCodeAt(T))||te(null,oe.hexadecimalDigitExpected,"\\"+w.slice(n,T));w.charCodeAt(T)===48;)++T;for(var o=T;Ve(w.charCodeAt(T));)++T,T-o>6&&te(null,oe.tooLargeCodepoint,"\\"+w.slice(n,T));var _=w.charAt(T++);_!=="}"&&(_==='"'||_==="'"?te(null,oe.braceExpected,"}","\\"+w.slice(n,T--)):te(null,oe.hexadecimalDigitExpected,"\\"+w.slice(n,T)));var A=parseInt(w.slice(o,T-1)||"0",16),$="\\"+w.slice(n,T);return A>1114111&&te(null,oe.tooLargeCodepoint,$),me.encodeUTF8(A,$)}function ne(){var n=T;switch(w.charAt(T)){case"a":return++T,"\x07";case"n":return++T,`
`;case"r":return++T,"\r";case"t":return++T,"	";case"v":return++T,"\v";case"b":return++T,"\b";case"f":return++T,"\f";case"\r":case`
`:return m(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;ye(w.charCodeAt(T))&&T-n<3;)++T;var o=w.slice(n,T),_=parseInt(o,10);return _>255&&te(null,oe.decimalEscapeTooLarge,"\\"+_),me.encodeByte(_,"\\"+o);case"z":if(fe.skipWhitespaceEscape)return++T,e(),"";break;case"x":if(fe.hexEscapes){if(Ve(w.charCodeAt(T+1))&&Ve(w.charCodeAt(T+2)))return T+=3,me.encodeByte(parseInt(w.slice(n+1,T),16),"\\"+w.slice(n,T));te(null,oe.hexadecimalDigitExpected,"\\"+w.slice(n,T+2))}break;case"u":if(fe.unicodeEscapes)return X();break;case"\\":case'"':case"'":return w.charAt(T++)}return fe.strictEscapes&&te(null,oe.invalidEscape,"\\"+w.slice(n,T+1)),w.charAt(T++)}function Ee(){b=T,T+=2;var n=w.charAt(T),o="",_=!1,A=T,$=s,se=d;if(n==="["&&(o=Pe(!0),o===!1?o=n:_=!0),!_){for(;T<ge&&!ce(w.charCodeAt(T));)++T;P.comments&&(o=w.slice(A,T))}if(P.comments){var he=ee.comment(o,w.slice(b,T));P.locations&&(he.loc={start:{line:se,column:b-$},end:{line:d,column:T-s}}),P.ranges&&(he.range=[b,T]),P.onCreateNode&&P.onCreateNode(he),J.push(he)}}function Pe(n){var o=0,_="",A=!1,$,se,he=d;for(++T;w.charAt(T+o)==="=";)++o;if(w.charAt(T+o)!=="[")return!1;for(T+=o+1,ce(w.charCodeAt(T))&&m(),se=T;T<ge;){for(;ce(w.charCodeAt(T));)m();if($=w.charAt(T++),$==="]"){A=!0;for(var Me=0;Me<o;++Me)w.charAt(T+Me)!=="="&&(A=!1);w.charAt(T+o)!=="]"&&(A=!1)}if(A)return _+=w.slice(se,T-1),T+=o+1,_}te(null,n?oe.unfinishedLongComment:oe.unfinishedLongString,he,"<eof>")}function j(){Ie=F,F=$e,$e=g()}function h(n){return n===F.value?(j(),!0):!1}function k(n){n===F.value?j():te(F,oe.expected,n,Te(F))}function Y(n){return n===9||n===32||n===11||n===12}function ce(n){return n===10||n===13}function ye(n){return n>=48&&n<=57}function Ve(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ze(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||fe.extendedIdentifiers&&n>=128)}function Ge(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||fe.extendedIdentifiers&&n>=128)}function be(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:fe.labels&&!fe.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function dt(n){return xe===n.type?"#-~".indexOf(n.value)>=0:Ke===n.type?n.value==="not":!1}function gt(n){if(Qe===n.type)return!0;if(Ke!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var We,Ze,ft;function Ae(){var n=We[Ze++].slice();We.push(n),P.onCreateScope&&P.onCreateScope()}function C(){We.pop(),--Ze,P.onDestroyScope&&P.onDestroyScope()}function R(n){P.onLocalDeclaration&&P.onLocalDeclaration(n),ot(We[Ze],n)===-1&&We[Ze].push(n)}function V(n){R(n.name),S(n,!0)}function S(n,o){!o&&ie(ft,"name",n.name)===-1&&ft.push(n),n.isLocal=o}function x(n){return ot(We[Ze],n)!==-1}var N=[],I;function W(){return new O(F)}function O(n){P.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),P.ranges&&(this.range=[n.range[0],0])}O.prototype.complete=function(){P.locations&&(this.loc.end.line=Ie.lastLine||Ie.line,this.loc.end.column=Ie.range[1]-(Ie.lastLineStart||Ie.lineStart)),P.ranges&&(this.range[1]=Ie.range[1])},O.prototype.bless=function(n){if(this.loc){var o=this.loc;n.loc={start:{line:o.start.line,column:o.start.column},end:{line:o.end.line,column:o.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function ae(){I&&N.push(W())}function Q(n){I&&N.push(n)}function pe(){this.scopes=[],this.pendingGotos=[]}pe.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},pe.prototype.pushScope=function(n){var o={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(o)},pe.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var o=this.pendingGotos[n];o.maxDepth>=this.scopes.length&&--o.maxDepth<=0&&te(o.token,oe.labelNotVisible,o.target)}this.scopes.pop()},pe.prototype.addGoto=function(n,o){for(var _=[],A=0;A<this.scopes.length;++A){var $=this.scopes[A];if(_.push($.locals.length),Object.prototype.hasOwnProperty.call($.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:o,localCounts:_})},pe.prototype.addLabel=function(n,o){var _=this.currentScope();if(Object.prototype.hasOwnProperty.call(_.labels,n))te(o,oe.labelAlreadyDefined,n,_.labels[n].line);else{for(var A=[],$=0;$<this.pendingGotos.length;++$){var se=this.pendingGotos[$];if(se.maxDepth>=this.scopes.length&&se.target===n){se.localCounts[this.scopes.length-1]<_.locals.length&&_.deferredGotos.push(se);continue}A.push(se)}this.pendingGotos=A}_.labels[n]={localCount:_.locals.length,line:o.line}},pe.prototype.addLocal=function(n,o){this.currentScope().locals.push({name:n,token:o})},pe.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},pe.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),o=n.deferredGotos,_=0;_<o.length;++_){var A=o[_];te(A.token,oe.gotoJumpInLocalScope,A.target,n.locals[A.localCounts[this.scopes.length-1]].name)}};function D(){this.level=0,this.loopLevels=[]}D.prototype.isInLoop=function(){return!!this.loopLevels.length},D.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},D.prototype.popScope=function(){var n=this.loopLevels,o=n.length;o&&n[o-1]===this.level&&n.pop(),--this.level},D.prototype.addGoto=D.prototype.addLabel=function(){throw new Error("This should never happen")},D.prototype.addLocal=D.prototype.raiseDeferredErrors=function(){};function r(){return fe.labels?new pe:new D}function H(){j(),ae(),P.scope&&Ae();var n=r();n.allowVararg=!0,n.pushScope();var o=q(n);return n.popScope(),P.scope&&C(),Qe!==F.type&&et(F),I&&!o.length&&(Ie=F),le(ee.chunk(o))}function q(n){for(var o=[],_;!gt(F);){if(F.value==="return"||!fe.relaxedBreak&&F.value==="break"){o.push(Ue(n));break}_=Ue(n),h(";"),_&&o.push(_)}return o}function Ue(n){if(ae(),xe===F.type&&h("::"))return zt(n);if(fe.emptyStatement&&h(";")){I&&N.pop();return}if(n.raiseDeferredErrors(),Ke===F.type)switch(F.value){case"local":return j(),Xt(n);case"if":return j(),Yt(n);case"return":return j(),Jt(n);case"function":j();var o=en();return Vt(o);case"while":return j(),jt(n);case"for":return j(),Zt(n);case"repeat":return j(),Ht(n);case"break":return j(),n.isInLoop()||te(F,oe.noLoopToBreak,F.value),qt();case"do":return j(),Kt(n);case"goto":return j(),Rt(n)}return fe.contextualGoto&&F.type===Ne&&F.value==="goto"&&$e.type===Ne&&$e.value!=="goto"?(j(),Rt(n)):(I&&N.pop(),Qt(n))}function zt(n){var o=F,_=Oe();return P.scope&&(R("::"+o.value+"::"),S(_,!0)),k("::"),n.addLabel(o.value,o),le(ee.labelStatement(_))}function qt(){return le(ee.breakStatement())}function Rt(n){var o=F.value,_=Ie,A=Oe();return n.addGoto(o,_),le(ee.gotoStatement(A))}function Kt(n){P.scope&&Ae(),n.pushScope();var o=q(n);return n.popScope(),P.scope&&C(),k("end"),le(ee.doStatement(o))}function jt(n){var o=Be(n);k("do"),P.scope&&Ae(),n.pushScope(!0);var _=q(n);return n.popScope(),P.scope&&C(),k("end"),le(ee.whileStatement(o,_))}function Ht(n){P.scope&&Ae(),n.pushScope(!0);var o=q(n);k("until"),n.raiseDeferredErrors();var _=Be(n);return n.popScope(),P.scope&&C(),le(ee.repeatStatement(_,o))}function Jt(n){var o=[];if(F.value!=="end"){var _=_t(n);for(_!=null&&o.push(_);h(",");)_=Be(n),o.push(_);h(";")}return le(ee.returnStatement(o))}function Yt(n){var o=[],_,A,$;for(I&&($=N[N.length-1],N.push($)),_=Be(n),k("then"),P.scope&&Ae(),n.pushScope(),A=q(n),n.popScope(),P.scope&&C(),o.push(le(ee.ifClause(_,A))),I&&($=W());h("elseif");)Q($),_=Be(n),k("then"),P.scope&&Ae(),n.pushScope(),A=q(n),n.popScope(),P.scope&&C(),o.push(le(ee.elseifClause(_,A))),I&&($=W());return h("else")&&(I&&($=new O(Ie),N.push($)),P.scope&&Ae(),n.pushScope(),A=q(n),n.popScope(),P.scope&&C(),o.push(le(ee.elseClause(A)))),k("end"),le(ee.ifStatement(o))}function Zt(n){var o=Oe(),_;if(P.scope&&(Ae(),V(o)),h("=")){var A=Be(n);k(",");var $=Be(n),se=h(",")?Be(n):null;return k("do"),n.pushScope(!0),_=q(n),n.popScope(),k("end"),P.scope&&C(),le(ee.forNumericStatement(o,A,$,se,_))}else{for(var he=[o];h(",");)o=Oe(),P.scope&&V(o),he.push(o);k("in");var Me=[];do{var kt=Be(n);Me.push(kt)}while(h(","));return k("do"),n.pushScope(!0),_=q(n),n.popScope(),k("end"),P.scope&&C(),le(ee.forGenericStatement(he,Me,_))}}function Xt(n){var o,_=Ie;if(Ne===F.type){var A=[],$=[];do o=Oe(),A.push(o),n.addLocal(o.name,_);while(h(","));if(h("="))do{var se=Be(n);$.push(se)}while(h(","));if(P.scope)for(var he=0,Me=A.length;he<Me;++he)V(A[he]);return le(ee.localStatement(A,$))}if(h("function"))return o=Oe(),n.addLocal(o.name,_),P.scope&&(V(o),Ae()),Vt(o,!0);De("<name>",F)}function Qt(n){var o,_,A,$,se,he=[];I&&(_=W());do{if(I&&(o=W()),Ne===F.type)se=F.value,$=Oe(),P.scope&&S($,x(se)),A=!0;else if(F.value==="(")j(),$=Be(n),k(")"),A=!1;else return et(F);e:for(;;){switch(qe===F.type?'"':F.value){case".":case"[":A=!0;break;case":":case"(":case"{":case'"':A=null;break;default:break e}$=Pt($,o,n)}if(he.push($),F.value!==",")break;if(!A)return et(F);j()}while(!0);if(he.length===1&&A===null)return Q(o),le(ee.callStatement(he[0]));if(!A)return et(F);k("=");var Me=[];do Me.push(Be(n));while(h(","));return Q(_),le(ee.assignmentStatement(he,Me))}function Oe(){ae();var n=F.value;return Ne!==F.type&&De("<name>",F),j(),le(ee.identifier(n))}function Vt(n,o){var _=r();_.pushScope();var A=[];if(k("("),!h(")"))for(;;){if(Ne===F.type){var $=Oe();if(P.scope&&V($),A.push($),h(","))continue}else ke===F.type?(_.allowVararg=!0,A.push(wt(_))):De("<name> or '...'",F);k(")");break}var se=q(_);return _.popScope(),k("end"),P.scope&&C(),o=o||!1,le(ee.functionStatement(n,A,o,se))}function en(){var n,o,_;for(I&&(_=W()),n=Oe(),P.scope&&(S(n,x(n.name)),Ae());h(".");)Q(_),o=Oe(),n=le(ee.memberExpression(n,".",o));return h(":")&&(Q(_),o=Oe(),n=le(ee.memberExpression(n,":",o)),P.scope&&R("self")),n}function It(n){for(var o=[],_,A;;){if(ae(),xe===F.type&&h("["))_=Be(n),k("]"),k("="),A=Be(n),o.push(le(ee.tableKey(_,A)));else if(Ne===F.type)$e.value==="="?(_=Oe(),j(),A=Be(n),o.push(le(ee.tableKeyString(_,A)))):(A=Be(n),o.push(le(ee.tableValue(A))));else{if((A=_t(n))==null){N.pop();break}o.push(le(ee.tableValue(A)))}if(",;".indexOf(F.value)>=0){j();continue}break}return k("}"),le(ee.tableConstructorExpression(o))}function _t(n){var o=Ct(0,n);return o}function Be(n){var o=_t(n);if(o==null)De("<expression>",F);else return o}function tn(n){var o=n.charCodeAt(0),_=n.length;if(_===1)switch(o){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(_===2)switch(o){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(o===97&&n==="and")return 2;return 0}function Ct(n,o){var _=F.value,A,$;if(I&&($=W()),dt(F)){ae(),j();var se=Ct(10,o);se==null&&De("<expression>",F),A=le(ee.unaryExpression(_,se))}if(A==null&&(A=wt(o),A==null&&(A=nn(o))),A==null)return null;for(var he;_=F.value,he=xe===F.type||Ke===F.type?tn(_):0,!(he===0||he<=n);){(_==="^"||_==="..")&&--he,j();var Me=Ct(he,o);Me==null&&De("<expression>",F),I&&N.push($),A=le(ee.binaryExpression(_,A,Me))}return A}function Pt(n,o,_){var A,$;if(xe===F.type)switch(F.value){case"[":return Q(o),j(),A=Be(_),k("]"),le(ee.indexExpression(n,A));case".":return Q(o),j(),$=Oe(),le(ee.memberExpression(n,".",$));case":":return Q(o),j(),$=Oe(),n=le(ee.memberExpression(n,":",$)),Q(o),Et(n,_);case"(":case"{":return Q(o),Et(n,_)}else if(qe===F.type)return Q(o),Et(n,_);return null}function nn(n){var o,_,A;if(I&&(A=W()),Ne===F.type)_=F.value,o=Oe(),P.scope&&S(o,x(_));else if(h("("))o=Be(n),k(")");else return null;for(;;){var $=Pt(o,A,n);if($===null)break;o=$}return o}function Et(n,o){if(xe===F.type)switch(F.value){case"(":fe.emptyStatement||F.line!==Ie.line&&te(null,oe.ambiguousSyntax,F.value),j();var _=[],A=_t(o);for(A!=null&&_.push(A);h(",");)A=Be(o),_.push(A);return k(")"),le(ee.callExpression(n,_));case"{":ae(),j();var $=It(o);return le(ee.tableCallExpression(n,$))}else if(qe===F.type)return le(ee.stringCallExpression(n,wt(o)));De("function arguments",F)}function wt(n){var o=qe|Je|at|je|ke,_=F.value,A=F.type,$;if(I&&($=W()),A===ke&&!n.allowVararg&&te(F,oe.cannotUseVararg,F.value),A&o){Q($);var se=w.slice(F.range[0],F.range[1]);return j(),le(ee.literal(A,_,se))}else{if(Ke===A&&_==="function")return Q($),j(),P.scope&&Ae(),Vt(null);if(h("{"))return Q($),It(n)}}de.parse=ln;var xt={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function ln(n,o){if(typeof o>"u"&&typeof n=="object"&&(o=n,n=void 0),o||(o={}),w=n||"",P=Re({},ve,o),T=0,d=1,s=0,ge=w.length,We=[[]],Ze=0,ft=[],N=[],!Object.prototype.hasOwnProperty.call(xt,P.luaVersion))throw new Error(rt("Lua version '%1' not supported",P.luaVersion));if(fe=Re({},xt[P.luaVersion]),P.extendedIdentifiers!==void 0&&(fe.extendedIdentifiers=!!P.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(ct,P.encodingMode))throw new Error(rt("Encoding mode '%1' not supported",P.encodingMode));return me=ct[P.encodingMode],P.comments&&(J=[]),P.wait?de:Nt()}de.write=Ut;function Ut(n){return w+=String(n),ge=w.length,de}de.end=Nt;function Nt(n){typeof n<"u"&&Ut(n),w&&w.substr(0,2)==="#!"&&(w=w.replace(/^.*/,function(_){return _.replace(/./g," ")})),ge=w.length,I=P.locations||P.ranges,$e=g();var o=H();if(P.comments&&(o.comments=J),P.scope&&(o.globals=ft),N.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return o}})})(Lt,Lt.exports);var _n=Lt.exports;const St=an(_n);var vt={},Mt={exports:{}};Mt.exports;(function(nt){function v(J){for(var b=0,d=J.length;d--;)b+=J.charCodeAt(d),b+=b<<10,b^=b>>6;return b+=b<<3,b^=b>>11,b+=b<<15,b}const de=console.log,w=function(J,b){if(!J)throw b};function P(J,b){if(!J)return 0;var d=J.toString().split(".");return d.length>1?parseInt(d[0],b)+parseInt(d[1],b)/Math.pow(b,d[1].length):parseInt(d[0],b)}let ge=[" ",`
`,"	","\r"],fe={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const me=new Proxy(fe,{get(J,b){return P(b)}});let ve=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],st=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Fe=["0","1","2","3","4","5","6","7","8","9"],lt=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],ct=["0","1"],Qe=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],qe=["~","=",">","<"],Ke=["+","-","*","/","^","..","%","//"],Ne=["+=","-=","*=","/=","^=","..=","%=","//="],Je=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],xe=["else","elseif","until","end"],at=["-","not","#","~"],je=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],ke=11,oe={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function ee(J){let b=0,d=J.length,s=[];function g(t){return t=t||0,b<=d?J.substr(b+t,1):""}function m(){if(b<=d){let t=J.substr(b,1);return b++,t}else return""}function e(t){let l=0,i=1,u=1;for(;l<=b;)J.substr(l,1)==`
`?(i++,u=1):u++;let M;for(M=0;M<s.length;M++){let X=s[M];de(`${X.Type}<${X.Source}>`)}throw`file<${i}:${u}>: ${t}`}function y(t){for(;;){let l=m();if(l=="")e("Unfinished long string.");else if(l=="]"){let i=!0,u;for(u=1;u<=t;u++)if(g()=="=")b++;else{i=!1;break}if(i&&m()=="]")return}}}function f(){let t=b;for(;g()=="=";)b++;if(g()=="[")return b++,b-t-1;b=t}let c=0,p=0;function L(t){let l=J.substr(p,b-p),i=null;t=="Number"&&(l.substr(0,2).toLowerCase()=="0x"?(i="hex",parseInt(l,16)<999999999999&&(l=parseInt(l,16))):l.substr(0,2).toLowerCase()=="0b"&&(i="bin",parseInt(l.substr(2),2)<999999999999&&(l=parseInt(l.substr(2),2))));let u={Type:t,LeadingWhite:J.substr(c,p-c),Source:l};return i!==null&&(u.NType=i),s.push(u),c=b,p=b,u}for(;;){for(c=b;;){let l=g();if(l=="")break;if(l=="-")if(g(1)=="-")if(b+=2,g()=="["){b++;let i=f();if(i!=null)y(i),c=b;else for(;;){let u=m();if(u==""||u==`
`)break}}else for(;;){let i=m();if(i==""||i==`
`)break}else break;else if(ge.includes(l))b++;else break}J.substr(c,b-c),p=b;let t=m();if(t==""){L("Eof");break}else if(t=="'"||t=='"'){for(;;){let l=m();if(l=="\\"){let i=m();if(me[i]==null)throw`Invalid Escape Sequence \`${i}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}L("String")}else if(t=="`"){for(;;){let l=m();if(l=="\\"){let i=m();if(me[i]==null)throw`Invalid Escape Sequence \`${i}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}L("Hash")}else if(ve.includes(t)){for(;st.includes(g());)b++;Je.includes(J.substr(p,b-p))?L("Keyword"):L("Ident")}else if(Fe.includes(t)||t=="."&&Fe.includes(g())){if(t=="0"&&g().toLowerCase()=="x")for(b++;lt.includes(g())||g()==="_";)b++;else if(t=="0"&&g().toLowerCase()=="b")for(b++;ct.includes(g())||g()==="_";)b++;else{for(;Fe.includes(g())||g()==="_";)b++;if(g()==".")for(b++;Fe.includes(g());)b++;if(g()=="e"||g()=="E")for(b++,(g()=="-"||g()=="+")&&b++;Fe.includes(g());)b++}L("Number")}else if(t=="["){let l=f();l!=null?(y(l),L("String")):L("Symbol")}else if(t==".")g()=="."&&(m(),(g()=="."||g()=="=")&&m()),L("Symbol");else if(t+g()=="//")m(),g()=="="&&m(),L("Symbol");else if(t+g()=="::")m(),L("Symbol");else if(je.includes(t+g()))m(),L("Symbol");else if(qe.includes(t))g()=="="&&b++,L("Symbol");else if(Ke.includes(t)&&g()=="=")m(),L("Symbol");else if(Qe.includes(t))L("Symbol");else throw`Bad symbol \`${t}\` in source. ${b}`}return s}function le(J){let b=ee(J),d=0;function s(){let C=b[d];return d<b.length&&d++,C}function g(C){return C=d+(C||0),b[C]||b[b.length-1]}function m(C){let R=1,V=0,S=0;for(;;){let x=b[S],N;x==C?N=x.LeadingWhite:N=x.LeadingWhite+x.Source;let I;for(I=0;I<=N.length;I++)N.substr(I,1)==`
`?(R++,V=0):V++;if(x==C)break;S++}return`${R}:${V+1}`}function e(){let C=g();return`<${C.Type} \`${C.Source}\`> at: ${m(C)}`}function y(){let C=g();return C.Type=="Eof"||C.Type=="Keyword"&&xe.includes(C.Source)}function f(){return at.includes(g().Source)||!1}function c(){return je.includes(g().Source)||!1}function p(C,R){let V=g();if(V.Type==C&&(R==null||V.Source==R))return s();{let S;for(S=-3;S<=3;S++)de(`Tokens[${S}] = \`${g(S).Source}\``);throw R?`${m(V)}: \`${R}\` expected.`:`${m(V)}: ${C} expected.`}}function L(C){let R=C.GetFirstToken,V=C.GetLastToken,S=C;return C.GetFirstToken=function(){let x=R(S);return w(x),x},C.GetLastToken=function(){let x=V(S);return w(x),x},C}let t,l;function i(C,R){let V=[l(C,R)],S=[];for(;g().Source==",";)S.push(s()),V.push(l(C,R));return[V,S]}function u(C,R){var S,x,N,I;let V=g();if(V.Source=="("){let W=s(),O=l(C,R),ae=p("Symbol",")"),Q;return Q=L({Type:"ParenExpr",Expression:O,Token_OpenParen:W,Token_CloseParen:ae,GetFirstToken:()=>Q.Token_OpenParen,GetLastToken:()=>Q.Token_CloseParen}),Q}else if(V.Type=="Ident"){let W;return W=L({Type:"VariableExpr",Token:s(),GetFirstToken:()=>W.Token,GetLastToken:()=>W.Token}),C[W.Token.Source]!=null&&((x=(S=C[W.Token.Source])==null?void 0:S.Tokens)==null?void 0:x.push)!=null?(C[W.Token.Source].Tokens.push(W.Token),C[W.Token.Source].UseCountIncrease()):R[W.Token.Source]!=null&&((I=(N=R[W.Token.Source])==null?void 0:N.Tokens)==null?void 0:I.push)!=null&&(R[W.Token.Source].Tokens.push(W.Token),R[W.Token.Source].UseCountIncrease()),W}else throw de(e()),`${m(V)}: Unexpected symbol. ${V.Type} ${V.Source}`}function M(C,R){let V=p("Symbol","{"),S=[],x=[];for(;g().Source!="}";){if(g().Source=="["){let W=s(),O=l(C,R),ae=p("Symbol","]"),Q=p("Symbol","="),pe=l(C,R);O.Token&&O.Token.Source,S.push({EntryType:"Index",Index:O,Value:pe,Token_OpenBracket:W,Token_CloseBracket:ae,Token_Equals:Q})}else if(g().Type=="Ident"&&g(1).Source=="="){let W=s(),O=s(),ae=l(C,R);S.push({EntryType:"Field",Field:W,Value:ae,Token_Equals:O})}else{let W=l(C,R);S.push({EntryType:"Value",Value:W})}if(g().Source==","||g().Source==";")x.push(s());else break}let N=p("Symbol","}"),I;return I=L({Type:"TableLiteral",EntryList:S,Token_SeperatorList:x,Token_OpenBrace:V,Token_CloseBrace:N,GetFirstToken:()=>I.Token_OpenBrace,GetLastToken:()=>I.Token_CloseBrace}),I}function X(C,R){let V=[],S=[];if(g().Type=="Ident"){let x=s();if(R&&g().Source=="<"&&g(2).Source==">"){let N=g(1).Source;x.Attribute={LeadingWhite:g().LeadingWhite,Source:`<${N}>`},s(),s(),s()}V.push(x)}else if(g().Source=="..."&&C)return[V,S,s()];for(;g().Source==",";){if(S.push(s()),g().Source=="..."&&C)return[V,S,s()];{let x=p("Ident");if(R&&g().Source=="<"&&g(2).Source==">"){let N=g(1).Source;x.Attribute={LeadingWhite:g().LeadingWhite,Source:`<${N}>`},s(),s(),s()}V.push(x)}}return[V,S]}function ne(C,R,V){let S=t(R,V),x=g();if(x.Type=="Keyword"&&x.Source==C)return s(),[S,x];throw de(x.Type,x.Source),`${m(x)}: ${C} expected.`}function Ee(C,R,V,S){let x=s(),N,I;if(!C){N=[],I=[];let q=p("Ident");for(N.push(q);g().Source==".";)I.push(s()),N.push(p("Ident"));g().Source==":"&&(I.push(s()),N.push(p("Ident")))}let W=p("Symbol","("),[O,ae,Q]=X(!0),pe=p("Symbol",")"),[D,r]=ne("end",R,V),H;return H=L({Type:C==!0?"FunctionLiteral":"FunctionStat",NameChain:N,ArgList:O,Body:D,Token_Function:x,Token_NameChainSeperator:I,Token_OpenParen:W,Token_Varg:Q,Token_ArgCommaList:ae,Token_CloseParen:pe,Token_End:r,GetFirstToken:()=>H.Token_Function,GetLastToken:()=>H.Token_End}),H}function Pe(C,R){let V=g();if(V.Source=="("){let S=s(),x=[],N=[];for(;g().Source!=")"&&(x.push(l(C,R)),g().Source==",");)N.push(s());let I=p("Symbol",")"),W;return W=L({CallType:"ArgCall",ArgList:x,Token_CommaList:N,Token_OpenParen:S,Token_CloseParen:I,GetFirstToken:()=>W.Token_OpenParen,GetLastToken:()=>W.Token_CloseParen}),W}else if(V.Source=="{"){let S;return S=L({CallType:"TableCall",TableExpr:l(C,R),GetFirstToken:()=>S.TableExpr.GetFirstToken(),GetLastToken:()=>S.TableExpr.GetLastToken()}),S}else if(V.Type=="String"){let S;return S=L({CallType:"StringCall",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else throw"Function arguments expected."}function j(C,R){let V=u(C,R);for(w(V,"nil prefixexpr");;){let S=g();if(S.Source=="."){let x=s(),N=p("Ident"),I;I=L({Type:"FieldExpr",Base:V,Field:N,Token_Dot:x,GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.Field}),V=I}else if(S.Source==":"){let x=s(),N=p("Ident"),I=Pe(C,R),W;W=L({Type:"MethodExpr",Base:V,Method:N,FunctionArguments:I,Token_Colon:x,GetFirstToken:()=>W.Base.GetFirstToken(),GetLastToken:()=>W.FunctionArguments.GetLastToken()}),V=W}else if(S.Source=="["){let x=s(),N=l(C,R),I=p("Symbol","]"),W;W=L({Type:"IndexExpr",Base:V,Index:N,Token_OpenBracket:x,Token_CloseBracket:I,GetFirstToken:()=>W.Base.GetFirstToken(),GetLastToken:()=>W.Token_CloseBracket}),V=W}else if(S.Source=="{"||S.Source=="("||S.Type=="String"){let x;x=L({Type:"CallExpr",Base:V,FunctionArguments:Pe(C,R),GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.FunctionArguments.GetLastToken()}),V=x}else if(Ne.includes(S.Source)){let x=s(),N=l(C,R),I;I=L({Type:"CompoundStat",Base:V,Token_Compound:x,Rhs:N,Lhs:V,GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.Rhs.GetLastToken()}),V=I}else return V}}function h(C,R){let V=g();if(V.Type=="Number"){let S;return S=L({Type:"NumberLiteral",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else if(V.Type=="String"){let S;return S=L({Type:"StringLiteral",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else if(V.Type=="Hash"){let S;return S=L({Type:"HashLiteral",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else if(V.Source=="nil"){let S;return S=L({Type:"NilLiteral",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else if(V.Source=="true"||V.Source=="false"){let S;return S=L({Type:"BooleanLiteral",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else if(V.Source=="..."){let S;return S=L({Type:"VargLiteral",Token:s(),GetFirstToken:()=>S.Token,GetLastToken:()=>S.Token}),S}else return V.Source=="{"?M(C,R):V.Source=="function"?Ee(!0,C,R):j(C,R)}function k(C,R,V){let S;if(f()){let x=s(),N=k(ke,R,V),I;I=L({Type:"UnopExpr",Token_Op:x,Rhs:N,GetFirstToken:()=>I.Token_Op,GetLastToken:()=>I.Rhs.GetLastToken()}),S=I}else S=h(R,V),w(S,"nil sipleexpr");for(;c()&&oe[g().Source]!=null&&oe[g().Source][0]>C;){let x=s(),N=k(oe[x.Source][1],R,V);w(N,"RhsNeeded");let I;I=L({Type:"BinopExpr",Lhs:S,Rhs:N,Token_Op:x,GetFirstToken:()=>I.Lhs.GetFirstToken(),GetLastToken:()=>I.Rhs.GetLastToken()}),S=I}return S}l=(C,R)=>k(0,C,R);function Y(C,R){let V=j(C,R);if(V.Type=="MethodExpr"||V.Type=="CallExpr"){let S;return S=L({Type:"CallExprStat",Expression:V,GetFirstToken:()=>S.Expression.GetFirstToken(),GetLastToken:()=>S.Expression.GetLastToken()}),S}else{if(V.Type=="CompoundStat")return V;{let S=[V],x=[];for(;g().Source==",";){x.push(s());let ae=j(C,R);if(ae.Type=="MethodExpr"||ae.Type=="CallExpr")throw"Bad left hand side of asignment";S.push(ae)}let N=p("Symbol","="),I=[l(C,R)],W=[];for(;g().Source==",";)W.push(s()),I.push(l(C,R));let O;return O=L({Type:"AssignmentStat",Rhs:I,Lhs:S,Token_Equals:N,Token_LhsSeperatorList:x,Token_RhsSeperatorList:W,GetFirstToken:()=>O.Lhs[0].GetFirstToken(),GetLastToken:()=>O.Rhs[O.Rhs.length-1].GetLastToken()}),O}}}function ce(C,R){let V=s(),S=l(C,R),x=p("Keyword","then"),N=t(C,R),I=[];for(;g().Source=="elseif"||g().Source=="else";){let ae=s(),Q,pe;ae.Source=="elseif"&&(Q=l(C,R),pe=p("Keyword","then"));let D=t(C,R);if(I.push({Condition:Q,Body:D,ClauseType:ae.Source,Token:ae,Token_Then:pe}),ae.Source=="else")break}let W=p("Keyword","end"),O;return O=L({Type:"IfStat",Condition:S,Body:N,ElseClauseList:I,Token_If:V,Token_Then:x,Token_End:W,GetFirstToken:()=>O.Token_If,GetLastToken:()=>O.Token_End}),O}function ye(C,R){let V=s(),[S,x]=ne("end",C,R),N;return N=L({Type:"DoStat",Body:S,Token_Do:V,Token_End:x,GetFirstToken:()=>N.Token_Do,GetLastToken:()=>N.Token_End}),N}function Ve(C,R){let V=s(),S=l(C,R),x=p("Keyword","do"),[N,I]=ne("end",C,R),W;return W=L({Type:"WhileStat",Condition:S,Body:N,Token_While:V,Token_Do:x,Token_End:I,GetFirstToken:()=>W.Token_While,GetLastToken:()=>W.Token_End}),W}function ze(C,R){let V=s(),[S,x]=X();if(g().Source=="="){let N=s(),[I,W]=i(C,R);if(I.length<2||I.length>3)throw"Expected 2 or 3 values for range bounds";let O=p("Keyword","do"),[ae,Q]=ne("end",C,R),pe;return pe=L({Type:"NumericForStat",VarList:S,RangeList:I,Body:ae,Token_For:V,Token_VarCommaList:x,Token_Equals:N,Token_RangeCommaList:W,Token_Do:O,Token_End:Q,GetFirstToken:()=>pe.Token_For,GetLastToken:()=>pe.Token_End}),pe}else if(g().Source=="in"){let N=s(),[I,W]=i(C,R),O=p("Keyword","do"),[ae,Q]=ne("end",C,R),pe;return pe=L({Type:"GenericForStat",VarList:S,GeneratorList:I,Body:ae,Token_For:V,Token_VarCommaList:x,Token_In:N,Token_GeneratorCommaList:W,Token_Do:O,Token_End:Q,GetFirstToken:()=>pe.Token_For,GetLastToken:()=>pe.Token_End}),pe}}function Ge(C,R){let V=s(),[S,x]=ne("until",C),N=l(C,R),I;return I=L({Type:"RepeatStat",Body:S,Condition:N,Token_Repeat:V,Token_Until:x,GetFirstToken:()=>I.Token_Repeat,GetLastToken:()=>I.Condition.GetLastToken()}),I}function be(C,R){let V=s();if(g().Source=="function"){let S=Ee(!1,C,R);if(S.NameChain.length>1)throw m(S.Token_NameChainSeperator[0])+": `(` expected.";let x;return x=L({Type:"LocalFunctionStat",FunctionStat:S,Token_Local:V,GetFirstToken:()=>x.Token_Local,GetLastToken:()=>x.FunctionStat.GetLastToken()}),x}else if(g().Type=="Ident"){let[S,x]=X(!1,!0),N=[],I=[],W;if(g().Source=="="){W=s();let[ae,Q]=i(C,R);N=ae,I=Q}let O;return O=L({Type:"LocalVarStat",VarList:S,ExprList:N,Token_Local:V,Token_Equals:W,Token_VarCommaList:x,Token_ExprCommaList:I,GetFirstToken:()=>O.Token_Local,GetLastToken:function(){return O.ExprList.length>0?O.ExprList[O.ExprList.length-1].GetLastToken():O.VarList[O.VarList.length-1]}}),O}else throw"`function` or ident expected"}function dt(C,R){let V=s(),S,x;y()||g().Source==";"?(S=[],x=[]):[S,x]=i(C,R);let N;return N={Type:"ReturnStat",ExprList:S,Token_Return:V,Token_CommaList:x,GetFirstToken:()=>N.Token_Return,GetLastToken:function(){return N.ExprList.length>0?N.ExprList[N.ExprList.length-1].GetLastToken():N.Token_Return}},N}function gt(C,R){let V=s(),S;return S={Type:"BreakStat",Token_Break:V,GetFirstToken:()=>S.Token_Break,GetLastToken:()=>S.Token_Break},S}function We(C,R){let V=s(),S;return S={Type:"ContinueStat",Token_Continue:V,GetFirstToken:()=>S.Token_Continue,GetLastToken:()=>S.Token_Continue},S}function Ze(){let C=s(),R;g().Type=="Keyword"?R=p("Keyword"):R=p("Ident");let V;return V={Type:"GotoStat",Token_Goto:C,Token_Label:R,GetFirstToken:()=>V.Token_Goto,GetLastToken:()=>V.Token_Label},V}function ft(){let C=s(),R;g().Type=="Keyword"?R=p("Keyword"):R=p("Ident");let V=p("Symbol","::"),S;return S={Type:"LabelStat",Token_ColonsLeft:C,Token_Label:R,Token_ColonsRight:V,GetFirstToken:()=>S.Token_ColonsLeft,GetLastToken:()=>S.Token_ColonsRight},S}function Ae(C,R){let V=g();return V.Source=="if"?[!1,ce(C,R)]:V.Source=="while"?[!1,Ve(C,R)]:V.Source=="do"?[!1,ye(C,R)]:V.Source=="for"?[!1,ze(C,R)]:V.Source=="repeat"?[!1,Ge(C,R)]:V.Source=="function"?[!1,Ee(!1,C,R)]:V.Source=="local"?[!1,be(C,R)]:V.Source=="return"?[!0,dt(C,R)]:V.Source=="break"?[!0,gt()]:V.Source=="continue"?[!0,We()]:V.Source=="goto"?[!1,Ze()]:V.Source=="::"?[!1,ft()]:[!1,Y(C,R)]}return t=function(C,R){let V=[],S=[],x={},N={};if(R!=null)for(let[ae,Q]of Object.entries(R))N[ae]=Q;if(C!=null)for(let[ae,Q]of Object.entries(C))N[ae]=Q;let I,W=0;for(;!y();){I&&I==g()&&de(`INFINITE LOOP POSSIBLE ON STATEMENT ${I.Source} :`,I),I=g();let[ae,Q]=Ae(x,N);if(Q)switch(V.push(Q),Q.Type){case"LocalVarStat":Q.VarList.forEach(r=>{r.UseCount=0,r.Number=W++,x[r.Source]=r;let H=[];function q(){r.UseCount++,H.forEach(Ue=>{Ue.UseCount=r.UseCount})}r.Tokens={},r.Tokens.push=Ue=>{Ue.UseCountIncrease=q,Ue.UseCount=r.UseCount,Ue.Tokens=r.Tokens,H.push(Ue)},r.Tokens.get=()=>H,r.UseCountIncrease=q});break;case"LocalFunctionStat":let D=Q.FunctionStat.NameChain;if(D.length===1){let q=function(){r.UseCount++,H.forEach(Ue=>{Ue.UseCount=r.UseCount})},r=D[0];r.UseCount=0,r.Number=W++,x[r.Source]=r;let H=[];r.Tokens={},r.Tokens.push=Ue=>{Ue.UseCountIncrease=q,Ue.UseCount=r.UseCount,Ue.Tokens=r.Tokens,H.push(Ue)},r.Tokens.get=()=>H,r.UseCountIncrease=q}break}let pe=g();pe.Type=="Symbol"&&pe.Source==";"&&(S[V.length-1]=s())}let O;return O={Type:"StatList",StatementList:V,SemicolonList:S,GetFirstToken:function(){var ae;if(O.StatementList.length!=0)return(ae=O.StatementList[0])==null?void 0:ae.GetFirstToken()},GetLastToken:function(){if(O.StatementList.length!=0)return O.SemicolonList[O.StatementList.length-1]?O.SemicolonList[O.StatementList.length-1]:O.StatementList[O.StatementList.length-1].GetLastToken()}},O},t([],[])}function Ye(J,b){let d={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},s={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[g,m]of Object.entries(b))if(!s[g]&&!d[g])throw`Invalid visitor target: \`${g}\``;function e(p){if(p!=null){let L=b[p.Type];if(typeof L=="function")return L(p);if(L&&L.Pre)return L.Pre(p)}}function y(p){let L=b[p.Type];if(L&&typeof L=="object"&&L.Post)return L.Post(p)}let f,c;f=function(p){if(!e(p)){if(p.Type=="BinopExpr")f(p.Lhs),f(p.Rhs);else if(p.Type=="UnopExpr")f(p.Rhs);else if(!(p.Type=="NumberLiteral"||p.Type=="StringLiteral"||p.Type=="NilLiteral"||p.Type=="BooleanLiteral"||p.Type=="VargLiteral"||p.Type=="HashLiteral")){if(p.Type=="FieldExpr")f(p.Base);else if(p.Type=="IndexExpr")f(p.Base),f(p.Index);else if(p.Type=="MethodExpr"||p.Type=="CallExpr")f(p.Base),p.FunctionArguments.CallType=="ArgCall"?p.FunctionArguments.ArgList.forEach((L,t)=>{f(L)}):p.FunctionArguments.CallType=="TableCall"&&f(p.FunctionArguments.TableExpr);else if(p.Type=="FunctionLiteral")c(p.Body);else if(p.Type!="VariableExpr")if(p.Type=="ParenExpr")f(p.Expression);else if(p.Type=="TableLiteral")p.EntryList.forEach((L,t)=>{if(L.EntryType=="Field")f(L.Value);else if(L.EntryType=="Index")f(L.Index),f(L.Value);else if(L.EntryType=="Value")f(L.Value);else throw"unreachable"});else if(p.Type=="CompoundStat")f(p.Lhs),f(p.Rhs);else throw`unreachable, type: ${p.Type}: ${p}`}y(p)}},c=function(p){if(!e(p)){if(p.Type=="StatList")p.StatementList.forEach((L,t)=>{if(L!=null){if(L===null||L.Type===null)return;L.Remove=()=>{p.StatementList[t]=null},c(L)}});else if(p.Type!="BreakStat"){if(p.Type!="ContinueStat"){if(p.Type!="GotoStat"){if(p.Type!="LabelStat")if(p.Type=="ReturnStat")p.ExprList.forEach((L,t)=>{f(L)});else if(p.Type=="LocalVarStat")p.Token_Equals&&p.ExprList.forEach((L,t)=>{f(L)});else if(p.Type=="LocalFunctionStat")c(p.FunctionStat.Body);else if(p.Type=="FunctionStat")c(p.Body);else if(p.Type=="RepeatStat")c(p.Body),f(p.Condition);else if(p.Type=="GenericForStat")p.GeneratorList.forEach((L,t)=>{f(L)}),c(p.Body);else if(p.Type=="NumericForStat")p.RangeList.forEach((L,t)=>{f(L)}),c(p.Body);else if(p.Type=="WhileStat")f(p.Condition),c(p.Body);else if(p.Type=="DoStat")c(p.Body);else if(p.Type=="IfStat")f(p.Condition),c(p.Body),p.ElseClauseList.forEach(L=>{L.Condition!=null&&f(L.Condition),c(L.Body)});else if(p.Type=="CallExprStat")f(p.Expression);else if(p.Type=="CompoundStat")f(p.Lhs),f(p.Rhs);else if(p.Type=="AssignmentStat")p.Lhs.forEach(L=>{f(L)}),p.Rhs.forEach(L=>{f(L)});else throw"unreachable"}}}y(p)}},s[J.Type]?c(J):f(J)}function ot(J){let b=[],d,s=0;function g(){return s++,s}function m(){d={ParentScope:d,ChildScopeList:[],VariableList:[],BeginLocation:g(),Depth:null,GetVar:null},d.ParentScope?(d.Depth=d.ParentScope.Depth+1,d.ParentScope.ChildScopeList.push(d)):d.Depth=1;let l=d;d.GetVar=function(i){for(const u of l.VariableList)if(u.Name==i)return u;if(l.ParentScope)return l.ParentScope.GetVar(i);for(const u of b)if(u.Name==i)return u}}function e(){let l=d;return l.EndLocation=g(),l.VariableList.forEach(i=>{i.ScopeEndLocation=l.EndLocation}),d=l.ParentScope,l}m();function y(l,i,u){w(u,"MIssing localInfo"),w(l,"Missing local var name");let M={Type:"Local",Name:l,RenameList:[i],AssignedTo:!1,Info:u,Scope:d,BeginLocation:g(),EndLocation:g(),ReferenceLocationList:[g()]};return M.Rename=function(X){M.Name=X,M.RenameList.forEach(ne=>{ne(X)})},d.VariableList.push(M),M}function f(l){for(const u of b)if(u.Name==l)return u;let i={Type:"Global",Name:l,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:g(),EndLocation:g(),ReferenceLocationList:[]};return i.Rename=function(u){i.Name=u,i.RenameList.forEach(M=>{M(u)})},b.push(i),i}function c(l,i){w(l,"Missing var name");let u=f(l);return u.RenameList.push(i),u}function p(l,i){let u;for(u=l.VariableList.length-1;u>=0;u--)if(l.VariableList[u].Name==i)return l.VariableList[u];if(l.ParentScope){let M=p(l.ParentScope,i);if(M)return M}}function L(l,i){w(l,"Missing var name");let u=p(d,l);u?u.RenameList.push(i):u=c(l,i);let M=g();return u.EndLocation=M,u.ReferenceLocationList.push(u.EndLocation),u}let t={};return t.FunctionLiteral={Pre:function(l){m(),l.ArgList.forEach((i,u)=>{let M=y(i.Source,function(X,ne){ne||(i.Source=X)},{Type:"Argument",Index:u});i.var=M})},Post:function(l){e()}},t.VariableExpr=function(l){l.Variable=L(l.Token.Source,function(i){l.Token.Source=i})},t.StatList={Pre:function(l){m()},Post:function(l){l.SkipPop||e()}},t.LocalVarStat={Post:function(l){l.VarList.forEach((i,u)=>{y(i.Source,function(M){l.VarList[u].Source=M},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(l){y(l.FunctionStat.NameChain[0].Source,function(i){l.FunctionStat.NameChain[0].Source=i},{Type:"LocalFunction"}),m(),l.FunctionStat.ArgList.forEach((i,u)=>{y(i.Source,function(M){i.Source=M},{Type:"Argument",Index:u})})},Post:function(){e()}},t.FunctionStat={Pre:function(l){let i=l.NameChain,u;i.length==1?p(d,i[0].Source)?u=L(i[0].Source,function(M){i[0].Source=M}):u=c(i[0].Source,function(M){i[0].Source=M}):u=L(i[0].Source,function(M){i[0].Source=M}),u.AssignedTo=!0,m(),l.ArgList.forEach((M,X)=>{y(M.Source,function(ne){M.Source=ne},{Type:"Argument",Index:X})})},Post:function(){e()}},t.GenericForStat={Pre:function(l){return l.GeneratorList.forEach(i=>{Ye(i,t)}),m(),l.VarList.forEach((i,u)=>{y(i.Source,function(M){i.Source=M},{Type:"ForRange",Index:u})}),Ye(l.Body,t),e(),!0}},t.NumericForStat={Pre:function(l){return l.RangeList.forEach(i=>{Ye(i,t)}),m(),l.VarList.forEach((i,u)=>{y(i.Source,function(M){i.Source=M},{Type:"ForRange",Index:u})}),Ye(l.Body,t),e(),!0}},t.RepeatStat={Pre:function(l){l.Body.SkipPop=!0},Post:function(l){e()}},t.AssignmentStat={Post:function(l){l.Lhs.forEach(i=>{i.Variable!=null&&(i.Variable.AssignedTo=!0)})}},Ye(J,t),[b,e()]}function ie(J){let b,d,s="",g=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function m(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;s=`${s}${e.LeadingWhite}${e.Source}`}return d=function(e){if(e.Type=="BinopExpr")d(e.Lhs),m(e.Token_Op),d(e.Rhs);else if(e.Type=="UnopExpr")m(e.Token_Op),d(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")m(e.Token);else if(e.Type=="FieldExpr")d(e.Base),m(e.Token_Dot),m(e.Field);else if(e.Type=="IndexExpr")d(e.Base),m(e.Token_OpenBracket),d(e.Index),m(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")d(e.Base),e.Type=="MethodExpr"&&(m(e.Token_Colon),m(e.Method)),e.FunctionArguments.CallType=="StringCall"?m(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(m(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((y,f)=>{d(y);let c=e.FunctionArguments.Token_CommaList[f];c!=null&&m(c)}),m(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&d(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")m(e.Token_Function),m(e.Token_OpenParen),e.ArgList.forEach((y,f)=>{m(y);let c=e.Token_ArgCommaList[f];c!=null&&m(c)}),e.Token_Varg!=null&&m(e.Token_Varg),m(e.Token_CloseParen),b(e.Body),m(e.Token_End);else if(e.Type=="VariableExpr")m(e.Token);else if(e.Type=="ParenExpr")m(e.Token_OpenParen),d(e.Expression),m(e.Token_CloseParen);else if(e.Type=="TableLiteral")m(e.Token_OpenBrace),e.EntryList.forEach((y,f)=>{if(y.EntryType=="Field")m(y.Field),m(y.Token_Equals),d(y.Value);else if(y.EntryType=="Index")m(y.Token_OpenBracket),d(y.Index),m(y.Token_CloseBracket),m(y.Token_Equals),d(y.Value);else if(y.EntryType=="Value")d(y.Value);else throw"unreachable";let c=e.Token_SeperatorList[f];c!=null&&m(c)}),m(e.Token_CloseBrace);else if(e.Type=="CompoundStat")b(e);else throw`unreachable, type: ${e.Type}: ${e}`},b=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let y=g(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",s+=`${y}do `}e.Type=="StatList"?e.StatementList.forEach((y,f)=>{y===null||y.Type===null||(y.Remove=()=>{e.StatementList[f]=null},b(y),e.SemicolonList[f]&&m(e.SemicolonList[f]))}):e.Type=="BreakStat"?m(e.Token_Break):e.Type=="ContinueStat"?m(e.Token_Continue):e.Type=="GotoStat"?(m(e.Token_Goto),m(e.Token_Label)):e.Type=="LabelStat"?(m(e.Token_ColonsLeft),m(e.Token_Label),m(e.Token_ColonsRight)):e.Type=="ReturnStat"?(m(e.Token_Return),e.ExprList.forEach((y,f)=>{d(y),e.Token_CommaList[f]&&m(e.Token_CommaList[f])})):e.Type=="LocalVarStat"?(m(e.Token_Local),e.VarList.forEach((y,f)=>{m(y),y.Attribute!=null&&m(y.Attribute);let c=e.Token_VarCommaList[f];c!=null&&m(c)}),e.Token_Equals!=null&&(m(e.Token_Equals),e.ExprList.forEach((y,f)=>{d(y);let c=e.Token_ExprCommaList[f];c!=null&&m(c)}))):e.Type=="LocalFunctionStat"?(m(e.Token_Local),m(e.FunctionStat.Token_Function),m(e.FunctionStat.NameChain[0]),m(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((y,f)=>{m(y);let c=e.FunctionStat.Token_ArgCommaList[f];c!=null&&m(c)}),e.FunctionStat.Token_Varg&&m(e.FunctionStat.Token_Varg),m(e.FunctionStat.Token_CloseParen),b(e.FunctionStat.Body),m(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(m(e.Token_Function),e.NameChain.forEach((y,f)=>{m(y);let c=e.Token_NameChainSeperator[f];c!=null&&m(c)}),m(e.Token_OpenParen),e.ArgList.forEach((y,f)=>{m(y);let c=e.Token_ArgCommaList[f];c!=null&&m(c)}),e.Token_Varg&&m(e.Token_Varg),m(e.Token_CloseParen),b(e.Body),m(e.Token_End)):e.Type=="RepeatStat"?(m(e.Token_Repeat),b(e.Body),m(e.Token_Until),d(e.Condition)):e.Type=="GenericForStat"?(m(e.Token_For),e.VarList.forEach((y,f)=>{m(y);let c=e.Token_VarCommaList[f];c!=null&&m(c)}),m(e.Token_In),e.GeneratorList.forEach((y,f)=>{d(y);let c=e.Token_GeneratorCommaList[f];c!=null&&m(c)}),m(e.Token_Do),b(e.Body),m(e.Token_End)):e.Type=="NumericForStat"?(m(e.Token_For),e.VarList.forEach((y,f)=>{m(y);let c=e.Token_VarCommaList[f];c!=null&&m(c)}),m(e.Token_Equals),e.RangeList.forEach((y,f)=>{d(y);let c=e.Token_RangeCommaList[f];c!=null&&m(c)}),m(e.Token_Do),b(e.Body),m(e.Token_End)):e.Type=="WhileStat"?(m(e.Token_While),d(e.Condition),m(e.Token_Do),b(e.Body),m(e.Token_End)):e.Type=="DoStat"?(m(e.Token_Do),b(e.Body),m(e.Token_End)):e.Type=="IfStat"?(m(e.Token_If),d(e.Condition),m(e.Token_Then),b(e.Body),e.ElseClauseList.forEach(y=>{m(y.Token),y.Condition!=null&&(d(y.Condition),m(y.Token_Then)),b(y.Body)}),m(e.Token_End)):e.Type=="CallExprStat"?d(e.Expression):e.Type=="CompoundStat"?(d(e.Lhs),m(e.Token_Compound),d(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((y,f)=>{d(y);let c=e.Token_LhsSeperatorList[f];c!=null&&m(c)}),m(e.Token_Equals),e.Rhs.forEach((y,f)=>{d(y);let c=e.Token_RhsSeperatorList[f];c!=null&&m(c)})):w(!1,"unreachable"),e.WrapInDo&&(s+=" end ")}},b(J),s}function rt(J){let b,d,s=0;function g(t){if(t===void 0)return;let l=`
${"	".repeat(s)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-l.length,l.length)!=l){let i="",u;for(u=t.LeadingWhite.length;u>=0;u--){let M=t.LeadingWhite.substr(u,1);if(!(M==""||M.match(/\s/g))){i=t.LeadingWhite.substr(0,u+1);break}}t.LeadingWhite=`${i}${l}`}}function m(){s++}function e(){s--,w(s>=0,"Undented too far")}function y(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function f(t){t.LeadingWhite=t.LeadingWhite.trim()}function c(t){f(t),ge.includes(y(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function p(t){c(t.GetFirstToken())}function L(t,l,i){m(),b(l),e(),g(i)}d=function(t){if(t.Type=="BinopExpr")d(t.Lhs),d(t.Rhs),p(t.Rhs),c(t.Token_Op);else if(t.Type=="UnopExpr")f(t.Token_Op),d(t.Rhs),t.Token_Op.Source[0]&&c(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")f(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+v(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")d(t.Base);else if(t.Type=="IndexExpr")d(t.Base),d(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")d(t.Base),f(t.FunctionArguments.GetFirstToken()),f(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,i)=>{d(l),i>0&&p(l);let u=t.FunctionArguments.Token_CommaList[i];u!=null&&f(u)}):t.FunctionArguments.CallType=="TableCall"&&d(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((l,i)=>{i>0&&c(l),t.Token_ArgCommaList[i]}),t.ArgList.length>0&&t.Token_Varg!=null&&c(t.Token_Varg),L(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")f(t.Token_OpenParen),f(t.Token_CloseParen),d(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){m();let l=100;t.EntryList.forEach((i,u)=>{i.EntryType=="Field"?(t.EntryList.length>l?Re(i.Value):g(i.Field),c(i.Token_Equals),d(i.Value),p(i.Value)):i.EntryType=="Index"?(t.EntryList.length>l?f(i.Token_OpenBracket):g(i.Token_OpenBracket),d(i.Index),c(i.Token_Equals),d(i.Value),p(i.Value)):i.EntryType=="Value"?(d(i.Value),t.EntryList.length>l?Re(i.Value):g(i.Value.GetFirstToken())):w(!1,"unreachable");let M=t.Token_SeperatorList[u];M!=null&&(t.EntryList.length>l?M.LeadingWhite="":f(M))}),e(),t.EntryList.length>l?t.Token_CloseBrace.LeadingWhite="":g(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")b(t);else throw de(t),`unreachable, type: ${t.Type}:`+t},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,i)=>{l===null||l.Type===null||l.Type==="StatList"&&l.StatementList.length===0||(l.Remove=()=>{l.StatementList[i]=null},b(l),g(l.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,i)=>{d(l),p(l),t.Token_CommaList[i]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((l,i)=>{c(l),l.Attribute&&(l.Attribute.LeadingWhite=" "),t.Token_VarCommaList[i]}),t.Token_Equals){f(t.Token_Equals),c(t.Token_Equals);let l=[],i=[];t.ExprList.forEach((u,M)=>{u!=null&&(M<t.VarList.length||u.Type=="CallExpr"||u.Type=="ParenExpr"||u.Type=="VargLiteral"||u.Type=="BinopExpr"||u.Type=="UnopExpr")&&(l.push(u),i.push(t.Token_ExprCommaList[M]))}),t.ExprList=l,t.CommaList=i,t.ExprList.forEach((u,M)=>{u!=null&&(d(u),p(u),t.Token_ExprCommaList[M]!=null&&t.ExprList.length-1==M&&(t.Token_ExprCommaList[M]=null))})}}else if(t.Type=="LocalFunctionStat")c(t.FunctionStat.Token_Function),c(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((l,i)=>{i>0?c(l):f(l);let u=t.FunctionStat.Token_ArgCommaList[i];u&&f(u)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(f(t.FunctionStat.Token_Varg),c(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&f(t.FunctionStat.Token_Varg),f(t.FunctionStat.Token_OpenParen),f(t.FunctionStat.Token_CloseParen),L(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((l,i)=>{i==0&&c(l),t.Token_NameChainSeperator[i]}),t.ArgList.forEach((l,i)=>{i>0&&c(l),t.Token_ArgCommaList[i]}),t.ArgList.length>0&&t.Token_Varg&&c(t.Token_Varg),L(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")L(t.Token_Repeat,t.Body,t.Token_Until),d(t.Condition),p(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((l,i)=>{c(l),t.Token_VarCommaList[i]}),c(t.Token_In),t.GeneratorList.forEach((l,i)=>{d(l),p(l),t.Token_GeneratorCommaList[i]}),c(t.Token_Do),L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((l,i)=>{c(l),t.Token_VarCommaList[i]}),c(t.Token_Equals),t.RangeList.forEach((l,i)=>{d(l),p(l),t.Token_RangeCommaList[i]}),c(t.Token_Do),L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")d(t.Condition),p(t.Condition),c(t.Token_Do),L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){d(t.Condition),p(t.Condition),c(t.Token_Then);let l=t.Token_Then,i=t.Body;t.ElseClauseList.forEach(u=>{L(l,i,u.Token),l=u.Token,u.Condition!=null&&(d(u.Condition),p(u.Condition),c(u.Token_Then),l=u.Token_Then),i=u.Body}),L(l,i,t.Token_End)}else t.Type=="CallExprStat"?d(t.Expression):t.Type=="CompoundStat"?(d(t.Lhs),d(t.Rhs),p(t.Lhs),p(t.Rhs),c(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((l,i)=>{d(l),i>0&&p(l),t.Token_LhsSeperatorList[i]}),c(t.Token_Equals),t.Rhs.forEach((l,i)=>{d(l),p(l),t.Token_RhsSeperatorList[i]})):w(!1,"Unreachable")}}}},b(J)}function Re(J){let b,d;function s(e){e&&(e.LeadingWhite="")}function g(e,y,f=!1){s(y);let c=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),p=(typeof y.Source=="string"?y.Source:y.Source.toString()).substr(0,1);c=="-"&&p=="-"||st.includes(c)&&st.includes(p)||f&&c==")"&&p=="("?y.LeadingWhite=f?";":" ":y.LeadingWhite=""}function m(e,y,f){b(y),s(f);let c=y.GetFirstToken(),p=y.GetLastToken();c!=null?(g(e,c),g(p,f)):g(e,f)}d=function(e){if(e.Type==="BinopExpr")d(e.Lhs),d(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(s(e.Token_Op),g(e.Lhs.GetLastToken(),e.Token_Op)),g(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")s(e.Token_Op),d(e.Rhs),g(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")s(e.Token);else if(e.Type=="FieldExpr")d(e.Base),s(e.Token_Dot),s(e.Field);else if(e.Type=="IndexExpr")d(e.Base),s(e.Token_OpenBracket),d(e.Index),s(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")d(e.Base),e.Type=="MethodExpr"&&(s(e.Token_Colon),s(e.Method)),e.FunctionArguments.CallType=="StringCall"?s(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(s(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((y,f)=>{d(y);let c=e.FunctionArguments.Token_CommaList[f];c!=null&&s(c)}),s(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&d(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")s(e.Token_Function),s(e.Token_OpenParen),e.ArgList.forEach((y,f)=>{s(y);let c=e.Token_ArgCommaList[f];c!=null&&s(c)}),e.Token_Varg!=null&&s(e.Token_Varg),s(e.Token_CloseParen),m(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")s(e.Token);else if(e.Type=="ParenExpr")s(e.Token_OpenParen),d(e.Expression),s(e.Token_CloseParen);else if(e.Type=="TableLiteral")s(e.Token_OpenBrace),e.EntryList.forEach((y,f)=>{y.EntryType=="Field"?(s(y.Field),s(y.Token_Equals),d(y.Value)):y.EntryType=="Index"?(s(y.Token_OpenBracket),d(y.Index),s(y.Token_CloseBracket),s(y.Token_Equals),d(y.Value)):y.EntryType=="Value"?d(y.Value):w(!1,"unreachable");let c=e.Token_SeperatorList[f];c!=null&&s(c)}),e.Token_SeperatorList[e.EntryList.length-1]=null,s(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},b=function(e){if(e.Type=="StatList"){let y;for(y=0;y<=e.StatementList.length;y++){let f=e.StatementList[y];if(f==null)continue;b(f),s(f.GetFirstToken());let c=e.StatementList[y-1];if(c!=null){let p={")":["(","["],"]":["(","["]};if(e.SemicolonList[y-1]){let L=c.GetLastToken().Source,t=f.GetFirstToken().Source;(p[L]===null||p[L]===void 0||!p[L].includes(t))&&(e.SemicolonList[y-1]=null)}e.SemicolonList[y-1]||g(c.GetLastToken(),f.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&s(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")s(e.Token_Break);else if(e.Type=="ContinueStat")s(e.Token_Continue);else if(e.Type=="GotoStat")s(e.Token_Goto),g(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")s(e.Token_ColonsLeft),s(e.Token_Label),s(e.Token_ColonsRight);else if(e.Type=="ReturnStat")s(e.Token_Return),e.ExprList.forEach((y,f)=>{d(y),e.Token_CommaList[f]!=null&&s(e.Token_CommaList[f])}),e.ExprList.length>0&&g(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){s(e.Token_Local);let y=!1;e.VarList.forEach((f,c)=>{c==0?g(e.Token_Local,f):s(f),f.Attribute&&(s(f.Attribute),c+1==e.VarList.length&&(y=!0));let p=e.Token_VarCommaList[c];p!=null&&s(p)}),e.Token_Equals!=null&&(y||s(e.Token_Equals),e.ExprList.forEach((f,c)=>{d(f);let p=e.Token_ExprCommaList[c];p!=null&&s(p)}))}else if(e.Type=="LocalFunctionStat")s(e.Token_Local),g(e.Token_Local,e.FunctionStat.Token_Function),g(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),g(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((y,f)=>{s(y);let c=e.FunctionStat.Token_ArgCommaList[f];c!=null&&s(c)}),e.FunctionStat.Token_Varg&&s(e.FunctionStat.Token_Varg),s(e.FunctionStat.Token_CloseParen),m(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")s(e.Token_Function),e.NameChain.forEach((y,f)=>{f==0?g(e.Token_Function,y):s(y);let c=e.Token_NameChainSeperator[f];c!=null&&s(c)}),s(e.Token_OpenParen),e.ArgList.forEach((y,f)=>{s(y);let c=e.Token_ArgCommaList[f];c!=null&&s(c)}),e.Token_Varg&&s(e.Token_Varg),s(e.Token_CloseParen),m(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")s(e.Token_Repeat),m(e.Token_Repeat,e.Body,e.Token_Until),d(e.Condition),g(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")s(e.Token_For),e.VarList.forEach((y,f)=>{f==0?g(e.Token_For,y):s(y);let c=e.Token_VarCommaList[f];c!=null&&s(c)}),g(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((y,f)=>{d(y),f==0&&g(e.Token_In,y.GetFirstToken());let c=e.Token_GeneratorCommaList[f];c!=null&&s(c)}),g(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")s(e.Token_For),e.VarList.forEach((y,f)=>{f==0?g(e.Token_For,y):s(y);let c=e.Token_VarCommaList[f];c!=null&&s(c)}),g(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((y,f)=>{d(y),f==0&&g(e.Token_Equals,y.GetFirstToken());let c=e.Token_RangeCommaList[f];c!=null&&s(c)}),g(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")s(e.Token_While),d(e.Condition),s(e.Token_Do),g(e.Token_While,e.Condition.GetFirstToken()),g(e.Condition.GetLastToken(),e.Token_Do),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")s(e.Token_Do),s(e.Token_End),m(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){s(e.Token_If),d(e.Condition),g(e.Token_If,e.Condition.GetFirstToken()),g(e.Condition.GetLastToken(),e.Token_Then);let y=e.Token_Then,f=e.Body;e.ElseClauseList.forEach((c,p)=>{m(y,f,c.Token),y=c.Token,c.Condition!=null&&(d(c.Condition),g(c.Token,c.Condition.GetFirstToken()),g(c.Condition.GetLastToken(),c.Token_Then),y=c.Token_Then),b(c.Body),f=c.Body}),m(y,f,e.Token_End)}else if(e.Type=="CallExprStat")d(e.Expression);else if(e.Type=="CompoundStat")d(e.Lhs),s(e.Token_Compound),d(e.Rhs),g(e.Lhs.GetLastToken(),e.Token_Compound),g(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((y,f)=>{d(y);let c=e.Token_LhsSeperatorList[f];c!=null&&s(c)}),s(e.Token_Equals),e.Rhs.forEach((y,f)=>{d(y);let c=e.Token_RhsSeperatorList[f];c!=null&&s(c)});else return d(e)},b(J)}function it(J){let b,d,s={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function g(t,l,i=null){let u;return u={Type:t,Token:{Type:i??"Number",LeadingWhite:"",Source:l},GetFirstToken:()=>u.Token,GetLastToken:()=>u.Token},u}function m(t,l,i){let u;return u={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:l,Rhs:i,GetFirstToken:()=>u.Lhs.GetFirstToken(),GetLastToken:()=>u.Rhs.GetLastToken()},u}function e(t,l){let i;return i={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:l,GetFirstToken:()=>i.Token_Op,GetLastToken:()=>i.Rhs.GetLastToken()},i}function y(t,l){if(l!=null)for(var[i,u]of Object.entries(l))t[i]=u}function f(t){if(t==null||t.substr==null)return;let l=t.substr(0,1),i;if((l=='"'||l=="'")&&(i=t.substr(1,t.length-2)),l=="["){let X=0,ne=1;for(;t.substr(ne,1)=="=";)X++,ne++;i=t.substr(2+X,t.length-4-X-2)}if(i==null)return"";let u="",M;for(M=0;M<=i.length;M++){let X=i.substr(M,1);X=="'"||X=='"'?u+=`\\${X}`:u+=X}return u}function c(t){if(typeof t=="object"&&t.Type=="ParenExpr")return y(t,t.Expression)}function p(t,l,i){let u=l,M=i;if(l&&l.Type=="ParenExpr"&&(u=l.Expression),i&&i.Type=="ParenExpr"&&(M=i.Expression),u==null||M==null||u.Type==null||M.Type==null||u.Type=="VariableExpr"||u.Type=="CallExpr"||u.Type=="BinopExpr"||M.Type=="CallExpr"||M.Type=="BinopExpr"||M.Type=="VariableExpr")return;let X=u.Token||u.Expression!=null&&u.Expression.Token||null,ne=M.Token||M.Expression!=null&&M.Expression.Token||null,Ee=X!=null?X.Source:null,Pe=ne!=null?ne.Source:null,j,h;if(u.Type=="BooleanLiteral"&&(j=Ee=="true"),M.Type=="BooleanLiteral"&&(h=Pe=="true"),!(u.Type=="NumberLiteral"&&(j=P(Ee),j==null))&&!(M.Type=="NumberLiteral"&&(h=P(Pe),h==null))&&((u.Type=="StringLiteral"||u.Type=="HashLiteral")&&(j=Ee.toString()),(M.Type=="StringLiteral"||M.Type=="HashLiteral")&&(h=Pe.toString()),j!=null&&h!=null)){if(t=="==")return j==h;if(t=="~=")return j!=h;if(t=="and")return j&&h;if(t=="or")return j||h;if(t==".."&&u.Type=="StringLiteral"&&M.Type=="StringLiteral")return`"${f(Ee)+f(Pe)}"`;if(u.Type=="StringLiteral"&&(j=P(f(j))),M.Type=="StringLiteral"&&(h=P(f(h))),j==null||h==null)return;let k;if(t=="+"&&(k=j+h),t=="-"&&(k=j-h),t=="*"&&(k=j*h),t=="/"&&(k=j/h),t=="^"&&(k=j**h),t=="%"&&(k=j%h),t==">"&&(k=j>h),t=="<"&&(k=j<h),t==">="&&(k=j>=h),t=="<="&&(k=j<=h),k==!1||k==!0||isFinite(k)&&k>-(10**6)&&k<10**6)return k}}function L(t,l){let i=l.Token||l.Expression||l.EntryList||l;if(i==null||i.Source==null&&l.Type!="TableLiteral"||l.Type=="VariableExpr"||l.Type=="CallExpr"||l.Type=="BinopExpr")return;let u=i.Source,M;if(l.Type=="TableLiteral"&&i!=null){let X=[],ne=0,Ee=!1,Pe=!1,j=0;if(i.forEach((h,k)=>{if(Ee)X.push(h);else if(h.EntryType=="Value"||h.EntryType=="Index")if((h.Index==null||h.Index.Type=="NumberLiteral")&&h.Value){if((h.Index!=null&&h.Index.Token!=null&&h.Index.Token.Source!==null?h.Index.Token.Source:j+1).toString()!==(++j).toString())return Ee=!0,Pe=!0,X.push(h);h.Value.Type!="CallExpr"?ne++:(Ee=!0,X.push(h))}else X.push(h)}),Pe)return;if(t=="#")return l.EntryList=X,l.EntryList.length<=0?g("NumberLiteral",ne!==null?ne:l.EntryList.length):ne<=0?e("#",l):m("+",g("NumberLiteral",ne),e("#",l))}if(l.Type=="BooleanLiteral"&&(M=u=="true"),!(l.Type=="NumberLiteral"&&(M=P(u),M===null))){if(l.Type=="StringLiteral"&&(M=u.substr(1,u.length-2)),t=="not"&&l.Type!==null)return l.Type=="NilLiteral"||l.Type=="BooleanLiteral"&&M===!1;if(M!=null){if(t=="#")return M.length;if(t=="-")return-M}}}d=function(t){if(t.Type=="BinopExpr"){if(d(t.Lhs),d(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let l=t.Token_Op;if(l!=null&&l.Source!=null){let i=p(l.Source,t.Lhs,t.Rhs);if(i!=null){if(typeof i=="boolean"){let u=g("BooleanLiteral",i.toString(),"Keyword");y(t,u);return}else if(typeof i=="number"){if(isFinite(i)==!0){let u=g("NumberLiteral",i.toString(),"Number");y(t,u);return}}else if(typeof i=="string"){let u=g("StringLiteral",i,"String");y(t,u);return}else if(typeof i=="object"){y(t,i);return}return}}if(t.Lhs.Type=="ParenExpr"){let u=t.Lhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let u=t.Rhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(d(t.Rhs),t.Rhs!=null&&s[t.Rhs.Type]==!0){let l=t.Token_Op;if(l!=null&&l.Source!=null){let i=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,u=L(l.Source,i);if(u!=null){if(typeof u=="boolean"){let M=g("BooleanLiteral",u.toString(),"Keyword");y(t,M);return}else if(typeof u=="number"){if(isFinite(u)==!0){let M=g("NumberLiteral",u,"Number");y(t,M);return}}else if(typeof u=="string"){let M=g("StringLiteral",u,"String");y(t,M);return}else if(typeof u=="object"){y(t,u);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let l=t.Token;if(l!=null){if(l.Type=="Number"){let i=l.Source.toString().split("e");if(i.length===2){let u=P(i[0]),M=P(i[1]);isFinite(u)&&isFinite(M)&&u**M<999999999&&!l.Source.includes("+")&&l.Source.includes(".")&&!l.Source.includes("-")&&(l.Source=(u**M).toString())}}l.Type=="String"&&(l.Source=l.Source.replace(/\\\d+/gi,i=>{let u=P(i.substr(1,i.length-1));return u&&isFinite(u)&&(u>=97&&u<=122||u>=65&&u<=90||u>=33&&u<=47||u>=58&&u<=64||u>=91&&u<=96||u>=123&&u<=126)&&u!==34&&u!==39&&u!==92?String.fromCharCode(u):i}))}}else if(t.Type=="FieldExpr")d(t.Base);else if(t.Type=="IndexExpr")d(t.Base),d(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(d(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,i)=>{d(l)}):t.FunctionArguments.CallType=="TableCall"&&d(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let l=t.Base.Expression;t.FunctionArguments.ArgList.forEach((i,u)=>{let M=t.FunctionArguments.ArgList[u];if(M!==void 0&&(M.Type=="NumberLiteral"||M.Type=="StringLiteral"||M.Type=="NilLiteral"||M.Type=="BooleanLiteral"||M.Type=="HashLiteral")){let X=l.ArgList[u];X&&X.var.RenameList.forEach(ne=>{ne(M.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")b(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let l=t.Expression;l!=null&&l.Type=="ParenExpr"&&(t.Expression=l.Expression),d(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&c(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((l,i)=>{l.EntryType=="Field"?d(l.Value):l.EntryType=="Index"?(d(l.Index),d(l.Value)):l.EntryType=="Value"?d(l.Value):w(!1,"unreachable")})},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,i)=>{l===null||l.Type===null||(l.Remove=()=>{t.StatementList[i]=null},b(l))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,i)=>{d(l)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((l,i)=>{d(l)});else if(t.Type=="LocalFunctionStat")b(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")b(t.Body);else if(t.Type=="RepeatStat")b(t.Body),d(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((l,i)=>{d(l)}),b(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((h,k)=>{d(h)}),b(t.Body);let l=t.RangeList[0],i=t.RangeList[1],u=t.RangeList[2];if(l==null||i==null)return t.Remove();if(c(l),c(i),c(u),l.Type!="NumberLiteral"||i.Type!="NumberLiteral"||u!=null&&u.Type!="NumberLiteral"||u==null)return;let M=P(l.Token.Source),X=P(i.Token.Source),ne=u!=null&&P(u.Token.Source)||1,Ee=ne>0&&M<=X||ne<0&&M>=X,Pe=(X-M+ne)/ne;if(!(Ee&&Pe>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){d(t.Condition),b(t.Body);let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(b(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let l=t.Body.StatementList[0];l.Type!=="ContinueStat"&&l.Type!=="BreakStat"&&l.Type!=="ReturnStat"&&y(t,l)}}else if(t.Type=="IfStat"){d(t.Condition),b(t.Body),t.ElseClauseList.forEach((i,u)=>{i.Condition!=null&&d(i.Condition),b(i.Body)});let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?d(t.Expression):t.Type=="CompoundStat"?(d(t.Lhs),d(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((l,i)=>{d(l)}),t.Rhs.forEach((l,i)=>{d(l)}))}},b(J)}let te=[],Te;for(Te=97;Te<=122;Te++)te.push(String.fromCharCode(Te));for(Te=65;Te<=90;Te++)te.push(String.fromCharCode(Te));for(Te=48;Te<=57;Te++)te.push(String.fromCharCode(Te));te.push("_");let De=[];for(Te=97;Te<=122;Te++)De.push(String.fromCharCode(Te));for(Te=65;Te<=90;Te++)De.push(String.fromCharCode(Te));function et(J){let b="",d=J%De.length;for(J=(J-d)/De.length,b=`${b}${De[d]}`;J>0;){let s=J%te.length;J=(J-s)/te.length,b=`${b}${te[s]}`}return b}function T(J,b,d){let s=[];for(var[g,m]of Object.entries(Je))s[g]=!0;let e=[];J.forEach(L=>{L.AssignedTo&&d?e.push(L):s[L.Name]=!0});function y(L){L.VariableList.forEach(t=>{e.push(t)}),L.ChildScopeList.forEach(t=>{y(t)})}y(b),e.forEach(L=>{L.UsedNameArray=[]}),e.sort((L,t)=>L-t);let f=0,c=[];function p(L){let t=c[L];if(t==null){for(t=et(f),f++;s[t];)t=et(f),f++;c[L]=t}return t}e.forEach((L,t)=>{L.Renamed=!0;let l=0;for(;L.UsedNameArray[l];)l++;L.Rename(p(l)),L.Scope?e.forEach(i=>{i.Renamed||(!i.Scope||i.Scope.Depth<L.Scope.Depth?i.ReferenceLocationList.some(u=>u>=L.BeginLocation&&u<=L.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1):i.Scope.Depth>L.Scope.Depth?L.ReferenceLocationList.some(u=>u>=i.BeginLocation&&u<=i.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1):L.BeginLocation<i.EndLocation&&L.EndLocation>i.BeginLocation&&(i.UsedNameArray[l]=!0))}):e.forEach(i=>{if(!i.Renamed)if(i.Type=="Global")i.UsedNameArray[l]=!0;else if(i.Type=="Local")L.ReferenceLocationList.some(u=>u>=i.BeginLocation&&u<=i.ScopeEndLocation?(i.UsedNameArray[l]=!0,!0):!1);else throw"Unreachable"})})}function F(J,b,d){let s=[];J.forEach(f=>{(!f.AssignedTo||!d)&&(s[f.Name]=!0)});let g=1,m=1;function e(f,c){f.Name=c,f.RenameList.forEach(p=>{p(c)})}if(d){let f={};J.forEach(c=>{c.AssignedTo&&!c.ChangedName&&(f[c.Name]=f[c.Name]||`G_${m}_`,c.ChangedName=!0,e(c,f[c.Name]),m++)})}function y(f){f.VariableList.forEach(c=>{let p=`L_${g}_`;c.Info.Type=="Argument"?p=`${p}arg${c.Info.Index}`:c.Info.Type=="LocalFunction"?p=`${p}func`:c.Info.Type=="ForRange"&&(p=`${p}forvar${c.Info.Index}`),e(c,p),g++}),f.ChildScopeList.forEach(c=>{y(c)})}y(b)}let Ie=`--[[
	Code generated using github.com/Herrtt/luamin.js
	An open source Lua beautifier and minifier.
--]]

`,$e={};$e.Minify=function(J,b){let d=le(J),[s,g]=ot(d);b.RenameVariables==!0&&T(s,g,b.RenameGlobals),b.SolveMath==!0&&it(d),Re(d);let m=ie(d);return m=`${Ie}

${m}`,m},$e.Beautify=function(J,b){let d=le(J),[s,g]=ot(d);b.RenameVariables&&F(s,g,b.RenameGlobals),b.SolveMath==!0&&it(d),rt(d);let m=ie(d);return m=`${Ie}

${m}`,m};try{nt!=null&&nt.exports!=null&&(nt.exports.Beautify=$e.Beautify,nt.exports.Minify=$e.Minify)}catch{}})(Mt);var kn=Mt.exports;const Gt=kn;vt.Beautify=Gt.Beautify;vt.Minify=Gt.Minify;vt.Uglify=Gt.Uglify;const Wt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Ot={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},bn={class:"page-div"},Sn={class:"card-header"},Ln={key:0},vn={class:"el-form-item-msg"},Vn={class:"card-header"},Cn={style:{display:"flex","flex-wrap":"wrap"}},En={style:{width:"99%"}},wn={style:{width:"100%"}},Fn={style:{"font-weight":"bolder"}},An={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Mn={class:"item-container"},Gn={style:{"font-weight":"bolder"}},Rn={class:"item-container"},In={style:{"font-weight":"bolder"}},Pn={class:"item-container"},xn={style:{"font-weight":"bolder"}},Un={class:"item-container"},Nn={style:{"font-weight":"bolder"}},Dn={class:"item-container"},$n={style:{"font-weight":"bolder"}},Wn={class:"item-container"},On={style:{"font-weight":"bolder"}},zn={class:"item-container"},qn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},Zn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},el={class:"item-container"},tl={style:{"font-weight":"bolder"}},nl={class:"item-container"},ll={style:{"font-weight":"bolder"}},al={class:"item-container"},ol={style:{"font-weight":"bolder"}},rl={class:"item-container"},il={style:{"font-weight":"bolder"}},ul={class:"item-container"},sl={style:{"font-weight":"bolder"}},dl={class:"item-container"},fl={style:{"font-weight":"bolder"}},cl={class:"item-container"},pl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},hl={class:"item-container"},Tl={style:{"font-weight":"bolder"}},yl={class:"item-container"},_l={style:{"font-weight":"bolder"}},kl={class:"item-container"},bl={class:"tip"},Sl={style:{display:"flex","align-items":"center"}},Ll={style:{display:"flex","justify-content":"flex-end"}},vl={class:"tip_warning"},Vl={style:{margin:"10px"}},Cl={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},El={__name:"room",setup(nt){const{t:v}=rn();un(async()=>{w.value=window.innerHeight,window.addEventListener("resize",()=>{w.value=window.innerHeight}),await Ne(),await at(),await te(),c()});const de=we(!1),w=we(0),{isMobile:P}=sn(),ge=dn(),fe=fn(),me=At(()=>ge.isDark),ve=At(()=>ge.language),st=fe.userInfo,Fe=At(()=>{const k=(Ke.value||[]).findIndex(Y=>Y.clusterName===ge.selectedDstCluster);return k!==-1?k:0}),lt=cn();pn();const ct=mn(),Qe=gn("refresh"),qe=(h,k)=>{let Y=null;return(...ce)=>{Y&&clearTimeout(Y),Y=setTimeout(()=>h(...ce),k)}},Ke=we([]),Ne=()=>{pt.clusters.all.get().then(h=>{Ke.value=h.data})},Je=()=>{pt.clusters.get().then(h=>{ge.dstClusters=h.data,ge.selectedDstCluster===null&&ge.dstClusters!==null&&(ge.selectedDstCluster=ge.dstClusters[0].clusterName)})},xe=we(0),at=()=>{hn.userInfo.get().then(h=>{xe.value=h.data.maxWorldsPerCluster})},je=()=>{setTimeout(()=>{lt.meta.isKeepAlive&&ct.removeKeepAliveName(lt.name),Qe(!1),mt(()=>{lt.meta.isKeepAlive&&ct.addKeepAliveName(lt.name),Qe(!0)})},0)},ke=we(0),oe=we(!1),ee=h=>{ke.value>h&&(ke.value=h)},le=()=>{ke.value--},Ye=async()=>{if(ke.value===0&&ot.value.validate(async h=>{h&&(it.value||(g.value=1,m.value="World1",e.value=[{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Fe.value*10,shardMasterPort:10888+Fe.value*10,steamMasterPort:27018+Fe.value*10,steamAuthenticationPort:8768+Fe.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0,saved:!1}]),ke.value++)}),ke.value===1){if(st.role!=="admin"&&e.value.length>xe.value){let h="";ve.value==="zh"?h=`超过最大可创建世界数量，当前最大可创建世界数为${xe.value}`:h=`Exceeds the maximum number of worlds that can be created. The current maximum is ${xe.value}`,tt(h);return}for(let h in f)f!=null&&f.key&&await f[h].validate();for(let h of e.value){if(h.levelData===""){tt(ve.value==="zh"?"请输入世界配置":"Please input world configure");return}if(h.shardMasterPort!==e.value[0].shardMasterPort){tt(ve.value==="zh"?"主节点端口必须一致":"Master Port must be same");return}try{St.parse(h.levelData)}catch{tt(v("setting.luaError"));return}}ke.value++;return}if(ke.value===2)if(Re.value)try{St.parse(Re.value.mod),ke.value++}catch{tt(v("setting.luaError"))}else ke.value++},ot=we(),ie=we({clusterName:ge.selectedDstCluster,name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,consoleEnabled:!0,password:"",token:""}),rt={name:[{required:!0,message:v("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:v("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:v("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:v("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:v("setting.roomBaseFormRules.token"),trigger:"blur"}]},Re=we({mod:""}),it=we(!1),te=()=>{const h={clusterName:ge.selectedDstCluster};pt.cluster.get(h).then(k=>{if(ie.value=k.data.clusterSetting,k.data.worlds){e.value=k.data.worlds;let Y=1,ce=999999;for(let ye of e.value){let Ve=parseInt(ye.name.replace("World",""));Ve>Y&&(Y=Ve),Ve<ce&&(ce=Ve),ye.saved=!0}g.value=Y,m.value="World"+ce.toString(),it.value=!0}else it.value=!1;Re.value.mod=k.data.mod})},Te=async h=>{switch(h){case"save":De();break;case"saveAndRestart":et();break;case"generateNewWorld":T();break}},De=()=>{const h={clusterSetting:ie.value,worlds:e.value,mod:Re.value.mod,sysSetting:{}};de.value=!0,pt.cluster.save.post(h).then(k=>{Bt(k.message),de.value=!1,Je()}).finally(()=>{de.value=!1,mt(()=>{je()})})},et=()=>{const h={clusterSetting:ie.value,worlds:e.value,mod:Re.value.mod,sysSetting:{}};de.value=!0,pt.cluster.saveRestart.post(h).then(k=>{Bt(k.message),de.value=!1,Je()}).finally(()=>{de.value=!1,mt(()=>{je()})})},T=()=>{const h={clusterSetting:ie.value,worlds:e.value,mod:Re.value.mod,sysSetting:{}};de.value=!0,pt.cluster.saveRegenerate.post(h).then(k=>{Bt(k.message),de.value=!1,Je()}).finally(()=>{de.value=!1,mt(()=>{je()})})},F=we({}),Ie=h=>{if(h==="")return;const k=St.parse(h),Y=$e(k);F.value=J(Y)};function $e(h){const Y=h.body[0].arguments[0];for(const ce of Y.fields)if(ce.key.type==="Identifier"&&ce.key.name==="overrides")return ce.value;return null}function J(h){const k={};for(const Y of h.fields){const ce=Y.key.name;k[ce]=Y.value.raw.replace(/"/g,"")}return k}const b=h=>{let k=vt.Beautify(h,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return k=k.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),k=k.replace(/ = /g,"="),k=k.replace(/\t/g,"  "),k=k.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),k=k.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),k=k.replace(/(.+)},\n/g,`$1
  },
`),k=k.replace(/^ +?\n/gm,""),k},d=qe(h=>{const k=h.name,Y=h.value;for(let ce of e.value)if(ce.name===m.value){const ye=St.parse(ce.levelData),Ve=$e(ye);for(let ze of Ve.fields)ze.key.name===k&&(ze.value.raw=`"${Y}"`);ce.levelData=s(ye);break}},100),s=(h,k=0)=>{const Y="    ".repeat(k);switch(h.type){case"Chunk":return h.body.map(ce=>s(ce,k)).join(`
`);case"LocalStatement":return`${Y}local ${h.variables.map(s).join(", ")} = ${h.init.map(s).join(", ")}`;case"FunctionDeclaration":return`${Y}function ${s(h.identifier)}(${h.parameters.map(s).join(", ")}) 
${s(h.body,k+1)}
${Y}end`;case"ReturnStatement":return`${Y}return ${h.arguments.map(s).join(", ")}`;case"BinaryExpression":return`${s(h.left)} ${h.operator} ${s(h.right)}`;case"CallStatement":return`${Y}${s(h.expression)}`;case"Identifier":return h.name;case"StringLiteral":return`${h.raw}`;case"NumericLiteral":return h.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${Y}{ ${h.fields.map(ce=>s(ce,k+1)).join(`,
`+Y)} }`;case"Field":return h.key?`${s(h.key)} = ${s(h.value)}`:s(h.value);case"AssignmentStatement":return`${Y}${h.variables.map(s).join(", ")} = ${h.init.map(s).join(", ")}`;case"CallExpression":return`${s(h.base)}(${h.arguments.map(s).join(", ")})`;case"TableKeyString":return`${s(h.key)} = ${s(h.value)}`;case"BooleanLiteral":return h.raw;case"TableKey":return`[${s(h.key)}] = ${s(h.value)}`;case"TableValue":return s(h.value);default:throw new Error(`Unsupported node type: ${h.type}`)}},g=we(1),m=we("World1"),e=we([{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Fe.value*10,shardMasterPort:10888+Fe.value*10,steamMasterPort:27018+Fe.value*10,steamAuthenticationPort:8768+Fe.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}]),y={id:[{required:!0,message:v("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:v("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:v("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:v("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:v("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:v("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:v("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},f={},c=()=>{for(let h of e.value){const k=e.value.length;g.value=k,f[`World${k}`]=we()}},p=(h,k)=>{if(k==="add"){g.value++;const Y=`World${g.value}`;f[Y]=we(),e.value.push({id:g.value+100,name:Y,isMaster:!1,levelData:"",serverPort:11e3+g.value+Fe.value*10,shardMasterPort:10888+Fe.value*10,steamMasterPort:27017+g.value+Fe.value*10,steamAuthenticationPort:8767+g.value+Fe.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}),m.value=Y}else if(k==="remove"){if(e.value.length===1){tt(ve.value==="zh"?"每个房间至少含有一个世界":"Every room must include at least one world");return}const Y=e.value;let ce=m.value;Y.forEach((ye,Ve)=>{if(ye.name===h){const ze=Y[Ve+1]||Y[Ve-1];ze&&(ce=ze.name)}}),m.value=ce,e.value=Y.filter(ye=>ye.name!==h),delete f[h]}L.value="Code"},L=we("Code"),t=h=>{for(let k of e.value)k.name===m.value&&(h.clusterType==="endless"&&(h.worldType==="ground"&&(k.levelData=Wt.master),h.worldType==="cave"&&(k.levelData=Wt.caves)),h.clusterType==="survival"&&(h.worldType==="ground"&&(k.levelData=Ot.master),h.worldType==="cave"&&(k.levelData=Ot.caves)))},l=we(""),i=async h=>{if(h==="Visualization")try{for(let k of e.value)if(k.name===m.value){l.value=u(k.levelData),await Ie(k.levelData);break}}catch{tt(ve.value==="zh"?"可视化配置加载失败":"Visualization load failed")}h==="Code"&&await mt(()=>{for(let k of e.value)if(k.name===m.value){k.levelData=b(k.levelData);break}})},u=h=>{const k=/location\s*=\s*"([^"]*)"/,Y=h.match(k);return Y?Y[1]:""},M=()=>{L.value="Code"},X=we(!1),ne=we(""),Ee=we([]),Pe=()=>{Ee.value=[{ID:void 0,name:"",maxPlayers:void 0}],ne.value="",X.value=!0},j=()=>{let h="",k="";for(let Y of Ee.value){if(!Y.ID){tt(ve.value==="zh"?"世界ID未填写":"World ID is required");return}if(!Y.name){tt(ve.value==="zh"?"世界名未填写":"World name is required");return}if(!Y.maxPlayers){tt(ve.value==="zh"?"世界最大玩家数未填写":"World max players is required");return}h=h+`["${Y.ID}"]="${Y.name}",`,k=k+`["${Y.ID}"]="${Y.maxPlayers}",`}ne.value=`
  ["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${k}},
      say_dest=true,
      world_name={${h}},
      world_prompt=true
    },
    enabled=true
  }`,ne.value="```lua ::open\n"+ne.value};return Tn(()=>ge.selectedDstCluster,h=>{h&&mt(()=>{je()})},{immediate:!1}),(h,k)=>{const Y=Se("el-step"),ce=Se("el-steps"),ye=Se("el-card"),Ve=Se("el-col"),ze=Se("el-row"),Ge=Se("el-input"),be=Se("el-form-item"),dt=Se("el-radio"),gt=Se("el-radio-group"),We=Se("el-switch"),Ze=Se("el-slider"),ft=Se("el-link"),Ae=Se("el-form"),C=Se("el-scrollbar"),R=Se("el-icon"),V=Se("el-button"),S=Se("el-dropdown-item"),x=Se("el-dropdown-menu"),N=Se("el-dropdown"),I=Se("el-tooltip"),W=Se("el-tab-pane"),O=Se("el-divider"),ae=Se("el-tabs"),Q=Se("el-result"),pe=Se("el-dialog");return U(),Z("div",bn,[E(ze,{gutter:10},{default:G(()=>[E(Ve,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:G(()=>[E(ye,{shadow:"never"},{default:G(()=>[E(ce,{active:ke.value,"align-center":"","finish-status":"success"},{default:G(()=>[E(Y,{title:a(P)?a(v)("setting.roomSettingMobile"):a(v)("setting.roomSetting"),onClick:k[0]||(k[0]=D=>ee(0))},null,8,["title"]),E(Y,{title:a(P)?a(v)("setting.worldSettingMobile"):a(v)("setting.worldSetting"),onClick:k[1]||(k[1]=D=>ee(1))},null,8,["title"]),E(Y,{title:a(P)?a(v)("setting.modSettingMobile"):a(v)("setting.modSetting"),onClick:k[2]||(k[2]=D=>ee(3))},null,8,["title"]),E(Y,{title:a(P)?a(v)("setting.finishSettingMobile"):a(v)("setting.finishSetting"),onClick:k[3]||(k[3]=D=>ee(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),E(ze,{gutter:10,style:{"margin-top":"5px"}},{default:G(()=>[E(Ve,{lg:24,md:24,sm:24,span:24,xs:24},{default:G(()=>[ke.value===0?(U(),ue(ye,{key:0,shadow:"never"},{header:G(()=>[K("div",Sn,[K("span",null,z(a(v)("setting.roomSetting")),1)])]),default:G(()=>[E(C,{height:w.value-438},{default:G(()=>[E(Ae,{ref_key:"clusterSettingFormRef",ref:ot,"label-position":a(P)?"top":"left","label-width":a(P)?"70":"auto",model:ie.value,rules:rt,size:a(P)?"small":"large",style:{"margin-right":"16px"}},{default:G(()=>[E(be,{label:a(v)("setting.baseForm.room"),prop:"name",style:Xe(a(P)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(Ge,{modelValue:ie.value.name,"onUpdate:modelValue":k[4]||(k[4]=D=>ie.value.name=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),a(P)?He("",!0):(U(),Z("div",Ln)),E(be,{label:a(v)("setting.baseForm.description"),prop:"description",style:Xe(a(P)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(Ge,{modelValue:ie.value.description,"onUpdate:modelValue":k[5]||(k[5]=D=>ie.value.description=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.gameMode.name"),prop:"gameMode",style:Xe(a(P)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(gt,{modelValue:ie.value.gameMode,"onUpdate:modelValue":k[6]||(k[6]=D=>ie.value.gameMode=D)},{default:G(()=>[E(dt,{label:a(v)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),E(dt,{label:a(v)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),E(dt,{label:a(v)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),E(dt,{label:a(v)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.pvp"),prop:"pvp",style:Xe(a(P)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(We,{modelValue:ie.value.pvp,"onUpdate:modelValue":k[7]||(k[7]=D=>ie.value.pvp=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.playerNum"),prop:"playerNum",style:Xe(a(P)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(Ze,{modelValue:ie.value.playerNum,"onUpdate:modelValue":k[8]||(k[8]=D=>ie.value.playerNum=D),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.backDays"),prop:"backDays",style:Xe(a(P)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(Ze,{modelValue:ie.value.backDays,"onUpdate:modelValue":k[9]||(k[9]=D=>ie.value.backDays=D),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.vote"),prop:"vote",style:Xe(a(P)?"padding-top: 0px":"padding-top: 29px")},{default:G(()=>[E(We,{modelValue:ie.value.vote,"onUpdate:modelValue":k[10]||(k[10]=D=>ie.value.vote=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.consoleEnabled"),prop:"consoleEnabled",style:Xe(a(P)?"padding-top: 0px":"padding-top: 29px")},{default:G(()=>[E(We,{modelValue:ie.value.consoleEnabled,"onUpdate:modelValue":k[11]||(k[11]=D=>ie.value.consoleEnabled=D)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.password"),style:Xe(a(P)?"padding-top: 0px":"padding-top: 30px")},{default:G(()=>[E(Ge,{modelValue:ie.value.password,"onUpdate:modelValue":k[12]||(k[12]=D=>ie.value.password=D),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["label","style"]),E(be,{label:a(v)("setting.baseForm.token"),prop:"token",style:Xe(a(P)?"padding-top: 0px":"padding-top: 30px")},{default:G(()=>[E(Ge,{modelValue:ie.value.token,"onUpdate:modelValue":k[13]||(k[13]=D=>ie.value.token=D),"show-password":""},null,8,["modelValue"]),K("div",vn,[E(ft,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:G(()=>[re(z(a(v)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label","style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):He("",!0),ke.value===1?(U(),ue(ye,{key:1,shadow:"never"},{header:G(()=>[K("div",Vn,[K("span",null,z(a(v)("setting.worldSetting")),1),K("div",null,[E(N,{trigger:"click",onCommand:t},{dropdown:G(()=>[E(x,null,{default:G(()=>[E(S,{command:{clusterType:"endless",worldType:"ground"},disabled:ie.value.gameMode!=="endless"},{default:G(()=>[re(z(a(v)("setting.endless"))+"-"+z(a(v)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),E(S,{command:{clusterType:"endless",worldType:"cave"},disabled:ie.value.gameMode!=="endless"},{default:G(()=>[re(z(a(v)("setting.endless"))+"-"+z(a(v)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"]),E(S,{command:{clusterType:"survival",worldType:"ground"},disabled:ie.value.gameMode!=="survival"},{default:G(()=>[re(z(a(v)("setting.survival"))+"-"+z(a(v)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),E(S,{command:{clusterType:"survival",worldType:"cave"},disabled:ie.value.gameMode!=="survival"},{default:G(()=>[re(z(a(v)("setting.survival"))+"-"+z(a(v)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"])]),_:1})]),default:G(()=>[E(V,{disabled:L.value!=="Code",type:"success"},{default:G(()=>[re(z(a(v)("setting.oneClick"))+" ",1),E(R,{class:"el-icon--right"},{default:G(()=>[E(a(Dt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:G(()=>[E(C,{height:w.value-450},{default:G(()=>[E(ae,{modelValue:m.value,"onUpdate:modelValue":k[15]||(k[15]=D=>m.value=D),editable:"",type:"card",onEdit:p,onTabChange:M,style:{"margin-right":"16px"}},{default:G(()=>[(U(!0),Z(_e,null,Le(e.value,D=>(U(),ue(W,{key:D.name,label:ve.value==="zh"?"世界":"World",name:D.name},{default:G(()=>[E(ze,null,{default:G(()=>[E(Ae,{ref_for:!0,ref:r=>f[D.name]=r,"label-position":a(P)||ve.value==="en"?"top":"left",model:D,rules:y,size:a(P)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:G(()=>[K("div",Cn,[E(be,{label:a(v)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.isMasterTip"),effect:"light",placement:"top"},{default:G(()=>[E(We,{modelValue:D.isMaster,"onUpdate:modelValue":r=>D.isMaster=r,"active-text":ve.value==="zh"?"是":"Y","inactive-text":ve.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:G(()=>[E(We,{modelValue:D.encodeUserPath,"onUpdate:modelValue":r=>D.encodeUserPath=r,"active-text":ve.value==="zh"?"是":"Y","inactive-text":ve.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.idTip"),effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.id,"onUpdate:modelValue":r=>D.id=r,modelModifiers:{number:!0},disabled:D.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.serverPortTip"),effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.serverPort,"onUpdate:modelValue":r=>D.serverPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.noEdit")+"，cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.shardMasterPort,"onUpdate:modelValue":r=>D.shardMasterPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.noEdit")+"，server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.steamMasterPort,"onUpdate:modelValue":r=>D.steamMasterPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.noEdit")+"，server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.steamAuthenticationPort,"onUpdate:modelValue":r=>D.steamAuthenticationPort=r,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.shardMasterIp,"onUpdate:modelValue":r=>D.shardMasterIp=r,disabled:D.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(be,{label:a(v)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:G(()=>[E(I,{"show-after":100,content:a(v)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:G(()=>[E(Ge,{modelValue:D.clusterKey,"onUpdate:modelValue":r=>D.clusterKey=r,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),K("div",En,[E(ae,{modelValue:L.value,"onUpdate:modelValue":k[14]||(k[14]=r=>L.value=r),onTabChange:i},{default:G(()=>[E(W,{label:ve.value==="zh"?"配置文件":"Code",name:"Code"},{default:G(()=>[K("div",wn,[E(Ae,{model:D},{default:G(()=>[E(be,null,{default:G(()=>[E($t,{modelValue:D.levelData,"onUpdate:modelValue":r=>D.levelData=r,height:w.value*.5,theme:me.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(ie.value.gameMode==="endless"||ie.value.gameMode==="survival")&&D.levelData!==""?(U(),ue(W,{key:0,label:a(v)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:G(()=>[l.value==="forest"&&Object.keys(F.value).length!==0?(U(),Z(_e,{key:0},[E(O,{"content-position":"center"},{default:G(()=>[K("span",Fn,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),K("div",An,[(U(!0),Z(_e,null,Le(a(ut).global,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Bn,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),K("div",Mn,[(U(!0),Z(_e,null,Le(a(ut).events,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Gn,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),K("div",Rn,[(U(!0),Z(_e,null,Le(a(ut).survivors,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",In,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),K("div",Pn,[(U(!0),Z(_e,null,Le(a(ut).world,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",xn,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),K("div",Un,[(U(!0),Z(_e,null,Le(a(ut).resourceRegrowth,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Nn,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),K("div",Dn,[(U(!0),Z(_e,null,Le(a(ut).unnaturalPortalResource,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",$n,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),K("div",Wn,[(U(!0),Z(_e,null,Le(a(ut).creatures,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",On,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),K("div",zn,[(U(!0),Z(_e,null,Le(a(ut).hostileCreatures,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",qn,z(a(v)("setting.groundVisualizationRule")),1),re(" - "+z(a(v)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),K("div",Kn,[(U(!0),Z(_e,null,Le(a(ut).giants,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",jn,z(a(v)("setting.groundVisualizationGeneration")),1),re(" - "+z(a(v)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),K("div",Hn,[(U(!0),Z(_e,null,Le(a(ht).global,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Jn,z(a(v)("setting.groundVisualizationGeneration")),1),re(" - "+z(a(v)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),K("div",Yn,[(U(!0),Z(_e,null,Le(a(ht).world,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Zn,z(a(v)("setting.groundVisualizationGeneration")),1),re(" - "+z(a(v)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),K("div",Xn,[(U(!0),Z(_e,null,Le(a(ht).resources,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Qn,z(a(v)("setting.groundVisualizationGeneration")),1),re(" - "+z(a(v)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),K("div",el,[(U(!0),Z(_e,null,Le(a(ht).creaturesAndSpawners,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",tl,z(a(v)("setting.groundVisualizationGeneration")),1),re(" - "+z(a(v)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),K("div",nl,[(U(!0),Z(_e,null,Le(a(ht).hostileCreaturesAndSpawners,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))])],64)):He("",!0),l.value==="cave"&&Object.keys(F.value).length!==0?(U(),Z(_e,{key:1},[E(O,{"content-position":"center"},{default:G(()=>[K("span",ll,z(a(v)("setting.cavesVisualizationRule")),1),re(" - "+z(a(v)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),K("div",al,[(U(!0),Z(_e,null,Le(a(Tt).world,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",ol,z(a(v)("setting.cavesVisualizationRule")),1),re(" - "+z(a(v)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),K("div",rl,[(U(!0),Z(_e,null,Le(a(Tt).resourceRegrowth,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",il,z(a(v)("setting.cavesVisualizationRule")),1),re(" - "+z(a(v)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),K("div",ul,[(U(!0),Z(_e,null,Le(a(Tt).creatures,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",sl,z(a(v)("setting.cavesVisualizationRule")),1),re(" - "+z(a(v)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),K("div",dl,[(U(!0),Z(_e,null,Le(a(Tt).hostileCreatures,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",fl,z(a(v)("setting.cavesVisualizationRule")),1),re(" - "+z(a(v)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),K("div",cl,[(U(!0),Z(_e,null,Le(a(Tt).giants,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",pl,z(a(v)("setting.cavesVisualizationGeneration")),1),re(" - "+z(a(v)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),K("div",ml,[(U(!0),Z(_e,null,Le(a(bt).world,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(yt)[r].configs,customConfigsValue:a(yt)[r].customConfigsValue,defaultModelValue:a(yt)[r].modelValue,i18n:a(yt)[r].i18n,image:a(yt)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",gl,z(a(v)("setting.cavesVisualizationGeneration")),1),re(" - "+z(a(v)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),K("div",hl,[(U(!0),Z(_e,null,Le(a(bt).resources,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",Tl,z(a(v)("setting.cavesVisualizationGeneration")),1),re(" - "+z(a(v)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),K("div",yl,[(U(!0),Z(_e,null,Le(a(bt).creaturesAndSpawners,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(O,{"content-position":"center"},{default:G(()=>[K("span",_l,z(a(v)("setting.cavesVisualizationGeneration")),1),re(" - "+z(a(v)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),K("div",kl,[(U(!0),Z(_e,null,Le(a(bt).hostileCreaturesAndSpawners,(r,H)=>(U(),Z("div",null,[(U(),ue(Ce,{key:H,modelValue:F.value[r],"onUpdate:modelValue":q=>F.value[r]=q,configs:a(B)[r].configs,customConfigsValue:a(B)[r].customConfigsValue,defaultModelValue:a(B)[r].modelValue,i18n:a(B)[r].i18n,image:a(B)[r].image,name:r,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))])],64)):He("",!0)]),_:2},1032,["label"])):He("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):He("",!0),ke.value===2?(U(),ue(ye,{key:2,shadow:"never"},{default:G(()=>[K("div",bl,[K("div",Sl,[K("span",null,z(a(v)("setting.multiWorldTip")),1),E(V,{size:"small",style:{"margin-left":"10px"},type:"primary",onClick:Pe},{default:G(()=>[re(z(ve.value==="zh"?"多层世界":"Multi-world"),1)]),_:1})])]),E(Ae,{model:Re.value},{default:G(()=>[E(be,null,{default:G(()=>[E($t,{modelValue:Re.value.mod,"onUpdate:modelValue":k[16]||(k[16]=D=>Re.value.mod=D),height:w.value-481,theme:me.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):He("",!0),ke.value===3?(U(),ue(ye,{key:3,shadow:"never"},{default:G(()=>[K("div",{style:Xe({height:`${w.value-381}px`}),class:"fcc"},[E(Q,{"sub-title":a(v)("setting.finish.description"),title:a(v)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):He("",!0)]),_:1})]),_:1}),E(ze,{gutter:10},{default:G(()=>[E(Ve,{lg:24,md:24,sm:24,span:24,xs:24},{default:G(()=>[E(ye,{shadow:"never"},{default:G(()=>[K("div",Ll,[ke.value>0?(U(),ue(V,{key:0,onClick:le},{default:G(()=>[re(z(a(v)("setting.button.prev")),1)]),_:1})):He("",!0),ke.value<3?(U(),ue(V,{key:1,type:"primary",loading:oe.value,onClick:Ye},{default:G(()=>[re(z(a(v)("setting.button.next")),1)]),_:1},8,["loading"])):He("",!0),ke.value===3?(U(),ue(N,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:Te},{dropdown:G(()=>[E(x,null,{default:G(()=>[E(S,{command:"save"},{default:G(()=>[re(z(a(v)("setting.button.save")),1)]),_:1}),E(S,{command:"saveAndRestart"},{default:G(()=>[re(z(a(v)("setting.button.saveAndRestart")),1)]),_:1}),E(S,{command:"generateNewWorld"},{default:G(()=>[re(z(a(v)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:G(()=>[E(V,{loading:de.value,type:"warning"},{default:G(()=>[re(z(a(v)("setting.button.actions"))+" ",1),E(R,{class:"el-icon--right"},{default:G(()=>[E(a(Dt))]),_:1})]),_:1},8,["loading"])]),_:1})):He("",!0)])]),_:1})]),_:1})]),_:1}),E(pe,{modelValue:X.value,"onUpdate:modelValue":k[18]||(k[18]=D=>X.value=D),width:"65%"},{header:G(()=>[re(z(a(v)("setting.multiWorldDialog.title")),1)]),default:G(()=>[K("div",vl,z(a(v)("setting.multiWorldDialog.tip")),1),K("div",Vl,[E(Ae,{model:Ee.value,"label-position":"top"},{default:G(()=>[(U(!0),Z(_e,null,Le(Ee.value,D=>(U(),ue(be,null,{default:G(()=>[E(Ge,{modelValue:D.ID,"onUpdate:modelValue":r=>D.ID=r,placeholder:a(v)("setting.multiWorldDialog.placeholder0"),type:"number",style:{width:"20%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),E(Ge,{modelValue:D.name,"onUpdate:modelValue":r=>D.name=r,placeholder:a(v)("setting.multiWorldDialog.placeholder1"),style:{"margin-left":"2%",width:"48%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),E(Ge,{modelValue:D.maxPlayers,"onUpdate:modelValue":r=>D.maxPlayers=r,placeholder:a(v)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"2%",width:"28%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),K("div",Cl,[E(V,{type:"success",onClick:k[17]||(k[17]=D=>Ee.value.push({ID:void 0,name:"",maxPlayers:void 0}))},{default:G(()=>[re(z(ve.value==="zh"?"新增一条":"New Line"),1)]),_:1}),E(V,{type:"primary",onClick:j},{default:G(()=>[re(z(ve.value==="zh"?"生成配置":"Generate"),1)]),_:1})])]),_:1},8,["model"]),ne.value?(U(),ue(O,{key:0})):He("",!0),ne.value?(U(),ue(a(yn),{key:1,ref:"threeCodeOneRef",modelValue:ne.value,theme:me.value?"dark":"light",previewTheme:"github"},null,8,["modelValue","theme"])):He("",!0)])]),_:1},8,["modelValue"])])}}},Ml=on(El,[["__scopeId","data-v-cb4867fd"]]);export{Ml as default};
