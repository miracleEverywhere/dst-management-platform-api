import{ae as Pt,af as an,_ as on,u as rn,o as un,r as Re,a as sn,g as dn,b as fn,c as xt,D as cn,G as pn,d as mn,H as gn,a0 as kt,Q as hn,w as Tn,I as bt,J as Me,f as U,i as ne,l as L,m as A,j as a,q as be,n as Q,t as J,z as ot,v as Xe,p as he,ag as Kt,F as Ae,x as Ge,C as rt,A as Ut}from"./index-D9-3-0jp.js";import{s as jt}from"./index-CZp1uTF3.js";import{g as ht,_ as Ie,o as B,a as vt,c as Lt,b as wt,d as Vt}from"./levelDataSetting-CRtQqfrE.js";import{M as yn}from"./preview-CQBwquJE.js";import{b as _n}from"./tools-B1ovlHmC.js";var At={exports:{}};At.exports;(function(ft,S){(function(Ee,V,N){var Te=S&&!S.nodeType&&S,re=ft&&!ft.nodeType&&ft,we=Te&&re&&typeof Pt=="object"&&Pt,ct=re&&re.exports===Te&&Te;we&&(we.global===we||we.window===we||we.self===we)&&(Ee=we),N(Te&&re?ct?re.exports:Te:Ee[V]={})})(Pt,"luaparse",function(Ee){Ee.version="0.3.1";var V,N,Te,re,we,ct=Ee.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function Be(n,o){return o=o||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(o|192|n>>6,o|128|n&63):n<65536?String.fromCharCode(o|224|n>>12,o|128|n>>6&63,o|128|n&63):n<1114112?String.fromCharCode(o|240|n>>18,o|128|n>>12&63,o|128|n>>6&63,o|128|n&63):null}function pt(n,o){for(var y=n.toString(16);y.length<o;)y="0"+y;return y}function $e(n){return function(o){var y=n.exec(o);if(!y)return o;ie(null,te.invalidCodeUnit,pt(y[0].charCodeAt(0),4).toUpperCase())}}var mt={"pseudo-latin1":{fixup:$e(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return Be(n)}},"x-user-defined":{fixup:$e(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return Be(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},it=1,Ze=2,et=4,qe=8,ut=16,Ke=32,tt=64,st=128,nt=256;Ee.tokenTypes={EOF:it,StringLiteral:Ze,Keyword:et,Identifier:qe,NumericLiteral:ut,Punctuator:Ke,BooleanLiteral:tt,NilLiteral:st,VarargLiteral:nt};var te=Ee.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},ce=Ee.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,o){return{type:"IfClause",condition:n,body:o}},elseifClause:function(n,o){return{type:"ElseifClause",condition:n,body:o}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,o){return{type:"WhileStatement",condition:n,body:o}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,o){return{type:"RepeatStatement",condition:n,body:o}},localStatement:function(n,o){return{type:"LocalStatement",variables:n,init:o}},assignmentStatement:function(n,o){return{type:"AssignmentStatement",variables:n,init:o}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,o,y,w){return{type:"FunctionDeclaration",identifier:n,isLocal:y,parameters:o,body:w}},forNumericStatement:function(n,o,y,w,D){return{type:"ForNumericStatement",variable:n,start:o,end:y,step:w,body:D}},forGenericStatement:function(n,o,y){return{type:"ForGenericStatement",variables:n,iterators:o,body:y}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,o,y){return n=n===Ze?"StringLiteral":n===ut?"NumericLiteral":n===tt?"BooleanLiteral":n===st?"NilLiteral":"VarargLiteral",{type:n,value:o,raw:y}},tableKey:function(n,o){return{type:"TableKey",key:n,value:o}},tableKeyString:function(n,o){return{type:"TableKeyString",key:n,value:o}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,o,y){var w=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:w,operator:n,left:o,right:y}},unaryExpression:function(n,o){return{type:"UnaryExpression",operator:n,argument:o}},memberExpression:function(n,o,y){return{type:"MemberExpression",indexer:o,identifier:y,base:n}},indexExpression:function(n,o){return{type:"IndexExpression",base:n,index:o}},callExpression:function(n,o){return{type:"CallExpression",base:n,arguments:o}},tableCallExpression:function(n,o){return{type:"TableCallExpression",base:n,arguments:o}},stringCallExpression:function(n,o){return{type:"StringCallExpression",base:n,argument:o}},comment:function(n,o){return{type:"Comment",value:n,raw:o}}};function se(n){if(x){var o=I.pop();o.complete(),o.bless(n)}return N.onCreateNode&&N.onCreateNode(n),n}var lt=Array.prototype.slice,Tt=function(n,o){for(var y=0,w=n.length;y<w;++y)if(n[y]===o)return y;return-1};Array.prototype.indexOf&&(Tt=function(n,o){return n.indexOf(o)});function _t(n,o,y){for(var w=0,D=n.length;w<D;++w)if(n[w][o]===y)return w;return-1}function pe(n){var o=lt.call(arguments,1);return n=n.replace(/%(\d)/g,function(y,w){return""+o[w-1]||""}),n}var gt=function(n){for(var o=lt.call(arguments,1),y,w,D=0,Se=o.length;D<Se;++D){y=o[D];for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&(n[w]=y[w])}return n};Object.assign&&(gt=Object.assign),Ee.SyntaxError=SyntaxError;function je(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function ie(n){var o=pe.apply(null,lt.call(arguments,1)),y,w;throw n===null||typeof n.line>"u"?(w=T-d+1,y=je(new SyntaxError(pe("[%1:%2] %3",p,w,o))),y.index=T,y.line=p,y.column=w):(w=n.range[0]-n.lineStart,y=je(new SyntaxError(pe("[%1:%2] %3",n.line,w,o))),y.line=n.line,y.index=n.range[0],y.column=w),y}function Fe(n){var o=V.slice(n.range[0],n.range[1]);return o||n.value}function He(n,o){ie(o,te.expectedToken,n,Fe(o))}function dt(n){var o=Fe(X);if(typeof n.type<"u"){var y;switch(n.type){case Ze:y="string";break;case et:y="keyword";break;case qe:y="identifier";break;case ut:y="number";break;case Ke:y="symbol";break;case tt:y="boolean";break;case st:return ie(n,te.unexpected,"symbol","nil",o);case it:return ie(n,te.unexpectedEOF)}return ie(n,te.unexpected,y,Fe(n),o)}return ie(n,te.unexpected,"symbol",n,o)}var T,z,Y,X,b,f,p,d;Ee.lex=g;function g(){for(h();V.charCodeAt(T)===45&&V.charCodeAt(T+1)===45;)Pe(),h();if(T>=Te)return{type:it,value:"<eof>",line:p,lineStart:d,range:[T,T]};var n=V.charCodeAt(T),o=V.charCodeAt(T+1);if(f=T,ve(n))return c();switch(n){case 39:case 34:return k();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l();case 46:return v(o)?l():o===46?V.charCodeAt(T+2)===46?m():s(".."):s(".");case 61:return s(o===61?"==":"=");case 62:return re.bitwiseOperators&&o===62?s(">>"):s(o===61?">=":">");case 60:return re.bitwiseOperators&&o===60?s("<<"):s(o===61?"<=":"<");case 126:if(o===61)return s("~=");if(!re.bitwiseOperators)break;return s("~");case 58:return re.labels&&o===58?s("::"):s(":");case 91:return o===91||o===61?t():s("[");case 47:return re.integerDivision&&o===47?s("//"):s("/");case 38:case 124:if(!re.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return s(V.charAt(T))}return dt(V.charAt(T))}function e(){var n=V.charCodeAt(T),o=V.charCodeAt(T+1);return G(n)?(n===10&&o===13&&++T,n===13&&o===10&&++T,++p,d=++T,!0):!1}function h(){for(;T<Te;){var n=V.charCodeAt(T);if(St(n))++T;else if(!e())break}}function c(){for(var n,o;xe(V.charCodeAt(++T)););return n=we.fixup(V.slice(f,T)),Ne(n)?o=et:n==="true"||n==="false"?(o=tt,n=n==="true"):n==="nil"?(o=st,n=null):o=qe,{type:o,value:n,line:p,lineStart:d,range:[f,T]}}function s(n){return T+=n.length,{type:Ke,value:n,line:p,lineStart:d,range:[f,T]}}function m(){return T+=3,{type:nt,value:"...",line:p,lineStart:d,range:[f,T]}}function k(){for(var n=V.charCodeAt(T++),o=p,y=d,w=T,D=we.discardStrings?null:"",Se;Se=V.charCodeAt(T++),n!==Se;)if((T>Te||G(Se))&&(D+=V.slice(w,T-1),ie(null,te.unfinishedString,V.slice(f,T-1))),Se===92){if(!we.discardStrings){var Ce=V.slice(w,T-1);D+=we.fixup(Ce)}var ze=Ue();we.discardStrings||(D+=ze),w=T}return we.discardStrings||(D+=we.encodeByte(null),D+=we.fixup(V.slice(w,T-1))),{type:Ze,value:D,line:o,lineStart:y,lastLine:p,lastLineStart:d,range:[f,T]}}function t(){var n=p,o=d,y=me(!1);return y===!1&&ie(z,te.expected,"[",Fe(z)),{type:Ze,value:we.discardStrings?null:we.fixup(y),line:n,lineStart:o,lastLine:p,lastLineStart:d,range:[f,T]}}function l(){var n=V.charAt(T),o=V.charAt(T+1),y=n==="0"&&"xX".indexOf(o||null)>=0?M():de(),w=r(),D=u();return D&&(w||y.hasFractionPart)&&ie(null,te.malformedNumber,V.slice(f,T)),{type:ut,value:y.value,line:p,lineStart:d,range:[f,T]}}function r(){if(re.imaginaryNumbers)return"iI".indexOf(V.charAt(T)||null)>=0?(++T,!0):!1}function u(){if(re.integerSuffixes){if("uU".indexOf(V.charAt(T)||null)>=0)if(++T,"lL".indexOf(V.charAt(T)||null)>=0){if(++T,"lL".indexOf(V.charAt(T)||null)>=0)return++T,"ULL";ie(null,te.malformedNumber,V.slice(f,T))}else ie(null,te.malformedNumber,V.slice(f,T));else if("lL".indexOf(V.charAt(T)||null)>=0){if(++T,"lL".indexOf(V.charAt(T)||null)>=0)return++T,"LL";ie(null,te.malformedNumber,V.slice(f,T))}}}function M(){var n=0,o=1,y=1,w,D,Se,Ce;for(Ce=T+=2,Z(V.charCodeAt(T))||ie(null,te.malformedNumber,V.slice(f,T));Z(V.charCodeAt(T));)++T;w=parseInt(V.slice(Ce,T),16);var ze=!1;if(V.charAt(T)==="."){for(ze=!0,D=++T;Z(V.charCodeAt(T));)++T;n=V.slice(D,T),n=D===T?0:parseInt(n,16)/Math.pow(16,T-D)}var Et=!1;if("pP".indexOf(V.charAt(T)||null)>=0){for(Et=!0,++T,"+-".indexOf(V.charAt(T)||null)>=0&&(y=V.charAt(T++)==="+"?1:-1),Se=T,v(V.charCodeAt(T))||ie(null,te.malformedNumber,V.slice(f,T));v(V.charCodeAt(T));)++T;o=V.slice(Se,T),o=Math.pow(2,o*y)}return{value:(w+n)*o,hasFractionPart:ze||Et}}function de(){for(;v(V.charCodeAt(T));)++T;var n=!1;if(V.charAt(T)===".")for(n=!0,++T;v(V.charCodeAt(T));)++T;var o=!1;if("eE".indexOf(V.charAt(T)||null)>=0)for(o=!0,++T,"+-".indexOf(V.charAt(T)||null)>=0&&++T,v(V.charCodeAt(T))||ie(null,te.malformedNumber,V.slice(f,T));v(V.charCodeAt(T));)++T;return{value:parseFloat(V.slice(f,T)),hasFractionPart:n||o}}function ke(){var n=T++;for(V.charAt(T++)!=="{"&&ie(null,te.braceExpected,"{","\\"+V.slice(n,T)),Z(V.charCodeAt(T))||ie(null,te.hexadecimalDigitExpected,"\\"+V.slice(n,T));V.charCodeAt(T)===48;)++T;for(var o=T;Z(V.charCodeAt(T));)++T,T-o>6&&ie(null,te.tooLargeCodepoint,"\\"+V.slice(n,T));var y=V.charAt(T++);y!=="}"&&(y==='"'||y==="'"?ie(null,te.braceExpected,"}","\\"+V.slice(n,T--)):ie(null,te.hexadecimalDigitExpected,"\\"+V.slice(n,T)));var w=parseInt(V.slice(o,T-1)||"0",16),D="\\"+V.slice(n,T);return w>1114111&&ie(null,te.tooLargeCodepoint,D),we.encodeUTF8(w,D)}function Ue(){var n=T;switch(V.charAt(T)){case"a":return++T,"\x07";case"n":return++T,`
`;case"r":return++T,"\r";case"t":return++T,"	";case"v":return++T,"\v";case"b":return++T,"\b";case"f":return++T,"\f";case"\r":case`
`:return e(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;v(V.charCodeAt(T))&&T-n<3;)++T;var o=V.slice(n,T),y=parseInt(o,10);return y>255&&ie(null,te.decimalEscapeTooLarge,"\\"+y),we.encodeByte(y,"\\"+o);case"z":if(re.skipWhitespaceEscape)return++T,h(),"";break;case"x":if(re.hexEscapes){if(Z(V.charCodeAt(T+1))&&Z(V.charCodeAt(T+2)))return T+=3,we.encodeByte(parseInt(V.slice(n+1,T),16),"\\"+V.slice(n,T));ie(null,te.hexadecimalDigitExpected,"\\"+V.slice(n,T+2))}break;case"u":if(re.unicodeEscapes)return ke();break;case"\\":case'"':case"'":return V.charAt(T++)}return re.strictEscapes&&ie(null,te.invalidEscape,"\\"+V.slice(n,T+1)),V.charAt(T++)}function Pe(){f=T,T+=2;var n=V.charAt(T),o="",y=!1,w=T,D=d,Se=p;if(n==="["&&(o=me(!0),o===!1?o=n:y=!0),!y){for(;T<Te&&!G(V.charCodeAt(T));)++T;N.comments&&(o=V.slice(w,T))}if(N.comments){var Ce=ce.comment(o,V.slice(f,T));N.locations&&(Ce.loc={start:{line:Se,column:f-D},end:{line:p,column:T-d}}),N.ranges&&(Ce.range=[f,T]),N.onCreateNode&&N.onCreateNode(Ce),b.push(Ce)}}function me(n){var o=0,y="",w=!1,D,Se,Ce=p;for(++T;V.charAt(T+o)==="=";)++o;if(V.charAt(T+o)!=="[")return!1;for(T+=o+1,G(V.charCodeAt(T))&&e(),Se=T;T<Te;){for(;G(V.charCodeAt(T));)e();if(D=V.charAt(T++),D==="]"){w=!0;for(var ze=0;ze<o;++ze)V.charAt(T+ze)!=="="&&(w=!1);V.charAt(T+o)!=="]"&&(w=!1)}if(w)return y+=V.slice(Se,T-1),T+=o+1,y}ie(null,n?te.unfinishedLongComment:te.unfinishedLongString,Ce,"<eof>")}function $(){Y=z,z=X,X=g()}function le(n){return n===z.value?($(),!0):!1}function Ve(n){n===z.value?$():ie(z,te.expected,n,Fe(z))}function St(n){return n===9||n===32||n===11||n===12}function G(n){return n===10||n===13}function v(n){return n>=48&&n<=57}function Z(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ve(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||re.extendedIdentifiers&&n>=128)}function xe(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||re.extendedIdentifiers&&n>=128)}function Ne(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:re.labels&&!re.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function Je(n){return Ke===n.type?"#-~".indexOf(n.value)>=0:et===n.type?n.value==="not":!1}function We(n){if(it===n.type)return!0;if(et!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var Le,Qe,yt;function C(){var n=Le[Qe++].slice();Le.push(n),N.onCreateScope&&N.onCreateScope()}function F(){Le.pop(),--Qe,N.onDestroyScope&&N.onDestroyScope()}function E(n){N.onLocalDeclaration&&N.onLocalDeclaration(n),Tt(Le[Qe],n)===-1&&Le[Qe].push(n)}function _(n){E(n.name),R(n,!0)}function R(n,o){!o&&_t(yt,"name",n.name)===-1&&yt.push(n),n.isLocal=o}function W(n){return Tt(Le[Qe],n)!==-1}var I=[],x;function ee(){return new ye(z)}function ye(n){N.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),N.ranges&&(this.range=[n.range[0],0])}ye.prototype.complete=function(){N.locations&&(this.loc.end.line=Y.lastLine||Y.line,this.loc.end.column=Y.range[1]-(Y.lastLineStart||Y.lineStart)),N.ranges&&(this.range[1]=Y.range[1])},ye.prototype.bless=function(n){if(this.loc){var o=this.loc;n.loc={start:{line:o.start.line,column:o.start.column},end:{line:o.end.line,column:o.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function ue(){x&&I.push(ee())}function _e(n){x&&I.push(n)}function fe(){this.scopes=[],this.pendingGotos=[]}fe.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},fe.prototype.pushScope=function(n){var o={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(o)},fe.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var o=this.pendingGotos[n];o.maxDepth>=this.scopes.length&&--o.maxDepth<=0&&ie(o.token,te.labelNotVisible,o.target)}this.scopes.pop()},fe.prototype.addGoto=function(n,o){for(var y=[],w=0;w<this.scopes.length;++w){var D=this.scopes[w];if(y.push(D.locals.length),Object.prototype.hasOwnProperty.call(D.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:o,localCounts:y})},fe.prototype.addLabel=function(n,o){var y=this.currentScope();if(Object.prototype.hasOwnProperty.call(y.labels,n))ie(o,te.labelAlreadyDefined,n,y.labels[n].line);else{for(var w=[],D=0;D<this.pendingGotos.length;++D){var Se=this.pendingGotos[D];if(Se.maxDepth>=this.scopes.length&&Se.target===n){Se.localCounts[this.scopes.length-1]<y.locals.length&&y.deferredGotos.push(Se);continue}w.push(Se)}this.pendingGotos=w}y.labels[n]={localCount:y.locals.length,line:o.line}},fe.prototype.addLocal=function(n,o){this.currentScope().locals.push({name:n,token:o})},fe.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},fe.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),o=n.deferredGotos,y=0;y<o.length;++y){var w=o[y];ie(w.token,te.gotoJumpInLocalScope,w.target,n.locals[w.localCounts[this.scopes.length-1]].name)}};function ge(){this.level=0,this.loopLevels=[]}ge.prototype.isInLoop=function(){return!!this.loopLevels.length},ge.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},ge.prototype.popScope=function(){var n=this.loopLevels,o=n.length;o&&n[o-1]===this.level&&n.pop(),--this.level},ge.prototype.addGoto=ge.prototype.addLabel=function(){throw new Error("This should never happen")},ge.prototype.addLocal=ge.prototype.raiseDeferredErrors=function(){};function Oe(){return re.labels?new fe:new ge}function at(){$(),ue(),N.scope&&C();var n=Oe();n.allowVararg=!0,n.pushScope();var o=P(n);return n.popScope(),N.scope&&F(),it!==z.type&&dt(z),x&&!o.length&&(Y=z),se(ce.chunk(o))}function P(n){for(var o=[],y;!We(z);){if(z.value==="return"||!re.relaxedBreak&&z.value==="break"){o.push(i(n));break}y=i(n),le(";"),y&&o.push(y)}return o}function i(n){if(ue(),Ke===z.type&&le("::"))return ae(n);if(re.emptyStatement&&le(";")){x&&I.pop();return}if(n.raiseDeferredErrors(),et===z.type)switch(z.value){case"local":return $(),Qt(n);case"if":return $(),Yt(n);case"return":return $(),oe(n);case"function":$();var o=en();return Mt(o);case"while":return $(),j(n);case"for":return $(),Zt(n);case"repeat":return $(),H(n);case"break":return $(),n.isInLoop()||ie(z,te.noLoopToBreak,z.value),q();case"do":return $(),K(n);case"goto":return $(),O(n)}return re.contextualGoto&&z.type===qe&&z.value==="goto"&&X.type===qe&&X.value!=="goto"?($(),O(n)):(x&&I.pop(),Xt(n))}function ae(n){var o=z,y=Ye();return N.scope&&(E("::"+o.value+"::"),R(y,!0)),Ve("::"),n.addLabel(o.value,o),se(ce.labelStatement(y))}function q(){return se(ce.breakStatement())}function O(n){var o=z.value,y=Y,w=Ye();return n.addGoto(o,y),se(ce.gotoStatement(w))}function K(n){N.scope&&C(),n.pushScope();var o=P(n);return n.popScope(),N.scope&&F(),Ve("end"),se(ce.doStatement(o))}function j(n){var o=De(n);Ve("do"),N.scope&&C(),n.pushScope(!0);var y=P(n);return n.popScope(),N.scope&&F(),Ve("end"),se(ce.whileStatement(o,y))}function H(n){N.scope&&C(),n.pushScope(!0);var o=P(n);Ve("until"),n.raiseDeferredErrors();var y=De(n);return n.popScope(),N.scope&&F(),se(ce.repeatStatement(y,o))}function oe(n){var o=[];if(z.value!=="end"){var y=Ct(n);for(y!=null&&o.push(y);le(",");)y=De(n),o.push(y);le(";")}return se(ce.returnStatement(o))}function Yt(n){var o=[],y,w,D;for(x&&(D=I[I.length-1],I.push(D)),y=De(n),Ve("then"),N.scope&&C(),n.pushScope(),w=P(n),n.popScope(),N.scope&&F(),o.push(se(ce.ifClause(y,w))),x&&(D=ee());le("elseif");)_e(D),y=De(n),Ve("then"),N.scope&&C(),n.pushScope(),w=P(n),n.popScope(),N.scope&&F(),o.push(se(ce.elseifClause(y,w))),x&&(D=ee());return le("else")&&(x&&(D=new ye(Y),I.push(D)),N.scope&&C(),n.pushScope(),w=P(n),n.popScope(),N.scope&&F(),o.push(se(ce.elseClause(w)))),Ve("end"),se(ce.ifStatement(o))}function Zt(n){var o=Ye(),y;if(N.scope&&(C(),_(o)),le("=")){var w=De(n);Ve(",");var D=De(n),Se=le(",")?De(n):null;return Ve("do"),n.pushScope(!0),y=P(n),n.popScope(),Ve("end"),N.scope&&F(),se(ce.forNumericStatement(o,w,D,Se,y))}else{for(var Ce=[o];le(",");)o=Ye(),N.scope&&_(o),Ce.push(o);Ve("in");var ze=[];do{var Et=De(n);ze.push(Et)}while(le(","));return Ve("do"),n.pushScope(!0),y=P(n),n.popScope(),Ve("end"),N.scope&&F(),se(ce.forGenericStatement(Ce,ze,y))}}function Qt(n){var o,y=Y;if(qe===z.type){var w=[],D=[];do o=Ye(),w.push(o),n.addLocal(o.name,y);while(le(","));if(le("="))do{var Se=De(n);D.push(Se)}while(le(","));if(N.scope)for(var Ce=0,ze=w.length;Ce<ze;++Ce)_(w[Ce]);return se(ce.localStatement(w,D))}if(le("function"))return o=Ye(),n.addLocal(o.name,y),N.scope&&(_(o),C()),Mt(o,!0);He("<name>",z)}function Xt(n){var o,y,w,D,Se,Ce=[];x&&(y=ee());do{if(x&&(o=ee()),qe===z.type)Se=z.value,D=Ye(),N.scope&&R(D,W(Se)),w=!0;else if(z.value==="(")$(),D=De(n),Ve(")"),w=!1;else return dt(z);e:for(;;){switch(Ze===z.type?'"':z.value){case".":case"[":w=!0;break;case":":case"(":case"{":case'"':w=null;break;default:break e}D=Wt(D,o,n)}if(Ce.push(D),z.value!==",")break;if(!w)return dt(z);$()}while(!0);if(Ce.length===1&&w===null)return _e(o),se(ce.callStatement(Ce[0]));if(!w)return dt(z);Ve("=");var ze=[];do ze.push(De(n));while(le(","));return _e(y),se(ce.assignmentStatement(Ce,ze))}function Ye(){ue();var n=z.value;return qe!==z.type&&He("<name>",z),$(),se(ce.identifier(n))}function Mt(n,o){var y=Oe();y.pushScope();var w=[];if(Ve("("),!le(")"))for(;;){if(qe===z.type){var D=Ye();if(N.scope&&_(D),w.push(D),le(","))continue}else nt===z.type?(y.allowVararg=!0,w.push(It(y))):He("<name> or '...'",z);Ve(")");break}var Se=P(y);return y.popScope(),Ve("end"),N.scope&&F(),o=o||!1,se(ce.functionStatement(n,w,o,Se))}function en(){var n,o,y;for(x&&(y=ee()),n=Ye(),N.scope&&(R(n,W(n.name)),C());le(".");)_e(y),o=Ye(),n=se(ce.memberExpression(n,".",o));return le(":")&&(_e(y),o=Ye(),n=se(ce.memberExpression(n,":",o)),N.scope&&E("self")),n}function zt(n){for(var o=[],y,w;;){if(ue(),Ke===z.type&&le("["))y=De(n),Ve("]"),Ve("="),w=De(n),o.push(se(ce.tableKey(y,w)));else if(qe===z.type)X.value==="="?(y=Ye(),$(),w=De(n),o.push(se(ce.tableKeyString(y,w)))):(w=De(n),o.push(se(ce.tableValue(w))));else{if((w=Ct(n))==null){I.pop();break}o.push(se(ce.tableValue(w)))}if(",;".indexOf(z.value)>=0){$();continue}break}return Ve("}"),se(ce.tableConstructorExpression(o))}function Ct(n){var o=Gt(0,n);return o}function De(n){var o=Ct(n);if(o==null)He("<expression>",z);else return o}function tn(n){var o=n.charCodeAt(0),y=n.length;if(y===1)switch(o){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(y===2)switch(o){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(o===97&&n==="and")return 2;return 0}function Gt(n,o){var y=z.value,w,D;if(x&&(D=ee()),Je(z)){ue(),$();var Se=Gt(10,o);Se==null&&He("<expression>",z),w=se(ce.unaryExpression(y,Se))}if(w==null&&(w=It(o),w==null&&(w=nn(o))),w==null)return null;for(var Ce;y=z.value,Ce=Ke===z.type||et===z.type?tn(y):0,!(Ce===0||Ce<=n);){(y==="^"||y==="..")&&--Ce,$();var ze=Gt(Ce,o);ze==null&&He("<expression>",z),x&&I.push(D),w=se(ce.binaryExpression(y,w,ze))}return w}function Wt(n,o,y){var w,D;if(Ke===z.type)switch(z.value){case"[":return _e(o),$(),w=De(y),Ve("]"),se(ce.indexExpression(n,w));case".":return _e(o),$(),D=Ye(),se(ce.memberExpression(n,".",D));case":":return _e(o),$(),D=Ye(),n=se(ce.memberExpression(n,":",D)),_e(o),Rt(n,y);case"(":case"{":return _e(o),Rt(n,y)}else if(Ze===z.type)return _e(o),Rt(n,y);return null}function nn(n){var o,y,w;if(x&&(w=ee()),qe===z.type)y=z.value,o=Ye(),N.scope&&R(o,W(y));else if(le("("))o=De(n),Ve(")");else return null;for(;;){var D=Wt(o,w,n);if(D===null)break;o=D}return o}function Rt(n,o){if(Ke===z.type)switch(z.value){case"(":re.emptyStatement||z.line!==Y.line&&ie(null,te.ambiguousSyntax,z.value),$();var y=[],w=Ct(o);for(w!=null&&y.push(w);le(",");)w=De(o),y.push(w);return Ve(")"),se(ce.callExpression(n,y));case"{":ue(),$();var D=zt(o);return se(ce.tableCallExpression(n,D))}else if(Ze===z.type)return se(ce.stringCallExpression(n,It(o)));He("function arguments",z)}function It(n){var o=Ze|ut|tt|st|nt,y=z.value,w=z.type,D;if(x&&(D=ee()),w===nt&&!n.allowVararg&&ie(z,te.cannotUseVararg,z.value),w&o){_e(D);var Se=V.slice(z.range[0],z.range[1]);return $(),se(ce.literal(w,y,Se))}else{if(et===w&&y==="function")return _e(D),$(),N.scope&&C(),Mt(null);if(le("{"))return _e(D),zt(n)}}Ee.parse=ln;var $t={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function ln(n,o){if(typeof o>"u"&&typeof n=="object"&&(o=n,n=void 0),o||(o={}),V=n||"",N=gt({},ct,o),T=0,p=1,d=0,Te=V.length,Le=[[]],Qe=0,yt=[],I=[],!Object.prototype.hasOwnProperty.call($t,N.luaVersion))throw new Error(pe("Lua version '%1' not supported",N.luaVersion));if(re=gt({},$t[N.luaVersion]),N.extendedIdentifiers!==void 0&&(re.extendedIdentifiers=!!N.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(mt,N.encodingMode))throw new Error(pe("Encoding mode '%1' not supported",N.encodingMode));return we=mt[N.encodingMode],N.comments&&(b=[]),N.wait?Ee:qt()}Ee.write=Ot;function Ot(n){return V+=String(n),Te=V.length,Ee}Ee.end=qt;function qt(n){typeof n<"u"&&Ot(n),V&&V.substr(0,2)==="#!"&&(V=V.replace(/^.*/,function(y){return y.replace(/./g," ")})),Te=V.length,x=N.locations||N.ranges,X=g();var o=at();if(N.comments&&(o.comments=b),N.scope&&(o.globals=yt),I.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return o}})})(At,At.exports);var kn=At.exports;const Ft=an(kn);var Bt={},Nt={exports:{}};Nt.exports;(function(ft){function S(X){for(var b=0,f=X.length;f--;)b+=X.charCodeAt(f),b+=b<<10,b^=b>>6;return b+=b<<3,b^=b>>11,b+=b<<15,b}const Ee=console.log,V=function(X,b){if(!X)throw b};function N(X,b){if(!X)return 0;var f=X.toString().split(".");return f.length>1?parseInt(f[0],b)+parseInt(f[1],b)/Math.pow(b,f[1].length):parseInt(f[0],b)}let Te=[" ",`
`,"	","\r"],re={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const we=new Proxy(re,{get(X,b){return N(b)}});let ct=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Be=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],pt=["0","1","2","3","4","5","6","7","8","9"],$e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],mt=["0","1"],it=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Ze=["~","=",">","<"],et=["+","-","*","/","^","..","%","//"],qe=["+=","-=","*=","/=","^=","..=","%=","//="],ut=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],Ke=["else","elseif","until","end"],tt=["-","not","#","~"],st=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],nt=11,te={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function ce(X){let b=0,f=X.length,p=[];function d(t){return t=t||0,b<=f?X.substr(b+t,1):""}function g(){if(b<=f){let t=X.substr(b,1);return b++,t}else return""}function e(t){let l=0,r=1,u=1;for(;l<=b;)X.substr(l,1)==`
`?(r++,u=1):u++;let M;for(M=0;M<p.length;M++){let de=p[M];Ee(`${de.Type}<${de.Source}>`)}throw`file<${r}:${u}>: ${t}`}function h(t){for(;;){let l=g();if(l=="")e("Unfinished long string.");else if(l=="]"){let r=!0,u;for(u=1;u<=t;u++)if(d()=="=")b++;else{r=!1;break}if(r&&g()=="]")return}}}function c(){let t=b;for(;d()=="=";)b++;if(d()=="[")return b++,b-t-1;b=t}let s=0,m=0;function k(t){let l=X.substr(m,b-m),r=null;t=="Number"&&(l.substr(0,2).toLowerCase()=="0x"?(r="hex",parseInt(l,16)<999999999999&&(l=parseInt(l,16))):l.substr(0,2).toLowerCase()=="0b"&&(r="bin",parseInt(l.substr(2),2)<999999999999&&(l=parseInt(l.substr(2),2))));let u={Type:t,LeadingWhite:X.substr(s,m-s),Source:l};return r!==null&&(u.NType=r),p.push(u),s=b,m=b,u}for(;;){for(s=b;;){let l=d();if(l=="")break;if(l=="-")if(d(1)=="-")if(b+=2,d()=="["){b++;let r=c();if(r!=null)h(r),s=b;else for(;;){let u=g();if(u==""||u==`
`)break}}else for(;;){let r=g();if(r==""||r==`
`)break}else break;else if(Te.includes(l))b++;else break}X.substr(s,b-s),m=b;let t=g();if(t==""){k("Eof");break}else if(t=="'"||t=='"'){for(;;){let l=g();if(l=="\\"){let r=g();if(we[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}k("String")}else if(t=="`"){for(;;){let l=g();if(l=="\\"){let r=g();if(we[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(l==t)break;if(l=="")throw"Unfinished string!"}}k("Hash")}else if(ct.includes(t)){for(;Be.includes(d());)b++;ut.includes(X.substr(m,b-m))?k("Keyword"):k("Ident")}else if(pt.includes(t)||t=="."&&pt.includes(d())){if(t=="0"&&d().toLowerCase()=="x")for(b++;$e.includes(d())||d()==="_";)b++;else if(t=="0"&&d().toLowerCase()=="b")for(b++;mt.includes(d())||d()==="_";)b++;else{for(;pt.includes(d())||d()==="_";)b++;if(d()==".")for(b++;pt.includes(d());)b++;if(d()=="e"||d()=="E")for(b++,(d()=="-"||d()=="+")&&b++;pt.includes(d());)b++}k("Number")}else if(t=="["){let l=c();l!=null?(h(l),k("String")):k("Symbol")}else if(t==".")d()=="."&&(g(),(d()=="."||d()=="=")&&g()),k("Symbol");else if(t+d()=="//")g(),d()=="="&&g(),k("Symbol");else if(t+d()=="::")g(),k("Symbol");else if(st.includes(t+d()))g(),k("Symbol");else if(Ze.includes(t))d()=="="&&b++,k("Symbol");else if(et.includes(t)&&d()=="=")g(),k("Symbol");else if(it.includes(t))k("Symbol");else throw`Bad symbol \`${t}\` in source. ${b}`}return p}function se(X){let b=ce(X),f=0;function p(){let C=b[f];return f<b.length&&f++,C}function d(C){return C=f+(C||0),b[C]||b[b.length-1]}function g(C){let F=1,E=0,_=0;for(;;){let R=b[_],W;R==C?W=R.LeadingWhite:W=R.LeadingWhite+R.Source;let I;for(I=0;I<=W.length;I++)W.substr(I,1)==`
`?(F++,E=0):E++;if(R==C)break;_++}return`${F}:${E+1}`}function e(){let C=d();return`<${C.Type} \`${C.Source}\`> at: ${g(C)}`}function h(){let C=d();return C.Type=="Eof"||C.Type=="Keyword"&&Ke.includes(C.Source)}function c(){return tt.includes(d().Source)||!1}function s(){return st.includes(d().Source)||!1}function m(C,F){let E=d();if(E.Type==C&&(F==null||E.Source==F))return p();{let _;for(_=-3;_<=3;_++)Ee(`Tokens[${_}] = \`${d(_).Source}\``);throw F?`${g(E)}: \`${F}\` expected.`:`${g(E)}: ${C} expected.`}}function k(C){let F=C.GetFirstToken,E=C.GetLastToken,_=C;return C.GetFirstToken=function(){let R=F(_);return V(R),R},C.GetLastToken=function(){let R=E(_);return V(R),R},C}let t,l;function r(C,F){let E=[l(C,F)],_=[];for(;d().Source==",";)_.push(p()),E.push(l(C,F));return[E,_]}function u(C,F){var _,R,W,I;let E=d();if(E.Source=="("){let x=p(),ee=l(C,F),ye=m("Symbol",")"),ue;return ue=k({Type:"ParenExpr",Expression:ee,Token_OpenParen:x,Token_CloseParen:ye,GetFirstToken:()=>ue.Token_OpenParen,GetLastToken:()=>ue.Token_CloseParen}),ue}else if(E.Type=="Ident"){let x;return x=k({Type:"VariableExpr",Token:p(),GetFirstToken:()=>x.Token,GetLastToken:()=>x.Token}),C[x.Token.Source]!=null&&((R=(_=C[x.Token.Source])==null?void 0:_.Tokens)==null?void 0:R.push)!=null?(C[x.Token.Source].Tokens.push(x.Token),C[x.Token.Source].UseCountIncrease()):F[x.Token.Source]!=null&&((I=(W=F[x.Token.Source])==null?void 0:W.Tokens)==null?void 0:I.push)!=null&&(F[x.Token.Source].Tokens.push(x.Token),F[x.Token.Source].UseCountIncrease()),x}else throw Ee(e()),`${g(E)}: Unexpected symbol. ${E.Type} ${E.Source}`}function M(C,F){let E=m("Symbol","{"),_=[],R=[];for(;d().Source!="}";){if(d().Source=="["){let x=p(),ee=l(C,F),ye=m("Symbol","]"),ue=m("Symbol","="),_e=l(C,F);ee.Token&&ee.Token.Source,_.push({EntryType:"Index",Index:ee,Value:_e,Token_OpenBracket:x,Token_CloseBracket:ye,Token_Equals:ue})}else if(d().Type=="Ident"&&d(1).Source=="="){let x=p(),ee=p(),ye=l(C,F);_.push({EntryType:"Field",Field:x,Value:ye,Token_Equals:ee})}else{let x=l(C,F);_.push({EntryType:"Value",Value:x})}if(d().Source==","||d().Source==";")R.push(p());else break}let W=m("Symbol","}"),I;return I=k({Type:"TableLiteral",EntryList:_,Token_SeperatorList:R,Token_OpenBrace:E,Token_CloseBrace:W,GetFirstToken:()=>I.Token_OpenBrace,GetLastToken:()=>I.Token_CloseBrace}),I}function de(C,F){let E=[],_=[];if(d().Type=="Ident"){let R=p();if(F&&d().Source=="<"&&d(2).Source==">"){let W=d(1).Source;R.Attribute={LeadingWhite:d().LeadingWhite,Source:`<${W}>`},p(),p(),p()}E.push(R)}else if(d().Source=="..."&&C)return[E,_,p()];for(;d().Source==",";){if(_.push(p()),d().Source=="..."&&C)return[E,_,p()];{let R=m("Ident");if(F&&d().Source=="<"&&d(2).Source==">"){let W=d(1).Source;R.Attribute={LeadingWhite:d().LeadingWhite,Source:`<${W}>`},p(),p(),p()}E.push(R)}}return[E,_]}function ke(C,F,E){let _=t(F,E),R=d();if(R.Type=="Keyword"&&R.Source==C)return p(),[_,R];throw Ee(R.Type,R.Source),`${g(R)}: ${C} expected.`}function Ue(C,F,E,_){let R=p(),W,I;if(!C){W=[],I=[];let at=m("Ident");for(W.push(at);d().Source==".";)I.push(p()),W.push(m("Ident"));d().Source==":"&&(I.push(p()),W.push(m("Ident")))}let x=m("Symbol","("),[ee,ye,ue]=de(!0),_e=m("Symbol",")"),[fe,ge]=ke("end",F,E),Oe;return Oe=k({Type:C==!0?"FunctionLiteral":"FunctionStat",NameChain:W,ArgList:ee,Body:fe,Token_Function:R,Token_NameChainSeperator:I,Token_OpenParen:x,Token_Varg:ue,Token_ArgCommaList:ye,Token_CloseParen:_e,Token_End:ge,GetFirstToken:()=>Oe.Token_Function,GetLastToken:()=>Oe.Token_End}),Oe}function Pe(C,F){let E=d();if(E.Source=="("){let _=p(),R=[],W=[];for(;d().Source!=")"&&(R.push(l(C,F)),d().Source==",");)W.push(p());let I=m("Symbol",")"),x;return x=k({CallType:"ArgCall",ArgList:R,Token_CommaList:W,Token_OpenParen:_,Token_CloseParen:I,GetFirstToken:()=>x.Token_OpenParen,GetLastToken:()=>x.Token_CloseParen}),x}else if(E.Source=="{"){let _;return _=k({CallType:"TableCall",TableExpr:l(C,F),GetFirstToken:()=>_.TableExpr.GetFirstToken(),GetLastToken:()=>_.TableExpr.GetLastToken()}),_}else if(E.Type=="String"){let _;return _=k({CallType:"StringCall",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else throw"Function arguments expected."}function me(C,F){let E=u(C,F);for(V(E,"nil prefixexpr");;){let _=d();if(_.Source=="."){let R=p(),W=m("Ident"),I;I=k({Type:"FieldExpr",Base:E,Field:W,Token_Dot:R,GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.Field}),E=I}else if(_.Source==":"){let R=p(),W=m("Ident"),I=Pe(C,F),x;x=k({Type:"MethodExpr",Base:E,Method:W,FunctionArguments:I,Token_Colon:R,GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.FunctionArguments.GetLastToken()}),E=x}else if(_.Source=="["){let R=p(),W=l(C,F),I=m("Symbol","]"),x;x=k({Type:"IndexExpr",Base:E,Index:W,Token_OpenBracket:R,Token_CloseBracket:I,GetFirstToken:()=>x.Base.GetFirstToken(),GetLastToken:()=>x.Token_CloseBracket}),E=x}else if(_.Source=="{"||_.Source=="("||_.Type=="String"){let R;R=k({Type:"CallExpr",Base:E,FunctionArguments:Pe(C,F),GetFirstToken:()=>R.Base.GetFirstToken(),GetLastToken:()=>R.FunctionArguments.GetLastToken()}),E=R}else if(qe.includes(_.Source)){let R=p(),W=l(C,F),I;I=k({Type:"CompoundStat",Base:E,Token_Compound:R,Rhs:W,Lhs:E,GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.Rhs.GetLastToken()}),E=I}else return E}}function $(C,F){let E=d();if(E.Type=="Number"){let _;return _=k({Type:"NumberLiteral",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Type=="String"){let _;return _=k({Type:"StringLiteral",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Type=="Hash"){let _;return _=k({Type:"HashLiteral",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Source=="nil"){let _;return _=k({Type:"NilLiteral",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Source=="true"||E.Source=="false"){let _;return _=k({Type:"BooleanLiteral",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else if(E.Source=="..."){let _;return _=k({Type:"VargLiteral",Token:p(),GetFirstToken:()=>_.Token,GetLastToken:()=>_.Token}),_}else return E.Source=="{"?M(C,F):E.Source=="function"?Ue(!0,C,F):me(C,F)}function le(C,F,E){let _;if(c()){let R=p(),W=le(nt,F,E),I;I=k({Type:"UnopExpr",Token_Op:R,Rhs:W,GetFirstToken:()=>I.Token_Op,GetLastToken:()=>I.Rhs.GetLastToken()}),_=I}else _=$(F,E),V(_,"nil sipleexpr");for(;s()&&te[d().Source]!=null&&te[d().Source][0]>C;){let R=p(),W=le(te[R.Source][1],F,E);V(W,"RhsNeeded");let I;I=k({Type:"BinopExpr",Lhs:_,Rhs:W,Token_Op:R,GetFirstToken:()=>I.Lhs.GetFirstToken(),GetLastToken:()=>I.Rhs.GetLastToken()}),_=I}return _}l=(C,F)=>le(0,C,F);function Ve(C,F){let E=me(C,F);if(E.Type=="MethodExpr"||E.Type=="CallExpr"){let _;return _=k({Type:"CallExprStat",Expression:E,GetFirstToken:()=>_.Expression.GetFirstToken(),GetLastToken:()=>_.Expression.GetLastToken()}),_}else{if(E.Type=="CompoundStat")return E;{let _=[E],R=[];for(;d().Source==",";){R.push(p());let ye=me(C,F);if(ye.Type=="MethodExpr"||ye.Type=="CallExpr")throw"Bad left hand side of asignment";_.push(ye)}let W=m("Symbol","="),I=[l(C,F)],x=[];for(;d().Source==",";)x.push(p()),I.push(l(C,F));let ee;return ee=k({Type:"AssignmentStat",Rhs:I,Lhs:_,Token_Equals:W,Token_LhsSeperatorList:R,Token_RhsSeperatorList:x,GetFirstToken:()=>ee.Lhs[0].GetFirstToken(),GetLastToken:()=>ee.Rhs[ee.Rhs.length-1].GetLastToken()}),ee}}}function St(C,F){let E=p(),_=l(C,F),R=m("Keyword","then"),W=t(C,F),I=[];for(;d().Source=="elseif"||d().Source=="else";){let ye=p(),ue,_e;ye.Source=="elseif"&&(ue=l(C,F),_e=m("Keyword","then"));let fe=t(C,F);if(I.push({Condition:ue,Body:fe,ClauseType:ye.Source,Token:ye,Token_Then:_e}),ye.Source=="else")break}let x=m("Keyword","end"),ee;return ee=k({Type:"IfStat",Condition:_,Body:W,ElseClauseList:I,Token_If:E,Token_Then:R,Token_End:x,GetFirstToken:()=>ee.Token_If,GetLastToken:()=>ee.Token_End}),ee}function G(C,F){let E=p(),[_,R]=ke("end",C,F),W;return W=k({Type:"DoStat",Body:_,Token_Do:E,Token_End:R,GetFirstToken:()=>W.Token_Do,GetLastToken:()=>W.Token_End}),W}function v(C,F){let E=p(),_=l(C,F),R=m("Keyword","do"),[W,I]=ke("end",C,F),x;return x=k({Type:"WhileStat",Condition:_,Body:W,Token_While:E,Token_Do:R,Token_End:I,GetFirstToken:()=>x.Token_While,GetLastToken:()=>x.Token_End}),x}function Z(C,F){let E=p(),[_,R]=de();if(d().Source=="="){let W=p(),[I,x]=r(C,F);if(I.length<2||I.length>3)throw"Expected 2 or 3 values for range bounds";let ee=m("Keyword","do"),[ye,ue]=ke("end",C,F),_e;return _e=k({Type:"NumericForStat",VarList:_,RangeList:I,Body:ye,Token_For:E,Token_VarCommaList:R,Token_Equals:W,Token_RangeCommaList:x,Token_Do:ee,Token_End:ue,GetFirstToken:()=>_e.Token_For,GetLastToken:()=>_e.Token_End}),_e}else if(d().Source=="in"){let W=p(),[I,x]=r(C,F),ee=m("Keyword","do"),[ye,ue]=ke("end",C,F),_e;return _e=k({Type:"GenericForStat",VarList:_,GeneratorList:I,Body:ye,Token_For:E,Token_VarCommaList:R,Token_In:W,Token_GeneratorCommaList:x,Token_Do:ee,Token_End:ue,GetFirstToken:()=>_e.Token_For,GetLastToken:()=>_e.Token_End}),_e}}function ve(C,F){let E=p(),[_,R]=ke("until",C),W=l(C,F),I;return I=k({Type:"RepeatStat",Body:_,Condition:W,Token_Repeat:E,Token_Until:R,GetFirstToken:()=>I.Token_Repeat,GetLastToken:()=>I.Condition.GetLastToken()}),I}function xe(C,F){let E=p();if(d().Source=="function"){let _=Ue(!1,C,F);if(_.NameChain.length>1)throw g(_.Token_NameChainSeperator[0])+": `(` expected.";let R;return R=k({Type:"LocalFunctionStat",FunctionStat:_,Token_Local:E,GetFirstToken:()=>R.Token_Local,GetLastToken:()=>R.FunctionStat.GetLastToken()}),R}else if(d().Type=="Ident"){let[_,R]=de(!1,!0),W=[],I=[],x;if(d().Source=="="){x=p();let[ye,ue]=r(C,F);W=ye,I=ue}let ee;return ee=k({Type:"LocalVarStat",VarList:_,ExprList:W,Token_Local:E,Token_Equals:x,Token_VarCommaList:R,Token_ExprCommaList:I,GetFirstToken:()=>ee.Token_Local,GetLastToken:function(){return ee.ExprList.length>0?ee.ExprList[ee.ExprList.length-1].GetLastToken():ee.VarList[ee.VarList.length-1]}}),ee}else throw"`function` or ident expected"}function Ne(C,F){let E=p(),_,R;h()||d().Source==";"?(_=[],R=[]):[_,R]=r(C,F);let W;return W={Type:"ReturnStat",ExprList:_,Token_Return:E,Token_CommaList:R,GetFirstToken:()=>W.Token_Return,GetLastToken:function(){return W.ExprList.length>0?W.ExprList[W.ExprList.length-1].GetLastToken():W.Token_Return}},W}function Je(C,F){let E=p(),_;return _={Type:"BreakStat",Token_Break:E,GetFirstToken:()=>_.Token_Break,GetLastToken:()=>_.Token_Break},_}function We(C,F){let E=p(),_;return _={Type:"ContinueStat",Token_Continue:E,GetFirstToken:()=>_.Token_Continue,GetLastToken:()=>_.Token_Continue},_}function Le(){let C=p(),F;d().Type=="Keyword"?F=m("Keyword"):F=m("Ident");let E;return E={Type:"GotoStat",Token_Goto:C,Token_Label:F,GetFirstToken:()=>E.Token_Goto,GetLastToken:()=>E.Token_Label},E}function Qe(){let C=p(),F;d().Type=="Keyword"?F=m("Keyword"):F=m("Ident");let E=m("Symbol","::"),_;return _={Type:"LabelStat",Token_ColonsLeft:C,Token_Label:F,Token_ColonsRight:E,GetFirstToken:()=>_.Token_ColonsLeft,GetLastToken:()=>_.Token_ColonsRight},_}function yt(C,F){let E=d();return E.Source=="if"?[!1,St(C,F)]:E.Source=="while"?[!1,v(C,F)]:E.Source=="do"?[!1,G(C,F)]:E.Source=="for"?[!1,Z(C,F)]:E.Source=="repeat"?[!1,ve(C,F)]:E.Source=="function"?[!1,Ue(!1,C,F)]:E.Source=="local"?[!1,xe(C,F)]:E.Source=="return"?[!0,Ne(C,F)]:E.Source=="break"?[!0,Je()]:E.Source=="continue"?[!0,We()]:E.Source=="goto"?[!1,Le()]:E.Source=="::"?[!1,Qe()]:[!1,Ve(C,F)]}return t=function(C,F){let E=[],_=[],R={},W={};if(F!=null)for(let[ye,ue]of Object.entries(F))W[ye]=ue;if(C!=null)for(let[ye,ue]of Object.entries(C))W[ye]=ue;let I,x=0;for(;!h();){I&&I==d()&&Ee(`INFINITE LOOP POSSIBLE ON STATEMENT ${I.Source} :`,I),I=d();let[ye,ue]=yt(R,W);if(ue)switch(E.push(ue),ue.Type){case"LocalVarStat":ue.VarList.forEach(ge=>{ge.UseCount=0,ge.Number=x++,R[ge.Source]=ge;let Oe=[];function at(){ge.UseCount++,Oe.forEach(P=>{P.UseCount=ge.UseCount})}ge.Tokens={},ge.Tokens.push=P=>{P.UseCountIncrease=at,P.UseCount=ge.UseCount,P.Tokens=ge.Tokens,Oe.push(P)},ge.Tokens.get=()=>Oe,ge.UseCountIncrease=at});break;case"LocalFunctionStat":let fe=ue.FunctionStat.NameChain;if(fe.length===1){let at=function(){ge.UseCount++,Oe.forEach(P=>{P.UseCount=ge.UseCount})},ge=fe[0];ge.UseCount=0,ge.Number=x++,R[ge.Source]=ge;let Oe=[];ge.Tokens={},ge.Tokens.push=P=>{P.UseCountIncrease=at,P.UseCount=ge.UseCount,P.Tokens=ge.Tokens,Oe.push(P)},ge.Tokens.get=()=>Oe,ge.UseCountIncrease=at}break}let _e=d();_e.Type=="Symbol"&&_e.Source==";"&&(_[E.length-1]=p())}let ee;return ee={Type:"StatList",StatementList:E,SemicolonList:_,GetFirstToken:function(){var ye;if(ee.StatementList.length!=0)return(ye=ee.StatementList[0])==null?void 0:ye.GetFirstToken()},GetLastToken:function(){if(ee.StatementList.length!=0)return ee.SemicolonList[ee.StatementList.length-1]?ee.SemicolonList[ee.StatementList.length-1]:ee.StatementList[ee.StatementList.length-1].GetLastToken()}},ee},t([],[])}function lt(X,b){let f={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},p={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[d,g]of Object.entries(b))if(!p[d]&&!f[d])throw`Invalid visitor target: \`${d}\``;function e(m){if(m!=null){let k=b[m.Type];if(typeof k=="function")return k(m);if(k&&k.Pre)return k.Pre(m)}}function h(m){let k=b[m.Type];if(k&&typeof k=="object"&&k.Post)return k.Post(m)}let c,s;c=function(m){if(!e(m)){if(m.Type=="BinopExpr")c(m.Lhs),c(m.Rhs);else if(m.Type=="UnopExpr")c(m.Rhs);else if(!(m.Type=="NumberLiteral"||m.Type=="StringLiteral"||m.Type=="NilLiteral"||m.Type=="BooleanLiteral"||m.Type=="VargLiteral"||m.Type=="HashLiteral")){if(m.Type=="FieldExpr")c(m.Base);else if(m.Type=="IndexExpr")c(m.Base),c(m.Index);else if(m.Type=="MethodExpr"||m.Type=="CallExpr")c(m.Base),m.FunctionArguments.CallType=="ArgCall"?m.FunctionArguments.ArgList.forEach((k,t)=>{c(k)}):m.FunctionArguments.CallType=="TableCall"&&c(m.FunctionArguments.TableExpr);else if(m.Type=="FunctionLiteral")s(m.Body);else if(m.Type!="VariableExpr")if(m.Type=="ParenExpr")c(m.Expression);else if(m.Type=="TableLiteral")m.EntryList.forEach((k,t)=>{if(k.EntryType=="Field")c(k.Value);else if(k.EntryType=="Index")c(k.Index),c(k.Value);else if(k.EntryType=="Value")c(k.Value);else throw"unreachable"});else if(m.Type=="CompoundStat")c(m.Lhs),c(m.Rhs);else throw`unreachable, type: ${m.Type}: ${m}`}h(m)}},s=function(m){if(!e(m)){if(m.Type=="StatList")m.StatementList.forEach((k,t)=>{if(k!=null){if(k===null||k.Type===null)return;k.Remove=()=>{m.StatementList[t]=null},s(k)}});else if(m.Type!="BreakStat"){if(m.Type!="ContinueStat"){if(m.Type!="GotoStat"){if(m.Type!="LabelStat")if(m.Type=="ReturnStat")m.ExprList.forEach((k,t)=>{c(k)});else if(m.Type=="LocalVarStat")m.Token_Equals&&m.ExprList.forEach((k,t)=>{c(k)});else if(m.Type=="LocalFunctionStat")s(m.FunctionStat.Body);else if(m.Type=="FunctionStat")s(m.Body);else if(m.Type=="RepeatStat")s(m.Body),c(m.Condition);else if(m.Type=="GenericForStat")m.GeneratorList.forEach((k,t)=>{c(k)}),s(m.Body);else if(m.Type=="NumericForStat")m.RangeList.forEach((k,t)=>{c(k)}),s(m.Body);else if(m.Type=="WhileStat")c(m.Condition),s(m.Body);else if(m.Type=="DoStat")s(m.Body);else if(m.Type=="IfStat")c(m.Condition),s(m.Body),m.ElseClauseList.forEach(k=>{k.Condition!=null&&c(k.Condition),s(k.Body)});else if(m.Type=="CallExprStat")c(m.Expression);else if(m.Type=="CompoundStat")c(m.Lhs),c(m.Rhs);else if(m.Type=="AssignmentStat")m.Lhs.forEach(k=>{c(k)}),m.Rhs.forEach(k=>{c(k)});else throw"unreachable"}}}h(m)}},p[X.Type]?s(X):c(X)}function Tt(X){let b=[],f,p=0;function d(){return p++,p}function g(){f={ParentScope:f,ChildScopeList:[],VariableList:[],BeginLocation:d(),Depth:null,GetVar:null},f.ParentScope?(f.Depth=f.ParentScope.Depth+1,f.ParentScope.ChildScopeList.push(f)):f.Depth=1;let l=f;f.GetVar=function(r){for(const u of l.VariableList)if(u.Name==r)return u;if(l.ParentScope)return l.ParentScope.GetVar(r);for(const u of b)if(u.Name==r)return u}}function e(){let l=f;return l.EndLocation=d(),l.VariableList.forEach(r=>{r.ScopeEndLocation=l.EndLocation}),f=l.ParentScope,l}g();function h(l,r,u){V(u,"MIssing localInfo"),V(l,"Missing local var name");let M={Type:"Local",Name:l,RenameList:[r],AssignedTo:!1,Info:u,Scope:f,BeginLocation:d(),EndLocation:d(),ReferenceLocationList:[d()]};return M.Rename=function(de){M.Name=de,M.RenameList.forEach(ke=>{ke(de)})},f.VariableList.push(M),M}function c(l){for(const u of b)if(u.Name==l)return u;let r={Type:"Global",Name:l,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:d(),EndLocation:d(),ReferenceLocationList:[]};return r.Rename=function(u){r.Name=u,r.RenameList.forEach(M=>{M(u)})},b.push(r),r}function s(l,r){V(l,"Missing var name");let u=c(l);return u.RenameList.push(r),u}function m(l,r){let u;for(u=l.VariableList.length-1;u>=0;u--)if(l.VariableList[u].Name==r)return l.VariableList[u];if(l.ParentScope){let M=m(l.ParentScope,r);if(M)return M}}function k(l,r){V(l,"Missing var name");let u=m(f,l);u?u.RenameList.push(r):u=s(l,r);let M=d();return u.EndLocation=M,u.ReferenceLocationList.push(u.EndLocation),u}let t={};return t.FunctionLiteral={Pre:function(l){g(),l.ArgList.forEach((r,u)=>{let M=h(r.Source,function(de,ke){ke||(r.Source=de)},{Type:"Argument",Index:u});r.var=M})},Post:function(l){e()}},t.VariableExpr=function(l){l.Variable=k(l.Token.Source,function(r){l.Token.Source=r})},t.StatList={Pre:function(l){g()},Post:function(l){l.SkipPop||e()}},t.LocalVarStat={Post:function(l){l.VarList.forEach((r,u)=>{h(r.Source,function(M){l.VarList[u].Source=M},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(l){h(l.FunctionStat.NameChain[0].Source,function(r){l.FunctionStat.NameChain[0].Source=r},{Type:"LocalFunction"}),g(),l.FunctionStat.ArgList.forEach((r,u)=>{h(r.Source,function(M){r.Source=M},{Type:"Argument",Index:u})})},Post:function(){e()}},t.FunctionStat={Pre:function(l){let r=l.NameChain,u;r.length==1?m(f,r[0].Source)?u=k(r[0].Source,function(M){r[0].Source=M}):u=s(r[0].Source,function(M){r[0].Source=M}):u=k(r[0].Source,function(M){r[0].Source=M}),u.AssignedTo=!0,g(),l.ArgList.forEach((M,de)=>{h(M.Source,function(ke){M.Source=ke},{Type:"Argument",Index:de})})},Post:function(){e()}},t.GenericForStat={Pre:function(l){return l.GeneratorList.forEach(r=>{lt(r,t)}),g(),l.VarList.forEach((r,u)=>{h(r.Source,function(M){r.Source=M},{Type:"ForRange",Index:u})}),lt(l.Body,t),e(),!0}},t.NumericForStat={Pre:function(l){return l.RangeList.forEach(r=>{lt(r,t)}),g(),l.VarList.forEach((r,u)=>{h(r.Source,function(M){r.Source=M},{Type:"ForRange",Index:u})}),lt(l.Body,t),e(),!0}},t.RepeatStat={Pre:function(l){l.Body.SkipPop=!0},Post:function(l){e()}},t.AssignmentStat={Post:function(l){l.Lhs.forEach(r=>{r.Variable!=null&&(r.Variable.AssignedTo=!0)})}},lt(X,t),[b,e()]}function _t(X){let b,f,p="",d=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function g(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;p=`${p}${e.LeadingWhite}${e.Source}`}return f=function(e){if(e.Type=="BinopExpr")f(e.Lhs),g(e.Token_Op),f(e.Rhs);else if(e.Type=="UnopExpr")g(e.Token_Op),f(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")g(e.Token);else if(e.Type=="FieldExpr")f(e.Base),g(e.Token_Dot),g(e.Field);else if(e.Type=="IndexExpr")f(e.Base),g(e.Token_OpenBracket),f(e.Index),g(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")f(e.Base),e.Type=="MethodExpr"&&(g(e.Token_Colon),g(e.Method)),e.FunctionArguments.CallType=="StringCall"?g(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(g(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,c)=>{f(h);let s=e.FunctionArguments.Token_CommaList[c];s!=null&&g(s)}),g(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&f(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")g(e.Token_Function),g(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{g(h);let s=e.Token_ArgCommaList[c];s!=null&&g(s)}),e.Token_Varg!=null&&g(e.Token_Varg),g(e.Token_CloseParen),b(e.Body),g(e.Token_End);else if(e.Type=="VariableExpr")g(e.Token);else if(e.Type=="ParenExpr")g(e.Token_OpenParen),f(e.Expression),g(e.Token_CloseParen);else if(e.Type=="TableLiteral")g(e.Token_OpenBrace),e.EntryList.forEach((h,c)=>{if(h.EntryType=="Field")g(h.Field),g(h.Token_Equals),f(h.Value);else if(h.EntryType=="Index")g(h.Token_OpenBracket),f(h.Index),g(h.Token_CloseBracket),g(h.Token_Equals),f(h.Value);else if(h.EntryType=="Value")f(h.Value);else throw"unreachable";let s=e.Token_SeperatorList[c];s!=null&&g(s)}),g(e.Token_CloseBrace);else if(e.Type=="CompoundStat")b(e);else throw`unreachable, type: ${e.Type}: ${e}`},b=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let h=d(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",p+=`${h}do `}e.Type=="StatList"?e.StatementList.forEach((h,c)=>{h===null||h.Type===null||(h.Remove=()=>{e.StatementList[c]=null},b(h),e.SemicolonList[c]&&g(e.SemicolonList[c]))}):e.Type=="BreakStat"?g(e.Token_Break):e.Type=="ContinueStat"?g(e.Token_Continue):e.Type=="GotoStat"?(g(e.Token_Goto),g(e.Token_Label)):e.Type=="LabelStat"?(g(e.Token_ColonsLeft),g(e.Token_Label),g(e.Token_ColonsRight)):e.Type=="ReturnStat"?(g(e.Token_Return),e.ExprList.forEach((h,c)=>{f(h),e.Token_CommaList[c]&&g(e.Token_CommaList[c])})):e.Type=="LocalVarStat"?(g(e.Token_Local),e.VarList.forEach((h,c)=>{g(h),h.Attribute!=null&&g(h.Attribute);let s=e.Token_VarCommaList[c];s!=null&&g(s)}),e.Token_Equals!=null&&(g(e.Token_Equals),e.ExprList.forEach((h,c)=>{f(h);let s=e.Token_ExprCommaList[c];s!=null&&g(s)}))):e.Type=="LocalFunctionStat"?(g(e.Token_Local),g(e.FunctionStat.Token_Function),g(e.FunctionStat.NameChain[0]),g(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,c)=>{g(h);let s=e.FunctionStat.Token_ArgCommaList[c];s!=null&&g(s)}),e.FunctionStat.Token_Varg&&g(e.FunctionStat.Token_Varg),g(e.FunctionStat.Token_CloseParen),b(e.FunctionStat.Body),g(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(g(e.Token_Function),e.NameChain.forEach((h,c)=>{g(h);let s=e.Token_NameChainSeperator[c];s!=null&&g(s)}),g(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{g(h);let s=e.Token_ArgCommaList[c];s!=null&&g(s)}),e.Token_Varg&&g(e.Token_Varg),g(e.Token_CloseParen),b(e.Body),g(e.Token_End)):e.Type=="RepeatStat"?(g(e.Token_Repeat),b(e.Body),g(e.Token_Until),f(e.Condition)):e.Type=="GenericForStat"?(g(e.Token_For),e.VarList.forEach((h,c)=>{g(h);let s=e.Token_VarCommaList[c];s!=null&&g(s)}),g(e.Token_In),e.GeneratorList.forEach((h,c)=>{f(h);let s=e.Token_GeneratorCommaList[c];s!=null&&g(s)}),g(e.Token_Do),b(e.Body),g(e.Token_End)):e.Type=="NumericForStat"?(g(e.Token_For),e.VarList.forEach((h,c)=>{g(h);let s=e.Token_VarCommaList[c];s!=null&&g(s)}),g(e.Token_Equals),e.RangeList.forEach((h,c)=>{f(h);let s=e.Token_RangeCommaList[c];s!=null&&g(s)}),g(e.Token_Do),b(e.Body),g(e.Token_End)):e.Type=="WhileStat"?(g(e.Token_While),f(e.Condition),g(e.Token_Do),b(e.Body),g(e.Token_End)):e.Type=="DoStat"?(g(e.Token_Do),b(e.Body),g(e.Token_End)):e.Type=="IfStat"?(g(e.Token_If),f(e.Condition),g(e.Token_Then),b(e.Body),e.ElseClauseList.forEach(h=>{g(h.Token),h.Condition!=null&&(f(h.Condition),g(h.Token_Then)),b(h.Body)}),g(e.Token_End)):e.Type=="CallExprStat"?f(e.Expression):e.Type=="CompoundStat"?(f(e.Lhs),g(e.Token_Compound),f(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((h,c)=>{f(h);let s=e.Token_LhsSeperatorList[c];s!=null&&g(s)}),g(e.Token_Equals),e.Rhs.forEach((h,c)=>{f(h);let s=e.Token_RhsSeperatorList[c];s!=null&&g(s)})):V(!1,"unreachable"),e.WrapInDo&&(p+=" end ")}},b(X),p}function pe(X){let b,f,p=0;function d(t){if(t===void 0)return;let l=`
${"	".repeat(p)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-l.length,l.length)!=l){let r="",u;for(u=t.LeadingWhite.length;u>=0;u--){let M=t.LeadingWhite.substr(u,1);if(!(M==""||M.match(/\s/g))){r=t.LeadingWhite.substr(0,u+1);break}}t.LeadingWhite=`${r}${l}`}}function g(){p++}function e(){p--,V(p>=0,"Undented too far")}function h(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function c(t){t.LeadingWhite=t.LeadingWhite.trim()}function s(t){c(t),Te.includes(h(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function m(t){s(t.GetFirstToken())}function k(t,l,r){g(),b(l),e(),d(r)}f=function(t){if(t.Type=="BinopExpr")f(t.Lhs),f(t.Rhs),m(t.Rhs),s(t.Token_Op);else if(t.Type=="UnopExpr")c(t.Token_Op),f(t.Rhs),t.Token_Op.Source[0]&&s(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")c(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+S(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")f(t.Base);else if(t.Type=="IndexExpr")f(t.Base),f(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")f(t.Base),c(t.FunctionArguments.GetFirstToken()),c(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,r)=>{f(l),r>0&&m(l);let u=t.FunctionArguments.Token_CommaList[r];u!=null&&c(u)}):t.FunctionArguments.CallType=="TableCall"&&f(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((l,r)=>{r>0&&s(l),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg!=null&&s(t.Token_Varg),k(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")c(t.Token_OpenParen),c(t.Token_CloseParen),f(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){g();let l=100;t.EntryList.forEach((r,u)=>{r.EntryType=="Field"?(t.EntryList.length>l?gt(r.Value):d(r.Field),s(r.Token_Equals),f(r.Value),m(r.Value)):r.EntryType=="Index"?(t.EntryList.length>l?c(r.Token_OpenBracket):d(r.Token_OpenBracket),f(r.Index),s(r.Token_Equals),f(r.Value),m(r.Value)):r.EntryType=="Value"?(f(r.Value),t.EntryList.length>l?gt(r.Value):d(r.Value.GetFirstToken())):V(!1,"unreachable");let M=t.Token_SeperatorList[u];M!=null&&(t.EntryList.length>l?M.LeadingWhite="":c(M))}),e(),t.EntryList.length>l?t.Token_CloseBrace.LeadingWhite="":d(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")b(t);else throw Ee(t),`unreachable, type: ${t.Type}:`+t},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,r)=>{l===null||l.Type===null||l.Type==="StatList"&&l.StatementList.length===0||(l.Remove=()=>{l.StatementList[r]=null},b(l),d(l.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,r)=>{f(l),m(l),t.Token_CommaList[r]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((l,r)=>{s(l),l.Attribute&&(l.Attribute.LeadingWhite=" "),t.Token_VarCommaList[r]}),t.Token_Equals){c(t.Token_Equals),s(t.Token_Equals);let l=[],r=[];t.ExprList.forEach((u,M)=>{u!=null&&(M<t.VarList.length||u.Type=="CallExpr"||u.Type=="ParenExpr"||u.Type=="VargLiteral"||u.Type=="BinopExpr"||u.Type=="UnopExpr")&&(l.push(u),r.push(t.Token_ExprCommaList[M]))}),t.ExprList=l,t.CommaList=r,t.ExprList.forEach((u,M)=>{u!=null&&(f(u),m(u),t.Token_ExprCommaList[M]!=null&&t.ExprList.length-1==M&&(t.Token_ExprCommaList[M]=null))})}}else if(t.Type=="LocalFunctionStat")s(t.FunctionStat.Token_Function),s(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((l,r)=>{r>0?s(l):c(l);let u=t.FunctionStat.Token_ArgCommaList[r];u&&c(u)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(c(t.FunctionStat.Token_Varg),s(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&c(t.FunctionStat.Token_Varg),c(t.FunctionStat.Token_OpenParen),c(t.FunctionStat.Token_CloseParen),k(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((l,r)=>{r==0&&s(l),t.Token_NameChainSeperator[r]}),t.ArgList.forEach((l,r)=>{r>0&&s(l),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg&&s(t.Token_Varg),k(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")k(t.Token_Repeat,t.Body,t.Token_Until),f(t.Condition),m(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((l,r)=>{s(l),t.Token_VarCommaList[r]}),s(t.Token_In),t.GeneratorList.forEach((l,r)=>{f(l),m(l),t.Token_GeneratorCommaList[r]}),s(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((l,r)=>{s(l),t.Token_VarCommaList[r]}),s(t.Token_Equals),t.RangeList.forEach((l,r)=>{f(l),m(l),t.Token_RangeCommaList[r]}),s(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")f(t.Condition),m(t.Condition),s(t.Token_Do),k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")k(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){f(t.Condition),m(t.Condition),s(t.Token_Then);let l=t.Token_Then,r=t.Body;t.ElseClauseList.forEach(u=>{k(l,r,u.Token),l=u.Token,u.Condition!=null&&(f(u.Condition),m(u.Condition),s(u.Token_Then),l=u.Token_Then),r=u.Body}),k(l,r,t.Token_End)}else t.Type=="CallExprStat"?f(t.Expression):t.Type=="CompoundStat"?(f(t.Lhs),f(t.Rhs),m(t.Lhs),m(t.Rhs),s(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((l,r)=>{f(l),r>0&&m(l),t.Token_LhsSeperatorList[r]}),s(t.Token_Equals),t.Rhs.forEach((l,r)=>{f(l),m(l),t.Token_RhsSeperatorList[r]})):V(!1,"Unreachable")}}}},b(X)}function gt(X){let b,f;function p(e){e&&(e.LeadingWhite="")}function d(e,h,c=!1){p(h);let s=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),m=(typeof h.Source=="string"?h.Source:h.Source.toString()).substr(0,1);s=="-"&&m=="-"||Be.includes(s)&&Be.includes(m)||c&&s==")"&&m=="("?h.LeadingWhite=c?";":" ":h.LeadingWhite=""}function g(e,h,c){b(h),p(c);let s=h.GetFirstToken(),m=h.GetLastToken();s!=null?(d(e,s),d(m,c)):d(e,c)}f=function(e){if(e.Type==="BinopExpr")f(e.Lhs),f(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(p(e.Token_Op),d(e.Lhs.GetLastToken(),e.Token_Op)),d(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")p(e.Token_Op),f(e.Rhs),d(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")p(e.Token);else if(e.Type=="FieldExpr")f(e.Base),p(e.Token_Dot),p(e.Field);else if(e.Type=="IndexExpr")f(e.Base),p(e.Token_OpenBracket),f(e.Index),p(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")f(e.Base),e.Type=="MethodExpr"&&(p(e.Token_Colon),p(e.Method)),e.FunctionArguments.CallType=="StringCall"?p(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(p(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,c)=>{f(h);let s=e.FunctionArguments.Token_CommaList[c];s!=null&&p(s)}),p(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&f(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")p(e.Token_Function),p(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{p(h);let s=e.Token_ArgCommaList[c];s!=null&&p(s)}),e.Token_Varg!=null&&p(e.Token_Varg),p(e.Token_CloseParen),g(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")p(e.Token);else if(e.Type=="ParenExpr")p(e.Token_OpenParen),f(e.Expression),p(e.Token_CloseParen);else if(e.Type=="TableLiteral")p(e.Token_OpenBrace),e.EntryList.forEach((h,c)=>{h.EntryType=="Field"?(p(h.Field),p(h.Token_Equals),f(h.Value)):h.EntryType=="Index"?(p(h.Token_OpenBracket),f(h.Index),p(h.Token_CloseBracket),p(h.Token_Equals),f(h.Value)):h.EntryType=="Value"?f(h.Value):V(!1,"unreachable");let s=e.Token_SeperatorList[c];s!=null&&p(s)}),e.Token_SeperatorList[e.EntryList.length-1]=null,p(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},b=function(e){if(e.Type=="StatList"){let h;for(h=0;h<=e.StatementList.length;h++){let c=e.StatementList[h];if(c==null)continue;b(c),p(c.GetFirstToken());let s=e.StatementList[h-1];if(s!=null){let m={")":["(","["],"]":["(","["]};if(e.SemicolonList[h-1]){let k=s.GetLastToken().Source,t=c.GetFirstToken().Source;(m[k]===null||m[k]===void 0||!m[k].includes(t))&&(e.SemicolonList[h-1]=null)}e.SemicolonList[h-1]||d(s.GetLastToken(),c.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&p(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")p(e.Token_Break);else if(e.Type=="ContinueStat")p(e.Token_Continue);else if(e.Type=="GotoStat")p(e.Token_Goto),d(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")p(e.Token_ColonsLeft),p(e.Token_Label),p(e.Token_ColonsRight);else if(e.Type=="ReturnStat")p(e.Token_Return),e.ExprList.forEach((h,c)=>{f(h),e.Token_CommaList[c]!=null&&p(e.Token_CommaList[c])}),e.ExprList.length>0&&d(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){p(e.Token_Local);let h=!1;e.VarList.forEach((c,s)=>{s==0?d(e.Token_Local,c):p(c),c.Attribute&&(p(c.Attribute),s+1==e.VarList.length&&(h=!0));let m=e.Token_VarCommaList[s];m!=null&&p(m)}),e.Token_Equals!=null&&(h||p(e.Token_Equals),e.ExprList.forEach((c,s)=>{f(c);let m=e.Token_ExprCommaList[s];m!=null&&p(m)}))}else if(e.Type=="LocalFunctionStat")p(e.Token_Local),d(e.Token_Local,e.FunctionStat.Token_Function),d(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),d(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,c)=>{p(h);let s=e.FunctionStat.Token_ArgCommaList[c];s!=null&&p(s)}),e.FunctionStat.Token_Varg&&p(e.FunctionStat.Token_Varg),p(e.FunctionStat.Token_CloseParen),g(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")p(e.Token_Function),e.NameChain.forEach((h,c)=>{c==0?d(e.Token_Function,h):p(h);let s=e.Token_NameChainSeperator[c];s!=null&&p(s)}),p(e.Token_OpenParen),e.ArgList.forEach((h,c)=>{p(h);let s=e.Token_ArgCommaList[c];s!=null&&p(s)}),e.Token_Varg&&p(e.Token_Varg),p(e.Token_CloseParen),g(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")p(e.Token_Repeat),g(e.Token_Repeat,e.Body,e.Token_Until),f(e.Condition),d(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")p(e.Token_For),e.VarList.forEach((h,c)=>{c==0?d(e.Token_For,h):p(h);let s=e.Token_VarCommaList[c];s!=null&&p(s)}),d(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((h,c)=>{f(h),c==0&&d(e.Token_In,h.GetFirstToken());let s=e.Token_GeneratorCommaList[c];s!=null&&p(s)}),d(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")p(e.Token_For),e.VarList.forEach((h,c)=>{c==0?d(e.Token_For,h):p(h);let s=e.Token_VarCommaList[c];s!=null&&p(s)}),d(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((h,c)=>{f(h),c==0&&d(e.Token_Equals,h.GetFirstToken());let s=e.Token_RangeCommaList[c];s!=null&&p(s)}),d(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")p(e.Token_While),f(e.Condition),p(e.Token_Do),d(e.Token_While,e.Condition.GetFirstToken()),d(e.Condition.GetLastToken(),e.Token_Do),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")p(e.Token_Do),p(e.Token_End),g(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){p(e.Token_If),f(e.Condition),d(e.Token_If,e.Condition.GetFirstToken()),d(e.Condition.GetLastToken(),e.Token_Then);let h=e.Token_Then,c=e.Body;e.ElseClauseList.forEach((s,m)=>{g(h,c,s.Token),h=s.Token,s.Condition!=null&&(f(s.Condition),d(s.Token,s.Condition.GetFirstToken()),d(s.Condition.GetLastToken(),s.Token_Then),h=s.Token_Then),b(s.Body),c=s.Body}),g(h,c,e.Token_End)}else if(e.Type=="CallExprStat")f(e.Expression);else if(e.Type=="CompoundStat")f(e.Lhs),p(e.Token_Compound),f(e.Rhs),d(e.Lhs.GetLastToken(),e.Token_Compound),d(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((h,c)=>{f(h);let s=e.Token_LhsSeperatorList[c];s!=null&&p(s)}),p(e.Token_Equals),e.Rhs.forEach((h,c)=>{f(h);let s=e.Token_RhsSeperatorList[c];s!=null&&p(s)});else return f(e)},b(X)}function je(X){let b,f,p={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function d(t,l,r=null){let u;return u={Type:t,Token:{Type:r??"Number",LeadingWhite:"",Source:l},GetFirstToken:()=>u.Token,GetLastToken:()=>u.Token},u}function g(t,l,r){let u;return u={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:l,Rhs:r,GetFirstToken:()=>u.Lhs.GetFirstToken(),GetLastToken:()=>u.Rhs.GetLastToken()},u}function e(t,l){let r;return r={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:l,GetFirstToken:()=>r.Token_Op,GetLastToken:()=>r.Rhs.GetLastToken()},r}function h(t,l){if(l!=null)for(var[r,u]of Object.entries(l))t[r]=u}function c(t){if(t==null||t.substr==null)return;let l=t.substr(0,1),r;if((l=='"'||l=="'")&&(r=t.substr(1,t.length-2)),l=="["){let de=0,ke=1;for(;t.substr(ke,1)=="=";)de++,ke++;r=t.substr(2+de,t.length-4-de-2)}if(r==null)return"";let u="",M;for(M=0;M<=r.length;M++){let de=r.substr(M,1);de=="'"||de=='"'?u+=`\\${de}`:u+=de}return u}function s(t){if(typeof t=="object"&&t.Type=="ParenExpr")return h(t,t.Expression)}function m(t,l,r){let u=l,M=r;if(l&&l.Type=="ParenExpr"&&(u=l.Expression),r&&r.Type=="ParenExpr"&&(M=r.Expression),u==null||M==null||u.Type==null||M.Type==null||u.Type=="VariableExpr"||u.Type=="CallExpr"||u.Type=="BinopExpr"||M.Type=="CallExpr"||M.Type=="BinopExpr"||M.Type=="VariableExpr")return;let de=u.Token||u.Expression!=null&&u.Expression.Token||null,ke=M.Token||M.Expression!=null&&M.Expression.Token||null,Ue=de!=null?de.Source:null,Pe=ke!=null?ke.Source:null,me,$;if(u.Type=="BooleanLiteral"&&(me=Ue=="true"),M.Type=="BooleanLiteral"&&($=Pe=="true"),!(u.Type=="NumberLiteral"&&(me=N(Ue),me==null))&&!(M.Type=="NumberLiteral"&&($=N(Pe),$==null))&&((u.Type=="StringLiteral"||u.Type=="HashLiteral")&&(me=Ue.toString()),(M.Type=="StringLiteral"||M.Type=="HashLiteral")&&($=Pe.toString()),me!=null&&$!=null)){if(t=="==")return me==$;if(t=="~=")return me!=$;if(t=="and")return me&&$;if(t=="or")return me||$;if(t==".."&&u.Type=="StringLiteral"&&M.Type=="StringLiteral")return`"${c(Ue)+c(Pe)}"`;if(u.Type=="StringLiteral"&&(me=N(c(me))),M.Type=="StringLiteral"&&($=N(c($))),me==null||$==null)return;let le;if(t=="+"&&(le=me+$),t=="-"&&(le=me-$),t=="*"&&(le=me*$),t=="/"&&(le=me/$),t=="^"&&(le=me**$),t=="%"&&(le=me%$),t==">"&&(le=me>$),t=="<"&&(le=me<$),t==">="&&(le=me>=$),t=="<="&&(le=me<=$),le==!1||le==!0||isFinite(le)&&le>-(10**6)&&le<10**6)return le}}function k(t,l){let r=l.Token||l.Expression||l.EntryList||l;if(r==null||r.Source==null&&l.Type!="TableLiteral"||l.Type=="VariableExpr"||l.Type=="CallExpr"||l.Type=="BinopExpr")return;let u=r.Source,M;if(l.Type=="TableLiteral"&&r!=null){let de=[],ke=0,Ue=!1,Pe=!1,me=0;if(r.forEach(($,le)=>{if(Ue)de.push($);else if($.EntryType=="Value"||$.EntryType=="Index")if(($.Index==null||$.Index.Type=="NumberLiteral")&&$.Value){if(($.Index!=null&&$.Index.Token!=null&&$.Index.Token.Source!==null?$.Index.Token.Source:me+1).toString()!==(++me).toString())return Ue=!0,Pe=!0,de.push($);$.Value.Type!="CallExpr"?ke++:(Ue=!0,de.push($))}else de.push($)}),Pe)return;if(t=="#")return l.EntryList=de,l.EntryList.length<=0?d("NumberLiteral",ke!==null?ke:l.EntryList.length):ke<=0?e("#",l):g("+",d("NumberLiteral",ke),e("#",l))}if(l.Type=="BooleanLiteral"&&(M=u=="true"),!(l.Type=="NumberLiteral"&&(M=N(u),M===null))){if(l.Type=="StringLiteral"&&(M=u.substr(1,u.length-2)),t=="not"&&l.Type!==null)return l.Type=="NilLiteral"||l.Type=="BooleanLiteral"&&M===!1;if(M!=null){if(t=="#")return M.length;if(t=="-")return-M}}}f=function(t){if(t.Type=="BinopExpr"){if(f(t.Lhs),f(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let l=t.Token_Op;if(l!=null&&l.Source!=null){let r=m(l.Source,t.Lhs,t.Rhs);if(r!=null){if(typeof r=="boolean"){let u=d("BooleanLiteral",r.toString(),"Keyword");h(t,u);return}else if(typeof r=="number"){if(isFinite(r)==!0){let u=d("NumberLiteral",r.toString(),"Number");h(t,u);return}}else if(typeof r=="string"){let u=d("StringLiteral",r,"String");h(t,u);return}else if(typeof r=="object"){h(t,r);return}return}}if(t.Lhs.Type=="ParenExpr"){let u=t.Lhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let u=t.Rhs.Expression;u.Type=="NumberLiteral"||u.Type=="StringLiteral"||u.Type=="NilLiteral"||u.Type=="BooleanLiteral"||u.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(f(t.Rhs),t.Rhs!=null&&p[t.Rhs.Type]==!0){let l=t.Token_Op;if(l!=null&&l.Source!=null){let r=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,u=k(l.Source,r);if(u!=null){if(typeof u=="boolean"){let M=d("BooleanLiteral",u.toString(),"Keyword");h(t,M);return}else if(typeof u=="number"){if(isFinite(u)==!0){let M=d("NumberLiteral",u,"Number");h(t,M);return}}else if(typeof u=="string"){let M=d("StringLiteral",u,"String");h(t,M);return}else if(typeof u=="object"){h(t,u);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let l=t.Token;if(l!=null){if(l.Type=="Number"){let r=l.Source.toString().split("e");if(r.length===2){let u=N(r[0]),M=N(r[1]);isFinite(u)&&isFinite(M)&&u**M<999999999&&!l.Source.includes("+")&&l.Source.includes(".")&&!l.Source.includes("-")&&(l.Source=(u**M).toString())}}l.Type=="String"&&(l.Source=l.Source.replace(/\\\d+/gi,r=>{let u=N(r.substr(1,r.length-1));return u&&isFinite(u)&&(u>=97&&u<=122||u>=65&&u<=90||u>=33&&u<=47||u>=58&&u<=64||u>=91&&u<=96||u>=123&&u<=126)&&u!==34&&u!==39&&u!==92?String.fromCharCode(u):r}))}}else if(t.Type=="FieldExpr")f(t.Base);else if(t.Type=="IndexExpr")f(t.Base),f(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(f(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((l,r)=>{f(l)}):t.FunctionArguments.CallType=="TableCall"&&f(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let l=t.Base.Expression;t.FunctionArguments.ArgList.forEach((r,u)=>{let M=t.FunctionArguments.ArgList[u];if(M!==void 0&&(M.Type=="NumberLiteral"||M.Type=="StringLiteral"||M.Type=="NilLiteral"||M.Type=="BooleanLiteral"||M.Type=="HashLiteral")){let de=l.ArgList[u];de&&de.var.RenameList.forEach(ke=>{ke(M.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")b(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let l=t.Expression;l!=null&&l.Type=="ParenExpr"&&(t.Expression=l.Expression),f(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&s(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((l,r)=>{l.EntryType=="Field"?f(l.Value):l.EntryType=="Index"?(f(l.Index),f(l.Value)):l.EntryType=="Value"?f(l.Value):V(!1,"unreachable")})},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((l,r)=>{l===null||l.Type===null||(l.Remove=()=>{t.StatementList[r]=null},b(l))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((l,r)=>{f(l)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((l,r)=>{f(l)});else if(t.Type=="LocalFunctionStat")b(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")b(t.Body);else if(t.Type=="RepeatStat")b(t.Body),f(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((l,r)=>{f(l)}),b(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach(($,le)=>{f($)}),b(t.Body);let l=t.RangeList[0],r=t.RangeList[1],u=t.RangeList[2];if(l==null||r==null)return t.Remove();if(s(l),s(r),s(u),l.Type!="NumberLiteral"||r.Type!="NumberLiteral"||u!=null&&u.Type!="NumberLiteral"||u==null)return;let M=N(l.Token.Source),de=N(r.Token.Source),ke=u!=null&&N(u.Token.Source)||1,Ue=ke>0&&M<=de||ke<0&&M>=de,Pe=(de-M+ke)/ke;if(!(Ue&&Pe>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){f(t.Condition),b(t.Body);let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(b(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let l=t.Body.StatementList[0];l.Type!=="ContinueStat"&&l.Type!=="BreakStat"&&l.Type!=="ReturnStat"&&h(t,l)}}else if(t.Type=="IfStat"){f(t.Condition),b(t.Body),t.ElseClauseList.forEach((r,u)=>{r.Condition!=null&&f(r.Condition),b(r.Body)});let l=t.Condition;switch(l.Type){case"ParenExpr":l=l.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||l==null||l.Token==null||l.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?f(t.Expression):t.Type=="CompoundStat"?(f(t.Lhs),f(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((l,r)=>{f(l)}),t.Rhs.forEach((l,r)=>{f(l)}))}},b(X)}let ie=[],Fe;for(Fe=97;Fe<=122;Fe++)ie.push(String.fromCharCode(Fe));for(Fe=65;Fe<=90;Fe++)ie.push(String.fromCharCode(Fe));for(Fe=48;Fe<=57;Fe++)ie.push(String.fromCharCode(Fe));ie.push("_");let He=[];for(Fe=97;Fe<=122;Fe++)He.push(String.fromCharCode(Fe));for(Fe=65;Fe<=90;Fe++)He.push(String.fromCharCode(Fe));function dt(X){let b="",f=X%He.length;for(X=(X-f)/He.length,b=`${b}${He[f]}`;X>0;){let p=X%ie.length;X=(X-p)/ie.length,b=`${b}${ie[p]}`}return b}function T(X,b,f){let p=[];for(var[d,g]of Object.entries(ut))p[d]=!0;let e=[];X.forEach(k=>{k.AssignedTo&&f?e.push(k):p[k.Name]=!0});function h(k){k.VariableList.forEach(t=>{e.push(t)}),k.ChildScopeList.forEach(t=>{h(t)})}h(b),e.forEach(k=>{k.UsedNameArray=[]}),e.sort((k,t)=>k-t);let c=0,s=[];function m(k){let t=s[k];if(t==null){for(t=dt(c),c++;p[t];)t=dt(c),c++;s[k]=t}return t}e.forEach((k,t)=>{k.Renamed=!0;let l=0;for(;k.UsedNameArray[l];)l++;k.Rename(m(l)),k.Scope?e.forEach(r=>{r.Renamed||(!r.Scope||r.Scope.Depth<k.Scope.Depth?r.ReferenceLocationList.some(u=>u>=k.BeginLocation&&u<=k.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1):r.Scope.Depth>k.Scope.Depth?k.ReferenceLocationList.some(u=>u>=r.BeginLocation&&u<=r.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1):k.BeginLocation<r.EndLocation&&k.EndLocation>r.BeginLocation&&(r.UsedNameArray[l]=!0))}):e.forEach(r=>{if(!r.Renamed)if(r.Type=="Global")r.UsedNameArray[l]=!0;else if(r.Type=="Local")k.ReferenceLocationList.some(u=>u>=r.BeginLocation&&u<=r.ScopeEndLocation?(r.UsedNameArray[l]=!0,!0):!1);else throw"Unreachable"})})}function z(X,b,f){let p=[];X.forEach(c=>{(!c.AssignedTo||!f)&&(p[c.Name]=!0)});let d=1,g=1;function e(c,s){c.Name=s,c.RenameList.forEach(m=>{m(s)})}if(f){let c={};X.forEach(s=>{s.AssignedTo&&!s.ChangedName&&(c[s.Name]=c[s.Name]||`G_${g}_`,s.ChangedName=!0,e(s,c[s.Name]),g++)})}function h(c){c.VariableList.forEach(s=>{let m=`L_${d}_`;s.Info.Type=="Argument"?m=`${m}arg${s.Info.Index}`:s.Info.Type=="LocalFunction"?m=`${m}func`:s.Info.Type=="ForRange"&&(m=`${m}forvar${s.Info.Index}`),e(s,m),d++}),c.ChildScopeList.forEach(s=>{h(s)})}h(b)}let Y={};Y.Minify=function(X,b){let f=se(X),[p,d]=Tt(f);return b.RenameVariables==!0&&T(p,d,b.RenameGlobals),b.SolveMath==!0&&je(f),gt(f),_t(f)},Y.Beautify=function(X,b){let f=se(X),[p,d]=Tt(f);return b.RenameVariables&&z(p,d,b.RenameGlobals),b.SolveMath==!0&&je(f),pe(f),_t(f)};try{ft!=null&&ft.exports!=null&&(ft.exports.Beautify=Y.Beautify,ft.exports.Minify=Y.Minify)}catch{}})(Nt);var bn=Nt.exports;const Dt=bn;Bt.Beautify=Dt.Beautify;Bt.Minify=Dt.Minify;Bt.Uglify=Dt.Uglify;const Ht={master:`return {
  desc="\\
",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="\\
",
  settings_id="ENDLESS",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc="\\
",
  worldgen_id="ENDLESS",
  worldgen_name="" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc=" ",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc=" ",
  settings_id="DST_CAVE",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc=" ",
  worldgen_id="DST_CAVE",
  worldgen_name="" 
}`},Jt={master:`return {
  desc="",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    balatro="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wanderingtrader_enabled="always",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc="",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc=" ",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc=" ",
  settings_id="DST_CAVE",
  settings_name="",
  substitutes={  },
  version=4,
  worldgen_desc=" ",
  worldgen_id="DST_CAVE",
  worldgen_name="" 
}`},Sn={class:"page-div"},vn={class:"card-header"},Ln={key:0},Vn={class:"el-form-item-msg"},Cn={class:"card-header"},En={style:{display:"flex","flex-wrap":"wrap"}},wn={style:{width:"99%"}},Fn={style:{width:"100%"}},An={style:{"font-weight":"bolder"}},Bn={class:"item-container"},Mn={style:{"font-weight":"bolder"}},Gn={class:"item-container"},Rn={style:{"font-weight":"bolder"}},In={class:"item-container"},Pn={style:{"font-weight":"bolder"}},xn={class:"item-container"},Un={style:{"font-weight":"bolder"}},Nn={class:"item-container"},Dn={style:{"font-weight":"bolder"}},zn={class:"item-container"},Wn={style:{"font-weight":"bolder"}},$n={class:"item-container"},On={style:{"font-weight":"bolder"}},qn={class:"item-container"},Kn={style:{"font-weight":"bolder"}},jn={class:"item-container"},Hn={style:{"font-weight":"bolder"}},Jn={class:"item-container"},Yn={style:{"font-weight":"bolder"}},Zn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},el={style:{"font-weight":"bolder"}},tl={class:"item-container"},nl={style:{"font-weight":"bolder"}},ll={class:"item-container"},al={style:{"font-weight":"bolder"}},ol={class:"item-container"},rl={style:{"font-weight":"bolder"}},il={class:"item-container"},ul={style:{"font-weight":"bolder"}},sl={class:"item-container"},dl={style:{"font-weight":"bolder"}},fl={class:"item-container"},cl={style:{"font-weight":"bolder"}},pl={class:"item-container"},ml={style:{"font-weight":"bolder"}},gl={class:"item-container"},hl={style:{"font-weight":"bolder"}},Tl={class:"item-container"},yl={style:{"font-weight":"bolder"}},_l={class:"item-container"},kl={style:{"font-weight":"bolder"}},bl={class:"item-container"},Sl={class:"tip"},vl={style:{display:"flex","align-items":"center"}},Ll={style:{display:"flex","justify-content":"flex-end"}},Vl={class:"tip_warning"},Cl={style:{margin:"10px"}},El={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},wl={__name:"room",setup(ft){const{t:S}=rn();un(async()=>{Ee.value=_n(14),N.value=window.innerHeight,window.addEventListener("resize",()=>{N.value=window.innerHeight}),await ut(),await St(),await st(),await Fe(),k()});const Ee=Re(""),V=Re(!1),N=Re(0),{isMobile:Te}=sn(),re=dn(),we=fn(),ct=xt(()=>re.isDark),Be=xt(()=>re.language),pt=we.userInfo,$e=xt(()=>{const v=(qe.value||[]).findIndex(Z=>Z.clusterName===re.selectedDstCluster);return v!==-1?v:0}),mt=cn();pn();const it=mn(),Ze=gn("refresh"),et=(G,v)=>{let Z=null;return(...ve)=>{Z&&clearTimeout(Z),Z=setTimeout(()=>G(...ve),v)}},qe=Re([]),ut=()=>{kt.clusters.all.get().then(G=>{qe.value=G.data})},Ke=()=>{kt.clusters.get().then(G=>{re.dstClusters=G.data,re.selectedDstCluster===null&&re.dstClusters!==null&&(re.selectedDstCluster=re.dstClusters[0].clusterName)})},tt=Re(0),st=()=>{hn.userInfo.get().then(G=>{tt.value=G.data.maxWorldsPerCluster})},nt=()=>{setTimeout(()=>{mt.meta.isKeepAlive&&it.removeKeepAliveName(mt.name),Ze(!1),bt(()=>{mt.meta.isKeepAlive&&it.addKeepAliveName(mt.name),Ze(!0)})},0)},te=Re(0),ce=Re(!1),se=G=>{te.value>G&&(te.value=G)},lt=()=>{te.value--},Tt=async()=>{if(te.value===0&&_t.value.validate(async G=>{G&&(ie.value||(e.value=1,h.value="World1",c.value=[{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+$e.value*10,shardMasterPort:10888+$e.value*10,steamMasterPort:27018+$e.value*10,steamAuthenticationPort:8768+$e.value*10,shardMasterIp:"127.0.0.1",clusterKey:Ee.value,encodeUserPath:!0,saved:!1}]),te.value++)}),te.value===1){if(pt.role!=="admin"&&c.value.length>tt.value){let v="";Be.value==="zh"?v=`${tt.value}`:v=`Exceeds the maximum number of worlds that can be created. The current maximum is ${tt.value}`,rt(v);return}const G=["serverPort","shardMasterPort","steamMasterPort","steamAuthenticationPort"];for(let v of c.value)for(const Z of Ve.value)if(Z.clusterName!==re.selectedDstCluster){for(let ve of G)if(Z.worldPort!==null&&Z.worldPort.includes(v[ve])){rt(`[${S(`setting.roomWorldForm.${ve}`)}]:${v[ve]} ${Be.value==="zh"?"":"Port Conflicted, please check and modify"}`,3e3);return}}for(let v in m)m!=null&&m.key&&await m[v].validate();for(let v of c.value){if(v.levelData===""){rt(Be.value==="zh"?"":"Please input world configure");return}if(v.shardMasterPort!==c.value[0].shardMasterPort){rt(Be.value==="zh"?"":"Master Port must be same");return}try{Ft.parse(v.levelData)}catch{rt(S("setting.luaError"));return}}te.value++;return}if(te.value===2)if(je.value)try{Ft.parse(je.value.mod),te.value++}catch{rt(S("setting.luaError"))}else te.value++},_t=Re(),pe=Re({clusterName:re.selectedDstCluster,name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,consoleEnabled:!0,pauseEmptyDisabled:!1,password:"",token:""}),gt={name:[{required:!0,message:S("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:S("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:S("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:S("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:S("setting.roomBaseFormRules.token"),trigger:"blur"}]},je=Re({mod:""}),ie=Re(!1),Fe=()=>{const G={clusterName:re.selectedDstCluster};kt.cluster.get(G).then(v=>{if(pe.value=v.data.clusterSetting,v.data.worlds){c.value=v.data.worlds;let Z=1,ve=999999;for(let xe of c.value){let Ne=parseInt(xe.name.replace("World",""));Ne>Z&&(Z=Ne),Ne<ve&&(ve=Ne),xe.saved=!0,Ee.value=xe.clusterKey}e.value=Z,h.value="World"+ve.toString(),ie.value=!0}else ie.value=!1;je.value.mod=v.data.mod})},He=async G=>{switch(G){case"save":dt();break;case"saveAndRestart":T();break;case"generateNewWorld":z();break}},dt=()=>{const G={clusterSetting:pe.value,worlds:c.value,mod:je.value.mod,sysSetting:{}};V.value=!0,kt.cluster.save.post(G).then(v=>{Ut(v.message),V.value=!1,Ke()}).finally(()=>{V.value=!1,bt(()=>{nt()})})},T=()=>{const G={clusterSetting:pe.value,worlds:c.value,mod:je.value.mod,sysSetting:{}};V.value=!0,kt.cluster.saveRestart.post(G).then(v=>{Ut(v.message),V.value=!1,Ke()}).finally(()=>{V.value=!1,bt(()=>{nt()})})},z=()=>{const G={clusterSetting:pe.value,worlds:c.value,mod:je.value.mod,sysSetting:{}};V.value=!0,kt.cluster.saveRegenerate.post(G).then(v=>{Ut(v.message),V.value=!1,Ke()}).finally(()=>{V.value=!1,bt(()=>{nt()})})},Y=Re({}),X=G=>{if(G==="")return;const v=Ft.parse(G),Z=b(v);Y.value=f(Z)};function b(G){const Z=G.body[0].arguments[0];for(const ve of Z.fields)if(ve.key.type==="Identifier"&&ve.key.name==="overrides")return ve.value;return null}function f(G){const v={};for(const Z of G.fields){const ve=Z.key.name;v[ve]=Z.value.raw.replace(/"/g,"")}return v}const p=G=>{let v=Bt.Beautify(G,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return v=v.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),v=v.replace(/ = /g,"="),v=v.replace(/\t/g,"  "),v=v.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),v=v.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),v=v.replace(/(.+)},\n/g,`$1
  },
`),v=v.replace(/^ +?\n/gm,""),v},d=et(G=>{const v=G.name,Z=G.value;for(let ve of c.value)if(ve.name===h.value){const xe=Ft.parse(ve.levelData),Ne=b(xe);for(let Je of Ne.fields)Je.key.name===v&&(Je.value.raw=`"${Z}"`);ve.levelData=g(xe);break}},100),g=(G,v=0)=>{const Z="    ".repeat(v);switch(G.type){case"Chunk":return G.body.map(ve=>g(ve,v)).join(`
`);case"LocalStatement":return`${Z}local ${G.variables.map(g).join(", ")} = ${G.init.map(g).join(", ")}`;case"FunctionDeclaration":return`${Z}function ${g(G.identifier)}(${G.parameters.map(g).join(", ")}) 
${g(G.body,v+1)}
${Z}end`;case"ReturnStatement":return`${Z}return ${G.arguments.map(g).join(", ")}`;case"BinaryExpression":return`${g(G.left)} ${G.operator} ${g(G.right)}`;case"CallStatement":return`${Z}${g(G.expression)}`;case"Identifier":return G.name;case"StringLiteral":return`${G.raw}`;case"NumericLiteral":return G.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${Z}{ ${G.fields.map(ve=>g(ve,v+1)).join(`,
`+Z)} }`;case"Field":return G.key?`${g(G.key)} = ${g(G.value)}`:g(G.value);case"AssignmentStatement":return`${Z}${G.variables.map(g).join(", ")} = ${G.init.map(g).join(", ")}`;case"CallExpression":return`${g(G.base)}(${G.arguments.map(g).join(", ")})`;case"TableKeyString":return`${g(G.key)} = ${g(G.value)}`;case"BooleanLiteral":return G.raw;case"TableKey":return`[${g(G.key)}] = ${g(G.value)}`;case"TableValue":return g(G.value);default:throw new Error(`Unsupported node type: ${G.type}`)}},e=Re(1),h=Re("World1"),c=Re([{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+$e.value*10,shardMasterPort:10888+$e.value*10,steamMasterPort:27018+$e.value*10,steamAuthenticationPort:8768+$e.value*10,shardMasterIp:"127.0.0.1",clusterKey:Ee.value,encodeUserPath:!0}]),s={id:[{required:!0,message:S("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:S("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:S("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:S("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:S("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:S("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:S("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},m={},k=()=>{for(let G of c.value){const v=c.value.length;e.value=v,m[`World${v}`]=Re()}},t=(G,v)=>{if(v==="add"){e.value++;const Z=`World${e.value}`;m[Z]=Re(),c.value.push({id:e.value+100,name:Z,isMaster:!1,levelData:"",serverPort:11e3+e.value+$e.value*10,shardMasterPort:10888+$e.value*10,steamMasterPort:27017+e.value+$e.value*10,steamAuthenticationPort:8767+e.value+$e.value*10,shardMasterIp:"127.0.0.1",clusterKey:Ee.value,encodeUserPath:!0}),h.value=Z}else if(v==="remove"){if(c.value.length===1){rt(Be.value==="zh"?"":"Every room must include at least one world");return}const Z=c.value;let ve=h.value;Z.forEach((xe,Ne)=>{if(xe.name===G){const Je=Z[Ne+1]||Z[Ne-1];Je&&(ve=Je.name)}}),h.value=ve,c.value=Z.filter(xe=>xe.name!==G),delete m[G]}l.value="Code"},l=Re("Code"),r=G=>{for(let v of c.value)v.name===h.value&&(G.clusterType==="endless"&&(G.worldType==="ground"&&(v.levelData=Ht.master),G.worldType==="cave"&&(v.levelData=Ht.caves)),G.clusterType==="survival"&&(G.worldType==="ground"&&(v.levelData=Jt.master),G.worldType==="cave"&&(v.levelData=Jt.caves)))},u=Re(""),M=async G=>{if(G==="Visualization")try{for(let v of c.value)if(v.name===h.value){u.value=de(v.levelData),await X(v.levelData);break}}catch{rt(Be.value==="zh"?"":"Visualization load failed")}G==="Code"&&await bt(()=>{for(let v of c.value)if(v.name===h.value){v.levelData=p(v.levelData);break}})},de=G=>{const v=/location\s*=\s*"([^"]*)"/,Z=G.match(v);return Z?Z[1]:""},ke=()=>{l.value="Code"},Ue=Re(!1),Pe=Re(""),me=Re([]),$=()=>{me.value=[{ID:void 0,name:"",maxPlayers:void 0}],Pe.value="",Ue.value=!0},le=()=>{let G="",v="";for(let Z of me.value){if(!Z.ID){rt(Be.value==="zh"?"ID":"World ID is required");return}if(!Z.name){rt(Be.value==="zh"?"":"World name is required");return}if(!Z.maxPlayers){rt(Be.value==="zh"?"":"World max players is required");return}G=G+`["${Z.ID}"]="${Z.name}",`,v=v+`["${Z.ID}"]="${Z.maxPlayers}",`}Pe.value=`
  ["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${v}},
      say_dest=true,
      world_name={${G}},
      world_prompt=true
    },
    enabled=true
  }`,Pe.value="```lua ::open\n"+Pe.value},Ve=Re([]),St=()=>{kt.clustersWorldPort.get().then(G=>{Ve.value=G.data})};return Tn(()=>re.selectedDstCluster,G=>{G&&bt(()=>{nt()})},{immediate:!1}),(G,v)=>{const Z=Me("el-step"),ve=Me("el-steps"),xe=Me("el-card"),Ne=Me("el-col"),Je=Me("el-row"),We=Me("el-input"),Le=Me("el-form-item"),Qe=Me("el-radio"),yt=Me("el-radio-group"),C=Me("el-slider"),F=Me("el-switch"),E=Me("el-link"),_=Me("el-form"),R=Me("el-scrollbar"),W=Me("el-icon"),I=Me("el-button"),x=Me("el-dropdown-item"),ee=Me("el-dropdown-menu"),ye=Me("el-dropdown"),ue=Me("el-tooltip"),_e=Me("el-tab-pane"),fe=Me("el-divider"),ge=Me("el-tabs"),Oe=Me("el-result"),at=Me("el-dialog");return U(),ne("div",Sn,[L(Je,{gutter:10},{default:A(()=>[L(Ne,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:A(()=>[L(xe,{shadow:"never"},{default:A(()=>[L(ve,{active:te.value,"align-center":"","finish-status":"success"},{default:A(()=>[L(Z,{title:a(Te)?a(S)("setting.roomSettingMobile"):a(S)("setting.roomSetting"),onClick:v[0]||(v[0]=P=>se(0))},null,8,["title"]),L(Z,{title:a(Te)?a(S)("setting.worldSettingMobile"):a(S)("setting.worldSetting"),onClick:v[1]||(v[1]=P=>se(1))},null,8,["title"]),L(Z,{title:a(Te)?a(S)("setting.modSettingMobile"):a(S)("setting.modSetting"),onClick:v[2]||(v[2]=P=>se(3))},null,8,["title"]),L(Z,{title:a(Te)?a(S)("setting.finishSettingMobile"):a(S)("setting.finishSetting"),onClick:v[3]||(v[3]=P=>se(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),L(Je,{gutter:10,style:{"margin-top":"5px"}},{default:A(()=>[L(Ne,{lg:24,md:24,sm:24,span:24,xs:24},{default:A(()=>[te.value===0?(U(),be(xe,{key:0,shadow:"never"},{header:A(()=>[Q("div",vn,[Q("span",null,J(a(S)("setting.roomSetting")),1)])]),default:A(()=>[L(R,{height:N.value-438},{default:A(()=>[L(_,{ref_key:"clusterSettingFormRef",ref:_t,"label-position":a(Te)?"top":"left","label-width":a(Te)?"70":"auto",model:pe.value,rules:gt,size:a(Te)?"small":"large",style:{"margin-right":"16px"}},{default:A(()=>[L(Le,{label:a(S)("setting.baseForm.room"),prop:"name",style:ot(a(Te)?"padding-top: 0px":"padding-top: 25px")},{default:A(()=>[L(We,{modelValue:pe.value.name,"onUpdate:modelValue":v[4]||(v[4]=P=>pe.value.name=P)},null,8,["modelValue"])]),_:1},8,["label","style"]),a(Te)?Xe("",!0):(U(),ne("div",Ln)),L(Le,{label:a(S)("setting.baseForm.description"),prop:"description",style:ot(a(Te)?"padding-top: 0px":"padding-top: 25px")},{default:A(()=>[L(We,{modelValue:pe.value.description,"onUpdate:modelValue":v[5]||(v[5]=P=>pe.value.description=P)},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Le,{label:a(S)("setting.baseForm.gameMode.name"),prop:"gameMode",style:ot(a(Te)?"padding-top: 0px":"padding-top: 25px")},{default:A(()=>[L(yt,{modelValue:pe.value.gameMode,"onUpdate:modelValue":v[6]||(v[6]=P=>pe.value.gameMode=P)},{default:A(()=>[L(Qe,{label:a(S)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),L(Qe,{label:a(S)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),L(Qe,{label:a(S)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),L(Qe,{label:a(S)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","style"]),L(Le,{label:a(S)("setting.baseForm.playerNum"),prop:"playerNum",style:ot(a(Te)?"padding-top: 0px":"padding-top: 25px")},{default:A(()=>[L(C,{modelValue:pe.value.playerNum,"onUpdate:modelValue":v[7]||(v[7]=P=>pe.value.playerNum=P),max:64,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Le,{label:a(S)("setting.baseForm.backDays"),prop:"backDays",style:ot(a(Te)?"padding-top: 0px":"padding-top: 25px")},{default:A(()=>[L(C,{modelValue:pe.value.backDays,"onUpdate:modelValue":v[8]||(v[8]=P=>pe.value.backDays=P),max:64,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Je,null,{default:A(()=>[L(Ne,{lg:8,md:8,sm:24,span:8,xs:24},{default:A(()=>[L(Le,{label:a(S)("setting.baseForm.vote"),prop:"vote",style:ot(a(Te)?"padding-top: 0px":"padding-top: 29px")},{default:A(()=>[L(F,{modelValue:pe.value.vote,"onUpdate:modelValue":v[9]||(v[9]=P=>pe.value.vote=P)},null,8,["modelValue"])]),_:1},8,["label","style"])]),_:1}),L(Ne,{lg:8,md:8,sm:24,span:8,xs:24},{default:A(()=>[L(Le,{label:a(S)("setting.baseForm.pauseEmptyDisabled"),prop:"vote",style:ot(a(Te)?"padding-top: 0px":"padding-top: 29px")},{default:A(()=>[L(F,{modelValue:pe.value.pauseEmptyDisabled,"onUpdate:modelValue":v[10]||(v[10]=P=>pe.value.pauseEmptyDisabled=P),"active-value":!1,"inactive-value":!0},null,8,["modelValue"])]),_:1},8,["label","style"])]),_:1}),L(Ne,{lg:8,md:8,sm:24,span:8,xs:24},{default:A(()=>[L(Le,{label:a(S)("setting.baseForm.pvp"),prop:"pvp",style:ot(a(Te)?"padding-top: 0px":"padding-top: 25px")},{default:A(()=>[L(F,{modelValue:pe.value.pvp,"onUpdate:modelValue":v[11]||(v[11]=P=>pe.value.pvp=P)},null,8,["modelValue"])]),_:1},8,["label","style"])]),_:1})]),_:1}),L(Le,{label:a(S)("setting.baseForm.password"),style:ot(a(Te)?"padding-top: 0px":"padding-top: 30px")},{default:A(()=>[L(We,{modelValue:pe.value.password,"onUpdate:modelValue":v[12]||(v[12]=P=>pe.value.password=P),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["label","style"]),L(Le,{label:a(S)("setting.baseForm.token"),prop:"token",style:ot(a(Te)?"padding-top: 0px":"padding-top: 30px")},{default:A(()=>[L(We,{modelValue:pe.value.token,"onUpdate:modelValue":v[13]||(v[13]=P=>pe.value.token=P),"show-password":""},null,8,["modelValue"]),Q("div",Vn,[L(E,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:A(()=>[he(J(a(S)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label","style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):Xe("",!0),te.value===1?(U(),be(xe,{key:1,shadow:"never"},{header:A(()=>[Q("div",Cn,[Q("span",null,J(a(S)("setting.worldSetting")),1),Q("div",null,[L(ye,{trigger:"click",onCommand:r},{dropdown:A(()=>[L(ee,null,{default:A(()=>[L(x,{command:{clusterType:"endless",worldType:"ground"},disabled:pe.value.gameMode!=="endless"},{default:A(()=>[he(J(a(S)("setting.endless"))+"-"+J(a(S)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),L(x,{command:{clusterType:"endless",worldType:"cave"},disabled:pe.value.gameMode!=="endless"},{default:A(()=>[he(J(a(S)("setting.endless"))+"-"+J(a(S)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"]),L(x,{command:{clusterType:"survival",worldType:"ground"},disabled:pe.value.gameMode!=="survival"},{default:A(()=>[he(J(a(S)("setting.survival"))+"-"+J(a(S)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),L(x,{command:{clusterType:"survival",worldType:"cave"},disabled:pe.value.gameMode!=="survival"},{default:A(()=>[he(J(a(S)("setting.survival"))+"-"+J(a(S)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"])]),_:1})]),default:A(()=>[L(I,{disabled:l.value!=="Code",type:"success"},{default:A(()=>[he(J(a(S)("setting.oneClick"))+" ",1),L(W,{class:"el-icon--right"},{default:A(()=>[L(a(Kt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:A(()=>[L(R,{height:N.value-450},{default:A(()=>[L(ge,{modelValue:h.value,"onUpdate:modelValue":v[15]||(v[15]=P=>h.value=P),editable:"",type:"card",onEdit:t,onTabChange:ke,style:{"margin-right":"16px"}},{default:A(()=>[(U(!0),ne(Ae,null,Ge(c.value,P=>(U(),be(_e,{key:P.name,label:Be.value==="zh"?"":"World",name:P.name},{default:A(()=>[L(Je,null,{default:A(()=>[L(_,{ref_for:!0,ref:i=>m[P.name]=i,"label-position":a(Te)||Be.value==="en"?"top":"left",model:P,rules:s,size:a(Te)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:A(()=>[Q("div",En,[L(Le,{label:a(S)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.isMasterTip"),effect:"light",placement:"top"},{default:A(()=>[L(F,{modelValue:P.isMaster,"onUpdate:modelValue":i=>P.isMaster=i,"active-text":Be.value==="zh"?"":"Y","inactive-text":Be.value==="zh"?"":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:A(()=>[L(F,{modelValue:P.encodeUserPath,"onUpdate:modelValue":i=>P.encodeUserPath=i,"active-text":Be.value==="zh"?"":"Y","inactive-text":Be.value==="zh"?"":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.idTip"),effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.id,"onUpdate:modelValue":i=>P.id=i,modelModifiers:{number:!0},disabled:P.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.serverPortTip"),effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.serverPort,"onUpdate:modelValue":i=>P.serverPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.noEdit")+"cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.shardMasterPort,"onUpdate:modelValue":i=>P.shardMasterPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.noEdit")+"server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.steamMasterPort,"onUpdate:modelValue":i=>P.steamMasterPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.noEdit")+"server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.steamAuthenticationPort,"onUpdate:modelValue":i=>P.steamAuthenticationPort=i,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.shardMasterIp,"onUpdate:modelValue":i=>P.shardMasterIp=i,disabled:P.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),L(Le,{label:a(S)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:A(()=>[L(ue,{"show-after":100,content:a(S)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:A(()=>[L(We,{modelValue:P.clusterKey,"onUpdate:modelValue":i=>P.clusterKey=i,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),Q("div",wn,[L(ge,{modelValue:l.value,"onUpdate:modelValue":v[14]||(v[14]=i=>l.value=i),onTabChange:M},{default:A(()=>[L(_e,{label:Be.value==="zh"?"":"Code",name:"Code"},{default:A(()=>[Q("div",Fn,[L(_,{model:P},{default:A(()=>[L(Le,null,{default:A(()=>[L(jt,{modelValue:P.levelData,"onUpdate:modelValue":i=>P.levelData=i,height:N.value*.5,theme:ct.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(pe.value.gameMode==="endless"||pe.value.gameMode==="survival")&&P.levelData!==""?(U(),be(_e,{key:0,label:a(S)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:A(()=>[u.value==="forest"&&Object.keys(Y.value).length!==0?(U(),ne(Ae,{key:0},[L(fe,{"content-position":"center"},{default:A(()=>[Q("span",An,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),Q("div",Bn,[(U(!0),ne(Ae,null,Ge(a(ht).global,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Mn,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),Q("div",Gn,[(U(!0),ne(Ae,null,Ge(a(ht).events,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Rn,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),Q("div",In,[(U(!0),ne(Ae,null,Ge(a(ht).survivors,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Pn,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),Q("div",xn,[(U(!0),ne(Ae,null,Ge(a(ht).world,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Un,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),Q("div",Nn,[(U(!0),ne(Ae,null,Ge(a(ht).resourceRegrowth,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Dn,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),Q("div",zn,[(U(!0),ne(Ae,null,Ge(a(ht).unnaturalPortalResource,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Wn,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),Q("div",$n,[(U(!0),ne(Ae,null,Ge(a(ht).creatures,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",On,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),Q("div",qn,[(U(!0),ne(Ae,null,Ge(a(ht).hostileCreatures,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Kn,J(a(S)("setting.groundVisualizationRule")),1),he(" - "+J(a(S)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),Q("div",jn,[(U(!0),ne(Ae,null,Ge(a(ht).giants,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Hn,J(a(S)("setting.groundVisualizationGeneration")),1),he(" - "+J(a(S)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),Q("div",Jn,[(U(!0),ne(Ae,null,Ge(a(vt).global,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Yn,J(a(S)("setting.groundVisualizationGeneration")),1),he(" - "+J(a(S)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),Q("div",Zn,[(U(!0),ne(Ae,null,Ge(a(vt).world,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",Qn,J(a(S)("setting.groundVisualizationGeneration")),1),he(" - "+J(a(S)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),Q("div",Xn,[(U(!0),ne(Ae,null,Ge(a(vt).resources,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",el,J(a(S)("setting.groundVisualizationGeneration")),1),he(" - "+J(a(S)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),Q("div",tl,[(U(!0),ne(Ae,null,Ge(a(vt).creaturesAndSpawners,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",nl,J(a(S)("setting.groundVisualizationGeneration")),1),he(" - "+J(a(S)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),Q("div",ll,[(U(!0),ne(Ae,null,Ge(a(vt).hostileCreaturesAndSpawners,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):Xe("",!0),u.value==="cave"&&Object.keys(Y.value).length!==0?(U(),ne(Ae,{key:1},[L(fe,{"content-position":"center"},{default:A(()=>[Q("span",al,J(a(S)("setting.cavesVisualizationRule")),1),he(" - "+J(a(S)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),Q("div",ol,[(U(!0),ne(Ae,null,Ge(a(Lt).world,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",rl,J(a(S)("setting.cavesVisualizationRule")),1),he(" - "+J(a(S)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),Q("div",il,[(U(!0),ne(Ae,null,Ge(a(Lt).resourceRegrowth,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",ul,J(a(S)("setting.cavesVisualizationRule")),1),he(" - "+J(a(S)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),Q("div",sl,[(U(!0),ne(Ae,null,Ge(a(Lt).creatures,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",dl,J(a(S)("setting.cavesVisualizationRule")),1),he(" - "+J(a(S)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),Q("div",fl,[(U(!0),ne(Ae,null,Ge(a(Lt).hostileCreatures,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",cl,J(a(S)("setting.cavesVisualizationRule")),1),he(" - "+J(a(S)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),Q("div",pl,[(U(!0),ne(Ae,null,Ge(a(Lt).giants,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",ml,J(a(S)("setting.cavesVisualizationGeneration")),1),he(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),Q("div",gl,[(U(!0),ne(Ae,null,Ge(a(wt).world,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(Vt)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(Vt)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(Vt)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(Vt)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(Vt)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",hl,J(a(S)("setting.cavesVisualizationGeneration")),1),he(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),Q("div",Tl,[(U(!0),ne(Ae,null,Ge(a(wt).resources,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",yl,J(a(S)("setting.cavesVisualizationGeneration")),1),he(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),Q("div",_l,[(U(!0),ne(Ae,null,Ge(a(wt).creaturesAndSpawners,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))]),L(fe,{"content-position":"center"},{default:A(()=>[Q("span",kl,J(a(S)("setting.cavesVisualizationGeneration")),1),he(" - "+J(a(S)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),Q("div",bl,[(U(!0),ne(Ae,null,Ge(a(wt).hostileCreaturesAndSpawners,(i,ae)=>{var q,O,K,j,H;return U(),ne("div",null,[(U(),be(Ie,{key:ae,modelValue:Y.value[i],"onUpdate:modelValue":oe=>Y.value[i]=oe,configs:((q=a(B)[i])==null?void 0:q.configs)||["undefined"],customConfigsValue:((O=a(B)[i])==null?void 0:O.customConfigsValue)||{},defaultModelValue:((K=a(B)[i])==null?void 0:K.modelValue)||"undefined",i18n:((j=a(B)[i])==null?void 0:j.i18n)||{zh:"",en:"undefined"},image:((H=a(B)[i])==null?void 0:H.image)||"undefined.png",name:i,onChangeModelValue:a(d)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))])}),256))])],64)):Xe("",!0)]),_:2},1032,["label"])):Xe("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):Xe("",!0),te.value===2?(U(),be(xe,{key:2,shadow:"never"},{default:A(()=>[Q("div",Sl,[Q("div",vl,[Q("span",null,J(a(S)("setting.multiWorldTip")),1),L(I,{size:"small",style:{"margin-left":"10px"},type:"primary",onClick:$},{default:A(()=>[he(J(Be.value==="zh"?"":"Multi-world"),1)]),_:1})])]),L(_,{model:je.value},{default:A(()=>[L(Le,null,{default:A(()=>[L(jt,{modelValue:je.value.mod,"onUpdate:modelValue":v[16]||(v[16]=P=>je.value.mod=P),height:N.value-481,theme:ct.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):Xe("",!0),te.value===3?(U(),be(xe,{key:3,shadow:"never"},{default:A(()=>[Q("div",{style:ot({height:`${N.value-381}px`}),class:"fcc"},[L(Oe,{"sub-title":a(S)("setting.finish.description"),title:a(S)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):Xe("",!0)]),_:1})]),_:1}),L(Je,{gutter:10},{default:A(()=>[L(Ne,{lg:24,md:24,sm:24,span:24,xs:24},{default:A(()=>[L(xe,{shadow:"never"},{default:A(()=>[Q("div",Ll,[te.value>0?(U(),be(I,{key:0,onClick:lt},{default:A(()=>[he(J(a(S)("setting.button.prev")),1)]),_:1})):Xe("",!0),te.value<3?(U(),be(I,{key:1,type:"primary",loading:ce.value,onClick:Tt},{default:A(()=>[he(J(a(S)("setting.button.next")),1)]),_:1},8,["loading"])):Xe("",!0),te.value===3?(U(),be(ye,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:He},{dropdown:A(()=>[L(ee,null,{default:A(()=>[L(x,{command:"save"},{default:A(()=>[he(J(a(S)("setting.button.save")),1)]),_:1}),L(x,{command:"saveAndRestart"},{default:A(()=>[he(J(a(S)("setting.button.saveAndRestart")),1)]),_:1}),L(x,{command:"generateNewWorld"},{default:A(()=>[he(J(a(S)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:A(()=>[L(I,{loading:V.value,type:"warning"},{default:A(()=>[he(J(a(S)("setting.button.actions"))+" ",1),L(W,{class:"el-icon--right"},{default:A(()=>[L(a(Kt))]),_:1})]),_:1},8,["loading"])]),_:1})):Xe("",!0)])]),_:1})]),_:1})]),_:1}),L(at,{modelValue:Ue.value,"onUpdate:modelValue":v[18]||(v[18]=P=>Ue.value=P),width:"65%"},{header:A(()=>[he(J(a(S)("setting.multiWorldDialog.title")),1)]),default:A(()=>[Q("div",Vl,J(a(S)("setting.multiWorldDialog.tip")),1),Q("div",Cl,[L(_,{model:me.value,"label-position":"top"},{default:A(()=>[(U(!0),ne(Ae,null,Ge(me.value,P=>(U(),be(Le,null,{default:A(()=>[L(We,{modelValue:P.ID,"onUpdate:modelValue":i=>P.ID=i,placeholder:a(S)("setting.multiWorldDialog.placeholder0"),type:"number",style:{width:"20%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),L(We,{modelValue:P.name,"onUpdate:modelValue":i=>P.name=i,placeholder:a(S)("setting.multiWorldDialog.placeholder1"),style:{"margin-left":"2%",width:"48%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),L(We,{modelValue:P.maxPlayers,"onUpdate:modelValue":i=>P.maxPlayers=i,placeholder:a(S)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"2%",width:"28%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),Q("div",El,[L(I,{type:"success",onClick:v[17]||(v[17]=P=>me.value.push({ID:void 0,name:"",maxPlayers:void 0}))},{default:A(()=>[he(J(Be.value==="zh"?"":"New Line"),1)]),_:1}),L(I,{type:"primary",onClick:le},{default:A(()=>[he(J(Be.value==="zh"?"":"Generate"),1)]),_:1})])]),_:1},8,["model"]),Pe.value?(U(),be(fe,{key:0})):Xe("",!0),Pe.value?(U(),be(a(yn),{key:1,ref:"threeCodeOneRef",modelValue:Pe.value,theme:ct.value?"dark":"light",previewTheme:"github"},null,8,["modelValue","theme"])):Xe("",!0)])]),_:1},8,["modelValue"])])}}},Rl=on(wl,[["__scopeId","data-v-2ac23c2d"]]);export{Rl as default};
