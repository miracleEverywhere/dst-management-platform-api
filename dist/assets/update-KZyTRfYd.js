import{t as w}from"./index-BFJ2TrDk.js";import{u as j,a as z,g as H,c as V,o as I,r as c,K as n,f,i as h,k as s,l as i,z as q,j as a,m as l,t as e,q as x,v as S,a1 as A,D as F,B as K}from"./index-MV0Po1-i.js";const O={class:"page-div"},G={class:"card-header"},J={style:{"line-height":"50px"}},L={style:{"line-height":"50px"}},P={style:{"line-height":"50px"}},Q={key:0},R={key:1},W=A({name:"toolsUpdate"}),ee=Object.assign(W,{setup(X){const{t}=j(),{isMobile:C}=z(),y=H(),D=V(()=>y.isDark);V(()=>y.language),I(()=>{E()});const _=c(!1),v=c(!1),d=c(""),m=c(!1),p=c(0),r=c(0),E=()=>{w.update.get().then(o=>{d.value=o.data.updateSetting.time,m.value=o.data.updateSetting.enable,p.value=o.data.version.local,r.value=o.data.version.server})},k=()=>{if(!d.value){F(t("tools.backup.timeChangeTip"));return}_.value=!0,v.value=!0;const o={time:d.value,enable:m.value};w.update.put(o).then(u=>{K(u.message)}).finally(()=>{_.value=!1,v.value=!1})};return(o,u)=>{const B=n("el-time-picker"),M=n("el-switch"),b=n("el-tag"),N=n("el-alert"),T=n("el-card"),U=n("el-col"),$=n("el-row");return f(),h("div",O,[s($,{gutter:10},{default:i(()=>[s(U,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:i(()=>[s(T,{style:q(a(C)?"min-height: 500px":"min-height: 700px"),shadow:"never"},{header:i(()=>[l("div",G,e(a(t)("tools.update.title")),1)]),default:i(()=>[l("div",null,[l("div",J,[l("span",null,e(a(t)("tools.update.text1")),1),s(B,{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=g=>d.value=g),clearable:!1,editable:!1,loading:_.value,style:{width:"120px",margin:"0 8px"},"value-format":"HH:mm:ss",onChange:k},null,8,["modelValue","loading"]),l("span",null,e(a(t)("tools.update.text2")),1)]),l("div",L,[l("span",null,e(a(t)("tools.update.text3")),1),s(M,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=g=>m.value=g),"active-text":o.$t("tools.update.switchEnable"),"inactive-text":o.$t("tools.update.switchDisable"),loading:v.value,"inline-prompt":"",style:{margin:"0 8px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},onChange:k},null,8,["modelValue","active-text","inactive-text","loading"]),l("span",null,e(a(t)("tools.update.text4")),1)]),l("div",P,[l("span",null,e(a(t)("tools.update.text5")),1),s(b,{type:p.value===r.value?"success":"warning",style:{margin:"0 8px"}},{default:i(()=>[x(e(p.value),1)]),_:1},8,["type"]),l("span",null,e(a(t)("tools.update.text6")),1),s(b,{style:{margin:"0 8px"},type:"primary"},{default:i(()=>[x(e(r.value),1)]),_:1}),p.value===r.value?(f(),h("span",Q,e(a(t)("tools.update.text7")),1)):S("",!0),p.value!==r.value?(f(),h("span",R,e(a(t)("tools.update.text8")),1)):S("",!0)])]),s(N,{closable:!1,effect:D.value?"light":"dark",style:{"margin-top":"20px"},type:"warning"},{default:i(()=>[x(e(a(t)("tools.backup.alert")),1)]),_:1},8,["effect"])]),_:1},8,["style"])]),_:1})]),_:1})])}}});export{ee as default};
